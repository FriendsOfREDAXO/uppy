{
  "version": 3,
  "sources": ["../../node_modules/@transloadit/prettier-bytes/src/prettierBytes.ts", "../../node_modules/wildcard/index.js", "../../node_modules/mime-match/index.js", "../../node_modules/lodash/isObject.js", "../../node_modules/lodash/_freeGlobal.js", "../../node_modules/lodash/_root.js", "../../node_modules/lodash/now.js", "../../node_modules/lodash/_trimmedEndIndex.js", "../../node_modules/lodash/_baseTrim.js", "../../node_modules/lodash/_Symbol.js", "../../node_modules/lodash/_getRawTag.js", "../../node_modules/lodash/_objectToString.js", "../../node_modules/lodash/_baseGetTag.js", "../../node_modules/lodash/isObjectLike.js", "../../node_modules/lodash/isSymbol.js", "../../node_modules/lodash/toNumber.js", "../../node_modules/lodash/debounce.js", "../../node_modules/lodash/throttle.js", "../../node_modules/namespace-emitter/index.js", "../../node_modules/classnames/index.js", "../../node_modules/eventemitter3/index.js", "../../node_modules/is-mobile/index.js", "../../node_modules/cropperjs/dist/cropper.js", "../src/uppy-custom-widget.js", "../../node_modules/@uppy/utils/lib/canvasToBlob.js", "../../node_modules/@uppy/utils/lib/dataURItoBlob.js", "../../node_modules/@uppy/utils/lib/emaFilter.js", "../../node_modules/@uppy/utils/lib/FOCUSABLE_ELEMENTS.js", "../../node_modules/@uppy/utils/lib/NetworkError.js", "../../node_modules/@uppy/utils/lib/ProgressTimeout.js", "../../node_modules/@uppy/utils/lib/fetcher.js", "../../node_modules/@uppy/utils/lib/fileFilters.js", "../../node_modules/@uppy/utils/lib/isDOMElement.js", "../../node_modules/@uppy/utils/lib/findAllDOMElements.js", "../../node_modules/@uppy/utils/lib/findDOMElement.js", "../../node_modules/@uppy/utils/lib/getFileNameAndExtension.js", "../../node_modules/@uppy/utils/lib/mimeTypes.js", "../../node_modules/@uppy/utils/lib/getFileType.js", "../../node_modules/@uppy/utils/lib/generateFileID.js", "../../node_modules/@uppy/utils/lib/getAllowedMetaFields.js", "../../node_modules/@uppy/utils/lib/toArray.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/fallbackApi.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getFilesAndDirectoriesFromDirectory.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/index.js", "../../node_modules/@uppy/utils/lib/getDroppedFiles/index.js", "../../node_modules/@uppy/utils/lib/getFileTypeExtension.js", "../../node_modules/@uppy/utils/lib/getTextDirection.js", "../../node_modules/@uppy/utils/lib/getTimeStamp.js", "../../node_modules/@uppy/utils/lib/isDragDropSupported.js", "../../node_modules/@uppy/utils/lib/isNetworkError.js", "../../node_modules/@uppy/utils/lib/isObjectURL.js", "../../node_modules/@uppy/utils/lib/isPreviewSupported.js", "../../node_modules/@uppy/utils/lib/secondsToTime.js", "../../node_modules/@uppy/utils/lib/prettyETA.js", "../../node_modules/@uppy/utils/lib/RateLimitedQueue.js", "../../node_modules/@uppy/utils/lib/remoteFileObjToLocal.js", "../../node_modules/@uppy/utils/lib/Translator.js", "../../node_modules/@uppy/utils/lib/truncateString.js", "../../node_modules/preact/src/constants.js", "../../node_modules/preact/src/util.js", "../../node_modules/preact/src/options.js", "../../node_modules/preact/src/create-element.js", "../../node_modules/preact/src/component.js", "../../node_modules/preact/src/diff/props.js", "../../node_modules/preact/src/create-context.js", "../../node_modules/preact/src/diff/children.js", "../../node_modules/preact/src/diff/index.js", "../../node_modules/preact/src/render.js", "../../node_modules/preact/src/clone-element.js", "../../node_modules/preact/src/diff/catch-error.js", "../../node_modules/preact/jsx-runtime/src/utils.js", "../../node_modules/preact/src/constants.js", "../../node_modules/preact/jsx-runtime/src/index.js", "../../node_modules/preact/hooks/src/index.js", "../../node_modules/@uppy/utils/lib/VirtualList.js", "../../node_modules/@uppy/core/lib/BasePlugin.js", "../../node_modules/@uppy/core/lib/EventManager.js", "../../node_modules/@uppy/core/lib/loggers.js", "../../node_modules/@uppy/core/lib/Restricter.js", "../../node_modules/@uppy/core/lib/UIPlugin.js", "../../node_modules/@uppy/store-default/package.json", "../../node_modules/@uppy/store-default/lib/index.js", "../../node_modules/@uppy/core/lib/Uppy.js", "../../node_modules/nanoid/non-secure/index.js", "../../node_modules/@uppy/core/package.json", "../../node_modules/@uppy/core/lib/getFileName.js", "../../node_modules/@uppy/core/lib/locale.js", "../../node_modules/@uppy/core/lib/supportsUploadProgress.js", "../../node_modules/@uppy/provider-views/lib/useSearchForm.js", "../../node_modules/@uppy/provider-views/lib/FilterInput.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/AuthView.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/ProviderView.js", "../../node_modules/@uppy/provider-views/package.json", "../../node_modules/@uppy/provider-views/lib/Item/index.js", "../../node_modules/@uppy/provider-views/lib/Item/components/ItemIcon.js", "../../node_modules/@uppy/provider-views/lib/Item/components/GridItem.js", "../../node_modules/@uppy/provider-views/lib/Item/components/ListItem.js", "../../node_modules/@uppy/provider-views/lib/Browser.js", "../../node_modules/@uppy/provider-views/lib/FooterActions.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getNumberOfSelectedFiles.js", "../../node_modules/@uppy/provider-views/lib/utils/companionFileToUppyFile.js", "../../node_modules/@uppy/provider-views/lib/utils/addFiles.js", "../../node_modules/@uppy/provider-views/lib/utils/getClickedRange.js", "../../node_modules/@uppy/provider-views/lib/utils/handleError.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getBreadcrumbs.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getCheckedFilesWithPaths.js", "../../node_modules/eventemitter3/index.mjs", "../../node_modules/p-timeout/index.js", "../../node_modules/p-queue/dist/lower-bound.js", "../../node_modules/p-queue/dist/priority-queue.js", "../../node_modules/p-queue/dist/index.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/shallowClone.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterFill.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterOpenFolder.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterScrollFolder.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterToggleCheckbox.js", "../../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/index.js", "../../node_modules/@uppy/provider-views/lib/utils/shouldHandleScroll.js", "../../node_modules/@uppy/provider-views/lib/Item/components/SearchResultItem.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/GlobalSearchView.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/Header.js", "../../node_modules/@uppy/provider-views/lib/Breadcrumbs.js", "../../node_modules/@uppy/provider-views/lib/ProviderView/User.js", "../../node_modules/exifr/dist/mini.esm.mjs", "../../node_modules/@uppy/thumbnail-generator/package.json", "../../node_modules/@uppy/thumbnail-generator/lib/locale.js", "../../node_modules/@uppy/thumbnail-generator/lib/index.js", "../../node_modules/@uppy/dashboard/package.json", "../../node_modules/@uppy/dashboard/lib/components/Dashboard.js", "../../node_modules/@uppy/dashboard/lib/components/AddFiles.js", "../../node_modules/@uppy/dashboard/lib/components/AddFilesPanel.js", "../../node_modules/@uppy/dashboard/lib/components/EditorPanel.js", "../../node_modules/@uppy/dashboard/lib/components/FileCard/index.js", "../../node_modules/@uppy/dashboard/lib/utils/getFileTypeIcon.js", "../../node_modules/@uppy/dashboard/lib/utils/ignoreEvent.js", "../../node_modules/@uppy/dashboard/lib/components/FilePreview.js", "../../node_modules/@uppy/dashboard/lib/components/FileCard/RenderMetaFields.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/index.js", "../../node_modules/shallow-equal/src/arrays.ts", "../../node_modules/shallow-equal/src/objects.ts", "../../node_modules/shallow-equal/src/index.ts", "../../node_modules/@uppy/dashboard/lib/utils/copyToClipboard.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/Buttons/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FileInfo/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/MetaErrorMessage.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FilePreviewAndLink/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileItem/FileProgress/index.js", "../../node_modules/@uppy/dashboard/lib/components/FileList.js", "../../node_modules/@uppy/dashboard/lib/components/Informer/FadeIn.js", "../../node_modules/@uppy/dashboard/lib/components/Informer/TransitionGroup.js", "../../node_modules/@uppy/dashboard/lib/components/Informer/Informer.js", "../../node_modules/@uppy/dashboard/lib/components/PickerPanelContent.js", "../../node_modules/@uppy/dashboard/lib/components/PickerPanelTopBar.js", "../../node_modules/@uppy/dashboard/lib/components/Slide.js", "../../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBarStates.js", "../../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBarUI.js", "../../node_modules/@uppy/dashboard/lib/components/StatusBar/Components.js", "../../node_modules/@uppy/dashboard/lib/components/StatusBar/calculateProcessingProgress.js", "../../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBar.js", "../../node_modules/@uppy/dashboard/lib/locale.js", "../../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js", "../../node_modules/@uppy/dashboard/lib/utils/getActiveOverlayEl.js", "../../node_modules/@uppy/dashboard/lib/utils/trapFocus.js", "../../node_modules/@uppy/dashboard/lib/Dashboard.js", "../../node_modules/@uppy/webcam/lib/Webcam.js", "../../node_modules/@uppy/webcam/package.json", "../../node_modules/@uppy/webcam/lib/CameraIcon.js", "../../node_modules/@uppy/webcam/lib/DiscardButton.js", "../../node_modules/@uppy/webcam/lib/RecordButton.js", "../../node_modules/@uppy/webcam/lib/formatSeconds.js", "../../node_modules/@uppy/webcam/lib/RecordingLength.js", "../../node_modules/@uppy/webcam/lib/SnapshotButton.js", "../../node_modules/@uppy/webcam/lib/SubmitButton.js", "../../node_modules/@uppy/webcam/lib/VideoSourceSelect.js", "../../node_modules/@uppy/webcam/lib/CameraScreen.js", "../../node_modules/@uppy/webcam/lib/locale.js", "../../node_modules/@uppy/webcam/lib/PermissionsScreen.js", "../../node_modules/@uppy/webcam/lib/supportsMediaRecorder.js", "../../node_modules/@uppy/xhr-upload/package.json", "../../node_modules/@uppy/xhr-upload/lib/locale.js", "../../node_modules/@uppy/xhr-upload/lib/index.js", "../../node_modules/@uppy/image-editor/package.json", "../../node_modules/@uppy/image-editor/lib/Editor.js", "../../node_modules/@uppy/image-editor/lib/utils/getCanvasDataThatFitsPerfectlyIntoContainer.js", "../../node_modules/@uppy/image-editor/lib/utils/getScaleFactorThatRemovesDarkCorners.js", "../../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnMove.js", "../../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnResize.js", "../../node_modules/@uppy/image-editor/lib/locale.js", "../../node_modules/@uppy/image-editor/lib/ImageEditor.js", "../../node_modules/@uppy/locales/lib/de_DE.js", "../src/chunk-uploader.js"],
  "sourcesContent": ["// Adapted from https://github.com/Flet/prettier-bytes/\n// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB\n// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE\nexport = function prettierBytes(input: number): string {\n  if (typeof input !== 'number' || Number.isNaN(input)) {\n    throw new TypeError(`Expected a number, got ${typeof input}`)\n  }\n\n  const neg = input < 0\n  let num = Math.abs(input)\n\n  if (neg) {\n    num = -num\n  }\n\n  if (num === 0) {\n    return '0 B'\n  }\n\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const exponent = Math.min(Math.floor(Math.log(num) / Math.log(1024)), units.length - 1)\n  const value = Number(num / 1024 ** exponent)\n  const unit = units[exponent]\n\n  return `${value >= 10 || value % 1 === 0 ? Math.round(value) : value.toFixed(1)} ${unit}`\n}\n", "/* jshint node: true */\n'use strict';\n\n/**\n  # wildcard\n\n  Very simple wildcard matching, which is designed to provide the same\n  functionality that is found in the\n  [eve](https://github.com/adobe-webplatform/eve) eventing library.\n\n  ## Usage\n\n  It works with strings:\n\n  <<< examples/strings.js\n\n  Arrays:\n\n  <<< examples/arrays.js\n\n  Objects (matching against keys):\n\n  <<< examples/objects.js\n\n  While the library works in Node, if you are are looking for file-based\n  wildcard matching then you should have a look at:\n\n  <https://github.com/isaacs/node-glob>\n**/\n\nfunction WildcardMatcher(text, separator) {\n  this.text = text = text || '';\n  this.hasWild = ~text.indexOf('*');\n  this.separator = separator;\n  this.parts = text.split(separator);\n}\n\nWildcardMatcher.prototype.match = function(input) {\n  var matches = true;\n  var parts = this.parts;\n  var ii;\n  var partsCount = parts.length;\n  var testParts;\n\n  if (typeof input == 'string' || input instanceof String) {\n    if (!this.hasWild && this.text != input) {\n      matches = false;\n    } else {\n      testParts = (input || '').split(this.separator);\n      for (ii = 0; matches && ii < partsCount; ii++) {\n        if (parts[ii] === '*')  {\n          continue;\n        } else if (ii < testParts.length) {\n          matches = parts[ii] === testParts[ii];\n        } else {\n          matches = false;\n        }\n      }\n\n      // If matches, then return the component parts\n      matches = matches && testParts;\n    }\n  }\n  else if (typeof input.splice == 'function') {\n    matches = [];\n\n    for (ii = input.length; ii--; ) {\n      if (this.match(input[ii])) {\n        matches[matches.length] = input[ii];\n      }\n    }\n  }\n  else if (typeof input == 'object') {\n    matches = {};\n\n    for (var key in input) {\n      if (this.match(key)) {\n        matches[key] = input[key];\n      }\n    }\n  }\n\n  return matches;\n};\n\nmodule.exports = function(text, test, separator) {\n  var matcher = new WildcardMatcher(text, separator || /[\\/\\.]/);\n  if (typeof test != 'undefined') {\n    return matcher.match(test);\n  }\n\n  return matcher;\n};\n", "var wildcard = require('wildcard');\nvar reMimePartSplit = /[\\/\\+\\.]/;\n\n/**\n  # mime-match\n\n  A simple function to checker whether a target mime type matches a mime-type\n  pattern (e.g. image/jpeg matches image/jpeg OR image/*).\n\n  ## Example Usage\n\n  <<< example.js\n\n**/\nmodule.exports = function(target, pattern) {\n  function test(pattern) {\n    var result = wildcard(pattern, target, reMimePartSplit);\n\n    // ensure that we have a valid mime type (should have two parts)\n    return result && result.length >= 2;\n  }\n\n  return pattern ? test(pattern.split(';')[0]) : test;\n};\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n", "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n", "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n", "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n", "var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n", "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n", "var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n", "/**\n* Create an event emitter with namespaces\n* @name createNamespaceEmitter\n* @example\n* var emitter = require('./index')()\n*\n* emitter.on('*', function () {\n*   console.log('all events emitted', this.event)\n* })\n*\n* emitter.on('example', function () {\n*   console.log('example event emitted')\n* })\n*/\nmodule.exports = function createNamespaceEmitter () {\n  var emitter = {}\n  var _fns = emitter._fns = {}\n\n  /**\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\n  * @name emit\n  * @param {String} event \u2013 the name of the event, with optional namespace\n  * @param {...*} data \u2013 up to 6 arguments that are passed to the event listener\n  * @example\n  * emitter.emit('example')\n  * emitter.emit('demo:test')\n  * emitter.emit('data', { example: true}, 'a string', 1)\n  */\n  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {\n    var toEmit = getListeners(event)\n\n    if (toEmit.length) {\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])\n    }\n  }\n\n  /**\n  * Create en event listener.\n  * @name on\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.on('example', function () {})\n  * emitter.on('demo', function () {})\n  */\n  emitter.on = function on (event, fn) {\n    if (!_fns[event]) {\n      _fns[event] = []\n    }\n\n    _fns[event].push(fn)\n  }\n\n  /**\n  * Create en event listener that fires once.\n  * @name once\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.once('example', function () {})\n  * emitter.once('demo', function () {})\n  */\n  emitter.once = function once (event, fn) {\n    function one () {\n      fn.apply(this, arguments)\n      emitter.off(event, one)\n    }\n    this.on(event, one)\n  }\n\n  /**\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\n  * @name off\n  * @param {String} event\n  * @param {Function} [fn] \u2013 the specific handler\n  * @example\n  * emitter.off('example')\n  * emitter.off('demo', function () {})\n  */\n  emitter.off = function off (event, fn) {\n    var keep = []\n\n    if (event && fn) {\n      var fns = this._fns[event]\n      var i = 0\n      var l = fns ? fns.length : 0\n\n      for (i; i < l; i++) {\n        if (fns[i] !== fn) {\n          keep.push(fns[i])\n        }\n      }\n    }\n\n    keep.length ? this._fns[event] = keep : delete this._fns[event]\n  }\n\n  function getListeners (e) {\n    var out = _fns[e] ? _fns[e] : []\n    var idx = e.indexOf(':')\n    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]\n\n    var keys = Object.keys(_fns)\n    var i = 0\n    var l = keys.length\n\n    for (i; i < l; i++) {\n      var key = keys[i]\n      if (key === '*') {\n        out = out.concat(_fns[key])\n      }\n\n      if (args.length === 2 && args[0] === key) {\n        out = out.concat(_fns[key])\n        break\n      }\n    }\n\n    return out\n  }\n\n  function emitAll (e, fns, args) {\n    var i = 0\n    var l = fns.length\n\n    for (i; i < l; i++) {\n      if (!fns[i]) break\n      fns[i].event = e\n      fns[i].apply(fns[i], args)\n    }\n  }\n\n  return emitter\n}\n", "/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\nconst notMobileRE = /CrOS/\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result =\n    (mobileRE.test(ua) && !notMobileRE.test(ua)) ||\n    (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n", "/*!\n * Cropper.js v1.6.2\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-04-21T07:43:05.335Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper';\n\n  // Actions\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n\n  // Classes\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\");\n\n  // Drag modes\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none';\n\n  // Events\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n\n  // Mime types\n  var MIME_TYPE_JPEG = 'image/jpeg';\n\n  // RegExps\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i;\n\n  // Misc\n  // Inspired by the default width and height of a canvas element.\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n  function getAdjustedSizes(_ref4) {\n    var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));\n\n    // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = [];\n\n    // Chunk Typed Array for better performance (#435)\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation;\n\n    // Ignores range error when the image does not have correct Exif information\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart;\n\n      // Only handle JPEG image (start by 0xFFD8)\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n          offset += 1;\n        }\n      }\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n          if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n        var _offset;\n        var i;\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n            // 8 is the offset of the current tag's value\n            _offset += 8;\n\n            // Get the original orientation value\n            orientation = dataView.getUint16(_offset, littleEndian);\n\n            // Override the orientation with its default value\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n    return orientation;\n  }\n\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n\n      // Rotate left 180\u00B0\n      case 3:\n        rotate = -180;\n        break;\n\n      // Flip vertical\n      case 4:\n        scaleY = -1;\n        break;\n\n      // Flip vertical and rotate right 90\u00B0\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n\n      // Rotate right 90\u00B0\n      case 6:\n        rotate = 90;\n        break;\n\n      // Flip horizontal and rotate right 90\u00B0\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n\n      // Rotate left 90\u00B0\n      case 8:\n        rotate = -90;\n        break;\n    }\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n        imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n            width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n            height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n            degree: imageData.rotate || 0\n          }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n\n      // The width/height of auto crop area must large than \"minWidth/Height\"\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;\n\n        // The min/maxCropBoxWidth/Height must be less than container's width/height\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n        crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n      if (!preview) {\n        return;\n      }\n      var previews = preview;\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img');\n\n        // Save the original size for recover\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n        img.src = url;\n        img.alt = alt;\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n        height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n      var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n        this.render();\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast (#21)\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n        button = event.button;\n      if (this.disabled\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n      var options = this.options,\n        pointers = this.pointers;\n      var action;\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      // This line is required for preventing page zooming in iOS browsers\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n      if (this.disabled || !action) {\n        return;\n      }\n      var pointers = this.pointers;\n      event.preventDefault();\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n      var action = this.action,\n        pointers = this.pointers;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n            break;\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n            break;\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n            break;\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n            break;\n        }\n      };\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_EAST);\n          width += range.x;\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_SOUTH);\n          height += range.y;\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n          break;\n      }\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true);\n\n        // Render canvas after crop box rendered\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n      return this;\n    },\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      element[NAMESPACE] = undefined;\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n      this.uncreate();\n      return this;\n    },\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n      return data;\n    },\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n      var cropBoxData = {};\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n        var ratio = imageData.width / imageData.naturalWidth;\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n        this.setCropBoxData(cropBoxData);\n      }\n      return this;\n    },\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n      return data;\n    },\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n      return data || {};\n    },\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n        this.renderCropBox();\n      }\n      return this;\n    },\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options);\n\n      // Returns the source canvas if it is not cropped.\n      if (!this.cropped) {\n        return source;\n      }\n      var _this$getData = this.getData(options.rounded),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n      var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: options.width || (ratio !== 1 ? source.width : initialWidth),\n          height: options.height || (ratio !== 1 ? source.height : initialHeight)\n        }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n\n      // Source canvas parameters\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight;\n\n      // Destination canvas parameters\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n      var params = [srcX, srcY, srcWidth, srcHeight];\n\n      // Avoid \"IndexSizeError\"\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      }\n\n      // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n        if (this.ready) {\n          this.initCropBox();\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n      return this;\n    },\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Cropper);\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n    return _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n        if (tagName === 'img') {\n          this.isImg = true;\n\n          // e.g.: \"img/picture.jpg\"\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url;\n\n          // Stop when it's a blank image\n          if (!url) {\n            return;\n          }\n\n          // e.g.: \"https://example.com/img/picture.jpg\"\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n        if (!url) {\n          return;\n        }\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n          options = this.options;\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        }\n\n        // Only IE10+ supports Typed Arrays\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        }\n\n        // Detect the mime type of the image directly if it is a Data URL\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n          return;\n        }\n\n        // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr;\n\n        // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        };\n\n        // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        // The third parameter is required for avoiding side-effect (#682)\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n          imageData = this.imageData;\n\n        // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n          var _parseOrientation = parseOrientation(orientation);\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n          url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          }\n\n          // Bust cache when there is not a \"crossOrigin\" property (#519)\n          crossOriginUrl = addTimestamp(url);\n        }\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true;\n\n        // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n          _this2.build();\n        };\n\n        // Most modern browsers (excepts iOS WebKit)\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n        sizingImage.src = image.src;\n\n        // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options,\n          image = this.image;\n\n        // Create cropper elements\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image);\n\n        // Hide the original image\n        addClass(element, CLASS_HIDDEN);\n\n        // Inserts the cropper after to the current image\n        container.insertBefore(cropper, element.nextSibling);\n\n        // Show the hidden image\n        removeClass(image, CLASS_HIDE);\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n        if (options.autoCrop) {\n          this.crop();\n        }\n        this.setData(options.data);\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        var parentNode = this.cropper.parentNode;\n        if (parentNode) {\n          parentNode.removeChild(this.cropper);\n        }\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n  }();\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n", "import Uppy from '@uppy/core';\nimport Dashboard from '@uppy/dashboard';\nimport Webcam from '@uppy/webcam';\nimport XHRUpload from '@uppy/xhr-upload';\nimport ImageEditor from '@uppy/image-editor';\nimport German from '@uppy/locales/lib/de_DE';\nimport { ChunkUploader } from './chunk-uploader';\n\n// Patch missing translations in German locale\nif (German && German.strings) {\n    German.strings.help = 'Hilfe';\n}\n\nexport class UppyCustomWidget {\n    constructor(inputElement, options = {}) {\n        this.input = inputElement;\n        this.options = options;\n        this.container = null;\n        this.listContainer = null;\n        this.uppy = null;\n        \n        this.init();\n    }\n\n    init() {\n        if (this.input.dataset.uppyInitialized) return;\n        this.input.dataset.uppyInitialized = 'true';\n        this.input.style.display = 'none';\n\n        // Track uploading files for visual feedback - MUSS VOR renderList() initialisiert werden\n        this.uploadingFiles = new Map(); // fileId -> filename\n\n        this.renderUI();\n        this.initUppy();\n        this.renderList();\n        \n        // Mutation Observer f\u00FCr dynamisch nachgeladene Felder (z.B. YForm)\n        this.setupMutationObserver();\n        this.initListeners();\n    }\n\n    setupMutationObserver() {\n        // ... (wird sp\u00E4ter implementiert falls n\u00F6tig)\n    }\n        \n    initListeners() {\n        // Listen for external changes to the input\n        this.input.addEventListener('change', () => this.renderList());\n    }\n\n    getConfig() {\n        const globalConfig = window.rex?.uppy_config || {};\n        \n        return {\n            apiToken: this.input.dataset.apiToken || '',\n            maxFiles: parseInt(this.input.dataset.maxFiles) || parseInt(globalConfig.max_files) || 10,\n            maxFileSize: (parseInt(this.input.dataset.maxFilesize) || parseInt(globalConfig.max_file_size) || 200) * 1024 * 1024,\n            allowedTypes: this.input.dataset.allowedTypes \n                ? this.input.dataset.allowedTypes.split(',').map(t => t.trim()) \n                : (globalConfig.allowed_types ? globalConfig.allowed_types.split(',').map(t => t.trim()) : []),\n            categoryId: parseInt(this.input.dataset.categoryId) || 0,\n            locale: this.input.dataset.locale || this.input.dataset.lang || 'de-DE',\n            enableImageEditor: this.input.dataset.enableImageEditor === 'true',\n            enableWebcam: this.input.dataset.enableWebcam === 'true',\n            ...this.options\n        };\n    }\n\n    getIcon(name) {\n        const icons = {\n            add: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\"></line><line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\"></line></svg>',\n            file: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z\"></path><polyline points=\"13 2 13 9 20 9\"></polyline></svg>',\n            up: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"18 15 12 9 6 15\"></polyline></svg>',\n            down: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"6 9 12 15 18 9\"></polyline></svg>',\n            remove: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><polyline points=\"3 6 5 6 21 6\"></polyline><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"></path></svg>',\n            edit: '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"></path><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"></path></svg>'\n        };\n        return icons[name] || '';\n    }\n\n    renderUI() {\n        this.container = document.createElement('div');\n        this.container.className = 'uppy-custom-widget';\n        \n        this.listContainer = document.createElement('ul');\n        this.listContainer.className = 'uppy-file-list';\n        this.container.appendChild(this.listContainer);\n        \n        const addBtn = document.createElement('button');\n        addBtn.type = 'button';\n        addBtn.className = 'uppy-btn uppy-btn-primary';\n        addBtn.innerHTML = this.getIcon('add') + ' Dateien hinzuf\u00FCgen';\n        addBtn.addEventListener('click', () => {\n            if (this.uppy) {\n                this.uppy.getPlugin('Dashboard').openModal();\n            }\n        });\n        this.container.appendChild(addBtn);\n        \n        this.input.parentNode.insertBefore(this.container, this.input.nextSibling);\n    }\n\n    renderList() {\n        this.listContainer.innerHTML = '';\n        const files = this.getFiles();\n        \n        if (files.length === 0 && this.uploadingFiles.size === 0) {\n            const emptyState = document.createElement('li');\n            emptyState.className = 'uppy-empty-state';\n            emptyState.textContent = 'Keine Dateien ausgew\u00E4hlt';\n            this.listContainer.appendChild(emptyState);\n            return;\n        }\n        \n        // Show uploading files first\n        if (this.uploadingFiles.size > 0) {\n            this.uploadingFiles.forEach((filename, fileId) => {\n                const li = document.createElement('li');\n                li.className = 'uppy-file-item uppy-file-uploading';\n                li.dataset.fileId = fileId;\n                \n                li.innerHTML = `\n                    <div class=\"uppy-file-preview\">\n                        <div class=\"uppy-file-icon uppy-icon-uploading\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"uppy-spinner\">\n                                <path d=\"M21 12a9 9 0 1 1-6.219-8.56\"/>\n                            </svg>\n                        </div>\n                        <div class=\"uppy-file-info\">\n                            <span class=\"uppy-filename\" title=\"${filename}\">${filename}</span>\n                            <span class=\"uppy-upload-status\">Wird hochgeladen...</span>\n                        </div>\n                    </div>\n                `;\n                \n                this.listContainer.appendChild(li);\n            });\n        }\n        \n        files.forEach((filename, index) => {\n            // Skip files that are currently uploading\n            if (Array.from(this.uploadingFiles.values()).includes(filename)) {\n                return;\n            }\n            \n            const li = document.createElement('li');\n            li.className = 'uppy-file-item';\n            \n            const isImage = /\\.(jpg|jpeg|png|gif|webp|svg)$/i.test(filename);\n            const thumbUrl = isImage ? `/media/${filename}` : '';\n            \n            const previewHtml = isImage \n                ? `<img src=\"${thumbUrl}\" class=\"uppy-thumbnail\" alt=\"${filename}\" onerror=\"this.style.display='none'\">`\n                : `<div class=\"uppy-file-icon\">${this.getIcon('file')}</div>`;\n                \n            li.innerHTML = `\n                <div class=\"uppy-file-preview\">\n                    ${previewHtml}\n                    <div class=\"uppy-file-info\">\n                        <span class=\"uppy-filename\" title=\"${filename}\">${filename}</span>\n                    </div>\n                </div>\n                <div class=\"uppy-actions\">\n                    <button type=\"button\" class=\"uppy-btn\" data-action=\"edit\" title=\"Metadaten bearbeiten\">${this.getIcon('edit')}</button>\n                    ${index > 0 ? `<button type=\"button\" class=\"uppy-btn\" data-action=\"up\" title=\"Nach oben\">${this.getIcon('up')}</button>` : ''}\n                    ${index < files.length - 1 ? `<button type=\"button\" class=\"uppy-btn\" data-action=\"down\" title=\"Nach unten\">${this.getIcon('down')}</button>` : ''}\n                    <button type=\"button\" class=\"uppy-btn uppy-btn-danger\" data-action=\"remove\" title=\"L\u00F6schen\">${this.getIcon('remove')}</button>\n                </div>\n            `;\n            \n            // Event Delegation for buttons\n            li.querySelectorAll('button[data-action]').forEach(btn => {\n                btn.addEventListener('click', (e) => {\n                    const action = e.currentTarget.dataset.action;\n                    if (action === 'remove') this.removeFile(index);\n                    if (action === 'up') this.moveFile(index, -1);\n                    if (action === 'down') this.moveFile(index, 1);\n                    if (action === 'edit') this.openMetadataModal(filename);\n                });\n            });\n            \n            this.listContainer.appendChild(li);\n        });\n    }\n\n    getFiles() {\n        return this.input.value ? this.input.value.split(',').map(f => f.trim()).filter(f => f) : [];\n    }\n\n    setFiles(files) {\n        this.input.value = files.join(',');\n        this.input.dispatchEvent(new Event('change', { bubbles: true }));\n    }\n\n    addFile(filename) {\n        const files = this.getFiles();\n        if (!files.includes(filename)) {\n            files.push(filename);\n            this.setFiles(files);\n        }\n    }\n\n    removeFile(index) {\n        const files = this.getFiles();\n        files.splice(index, 1);\n        this.setFiles(files);\n    }\n\n    moveFile(index, direction) {\n        const files = this.getFiles();\n        const newIndex = index + direction;\n        if (newIndex >= 0 && newIndex < files.length) {\n            [files[index], files[newIndex]] = [files[newIndex], files[index]];\n            this.setFiles(files);\n        }\n    }\n\n    initUppy() {\n        const config = this.getConfig();\n        \n        this.uppy = new Uppy({\n            id: 'uppy-' + Math.random().toString(36).substr(2, 9),\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            restrictions: {\n                maxFileSize: config.maxFileSize,\n                maxNumberOfFiles: config.maxFiles,\n                allowedFileTypes: config.allowedTypes.length > 0 ? config.allowedTypes : null\n            },\n            locale: config.locale === 'de-DE' ? German : undefined\n        });\n\n        this.uppy.use(Dashboard, {\n            inline: false,\n            trigger: null, // We handle trigger manually\n            target: 'body',\n            width: 750,\n            height: 550,\n            showProgressDetails: true,\n            proudlyDisplayPoweredByUppy: false,\n            closeModalOnClickOutside: true,\n            closeAfterFinish: false,\n            disablePageScrollWhenModalOpen: false\n        });\n\n        if (config.enableImageEditor) {\n            this.uppy.use(ImageEditor, {\n                target: Dashboard,\n                quality: 0.8,\n            });\n        }\n\n        if (config.enableWebcam) {\n            this.uppy.use(Webcam, {\n                target: Dashboard,\n                modes: ['picture'],\n                mirror: true,\n                facingMode: 'user',\n            });\n        }\n\n        // XHR Upload\n        const tokenParam = config.apiToken ? encodeURIComponent(config.apiToken) : '';\n        \n        // Signatur-Parameter vorbereiten\n        let signatureParams = '';\n        const signature = this.input.dataset.uppySignature;\n        \n        if (signature) {\n            const allowedTypes = this.input.dataset.allowedTypes || '';\n            const maxFilesize = this.input.dataset.maxFilesize || '';\n            \n            signatureParams = `&uppy_signature=${encodeURIComponent(signature)}` +\n                              `&uppy_allowed_types=${encodeURIComponent(allowedTypes)}` +\n                              `&uppy_max_filesize=${encodeURIComponent(maxFilesize)}`;\n        }\n\n        // Upload-Methode w\u00E4hlen (Chunk oder XHR)\n        const globalConfig = window.rex?.uppy_config || {};\n        const enableChunks = globalConfig.enable_chunks === true;\n\n        if (enableChunks) {\n            const chunkUploader = new ChunkUploader(this.uppy, {\n                endpoint: window.location.origin + '/redaxo/index.php?rex-api-call=uppy_uploader' + signatureParams,\n                chunkSize: globalConfig.chunk_size || 5 * 1024 * 1024,\n                categoryId: config.categoryId,\n                apiToken: tokenParam\n            });\n            chunkUploader.install();\n        } else {\n            this.uppy.use(XHRUpload, {\n                endpoint: window.location.origin + '/redaxo/index.php?rex-api-call=uppy_uploader&func=upload&api_token=' + tokenParam + '&category_id=' + config.categoryId + signatureParams,\n                formData: true,\n                fieldName: 'file',\n                headers: {\n                    'X-Requested-With': 'XMLHttpRequest'\n                },\n                limit: 5,\n                getResponseData: (responseText) => {\n                    try {\n                        return JSON.parse(responseText);\n                    } catch (e) {\n                        return { success: false, message: 'Invalid response' };\n                    }\n                },\n                getResponseError: (responseText) => {\n                    try {\n                        const response = JSON.parse(responseText);\n                        return response.error || response.message || 'Upload failed';\n                    } catch (e) {\n                        return responseText;\n                    }\n                }\n            });\n        }\n\n        this.uppy.on('upload-success', (file, response) => {\n            \n            // Remove from uploading list\n            this.uploadingFiles.delete(file.id);\n            \n            if (response.body && (response.body.success || response.body.status === 'ok')) {\n                const responseData = response.body.data || response.body;\n                this.addFile(responseData.filename);\n                \n                // Re-render to show final list without uploading state\n                this.renderList();\n                \n                // Optional: Open metadata modal after upload\n                // this.openMetadataModal(responseData.filename);\n            } else {\n                console.warn('Upload success event but invalid response body:', response);\n                this.renderList();\n            }\n        });\n        \n        // Track upload start\n        this.uppy.on('upload', (data) => {\n            if (data.fileIDs) {\n                data.fileIDs.forEach(fileID => {\n                    const file = this.uppy.getFile(fileID);\n                    if (file) {\n                        this.uploadingFiles.set(file.id, file.name);\n                    }\n                });\n                this.renderList();\n            }\n        });\n        \n        // Handle upload errors\n        this.uppy.on('upload-error', (file, error) => {\n            console.error('Upload error:', file.name, error);\n            this.uploadingFiles.delete(file.id);\n            this.renderList();\n        });\n    }\n\n    async fetchMetaFields() {\n        const config = this.getConfig();\n        const tokenParam = config.apiToken ? `&api_token=${encodeURIComponent(config.apiToken)}` : '';\n        \n        try {\n            const response = await fetch(`${window.location.origin}/redaxo/index.php?rex-api-call=uppy_metadata&action=get_fields${tokenParam}`);\n            const data = await response.json();\n            return data.success ? data.data : [];\n        } catch (e) {\n            console.error('Failed to fetch meta fields:', e);\n            return [];\n        }\n    }\n\n    async fetchMetadata(filename) {\n        const config = this.getConfig();\n        const tokenParam = config.apiToken ? `&api_token=${encodeURIComponent(config.apiToken)}` : '';\n        \n        try {\n            const response = await fetch(`${window.location.origin}/redaxo/index.php?rex-api-call=uppy_metadata&action=load_metadata&filename=${encodeURIComponent(filename)}${tokenParam}`);\n            const data = await response.json();\n            return (data.success && data.metadata) ? data.metadata : {};\n        } catch (e) {\n            console.error('Failed to fetch metadata:', e);\n            return {};\n        }\n    }\n\n    async saveMetadata(filename, metadata) {\n        const config = this.getConfig();\n        const tokenParam = config.apiToken ? `&api_token=${encodeURIComponent(config.apiToken)}` : '';\n        \n        const formData = new FormData();\n        formData.append('filename', filename);\n        formData.append('metadata', JSON.stringify(metadata));\n        \n        try {\n            const response = await fetch(`${window.location.origin}/redaxo/index.php?rex-api-call=uppy_metadata&action=save_metadata${tokenParam}`, {\n                method: 'POST',\n                body: formData\n            });\n            const data = await response.json();\n            return data.success;\n        } catch (e) {\n            console.error('Failed to save metadata:', e);\n            return false;\n        }\n    }\n\n    async openMetadataModal(filename) {\n        const fields = await this.fetchMetaFields();\n        const metadata = await this.fetchMetadata(filename);\n        \n        this.renderMetadataModal(filename, fields, metadata);\n    }\n\n    renderMetadataModal(filename, fields, metadata) {\n        // Remove existing modal if any\n        const existingModal = document.querySelector('.uppy-widget-modal-backdrop');\n        if (existingModal) existingModal.remove();\n\n        const backdrop = document.createElement('div');\n        backdrop.className = 'uppy-widget-modal-backdrop';\n        \n        const modal = document.createElement('div');\n        modal.className = 'uppy-widget-modal';\n        \n        // Header\n        const header = document.createElement('div');\n        header.className = 'uppy-widget-modal-header';\n        header.innerHTML = `\n            <h3 class=\"uppy-widget-modal-title\">Metadaten: ${filename}</h3>\n            <button type=\"button\" class=\"uppy-widget-modal-close\">&times;</button>\n        `;\n        \n        // Body\n        const body = document.createElement('div');\n        body.className = 'uppy-widget-modal-body';\n        \n        const form = document.createElement('form');\n        \n        // Title Field (Standard)\n        const titleGroup = document.createElement('div');\n        titleGroup.className = 'uppy-widget-form-group';\n        titleGroup.innerHTML = `\n            <label class=\"uppy-widget-label\">Titel</label>\n            <input type=\"text\" name=\"title\" class=\"uppy-widget-input\" value=\"${metadata.title || ''}\">\n        `;\n        form.appendChild(titleGroup);\n        \n        // MetaInfo Fields\n        fields.forEach(field => {\n            // Skip title as it is already rendered\n            if (field.id === 'title') return;\n\n            const group = document.createElement('div');\n            group.className = 'uppy-widget-form-group';\n            \n            const label = `<label class=\"uppy-widget-label\">${field.name}</label>`;\n            group.innerHTML = label;\n            \n            if (field.is_multilang && field.languages && field.languages.length > 0) {\n                // Parse existing values\n                let values = {};\n                try {\n                    const raw = metadata[field.id];\n                    if (raw) {\n                        // Try parsing as JSON first\n                        let parsed;\n                        try {\n                            parsed = JSON.parse(raw);\n                        } catch (e) {\n                            // If not JSON, maybe it's just a string (legacy)\n                            parsed = null;\n                        }\n\n                        if (Array.isArray(parsed)) {\n                            parsed.forEach(item => values[item.clang_id] = item.value);\n                        } else if (typeof raw === 'string') {\n                            // Fallback: use raw string for default language\n                            values[field.languages[0].clang_id] = raw;\n                        }\n                    }\n                } catch(e) {\n                    console.warn('Error parsing metadata value', e);\n                }\n\n                // First Language (Main)\n                const firstLang = field.languages[0];\n                const firstVal = values[firstLang.clang_id] || '';\n                const firstInputName = `${field.id}[${firstLang.clang_id}]`;\n                \n                let firstInputHtml = '';\n                if (field.type === 'textarea') {\n                    firstInputHtml = `<textarea name=\"${firstInputName}\" class=\"uppy-widget-textarea\" data-clang-id=\"${firstLang.clang_id}\" rows=\"3\" placeholder=\"${firstLang.clang_name}...\">${firstVal}</textarea>`;\n                } else {\n                    firstInputHtml = `<input type=\"text\" name=\"${firstInputName}\" class=\"uppy-widget-input\" data-clang-id=\"${firstLang.clang_id}\" value=\"${firstVal}\" placeholder=\"${firstLang.clang_name}...\">`;\n                }\n                group.innerHTML += firstInputHtml;\n\n                // Additional Languages (Collapse)\n                if (field.languages.length > 1) {\n                    const collapseBtn = document.createElement('button');\n                    collapseBtn.type = 'button';\n                    collapseBtn.className = 'uppy-widget-collapse-btn';\n                    collapseBtn.innerHTML = `<span>\uD83C\uDF10</span> Weitere Sprachen (${field.languages.length - 1})`;\n                    \n                    const collapseContent = document.createElement('div');\n                    collapseContent.className = 'uppy-widget-collapse-content';\n                    \n                    field.languages.slice(1).forEach(lang => {\n                        const val = values[lang.clang_id] || '';\n                        const inputName = `${field.id}[${lang.clang_id}]`;\n                        \n                        const langLabel = document.createElement('label');\n                        langLabel.className = 'uppy-widget-lang-label';\n                        langLabel.textContent = `${lang.clang_name} (${lang.clang_code})`;\n                        \n                        let inputHtml = '';\n                        if (field.type === 'textarea') {\n                            inputHtml = `<textarea name=\"${inputName}\" class=\"uppy-widget-textarea\" data-clang-id=\"${lang.clang_id}\" rows=\"2\" placeholder=\"${lang.clang_name}...\">${val}</textarea>`;\n                        } else {\n                            inputHtml = `<input type=\"text\" name=\"${inputName}\" class=\"uppy-widget-input\" data-clang-id=\"${lang.clang_id}\" value=\"${val}\" placeholder=\"${lang.clang_name}...\">`;\n                        }\n                        \n                        const wrapper = document.createElement('div');\n                        wrapper.appendChild(langLabel);\n                        wrapper.innerHTML += inputHtml;\n                        collapseContent.appendChild(wrapper);\n                    });\n                    \n                    collapseBtn.onclick = () => {\n                        collapseContent.classList.toggle('is-open');\n                    };\n                    \n                    group.appendChild(collapseBtn);\n                    group.appendChild(collapseContent);\n                }\n\n            } else {\n                // Normal Field\n                const value = metadata[field.id] || '';\n                let inputHtml = '';\n                \n                if (field.type === 'select') {\n                    const options = (field.options || []).map(opt => \n                        `<option value=\"${opt.value}\" ${opt.value == value ? 'selected' : ''}>${opt.label}</option>`\n                    ).join('');\n                    inputHtml = `<select name=\"${field.id}\" class=\"uppy-widget-select\">${options}</select>`;\n                } else if (field.type === 'textarea') {\n                    inputHtml = `<textarea name=\"${field.id}\" class=\"uppy-widget-textarea\" rows=\"3\">${value}</textarea>`;\n                } else {\n                    inputHtml = `<input type=\"text\" name=\"${field.id}\" class=\"uppy-widget-input\" value=\"${value}\">`;\n                }\n                group.innerHTML += inputHtml;\n            }\n            \n            form.appendChild(group);\n        });\n        \n        body.appendChild(form);\n        \n        // Footer\n        const footer = document.createElement('div');\n        footer.className = 'uppy-widget-modal-footer';\n        footer.innerHTML = `\n            <button type=\"button\" class=\"uppy-btn uppy-widget-modal-cancel\">Abbrechen</button>\n            <button type=\"button\" class=\"uppy-btn uppy-btn-primary uppy-widget-modal-save\">Speichern</button>\n        `;\n        \n        modal.appendChild(header);\n        modal.appendChild(body);\n        modal.appendChild(footer);\n        backdrop.appendChild(modal);\n        document.body.appendChild(backdrop);\n        \n        // Show modal (next tick for transition)\n        requestAnimationFrame(() => backdrop.classList.add('is-visible'));\n        \n        // Event Handlers\n        const close = () => {\n            backdrop.classList.remove('is-visible');\n            setTimeout(() => backdrop.remove(), 300);\n        };\n        \n        backdrop.querySelector('.uppy-widget-modal-close').addEventListener('click', close);\n        backdrop.querySelector('.uppy-widget-modal-cancel').addEventListener('click', close);\n        \n        backdrop.querySelector('.uppy-widget-modal-save').addEventListener('click', async () => {\n            const newMetadata = {};\n            \n            // Handle Title (always present)\n            const titleInput = form.querySelector('input[name=\"title\"]');\n            if (titleInput) {\n                newMetadata['title'] = titleInput.value;\n            }\n\n            // Handle other fields\n            fields.forEach(field => {\n                if (field.id === 'title') return;\n\n                if (field.is_multilang) {\n                    // Collect all inputs for this field\n                    const inputs = form.querySelectorAll(`[name^=\"${field.id}[\"]`);\n                    const langData = [];\n                    \n                    inputs.forEach(input => {\n                        const clangId = parseInt(input.dataset.clangId);\n                        const val = input.value;\n                        if (val && !isNaN(clangId)) {\n                            langData.push({\n                                clang_id: clangId,\n                                value: val\n                            });\n                        }\n                    });\n                    \n                    // Save as JSON string\n                    newMetadata[field.id] = JSON.stringify(langData);\n                } else {\n                    // Normal field\n                    const input = form.querySelector(`[name=\"${field.id}\"]`);\n                    if (input) {\n                        newMetadata[field.id] = input.value;\n                    }\n                }\n            });\n            \n            const success = await this.saveMetadata(filename, newMetadata);\n            if (success) {\n                close();\n            } else {\n                alert('Fehler beim Speichern der Metadaten');\n            }\n        });\n        \n        // Close on backdrop click\n        backdrop.addEventListener('click', (e) => {\n            if (e.target === backdrop) close();\n        });\n    }\n}\n\n// Auto-Initialization\ndocument.addEventListener('DOMContentLoaded', () => {\n    const customWidgets = document.querySelectorAll('.uppy-upload-widget:not([data-uppy-initialized])');\n    if (customWidgets.length > 0) {\n        customWidgets.forEach(inputElement => {\n            new UppyCustomWidget(inputElement);\n        });\n    }\n});\n\n", "/**\n * Save a <canvas> element's content to a Blob object.\n *\n * @param {HTMLCanvasElement} canvas\n * @returns {Promise}\n */\nexport default function canvasToBlob(canvas, type, quality) {\n    return new Promise((resolve) => {\n        canvas.toBlob(resolve, type, quality);\n    });\n}\n", "const DATA_URL_PATTERN = /^data:([^/]+\\/[^,;]+(?:[^,]*?))(;base64)?,([\\s\\S]*)$/;\nfunction dataURItoBlob(dataURI, opts, toFile) {\n    // get the base64 data\n    const dataURIData = DATA_URL_PATTERN.exec(dataURI);\n    // user may provide mime type, if not get it from data URI\n    const mimeType = opts.mimeType ?? dataURIData?.[1] ?? 'plain/text';\n    let data; // We add `!` to tell TS we're OK with `data` being not defined when the dataURI is invalid.\n    if (dataURIData?.[2] != null) {\n        const binary = atob(decodeURIComponent(dataURIData[3]));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        data = [bytes];\n    }\n    else if (dataURIData?.[3] != null) {\n        data = [decodeURIComponent(dataURIData[3])];\n    }\n    // Convert to a File?\n    if (toFile) {\n        return new File(data, opts.name || '', { type: mimeType });\n    }\n    return new Blob(data, { type: mimeType });\n}\nexport default dataURItoBlob;\n", "/**\n * Low-pass filter using Exponential Moving Averages (aka exponential smoothing)\n * Filters a sequence of values by updating the mixing the previous output value\n * with the new input using the exponential window function\n *\n * @param newValue the n-th value of the sequence\n * @param previousSmoothedValue the exponential average of the first n-1 values\n * @param halfLife value of `dt` to move the smoothed value halfway between `previousFilteredValue` and `newValue`\n * @param dt time elapsed between adding the (n-1)th and the n-th values\n * @returns the exponential average of the first n values\n */\nexport default function emaFilter(newValue, previousSmoothedValue, halfLife, dt) {\n    if (halfLife === 0 || newValue === previousSmoothedValue)\n        return newValue;\n    if (dt === 0)\n        return previousSmoothedValue;\n    return newValue + (previousSmoothedValue - newValue) * 2 ** (-dt / halfLife);\n}\n", "export default [\n    'a[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'area[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'input:not([disabled]):not([inert]):not([aria-hidden])',\n    'select:not([disabled]):not([inert]):not([aria-hidden])',\n    'textarea:not([disabled]):not([inert]):not([aria-hidden])',\n    'button:not([disabled]):not([inert]):not([aria-hidden])',\n    'iframe:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'object:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'embed:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[contenteditable]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[tabindex]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n];\n", "class NetworkError extends Error {\n    cause;\n    isNetworkError;\n    request;\n    constructor(error, xhr = null) {\n        super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n        this.cause = error;\n        this.isNetworkError = true;\n        this.request = xhr;\n    }\n}\nexport default NetworkError;\n", "/**\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n */\nclass ProgressTimeout {\n    #aliveTimer;\n    #isDone = false;\n    #onTimedOut;\n    #timeout;\n    constructor(timeout, timeoutHandler) {\n        this.#timeout = timeout;\n        this.#onTimedOut = () => timeoutHandler(timeout);\n    }\n    progress() {\n        // Some browsers fire another progress event when the upload is\n        // cancelled, so we have to ignore progress after the timer was\n        // told to stop.\n        if (this.#isDone)\n            return;\n        if (this.#timeout > 0) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = setTimeout(this.#onTimedOut, this.#timeout);\n        }\n    }\n    done() {\n        if (!this.#isDone) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = undefined;\n            this.#isDone = true;\n        }\n    }\n}\nexport default ProgressTimeout;\n", "import NetworkError from './NetworkError.js';\nimport ProgressTimeout from './ProgressTimeout.js';\nconst noop = () => { };\n/**\n * Fetches data from a specified URL using XMLHttpRequest, with optional retry functionality and progress tracking.\n *\n * @param url The URL to send the request to.\n * @param options Optional settings for the fetch operation.\n */\nexport function fetcher(url, options = {}) {\n    const { body = null, headers = {}, method = 'GET', onBeforeRequest = noop, onUploadProgress = noop, shouldRetry = () => true, onAfterResponse = noop, onTimeout = noop, responseType, retries = 3, signal = null, timeout = 30_000, withCredentials = false, } = options;\n    // 300 ms, 600 ms, 1200 ms, 2400 ms, 4800 ms\n    const delay = (attempt) => 0.3 * 2 ** (attempt - 1) * 1000;\n    const timer = new ProgressTimeout(timeout, onTimeout);\n    function requestWithRetry(retryCount = 0) {\n        // biome-ignore lint/suspicious/noAsyncPromiseExecutor: it's fine\n        return new Promise(async (resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            const onError = (error) => {\n                if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(error);\n                }\n            };\n            xhr.open(method, url, true);\n            xhr.withCredentials = withCredentials;\n            if (responseType) {\n                xhr.responseType = responseType;\n            }\n            xhr.onload = async () => {\n                try {\n                    await onAfterResponse(xhr, retryCount);\n                }\n                catch (err) {\n                    // This is important as we need to emit the xhr\n                    // over the upload-error event.\n                    err.request = xhr;\n                    onError(err);\n                    return;\n                }\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    timer.done();\n                    resolve(xhr);\n                }\n                else if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(new NetworkError(xhr.statusText, xhr));\n                }\n            };\n            xhr.onerror = () => onError(new NetworkError(xhr.statusText, xhr));\n            xhr.upload.onprogress = (event) => {\n                timer.progress();\n                onUploadProgress(event);\n            };\n            if (headers) {\n                Object.keys(headers).forEach((key) => {\n                    xhr.setRequestHeader(key, headers[key]);\n                });\n            }\n            function abort() {\n                xhr.abort();\n                // Using DOMException for abort errors aligns with\n                // the convention established by the Fetch API.\n                reject(new DOMException('Aborted', 'AbortError'));\n            }\n            signal?.addEventListener('abort', abort);\n            if (signal?.aborted) {\n                // in case the signal was already aborted\n                abort();\n                return;\n            }\n            await onBeforeRequest(xhr, retryCount);\n            xhr.send(body);\n        });\n    }\n    return requestWithRetry();\n}\n", "const hasError = (file) => 'error' in file && !!file.error;\n// We don't need to re-upload already successfully uploaded files\n// so let's exclude them here:\n// https://github.com/transloadit/uppy/issues/5930\n// This happens for example when restoring a partially finished session (e.g. using golden retriever).\nconst isCompleted = (file) => file.progress.uploadComplete;\nexport function filterFilesToUpload(files) {\n    return files.filter((file) => !hasError(file) && !isCompleted(file));\n}\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n    return files.filter((file) => !file.progress?.uploadStarted || !file.isRestored);\n}\n", "/**\n * Check if an object is a DOM element. Duck-typing based on `nodeType`.\n */\nexport default function isDOMElement(obj) {\n    if (typeof obj !== 'object' || obj === null)\n        return false;\n    if (!('nodeType' in obj))\n        return false;\n    return obj.nodeType === Node.ELEMENT_NODE;\n}\n", "import isDOMElement from './isDOMElement.js';\n/**\n * Find one or more DOM elements.\n */\nfunction findAllDOMElements(element) {\n    if (typeof element === 'string') {\n        const elements = document.querySelectorAll(element);\n        return elements.length === 0 ? null : Array.from(elements);\n    }\n    if (typeof element === 'object' && isDOMElement(element)) {\n        return [element];\n    }\n    return null;\n}\nexport default findAllDOMElements;\n", "import isDOMElement from './isDOMElement.js';\nfunction findDOMElement(element, context = document) {\n    if (typeof element === 'string') {\n        return context.querySelector(element);\n    }\n    if (isDOMElement(element)) {\n        return element;\n    }\n    return null;\n}\nexport default findDOMElement;\n", "/**\n * Takes a full filename string and returns an object {name, extension}\n */\nexport default function getFileNameAndExtension(fullFileName) {\n    const lastDot = fullFileName.lastIndexOf('.');\n    // these count as no extension: \"no-dot\", \"trailing-dot.\"\n    if (lastDot === -1 || lastDot === fullFileName.length - 1) {\n        return {\n            name: fullFileName,\n            extension: undefined,\n        };\n    }\n    return {\n        name: fullFileName.slice(0, lastDot),\n        extension: fullFileName.slice(lastDot + 1),\n    };\n}\n", "// ___Why not add the mime-types package?\n//    It's 19.7kB gzipped, and we only need mime types for well-known extensions (for file previews).\n// ___Where to take new extensions from?\n//    https://github.com/jshttp/mime-db/blob/master/db.json\nexport default {\n    __proto__: null,\n    md: 'text/markdown',\n    markdown: 'text/markdown',\n    mp4: 'video/mp4',\n    mp3: 'audio/mp3',\n    svg: 'image/svg+xml',\n    jpg: 'image/jpeg',\n    png: 'image/png',\n    webp: 'image/webp',\n    gif: 'image/gif',\n    heic: 'image/heic',\n    heif: 'image/heif',\n    yaml: 'text/yaml',\n    yml: 'text/yaml',\n    csv: 'text/csv',\n    tsv: 'text/tab-separated-values',\n    tab: 'text/tab-separated-values',\n    avi: 'video/x-msvideo',\n    mks: 'video/x-matroska',\n    mkv: 'video/x-matroska',\n    mov: 'video/quicktime',\n    dicom: 'application/dicom',\n    doc: 'application/msword',\n    msg: 'application/vnd.ms-outlook',\n    docm: 'application/vnd.ms-word.document.macroenabled.12',\n    docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    dot: 'application/msword',\n    dotm: 'application/vnd.ms-word.template.macroenabled.12',\n    dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n    xla: 'application/vnd.ms-excel',\n    xlam: 'application/vnd.ms-excel.addin.macroenabled.12',\n    xlc: 'application/vnd.ms-excel',\n    xlf: 'application/x-xliff+xml',\n    xlm: 'application/vnd.ms-excel',\n    xls: 'application/vnd.ms-excel',\n    xlsb: 'application/vnd.ms-excel.sheet.binary.macroenabled.12',\n    xlsm: 'application/vnd.ms-excel.sheet.macroenabled.12',\n    xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    xlt: 'application/vnd.ms-excel',\n    xltm: 'application/vnd.ms-excel.template.macroenabled.12',\n    xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n    xlw: 'application/vnd.ms-excel',\n    txt: 'text/plain',\n    text: 'text/plain',\n    conf: 'text/plain',\n    log: 'text/plain',\n    pdf: 'application/pdf',\n    zip: 'application/zip',\n    '7z': 'application/x-7z-compressed',\n    rar: 'application/x-rar-compressed',\n    tar: 'application/x-tar',\n    gz: 'application/gzip',\n    dmg: 'application/x-apple-diskimage',\n};\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nimport mimeTypes from './mimeTypes.js';\nexport default function getFileType(file) {\n    if (file.type)\n        return file.type;\n    const fileExtension = file.name\n        ? getFileNameAndExtension(file.name).extension?.toLowerCase()\n        : null;\n    if (fileExtension && fileExtension in mimeTypes) {\n        // else, see if we can map extension to a mime type\n        return mimeTypes[fileExtension];\n    }\n    // if all fails, fall back to a generic byte stream type\n    return 'application/octet-stream';\n}\n", "import getFileType from './getFileType.js';\nfunction encodeCharacter(character) {\n    return character.charCodeAt(0).toString(32);\n}\nfunction encodeFilename(name) {\n    let suffix = '';\n    return (name.replace(/[^A-Z0-9]/gi, (character) => {\n        suffix += `-${encodeCharacter(character)}`;\n        return '/';\n    }) + suffix);\n}\n/**\n * Takes a file object and turns it into fileID, by converting file.name to lowercase,\n * removing extra characters and adding type, size and lastModified\n */\nexport default function generateFileID(file, instanceId) {\n    // It's tempting to do `[items].filter(Boolean).join('-')` here, but that\n    // is slower! simple string concatenation is fast\n    let id = instanceId || 'uppy';\n    if (typeof file.name === 'string') {\n        id += `-${encodeFilename(file.name.toLowerCase())}`;\n    }\n    if (file.type !== undefined) {\n        id += `-${file.type}`;\n    }\n    if (file.meta && typeof file.meta.relativePath === 'string') {\n        id += `-${encodeFilename(file.meta.relativePath.toLowerCase())}`;\n    }\n    if (file.data?.size !== undefined) {\n        id += `-${file.data.size}`;\n    }\n    if (file.data.lastModified !== undefined) {\n        id += `-${file.data.lastModified}`;\n    }\n    return id;\n}\n// If the provider has a stable, unique ID, then we can use that to identify the file.\n// Then we don't have to generate our own ID, and we can add the same file many times if needed (different path)\nfunction hasFileStableId(file) {\n    if (!file.isRemote || !file.remote)\n        return false;\n    // These are the providers that it seems like have stable IDs for their files. The other's I haven't checked yet.\n    const stableIdProviders = new Set([\n        'box',\n        'dropbox',\n        'drive',\n        'facebook',\n        'unsplash',\n    ]);\n    return stableIdProviders.has(file.remote.provider);\n}\nexport function getSafeFileId(file, instanceId) {\n    if (hasFileStableId(file))\n        return file.id;\n    const fileType = getFileType(file);\n    return generateFileID({\n        ...file,\n        type: fileType,\n    }, instanceId);\n}\n", "export default function getAllowedMetaFields(fields, meta) {\n    if (fields === true) {\n        return Object.keys(meta);\n    }\n    if (Array.isArray(fields)) {\n        return fields;\n    }\n    return [];\n}\n", "/**\n * Converts list into array\n */\nexport default Array.from;\n", "import toArray from '../../toArray.js';\n// .files fallback, should be implemented in any browser\nexport default function fallbackApi(dataTransfer) {\n    const files = toArray(dataTransfer.files);\n    return Promise.resolve(files);\n}\n", "/**\n * Recursive function, calls the original callback() when the directory is entirely parsed.\n */\nexport default function getFilesAndDirectoriesFromDirectory(directoryReader, oldEntries, logDropError, { onSuccess }) {\n    directoryReader.readEntries((entries) => {\n        const newEntries = [...oldEntries, ...entries];\n        // According to the FileSystem API spec, getFilesAndDirectoriesFromDirectory()\n        // must be called until it calls the onSuccess with an empty array.\n        if (entries.length) {\n            queueMicrotask(() => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, newEntries, logDropError, { onSuccess });\n            });\n            // Done iterating this particular directory\n        }\n        else {\n            onSuccess(newEntries);\n        }\n    }, \n    // Make sure we resolve on error anyway, it's fine if only one directory couldn't be parsed!\n    (error) => {\n        logDropError(error);\n        onSuccess(oldEntries);\n    });\n}\n", "import getFilesAndDirectoriesFromDirectory from './getFilesAndDirectoriesFromDirectory.js';\n/**\n * Polyfill for the new (experimental) getAsFileSystemHandle API (using the popular webkitGetAsEntry behind the scenes)\n * so that we can switch to the getAsFileSystemHandle API once it (hopefully) becomes standard\n */\nfunction getAsFileSystemHandleFromEntry(entry, logDropError) {\n    if (entry == null)\n        return entry;\n    return {\n        kind: entry.isFile\n            ? 'file'\n            : entry.isDirectory\n                ? 'directory'\n                : undefined,\n        name: entry.name,\n        getFile() {\n            return new Promise((resolve, reject) => entry.file(resolve, reject));\n        },\n        async *values() {\n            // If the file is a directory.\n            const directoryReader = entry.createReader();\n            const entries = await new Promise((resolve) => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, [], logDropError, {\n                    onSuccess: (dirEntries) => resolve(dirEntries.map((file) => getAsFileSystemHandleFromEntry(file, logDropError))),\n                });\n            });\n            yield* entries;\n        },\n        isSameEntry: undefined,\n    };\n}\nasync function* createPromiseToAddFileOrParseDirectory(entry, relativePath, lastResortFile = undefined) {\n    const getNextRelativePath = () => `${relativePath}/${entry.name}`;\n    // For each dropped item, - make sure it's a file/directory, and start deepening in!\n    if (entry.kind === 'file') {\n        const file = await entry.getFile();\n        if (file != null) {\n            ;\n            file.relativePath = relativePath ? getNextRelativePath() : null;\n            yield file;\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n    else if (entry.kind === 'directory') {\n        for await (const handle of entry.values()) {\n            // Recurse on the directory, appending the dir name to the relative path\n            yield* createPromiseToAddFileOrParseDirectory(handle, relativePath ? getNextRelativePath() : entry.name);\n        }\n    }\n    else if (lastResortFile != null)\n        yield lastResortFile;\n}\n/**\n * Load all files from data transfer, and recursively read any directories.\n * Note that IE is not supported for drag-drop, because IE doesn't support Data Transfers\n *\n * @param {DataTransfer} dataTransfer\n * @param {*} logDropError on error\n */\nexport default async function* getFilesFromDataTransfer(dataTransfer, logDropError) {\n    // Retrieving the dropped items must happen synchronously\n    // otherwise only the first item gets treated and the other ones are garbage collected.\n    // https://github.com/transloadit/uppy/pull/3998\n    const fileSystemHandles = await Promise.all(Array.from(dataTransfer.items, async (item) => {\n        // biome-ignore lint/style/useConst: ...\n        let fileSystemHandle;\n        // TODO enable getAsFileSystemHandle API once we can get it working with subdirectories\n        // IMPORTANT: Need to check isSecureContext *before* calling getAsFileSystemHandle\n        // or else Chrome will crash when running in HTTP: https://github.com/transloadit/uppy/issues/4133\n        // if (window.isSecureContext && item.getAsFileSystemHandle != null)\n        // fileSystemHandle = await item.getAsFileSystemHandle()\n        // `webkitGetAsEntry` exists in all popular browsers (including non-WebKit browsers),\n        // however it may be renamed to getAsEntry() in the future, so you should code defensively, looking for both.\n        // from https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\n        const getAsEntry = () => typeof item.getAsEntry === 'function'\n            ? item.getAsEntry()\n            : item.webkitGetAsEntry();\n        fileSystemHandle ??= getAsFileSystemHandleFromEntry(getAsEntry(), logDropError);\n        return {\n            fileSystemHandle,\n            lastResortFile: item.getAsFile(), // can be used as a fallback in case other methods fail\n        };\n    }));\n    for (const { lastResortFile, fileSystemHandle } of fileSystemHandles) {\n        // fileSystemHandle and lastResortFile can be null when we drop an url.\n        if (fileSystemHandle != null) {\n            try {\n                yield* createPromiseToAddFileOrParseDirectory(fileSystemHandle, '', lastResortFile);\n            }\n            catch (err) {\n                // Example: If dropping a symbolic link, Chromium will throw:\n                // \"DOMException: A requested file or directory could not be found at the time an operation was processed.\",\n                // So we will use lastResortFile instead. See https://github.com/transloadit/uppy/issues/3505.\n                if (lastResortFile != null) {\n                    yield lastResortFile;\n                }\n                else {\n                    logDropError(err);\n                }\n            }\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n}\n", "import fallbackApi from './utils/fallbackApi.js';\nimport webkitGetAsEntryApi from './utils/webkitGetAsEntryApi/index.js';\n/**\n * Returns a promise that resolves to the array of dropped files (if a folder is\n * dropped, and browser supports folder parsing - promise resolves to the flat\n * array of all files in all directories).\n * Each file has .relativePath prop appended to it (e.g. \"/docs/Prague/ticket_from_prague_to_ufa.pdf\")\n * if browser supports it. Otherwise it's undefined.\n *\n * @param dataTransfer\n * @param options\n * @param options.logDropError - a function that's called every time some\n * folder or some file error out (e.g. because of the folder name being too long\n * on Windows). Notice that resulting promise will always be resolved anyway.\n *\n * @returns {Promise} - Array<File>\n */\nexport default async function getDroppedFiles(dataTransfer, options) {\n    // Get all files from all subdirs. Works (at least) in Chrome, Mozilla, and Safari\n    const logDropError = options?.logDropError ?? Function.prototype;\n    try {\n        const accumulator = [];\n        for await (const file of webkitGetAsEntryApi(dataTransfer, logDropError)) {\n            accumulator.push(file);\n        }\n        return accumulator;\n        // Otherwise just return all first-order files\n    }\n    catch {\n        return fallbackApi(dataTransfer);\n    }\n}\n", "const mimeToExtensions = {\n    __proto__: null,\n    'audio/mp3': 'mp3',\n    'audio/mp4': 'mp4',\n    'audio/ogg': 'ogg',\n    'audio/webm': 'webm',\n    'image/gif': 'gif',\n    'image/heic': 'heic',\n    'image/heif': 'heif',\n    'image/jpeg': 'jpg',\n    'image/webp': 'webp',\n    'image/png': 'png',\n    'image/svg+xml': 'svg',\n    'video/mp4': 'mp4',\n    'video/ogg': 'ogv',\n    'video/quicktime': 'mov',\n    'video/webm': 'webm',\n    'video/x-matroska': 'mkv',\n    'video/x-msvideo': 'avi',\n};\nexport default function getFileTypeExtension(mimeType) {\n    // Remove the ; bit in 'video/x-matroska;codecs=avc1'\n    ;\n    [mimeType] = mimeType.split(';', 1);\n    return mimeToExtensions[mimeType] || null;\n}\n", "/**\n * Get the declared text direction for an element.\n */\nfunction getTextDirection(element) {\n    // There is another way to determine text direction using getComputedStyle(), as done here:\n    // https://github.com/pencil-js/text-direction/blob/2a235ce95089b3185acec3b51313cbba921b3811/text-direction.js\n    //\n    // We do not use that approach because we are interested specifically in the _declared_ text direction.\n    // If no text direction is declared, we have to provide our own explicit text direction so our\n    // bidirectional CSS style sheets work.\n    while (element && !element.dir) {\n        element = element.parentNode;\n    }\n    return element?.dir;\n}\nexport default getTextDirection;\n", "/**\n * Adds zero to strings shorter than two characters.\n */\nfunction pad(number) {\n    return number < 10 ? `0${number}` : number.toString();\n}\n/**\n * Returns a timestamp in the format of `hours:minutes:seconds`\n */\nexport default function getTimeStamp() {\n    const date = new Date();\n    const hours = pad(date.getHours());\n    const minutes = pad(date.getMinutes());\n    const seconds = pad(date.getSeconds());\n    return `${hours}:${minutes}:${seconds}`;\n}\n", "/**\n * Checks if the browser supports Drag & Drop (not supported on mobile devices, for example).\n */\nexport default function isDragDropSupported() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    const body = document.body;\n    // sometimes happens in the wild: https://github.com/transloadit/uppy/issues/5953\n    if (body == null || window == null) {\n        return false;\n    }\n    if (!('draggable' in body) ||\n        !('ondragstart' in body) ||\n        !('ondrop' in body)) {\n        return false;\n    }\n    if (!('FormData' in window)) {\n        return false;\n    }\n    if (!('FileReader' in window)) {\n        return false;\n    }\n    return true;\n}\n", "function isNetworkError(xhr) {\n    if (!xhr)\n        return false;\n    // finished but status is 0 \u2014 usually indicates a network/CORS/file error\n    return xhr.readyState === 4 && xhr.status === 0;\n}\nexport default isNetworkError;\n", "/**\n * Check if a URL string is an object URL from `URL.createObjectURL`.\n */\nexport default function isObjectURL(url) {\n    return url.startsWith('blob:');\n}\n", "export default function isPreviewSupported(fileType) {\n    if (!fileType)\n        return false;\n    // list of images that browsers can preview\n    return /^[^/]+\\/(jpe?g|gif|png|svg|svg\\+xml|bmp|webp|avif)$/.test(fileType);\n}\n", "export default function secondsToTime(rawSeconds) {\n    const hours = Math.floor(rawSeconds / 3600) % 24;\n    const minutes = Math.floor(rawSeconds / 60) % 60;\n    const seconds = Math.floor(rawSeconds % 60);\n    return { hours, minutes, seconds };\n}\n", "import secondsToTime from './secondsToTime.js';\nexport default function prettyETA(seconds) {\n    const time = secondsToTime(seconds);\n    // Only display hours and minutes if they are greater than 0 but always\n    // display minutes if hours is being displayed\n    // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s\n    const hoursStr = time.hours === 0 ? '' : `${time.hours}h`;\n    const minutesStr = time.minutes === 0\n        ? ''\n        : `${time.hours === 0\n            ? time.minutes\n            : ` ${time.minutes.toString(10).padStart(2, '0')}`}m`;\n    const secondsStr = time.hours !== 0\n        ? ''\n        : `${time.minutes === 0\n            ? time.seconds\n            : ` ${time.seconds.toString(10).padStart(2, '0')}`}s`;\n    return `${hoursStr}${minutesStr}${secondsStr}`;\n}\n", "function createCancelError(cause) {\n    return new Error('Cancelled', { cause });\n}\nfunction abortOn(signal) {\n    if (signal != null) {\n        const abortPromise = () => this.abort(signal.reason);\n        signal.addEventListener('abort', abortPromise, { once: true });\n        const removeAbortListener = () => {\n            signal.removeEventListener('abort', abortPromise);\n        };\n        this.then?.(removeAbortListener, removeAbortListener);\n    }\n    return this;\n}\nexport class RateLimitedQueue {\n    #activeRequests = 0;\n    #queuedHandlers = [];\n    #paused = false;\n    #pauseTimer;\n    #downLimit = 1;\n    #upperLimit;\n    #rateLimitingTimer;\n    limit;\n    constructor(limit) {\n        if (typeof limit !== 'number' || limit === 0) {\n            this.limit = Infinity;\n        }\n        else {\n            this.limit = limit;\n        }\n    }\n    #call(fn) {\n        this.#activeRequests += 1;\n        let done = false;\n        let cancelActive;\n        try {\n            cancelActive = fn();\n        }\n        catch (err) {\n            this.#activeRequests -= 1;\n            throw err;\n        }\n        return {\n            abort: (cause) => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                cancelActive?.(cause);\n                this.#queueNext();\n            },\n            done: () => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                this.#queueNext();\n            },\n        };\n    }\n    #queueNext() {\n        // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n        // one by one without continuously _advancing_ it (and starting new tasks before immediately\n        // aborting them)\n        queueMicrotask(() => this.#next());\n    }\n    #next() {\n        if (this.#paused || this.#activeRequests >= this.limit) {\n            return;\n        }\n        if (this.#queuedHandlers.length === 0) {\n            return;\n        }\n        // Dispatch the next request, and update the abort/done handlers\n        // so that cancelling it does the Right Thing (and doesn't just try\n        // to dequeue an already-running request).\n        const next = this.#queuedHandlers.shift();\n        if (next == null) {\n            throw new Error('Invariant violation: next is null');\n        }\n        const handler = this.#call(next.fn);\n        next.abort = handler.abort;\n        next.done = handler.done;\n    }\n    #queue(fn, options) {\n        const handler = {\n            fn,\n            priority: options?.priority || 0,\n            abort: () => {\n                this.#dequeue(handler);\n            },\n            done: () => {\n                throw new Error('Cannot mark a queued request as done: this indicates a bug');\n            },\n        };\n        const index = this.#queuedHandlers.findIndex((other) => {\n            return handler.priority > other.priority;\n        });\n        if (index === -1) {\n            this.#queuedHandlers.push(handler);\n        }\n        else {\n            this.#queuedHandlers.splice(index, 0, handler);\n        }\n        return handler;\n    }\n    #dequeue(handler) {\n        const index = this.#queuedHandlers.indexOf(handler);\n        if (index !== -1) {\n            this.#queuedHandlers.splice(index, 1);\n        }\n    }\n    run(fn, queueOptions) {\n        if (!this.#paused && this.#activeRequests < this.limit) {\n            return this.#call(fn);\n        }\n        return this.#queue(fn, queueOptions);\n    }\n    wrapSyncFunction(fn, queueOptions) {\n        return (...args) => {\n            const queuedRequest = this.run(() => {\n                fn(...args);\n                queueMicrotask(() => queuedRequest.done());\n                return () => { };\n            }, queueOptions);\n            return {\n                abortOn,\n                abort() {\n                    queuedRequest.abort();\n                },\n            };\n        };\n    }\n    wrapPromiseFunction(fn, queueOptions) {\n        return (...args) => {\n            let queuedRequest;\n            const outerPromise = new Promise((resolve, reject) => {\n                queuedRequest = this.run(() => {\n                    let cancelError;\n                    let innerPromise;\n                    try {\n                        innerPromise = Promise.resolve(fn(...args));\n                    }\n                    catch (err) {\n                        innerPromise = Promise.reject(err);\n                    }\n                    innerPromise.then((result) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            resolve(result);\n                        }\n                    }, (err) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            reject(err);\n                        }\n                    });\n                    return (cause) => {\n                        cancelError = createCancelError(cause);\n                    };\n                }, queueOptions);\n            });\n            outerPromise.abort = (cause) => {\n                queuedRequest.abort(cause);\n            };\n            outerPromise.abortOn = abortOn;\n            return outerPromise;\n        };\n    }\n    resume() {\n        this.#paused = false;\n        clearTimeout(this.#pauseTimer);\n        for (let i = 0; i < this.limit; i++) {\n            this.#queueNext();\n        }\n    }\n    #resume = () => this.resume();\n    /**\n     * Freezes the queue for a while or indefinitely.\n     *\n     * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n     *                                    If omitted, the queue won't resume automatically.\n     */\n    pause(duration = null) {\n        this.#paused = true;\n        clearTimeout(this.#pauseTimer);\n        if (duration != null) {\n            this.#pauseTimer = setTimeout(this.#resume, duration);\n        }\n    }\n    /**\n     * Pauses the queue for a duration, and lower the limit of concurrent requests\n     * when the queue resumes. When the queue resumes, it tries to progressively\n     * increase the limit in `this.#increaseLimit` until another call is made to\n     * `this.rateLimit`.\n     * Call this function when using the RateLimitedQueue for network requests and\n     * the remote server responds with 429 HTTP code.\n     *\n     * @param {number} duration in milliseconds.\n     */\n    rateLimit(duration) {\n        clearTimeout(this.#rateLimitingTimer);\n        this.pause(duration);\n        if (this.limit > 1 && Number.isFinite(this.limit)) {\n            this.#upperLimit = this.limit - 1;\n            this.limit = this.#downLimit;\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, duration);\n        }\n    }\n    #increaseLimit = () => {\n        if (this.#paused) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 0);\n            return;\n        }\n        this.#downLimit = this.limit;\n        this.limit = Math.ceil((this.#upperLimit + this.#downLimit) / 2);\n        for (let i = this.#downLimit; i <= this.limit; i++) {\n            this.#queueNext();\n        }\n        if (this.#upperLimit - this.#downLimit > 3) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 2000);\n        }\n        else {\n            this.#downLimit = Math.floor(this.#downLimit / 2);\n        }\n    };\n    get isPaused() {\n        return this.#paused;\n    }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nexport default function remoteFileObjToLocal(file) {\n    return {\n        ...file,\n        type: file.mimeType,\n        extension: file.name ? getFileNameAndExtension(file.name).extension : null,\n    };\n}\n", "function insertReplacement(source, rx, replacement) {\n    const newParts = [];\n    source.forEach((chunk) => {\n        // When the source contains multiple placeholders for interpolation,\n        // we should ignore chunks that are not strings, because those\n        // can be JSX objects and will be otherwise incorrectly turned into strings.\n        // Without this condition we\u2019d get this: [object Object] hello [object Object] my <button>\n        if (typeof chunk !== 'string') {\n            return newParts.push(chunk);\n        }\n        return rx[Symbol.split](chunk).forEach((raw, i, list) => {\n            if (raw !== '') {\n                newParts.push(raw);\n            }\n            // Interlace with the `replacement` value\n            if (i < list.length - 1) {\n                newParts.push(replacement);\n            }\n        });\n    });\n    return newParts;\n}\n/**\n * Takes a string with placeholder variables like `%{smart_count} file selected`\n * and replaces it with values from options `{smart_count: 5}`\n *\n * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n *\n * @param phrase that needs interpolation, with placeholders\n * @param options with values that will be used to replace placeholders\n */\nfunction interpolate(phrase, options) {\n    const dollarRegex = /\\$/g;\n    const dollarBillsYall = '$$$$';\n    let interpolated = [phrase];\n    if (options == null)\n        return interpolated;\n    for (const arg of Object.keys(options)) {\n        if (arg !== '_') {\n            // Ensure replacement value is escaped to prevent special $-prefixed\n            // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n            // be escaped with \"$\" itself, and we need two in the resulting output.\n            let replacement = options[arg];\n            if (typeof replacement === 'string') {\n                replacement = dollarRegex[Symbol.replace](replacement, dollarBillsYall);\n            }\n            // We create a new `RegExp` each time instead of using a more-efficient\n            // string replace so that the same argument can be replaced multiple times\n            // in the same phrase.\n            interpolated = insertReplacement(interpolated, new RegExp(`%\\\\{${arg}\\\\}`, 'g'), replacement);\n        }\n    }\n    return interpolated;\n}\nconst defaultOnMissingKey = (key) => {\n    throw new Error(`missing string: ${key}`);\n};\n/**\n * Translates strings with interpolation & pluralization support.\n * Extensible with custom dictionaries and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n */\nexport default class Translator {\n    locale;\n    constructor(locales, { onMissingKey = defaultOnMissingKey } = {}) {\n        this.locale = {\n            strings: {},\n            pluralize(n) {\n                if (n === 1) {\n                    return 0;\n                }\n                return 1;\n            },\n        };\n        if (Array.isArray(locales)) {\n            locales.forEach(this.#apply, this);\n        }\n        else {\n            this.#apply(locales);\n        }\n        this.#onMissingKey = onMissingKey;\n    }\n    #onMissingKey;\n    #apply(locale) {\n        if (!locale?.strings) {\n            return;\n        }\n        const prevLocale = this.locale;\n        Object.assign(this.locale, {\n            strings: { ...prevLocale.strings, ...locale.strings },\n            pluralize: locale.pluralize || prevLocale.pluralize,\n        });\n    }\n    /**\n     * Public translate method\n     *\n     * @param key\n     * @param options with values that will be used later to replace placeholders in string\n     * @returns string translated (and interpolated)\n     */\n    translate(key, options) {\n        return this.translateArray(key, options).join('');\n    }\n    /**\n     * Get a translation and return the translated and interpolated parts as an array.\n     *\n     * @returns The translated and interpolated parts, in order.\n     */\n    translateArray(key, options) {\n        let string = this.locale.strings[key];\n        if (string == null) {\n            this.#onMissingKey(key);\n            string = key;\n        }\n        const hasPluralForms = typeof string === 'object';\n        if (hasPluralForms) {\n            if (options && typeof options.smart_count !== 'undefined') {\n                const plural = this.locale.pluralize(options.smart_count);\n                return interpolate(string[plural], options);\n            }\n            throw new Error('Attempted to use a string with plural forms, but no value was given for %{smart_count}');\n        }\n        if (typeof string !== 'string') {\n            throw new Error(`string was not a string`);\n        }\n        return interpolate(string, options);\n    }\n}\n", "/**\n * Truncates a string to the given number of chars (maxLength) by inserting '...' in the middle of that string.\n * Partially taken from https://stackoverflow.com/a/5723274/3192470.\n */\nconst separator = '...';\nexport default function truncateString(string, maxLength) {\n    // Return the empty string if maxLength is zero\n    if (maxLength === 0)\n        return '';\n    // Return original string if it's already shorter than maxLength\n    if (string.length <= maxLength)\n        return string;\n    // Return truncated substring appended of the ellipsis char if string can't be meaningfully truncated\n    if (maxLength <= separator.length + 1)\n        return `${string.slice(0, maxLength - 1)}\u2026`;\n    const charsToShow = maxLength - separator.length;\n    const frontChars = Math.ceil(charsToShow / 2);\n    const backChars = Math.floor(charsToShow / 2);\n    return string.slice(0, frontChars) + separator + string.slice(-backChars);\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nconst STYLE_INNER = {\n    position: 'relative',\n    // Disabled for our use case: the wrapper elements around FileList already deal with overflow,\n    // and this additional property would hide things that we want to show.\n    //\n    // overflow: 'hidden',\n    width: '100%',\n    minHeight: '100%',\n};\nconst STYLE_CONTENT = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // Because the `top` value gets set to some offset, this `height` being 100% would make the scrollbar\n    // stretch far beyond the content. For our use case, the content div actually can get its height from\n    // the elements inside it, so we don't need to specify a `height` property at all.\n    //\n    // height: '100%',\n    width: '100%',\n    overflow: 'visible',\n};\nexport default function VirtualList({ data, rowHeight, renderRow, overscanCount = 10, padding = 4, ...props }) {\n    const scrollerRef = useRef(null);\n    const [offset, setOffset] = useState(0);\n    const [height, setHeight] = useState(0);\n    useEffect(() => {\n        function resize() {\n            if (scrollerRef.current != null &&\n                height !== scrollerRef.current.offsetHeight) {\n                setHeight(scrollerRef.current.offsetHeight);\n            }\n        }\n        resize();\n        window.addEventListener('resize', resize);\n        return () => {\n            window.removeEventListener('resize', resize);\n        };\n    }, [height]);\n    const handleScroll = useCallback(() => {\n        if (scrollerRef.current)\n            setOffset(scrollerRef.current.scrollTop);\n    }, []);\n    // first visible row index\n    let start = Math.floor(offset / rowHeight);\n    // actual number of visible rows (without overscan)\n    let visibleRowCount = Math.floor(height / rowHeight);\n    // Overscan: render blocks of rows modulo an overscan row count\n    // This dramatically reduces DOM writes during scrolling\n    if (overscanCount) {\n        start = Math.max(0, start - (start % overscanCount));\n        visibleRowCount += overscanCount;\n    }\n    const end = start + visibleRowCount + padding;\n    // data slice currently in viewport plus overscan items\n    const selection = data.slice(start, end);\n    const styleInner = { ...STYLE_INNER, height: data.length * rowHeight };\n    const styleContent = { ...STYLE_CONTENT, top: start * rowHeight };\n    // The `role=\"presentation\"` attributes ensure that these wrapper elements are not treated as list\n    // items by accessibility and outline tools.\n    return (_jsx(\"div\", { onScroll: handleScroll, ref: scrollerRef, ...props, children: _jsx(\"div\", { role: \"presentation\", style: styleInner, children: _jsx(\"div\", { role: \"presentation\", style: styleContent, children: selection.map(renderRow) }) }) }));\n}\n", "/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\nimport { Translator } from '@uppy/utils';\nexport default class BasePlugin {\n    uppy;\n    opts;\n    id;\n    defaultLocale;\n    i18n;\n    i18nArray;\n    type;\n    VERSION;\n    constructor(uppy, opts) {\n        this.uppy = uppy;\n        this.opts = opts ?? {};\n    }\n    getPluginState() {\n        const { plugins } = this.uppy.getState();\n        return (plugins?.[this.id] || {});\n    }\n    setPluginState(update) {\n        const { plugins } = this.uppy.getState();\n        this.uppy.setState({\n            plugins: {\n                ...plugins,\n                [this.id]: {\n                    ...plugins[this.id],\n                    ...update,\n                },\n            },\n        });\n    }\n    setOptions(newOpts) {\n        this.opts = { ...this.opts, ...newOpts };\n        this.setPluginState(undefined); // so that UI re-renders with new options\n        this.i18nInit();\n    }\n    i18nInit() {\n        const translator = new Translator([\n            this.defaultLocale,\n            this.uppy.locale,\n            this.opts.locale,\n        ]);\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.setPluginState(undefined); // so that UI re-renders and we see the updated locale\n    }\n    /**\n     * Extendable methods\n     * ==================\n     * These methods are here to serve as an overview of the extendable methods as well as\n     * making them not conditional in use, such as `if (this.afterUpdate)`.\n     */\n    addTarget(plugin) {\n        throw new Error(\"Extend the addTarget method to add your plugin to another plugin's target\");\n    }\n    install() { }\n    uninstall() { }\n    update(state) { }\n    // Called after every state update, after everything's mounted. Debounced.\n    afterUpdate() { }\n}\n", "/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n    #uppy;\n    #events = [];\n    constructor(uppy) {\n        this.#uppy = uppy;\n    }\n    on(event, fn) {\n        this.#events.push([event, fn]);\n        return this.#uppy.on(event, fn);\n    }\n    remove() {\n        for (const [event, fn] of this.#events.splice(0)) {\n            this.#uppy.off(event, fn);\n        }\n    }\n    onFilePause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                cb(isPaused);\n            }\n        });\n    }\n    onFileRemove(fileID, cb) {\n        this.on('file-removed', (file) => {\n            if (fileID === file.id)\n                cb(file.id);\n        });\n    }\n    onPause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                // const isPaused = this.#uppy.pauseResume(fileID)\n                cb(isPaused);\n            }\n        });\n    }\n    onRetry(fileID, cb) {\n        this.on('upload-retry', (file) => {\n            if (fileID === file?.id) {\n                cb();\n            }\n        });\n    }\n    onRetryAll(fileID, cb) {\n        this.on('retry-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onPauseAll(fileID, cb) {\n        this.on('pause-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onCancelAll(fileID, eventHandler) {\n        this.on('cancel-all', (...args) => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            eventHandler(...args);\n        });\n    }\n    onResumeAll(fileID, cb) {\n        this.on('resume-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n}\n", "import { getTimeStamp } from '@uppy/utils';\n// Swallow all logs, except errors.\n// default if logger is not set or debug: false\nconst justErrorsLogger = {\n    debug: () => { },\n    warn: () => { },\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\n// Print logs to console with namespace + timestamp,\n// set by logger: Uppy.debugLogger or debug: true\nconst debugLogger = {\n    debug: (...args) => console.debug(`[Uppy] [${getTimeStamp()}]`, ...args),\n    warn: (...args) => console.warn(`[Uppy] [${getTimeStamp()}]`, ...args),\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\nexport { justErrorsLogger, debugLogger };\n", "import prettierBytes from '@transloadit/prettier-bytes';\n// @ts-ignore untyped\nimport match from 'mime-match';\nconst defaultOptions = {\n    maxFileSize: null,\n    minFileSize: null,\n    maxTotalFileSize: null,\n    maxNumberOfFiles: null,\n    minNumberOfFiles: null,\n    allowedFileTypes: null,\n    requiredMetaFields: [],\n};\nclass RestrictionError extends Error {\n    isUserFacing;\n    file;\n    constructor(message, opts) {\n        super(message);\n        this.isUserFacing = opts?.isUserFacing ?? true;\n        if (opts?.file) {\n            this.file = opts.file; // only some restriction errors are related to a particular file\n        }\n    }\n    isRestriction = true;\n}\nclass Restricter {\n    getI18n;\n    getOpts;\n    constructor(getOpts, getI18n) {\n        this.getI18n = getI18n;\n        this.getOpts = () => {\n            const opts = getOpts();\n            if (opts.restrictions?.allowedFileTypes != null &&\n                !Array.isArray(opts.restrictions.allowedFileTypes)) {\n                throw new TypeError('`restrictions.allowedFileTypes` must be an array');\n            }\n            return opts;\n        };\n    }\n    // Because these operations are slow, we cannot run them for every file (if we are adding multiple files)\n    validateAggregateRestrictions(existingFiles, addingFiles) {\n        const { maxTotalFileSize, maxNumberOfFiles } = this.getOpts().restrictions;\n        if (maxNumberOfFiles) {\n            const nonGhostFiles = existingFiles.filter((f) => !f.isGhost);\n            if (nonGhostFiles.length + addingFiles.length > maxNumberOfFiles) {\n                throw new RestrictionError(`${this.getI18n()('youCanOnlyUploadX', {\n                    smart_count: maxNumberOfFiles,\n                })}`);\n            }\n        }\n        if (maxTotalFileSize) {\n            const totalFilesSize = [...existingFiles, ...addingFiles].reduce((total, f) => total + (f.size ?? 0), 0);\n            if (totalFilesSize > maxTotalFileSize) {\n                throw new RestrictionError(this.getI18n()('aggregateExceedsSize', {\n                    sizeAllowed: prettierBytes(maxTotalFileSize),\n                    size: prettierBytes(totalFilesSize),\n                }));\n            }\n        }\n    }\n    validateSingleFile(file) {\n        const { maxFileSize, minFileSize, allowedFileTypes } = this.getOpts().restrictions;\n        if (allowedFileTypes) {\n            const isCorrectFileType = allowedFileTypes.some((type) => {\n                // check if this is a mime-type\n                if (type.includes('/')) {\n                    if (!file.type)\n                        return false;\n                    return match(file.type.replace(/;.*?$/, ''), type);\n                }\n                // otherwise this is likely an extension\n                if (type[0] === '.' && file.extension) {\n                    return file.extension.toLowerCase() === type.slice(1).toLowerCase();\n                }\n                return false;\n            });\n            if (!isCorrectFileType) {\n                const allowedFileTypesString = allowedFileTypes.join(', ');\n                throw new RestrictionError(this.getI18n()('youCanOnlyUploadFileTypes', {\n                    types: allowedFileTypesString,\n                }), { file });\n            }\n        }\n        // We can't check maxFileSize if the size is unknown.\n        if (maxFileSize && file.size != null && file.size > maxFileSize) {\n            throw new RestrictionError(this.getI18n()('exceedsSize', {\n                size: prettierBytes(maxFileSize),\n                file: file.name ?? this.getI18n()('unnamed'),\n            }), { file });\n        }\n        // We can't check minFileSize if the size is unknown.\n        if (minFileSize && file.size != null && file.size < minFileSize) {\n            throw new RestrictionError(this.getI18n()('inferiorSize', {\n                size: prettierBytes(minFileSize),\n            }), { file });\n        }\n    }\n    validate(existingFiles, addingFiles) {\n        addingFiles.forEach((addingFile) => {\n            this.validateSingleFile(addingFile);\n        });\n        this.validateAggregateRestrictions(existingFiles, addingFiles);\n    }\n    validateMinNumberOfFiles(files) {\n        const { minNumberOfFiles } = this.getOpts().restrictions;\n        if (minNumberOfFiles && Object.keys(files).length < minNumberOfFiles) {\n            throw new RestrictionError(this.getI18n()('youHaveToAtLeastSelectX', {\n                smart_count: minNumberOfFiles,\n            }));\n        }\n    }\n    getMissingRequiredMetaFields(file) {\n        const error = new RestrictionError(this.getI18n()('missingRequiredMetaFieldOnFile', {\n            fileName: file.name ?? this.getI18n()('unnamed'),\n        }));\n        const { requiredMetaFields } = this.getOpts().restrictions;\n        const missingFields = [];\n        for (const field of requiredMetaFields) {\n            if (!Object.hasOwn(file.meta, field) || file.meta[field] === '') {\n                missingFields.push(field);\n            }\n        }\n        return { missingFields, error };\n    }\n}\nexport { Restricter, defaultOptions, RestrictionError };\n", "import { findDOMElement, getTextDirection } from '@uppy/utils';\nimport { render } from 'preact';\nimport BasePlugin from './BasePlugin.js';\n/**\n * Defer a frequent call to the microtask queue.\n */\nfunction debounce(fn) {\n    let calling = null;\n    let latestArgs;\n    return (...args) => {\n        latestArgs = args;\n        if (!calling) {\n            calling = Promise.resolve().then(() => {\n                calling = null;\n                // At this point `args` may be different from the most\n                // recent state, if multiple calls happened since this task\n                // was queued. So we use the `latestArgs`, which definitely\n                // is the most recent call.\n                return fn(...latestArgs);\n            });\n        }\n        return calling;\n    };\n}\n/**\n * UIPlugin is the extended version of BasePlugin to incorporate rendering with Preact.\n * Use this for plugins that need a user interface.\n *\n * For plugins without an user interface, see BasePlugin.\n */\nclass UIPlugin extends BasePlugin {\n    #updateUI;\n    isTargetDOMEl;\n    el;\n    parent;\n    title;\n    getTargetPlugin(target) {\n        let targetPlugin;\n        if (typeof target?.addTarget === 'function') {\n            // Targeting a plugin *instance*\n            targetPlugin = target;\n            if (!(targetPlugin instanceof UIPlugin)) {\n                console.warn(new Error('The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.', { cause: { targetPlugin, UIPlugin } }));\n            }\n        }\n        else if (typeof target === 'function') {\n            // Targeting a plugin type\n            const Target = target;\n            // Find the target plugin instance.\n            this.uppy.iteratePlugins((p) => {\n                if (p instanceof Target) {\n                    targetPlugin = p;\n                }\n            });\n        }\n        return targetPlugin;\n    }\n    /**\n     * Check if supplied `target` is a DOM element or an `object`.\n     * If it\u2019s an object \u2014 target is a plugin, and we search `plugins`\n     * for a plugin with same name and return its target.\n     */\n    mount(target, plugin) {\n        const callerPluginName = plugin.id;\n        const targetElement = findDOMElement(target);\n        if (targetElement) {\n            this.isTargetDOMEl = true;\n            // When target is <body> with a single <div> element,\n            // Preact thinks it\u2019s the Uppy root element in there when doing a diff,\n            // and destroys it. So we are creating a fragment (could be empty div)\n            const uppyRootElement = document.createElement('div');\n            uppyRootElement.classList.add('uppy-Root');\n            // API for plugins that require a synchronous rerender.\n            this.#updateUI = debounce((state) => {\n                // plugin could be removed, but this.rerender is debounced below,\n                // so it could still be called even after uppy.removePlugin or uppy.destroy\n                // hence the check\n                if (!this.uppy.getPlugin(this.id))\n                    return;\n                render(this.render(state, uppyRootElement), uppyRootElement);\n                this.afterUpdate();\n            });\n            this.uppy.log(`Installing ${callerPluginName} to a DOM element '${target}'`);\n            if (this.opts.replaceTargetContent) {\n                // Doing render(h(null), targetElement), which should have been\n                // a better way, since because the component might need to do additional cleanup when it is removed,\n                // stopped working \u2014 Preact just adds null into target, not replacing\n                targetElement.innerHTML = '';\n            }\n            render(this.render(this.uppy.getState(), uppyRootElement), uppyRootElement);\n            this.el = uppyRootElement;\n            targetElement.appendChild(uppyRootElement);\n            // Set the text direction if the page has not defined one.\n            uppyRootElement.dir =\n                this.opts.direction || getTextDirection(uppyRootElement) || 'ltr';\n            this.onMount();\n            return this.el;\n        }\n        const targetPlugin = this.getTargetPlugin(target);\n        if (targetPlugin) {\n            this.uppy.log(`Installing ${callerPluginName} to ${targetPlugin.id}`);\n            this.parent = targetPlugin;\n            this.el = targetPlugin.addTarget(plugin);\n            this.onMount();\n            return this.el;\n        }\n        this.uppy.log(`Not installing ${callerPluginName}`);\n        let message = `Invalid target option given to ${callerPluginName}.`;\n        if (typeof target === 'function') {\n            message +=\n                ' The given target is not a Plugin class. ' +\n                    \"Please check that you're not specifying a React Component instead of a plugin. \" +\n                    'If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: ' +\n                    'run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.';\n        }\n        else {\n            message +=\n                'If you meant to target an HTML element, please make sure that the element exists. ' +\n                    'Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. ' +\n                    '(see https://github.com/transloadit/uppy/issues/1042)\\n\\n' +\n                    'If you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.';\n        }\n        throw new Error(message);\n    }\n    /**\n     * Called when plugin is mounted, whether in DOM or into another plugin.\n     * Needed because sometimes plugins are mounted separately/after `install`,\n     * so this.el and this.parent might not be available in `install`.\n     * This is the case with @uppy/react plugins, for example.\n     */\n    render(state, container) {\n        throw new Error('Extend the render method to add your plugin to a DOM element');\n    }\n    update(state) {\n        if (this.el != null) {\n            this.#updateUI?.(state);\n        }\n    }\n    unmount() {\n        if (this.isTargetDOMEl) {\n            this.el?.remove();\n        }\n        this.onUnmount();\n    }\n    onMount() { }\n    onUnmount() { }\n}\nexport default UIPlugin;\n", "{\n  \"name\": \"@uppy/store-default\",\n  \"description\": \"The default simple object-based store for Uppy.\",\n  \"version\": \"5.0.0\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-store\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ]\n}", "import packageJson from '../package.json' with { type: 'json' };\n/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n    static VERSION = packageJson.version;\n    state = {};\n    #callbacks = new Set();\n    getState() {\n        return this.state;\n    }\n    setState(patch) {\n        const prevState = { ...this.state };\n        const nextState = { ...this.state, ...patch };\n        this.state = nextState;\n        this.#publish(prevState, nextState, patch);\n    }\n    subscribe(listener) {\n        this.#callbacks.add(listener);\n        return () => {\n            this.#callbacks.delete(listener);\n        };\n    }\n    #publish(...args) {\n        this.#callbacks.forEach((listener) => {\n            listener(...args);\n        });\n    }\n}\nexport default DefaultStore;\n", "/* global AggregateError */\nimport DefaultStore, {} from '@uppy/store-default';\nimport { getFileNameAndExtension, getFileType, getSafeFileId, Translator, } from '@uppy/utils';\nimport throttle from 'lodash/throttle.js';\n// @ts-ignore untyped\nimport ee from 'namespace-emitter';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport getFileName from './getFileName.js';\nimport locale from './locale.js';\nimport { debugLogger, justErrorsLogger } from './loggers.js';\nimport { defaultOptions as defaultRestrictionOptions, Restricter, RestrictionError, } from './Restricter.js';\nimport supportsUploadProgress from './supportsUploadProgress.js';\nconst defaultUploadState = {\n    totalProgress: 0,\n    allowNewUpload: true,\n    error: null,\n    recoveredState: null,\n};\n/**\n * Uppy Core module.\n * Manages plugins, state updates, acts as an event bus,\n * adds/removes files and metadata.\n */\nexport class Uppy {\n    static VERSION = packageJson.version;\n    #plugins = Object.create(null);\n    #restricter;\n    #storeUnsubscribe;\n    #emitter = ee();\n    #preProcessors = new Set();\n    #uploaders = new Set();\n    #postProcessors = new Set();\n    defaultLocale;\n    locale;\n    // The user optionally passes in options, but we set defaults for missing options.\n    // We consider all options present after the contructor has run.\n    opts;\n    store;\n    // Warning: do not use this from a plugin, as it will cause the plugins' translations to be missing\n    i18n;\n    i18nArray;\n    scheduledAutoProceed = null;\n    wasOffline = false;\n    /**\n     * Instantiate Uppy\n     */\n    constructor(opts) {\n        this.defaultLocale = locale;\n        const defaultOptions = {\n            id: 'uppy',\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            debug: false,\n            restrictions: defaultRestrictionOptions,\n            meta: {},\n            onBeforeFileAdded: (file, files) => !Object.hasOwn(files, file.id),\n            onBeforeUpload: (files) => files,\n            store: new DefaultStore(),\n            logger: justErrorsLogger,\n            infoTimeout: 5000,\n        };\n        const merged = { ...defaultOptions, ...opts };\n        // Merge default options with the ones set by user,\n        // making sure to merge restrictions too\n        this.opts = {\n            ...merged,\n            restrictions: {\n                ...defaultOptions.restrictions,\n                ...opts?.restrictions,\n            },\n        };\n        // Support debug: true for backwards-compatability, unless logger is set in opts\n        // opts instead of this.opts to avoid comparing objects \u2014 we set logger: justErrorsLogger in defaultOptions\n        if (opts?.logger && opts.debug) {\n            this.log('You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.', 'warning');\n        }\n        else if (opts?.debug) {\n            this.opts.logger = debugLogger;\n        }\n        this.log(`Using Core v${Uppy.VERSION}`);\n        this.i18nInit();\n        this.store = this.opts.store;\n        this.setState({\n            ...defaultUploadState,\n            plugins: {},\n            files: {},\n            currentUploads: {},\n            capabilities: {\n                uploadProgress: supportsUploadProgress(),\n                individualCancellation: true,\n                resumableUploads: false,\n            },\n            meta: { ...this.opts.meta },\n            info: [],\n        });\n        this.#restricter = new Restricter(() => this.opts, () => this.i18n);\n        this.#storeUnsubscribe = this.store.subscribe((prevState, nextState, patch) => {\n            this.emit('state-update', prevState, nextState, patch);\n            this.updateAll(nextState);\n        });\n        // Exposing uppy object on window for debugging and testing\n        if (this.opts.debug && typeof window !== 'undefined') {\n            // @ts-ignore Mutating the global object for debug purposes\n            window[this.opts.id] = this;\n        }\n        this.#addListeners();\n    }\n    emit(event, ...args) {\n        this.#emitter.emit(event, ...args);\n    }\n    on(event, callback) {\n        this.#emitter.on(event, callback);\n        return this;\n    }\n    once(event, callback) {\n        this.#emitter.once(event, callback);\n        return this;\n    }\n    off(event, callback) {\n        this.#emitter.off(event, callback);\n        return this;\n    }\n    /**\n     * Iterate on all plugins and run `update` on them.\n     * Called each time state changes.\n     *\n     */\n    updateAll(state) {\n        this.iteratePlugins((plugin) => {\n            plugin.update(state);\n        });\n    }\n    /**\n     * Updates state with a patch\n     */\n    setState(patch) {\n        this.store.setState(patch);\n    }\n    /**\n     * Returns current state.\n     */\n    getState() {\n        return this.store.getState();\n    }\n    patchFilesState(filesWithNewState) {\n        const existingFilesState = this.getState().files;\n        this.setState({\n            files: {\n                ...existingFilesState,\n                ...Object.fromEntries(Object.entries(filesWithNewState).map(([fileID, newFileState]) => [\n                    fileID,\n                    {\n                        ...existingFilesState[fileID],\n                        ...newFileState,\n                    },\n                ])),\n            },\n        });\n    }\n    /**\n     * Shorthand to set state for a specific file.\n     */\n    setFileState(fileID, state) {\n        if (!this.getState().files[fileID]) {\n            throw new Error(`Can\u2019t set state for ${fileID} (the file could have been removed)`);\n        }\n        this.patchFilesState({ [fileID]: state });\n    }\n    i18nInit() {\n        const onMissingKey = (key) => this.log(`Missing i18n string: ${key}`, 'error');\n        const translator = new Translator([this.defaultLocale, this.opts.locale], {\n            onMissingKey,\n        });\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.locale = translator.locale;\n    }\n    setOptions(newOpts) {\n        this.opts = {\n            ...this.opts,\n            ...newOpts,\n            restrictions: {\n                ...this.opts.restrictions,\n                ...newOpts?.restrictions,\n            },\n        };\n        if (newOpts.meta) {\n            this.setMeta(newOpts.meta);\n        }\n        this.i18nInit();\n        if (newOpts.locale) {\n            this.iteratePlugins((plugin) => {\n                plugin.setOptions(newOpts);\n            });\n        }\n        // Note: this is not the preact `setState`, it's an internal function that has the same name.\n        this.setState(undefined); // so that UI re-renders with new options\n    }\n    resetProgress() {\n        const defaultProgress = {\n            percentage: 0,\n            bytesUploaded: false,\n            uploadComplete: false,\n            uploadStarted: null,\n        };\n        const files = { ...this.getState().files };\n        const updatedFiles = Object.create(null);\n        Object.keys(files).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...files[fileID],\n                progress: {\n                    ...files[fileID].progress,\n                    ...defaultProgress,\n                },\n                // @ts-expect-error these typed are inserted\n                // into the namespace in their respective packages\n                // but core isn't ware of those\n                tus: undefined,\n                transloadit: undefined,\n            };\n        });\n        this.setState({ files: updatedFiles, ...defaultUploadState });\n    }\n    clear() {\n        const { capabilities, currentUploads } = this.getState();\n        if (Object.keys(currentUploads).length > 0 &&\n            !capabilities.individualCancellation) {\n            throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n        }\n        this.setState({ ...defaultUploadState, files: {} });\n    }\n    addPreProcessor(fn) {\n        this.#preProcessors.add(fn);\n    }\n    removePreProcessor(fn) {\n        return this.#preProcessors.delete(fn);\n    }\n    addPostProcessor(fn) {\n        this.#postProcessors.add(fn);\n    }\n    removePostProcessor(fn) {\n        return this.#postProcessors.delete(fn);\n    }\n    addUploader(fn) {\n        this.#uploaders.add(fn);\n    }\n    removeUploader(fn) {\n        return this.#uploaders.delete(fn);\n    }\n    setMeta(data) {\n        const updatedMeta = { ...this.getState().meta, ...data };\n        const updatedFiles = { ...this.getState().files };\n        Object.keys(updatedFiles).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                meta: { ...updatedFiles[fileID].meta, ...data },\n            };\n        });\n        this.log('Adding metadata:');\n        this.log(data);\n        this.setState({\n            meta: updatedMeta,\n            files: updatedFiles,\n        });\n    }\n    setFileMeta(fileID, data) {\n        const updatedFiles = { ...this.getState().files };\n        if (!updatedFiles[fileID]) {\n            this.log(`Was trying to set metadata for a file that has been removed: ${fileID}`);\n            return;\n        }\n        const newMeta = { ...updatedFiles[fileID].meta, ...data };\n        updatedFiles[fileID] = { ...updatedFiles[fileID], meta: newMeta };\n        this.setState({ files: updatedFiles });\n    }\n    /**\n     * Get a file object.\n     */\n    getFile(fileID) {\n        return this.getState().files[fileID];\n    }\n    /**\n     * Get all files in an array.\n     */\n    getFiles() {\n        const { files } = this.getState();\n        return Object.values(files);\n    }\n    getFilesByIds(ids) {\n        return ids.map((id) => this.getFile(id));\n    }\n    getObjectOfFilesPerState() {\n        const { files: filesObject, totalProgress, error } = this.getState();\n        const files = Object.values(filesObject);\n        const inProgressFiles = [];\n        const newFiles = [];\n        const startedFiles = [];\n        const uploadStartedFiles = [];\n        const pausedFiles = [];\n        const completeFiles = [];\n        const erroredFiles = [];\n        const inProgressNotPausedFiles = [];\n        const processingFiles = [];\n        for (const file of files) {\n            const { progress } = file;\n            if (!progress.uploadComplete && progress.uploadStarted) {\n                inProgressFiles.push(file);\n                if (!file.isPaused) {\n                    inProgressNotPausedFiles.push(file);\n                }\n            }\n            if (!progress.uploadStarted) {\n                newFiles.push(file);\n            }\n            if (progress.uploadStarted ||\n                progress.preprocess ||\n                progress.postprocess) {\n                startedFiles.push(file);\n            }\n            if (progress.uploadStarted) {\n                uploadStartedFiles.push(file);\n            }\n            if (file.isPaused) {\n                pausedFiles.push(file);\n            }\n            if (progress.uploadComplete) {\n                completeFiles.push(file);\n            }\n            if (file.error) {\n                erroredFiles.push(file);\n            }\n            if (progress.preprocess || progress.postprocess) {\n                processingFiles.push(file);\n            }\n        }\n        return {\n            newFiles,\n            startedFiles,\n            uploadStartedFiles,\n            pausedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted: uploadStartedFiles.length > 0,\n            isAllComplete: totalProgress === 100 &&\n                completeFiles.length === files.length &&\n                processingFiles.length === 0,\n            isAllErrored: !!error && erroredFiles.length === files.length,\n            isAllPaused: inProgressFiles.length !== 0 &&\n                pausedFiles.length === inProgressFiles.length,\n            isUploadInProgress: inProgressFiles.length > 0,\n            isSomeGhost: files.some((file) => file.isGhost),\n        };\n    }\n    #informAndEmit(errors) {\n        for (const error of errors) {\n            if (error.isRestriction) {\n                this.emit('restriction-failed', error.file, error);\n            }\n            else {\n                this.emit('error', error, error.file);\n            }\n            this.log(error, 'warning');\n        }\n        const userFacingErrors = errors.filter((error) => error.isUserFacing);\n        // don't flood the user: only show the first 4 toasts\n        const maxNumToShow = 4;\n        const firstErrors = userFacingErrors.slice(0, maxNumToShow);\n        const additionalErrors = userFacingErrors.slice(maxNumToShow);\n        firstErrors.forEach(({ message, details = '' }) => {\n            this.info({ message, details }, 'error', this.opts.infoTimeout);\n        });\n        if (additionalErrors.length > 0) {\n            this.info({\n                message: this.i18n('additionalRestrictionsFailed', {\n                    count: additionalErrors.length,\n                }),\n            });\n        }\n    }\n    validateRestrictions(file, files = this.getFiles()) {\n        try {\n            this.#restricter.validate(files, [file]);\n        }\n        catch (err) {\n            return err;\n        }\n        return null;\n    }\n    validateSingleFile(file) {\n        try {\n            this.#restricter.validateSingleFile(file);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    validateAggregateRestrictions(files) {\n        const existingFiles = this.getFiles();\n        try {\n            this.#restricter.validateAggregateRestrictions(existingFiles, files);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    #checkRequiredMetaFieldsOnFile(file) {\n        const { missingFields, error } = this.#restricter.getMissingRequiredMetaFields(file);\n        if (missingFields.length > 0) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: missingFields,\n                error: error.message,\n            });\n            this.log(error.message);\n            this.emit('restriction-failed', file, error);\n            return false;\n        }\n        if (missingFields.length === 0 && file.missingRequiredMetaFields) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: [],\n            });\n        }\n        return true;\n    }\n    #checkRequiredMetaFields(files) {\n        let success = true;\n        for (const file of Object.values(files)) {\n            if (!this.#checkRequiredMetaFieldsOnFile(file)) {\n                success = false;\n            }\n        }\n        return success;\n    }\n    #assertNewUploadAllowed(file) {\n        const { allowNewUpload } = this.getState();\n        if (allowNewUpload === false) {\n            const error = new RestrictionError(this.i18n('noMoreFilesAllowed'), {\n                file,\n            });\n            this.#informAndEmit([error]);\n            throw error;\n        }\n    }\n    checkIfFileAlreadyExists(fileID) {\n        const { files } = this.getState();\n        if (files[fileID] && !files[fileID].isGhost) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Create a file state object based on user-provided `addFile()` options.\n     */\n    #transformFile(fileDescriptorOrFile) {\n        // Uppy expects files in { name, type, size, data } format.\n        // If the actual File object is passed from input[type=file] or drag-drop,\n        // we normalize it to match Uppy file object\n        const file = fileDescriptorOrFile instanceof File\n            ? {\n                name: fileDescriptorOrFile.name,\n                type: fileDescriptorOrFile.type,\n                size: fileDescriptorOrFile.size,\n                data: fileDescriptorOrFile,\n                meta: {},\n                isRemote: false,\n                source: undefined,\n                preview: undefined,\n            }\n            : fileDescriptorOrFile;\n        const fileType = getFileType(file);\n        const fileName = getFileName(fileType, file);\n        const fileExtension = getFileNameAndExtension(fileName).extension;\n        const id = getSafeFileId(file, this.getID());\n        const meta = {\n            ...file.meta,\n            name: fileName,\n            type: fileType,\n        };\n        // `null` means the size is unknown.\n        const size = Number.isFinite(file.data.size) ? file.data.size : null;\n        return {\n            source: file.source || '',\n            id,\n            name: fileName,\n            extension: fileExtension || '',\n            meta: {\n                ...this.getState().meta,\n                ...meta,\n            },\n            type: fileType,\n            progress: {\n                percentage: 0,\n                bytesUploaded: false,\n                bytesTotal: size,\n                uploadComplete: false,\n                uploadStarted: null,\n            },\n            size,\n            isGhost: false,\n            ...(file.isRemote\n                ? {\n                    isRemote: true,\n                    remote: file.remote,\n                    data: file.data,\n                }\n                : {\n                    isRemote: false,\n                    data: file.data,\n                }),\n            preview: file.preview,\n        };\n    }\n    // Schedule an upload if `autoProceed` is enabled.\n    #startIfAutoProceed() {\n        if (this.opts.autoProceed && !this.scheduledAutoProceed) {\n            this.scheduledAutoProceed = setTimeout(() => {\n                this.scheduledAutoProceed = null;\n                this.upload().catch((err) => {\n                    if (!err.isRestriction) {\n                        this.log(err.stack || err.message || err);\n                    }\n                });\n            }, 4);\n        }\n    }\n    #checkAndUpdateFileState(filesToAdd) {\n        let { files: existingFiles } = this.getState();\n        // create a copy of the files object only once\n        let nextFilesState = { ...existingFiles };\n        const validFilesToAdd = [];\n        const errors = [];\n        for (const fileToAdd of filesToAdd) {\n            try {\n                let newFile = this.#transformFile(fileToAdd);\n                this.#assertNewUploadAllowed(newFile);\n                // If a file has been recovered (Golden Retriever), but we were unable to recover its data (probably too large),\n                // users are asked to re-select these half-recovered files and then this method will be called again.\n                // In order to keep the progress, meta and everything else, we keep the existing file,\n                // but we replace `data`, and we remove `isGhost`, because the file is no longer a ghost now\n                const existingFile = existingFiles[newFile.id];\n                const isGhost = existingFile?.isGhost;\n                if (isGhost && !newFile.isRemote) {\n                    if (newFile.data == null)\n                        throw new Error('File data is missing');\n                    newFile = {\n                        ...existingFile,\n                        isGhost: false,\n                        data: newFile.data,\n                    };\n                    this.log(`Replaced the blob in the restored ghost file: ${newFile.name}, ${newFile.id}`);\n                }\n                const onBeforeFileAddedResult = this.opts.onBeforeFileAdded(newFile, nextFilesState);\n                // update state after onBeforeFileAdded\n                existingFiles = this.getState().files;\n                nextFilesState = { ...existingFiles, ...nextFilesState };\n                if (!onBeforeFileAddedResult &&\n                    this.checkIfFileAlreadyExists(newFile.id)) {\n                    throw new RestrictionError(this.i18n('noDuplicates', {\n                        fileName: newFile.name ?? this.i18n('unnamed'),\n                    }), { file: newFile });\n                }\n                // Pass through reselected files from Golden Retriever\n                if (onBeforeFileAddedResult === false && !isGhost) {\n                    // Don\u2019t show UI info for this error, as it should be done by the developer\n                    throw new RestrictionError('Cannot add the file because onBeforeFileAdded returned false.', { isUserFacing: false, file: newFile });\n                }\n                else if (typeof onBeforeFileAddedResult === 'object' &&\n                    onBeforeFileAddedResult !== null) {\n                    newFile = onBeforeFileAddedResult;\n                }\n                this.#restricter.validateSingleFile(newFile);\n                // need to add it to the new local state immediately, so we can use the state to validate the next files too\n                nextFilesState[newFile.id] = newFile;\n                validFilesToAdd.push(newFile);\n            }\n            catch (err) {\n                errors.push(err);\n            }\n        }\n        try {\n            // need to run this separately because it's much more slow, so if we run it inside the for-loop it will be very slow\n            // when many files are added\n            this.#restricter.validateAggregateRestrictions(Object.values(existingFiles), validFilesToAdd);\n        }\n        catch (err) {\n            errors.push(err);\n            // If we have any aggregate error, don't allow adding this batch\n            return {\n                nextFilesState: existingFiles,\n                validFilesToAdd: [],\n                errors,\n            };\n        }\n        return {\n            nextFilesState,\n            validFilesToAdd,\n            errors,\n        };\n    }\n    /**\n     * Add a new file to `state.files`. This will run `onBeforeFileAdded`,\n     * try to guess file type in a clever way, check file against restrictions,\n     * and start an upload if `autoProceed === true`.\n     */\n    addFile(file) {\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState([file]);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        if (errors.length > 0)\n            throw errors[0];\n        this.setState({ files: nextFilesState });\n        const [firstValidFileToAdd] = validFilesToAdd;\n        this.emit('file-added', firstValidFileToAdd);\n        this.emit('files-added', validFilesToAdd);\n        this.log(`Added file: ${firstValidFileToAdd.name}, ${firstValidFileToAdd.id}, mime type: ${firstValidFileToAdd.type}`);\n        this.#startIfAutoProceed();\n        return firstValidFileToAdd.id;\n    }\n    /**\n     * Add multiple files to `state.files`. See the `addFile()` documentation.\n     *\n     * If an error occurs while adding a file, it is logged and the user is notified.\n     * This is good for UI plugins, but not for programmatic use.\n     * Programmatic users should usually still use `addFile()` on individual files.\n     */\n    addFiles(fileDescriptors) {\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState(fileDescriptors);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        const nonRestrictionErrors = errors.filter((error) => !error.isRestriction);\n        if (nonRestrictionErrors.length > 0) {\n            let message = 'Multiple errors occurred while adding files:\\n';\n            nonRestrictionErrors.forEach((subError) => {\n                message += `\\n * ${subError.message}`;\n            });\n            this.info({\n                message: this.i18n('addBulkFilesFailed', {\n                    smart_count: nonRestrictionErrors.length,\n                }),\n                details: message,\n            }, 'error', this.opts.infoTimeout);\n            if (typeof AggregateError === 'function') {\n                throw new AggregateError(nonRestrictionErrors, message);\n            }\n            else {\n                const err = new Error(message);\n                // @ts-expect-error fallback when AggregateError is not available\n                err.errors = nonRestrictionErrors;\n                throw err;\n            }\n        }\n        // OK, we haven't thrown an error, we can start updating state and emitting events now:\n        this.setState({ files: nextFilesState });\n        validFilesToAdd.forEach((file) => {\n            this.emit('file-added', file);\n        });\n        this.emit('files-added', validFilesToAdd);\n        if (validFilesToAdd.length > 5) {\n            this.log(`Added batch of ${validFilesToAdd.length} files`);\n        }\n        else {\n            Object.values(validFilesToAdd).forEach((file) => {\n                this.log(`Added file: ${file.name}\\n id: ${file.id}\\n type: ${file.type}`);\n            });\n        }\n        if (validFilesToAdd.length > 0) {\n            this.#startIfAutoProceed();\n        }\n    }\n    removeFiles(fileIDs) {\n        const { files, currentUploads } = this.getState();\n        const updatedFiles = { ...files };\n        const updatedUploads = { ...currentUploads };\n        const removedFiles = Object.create(null);\n        fileIDs.forEach((fileID) => {\n            if (files[fileID]) {\n                removedFiles[fileID] = files[fileID];\n                delete updatedFiles[fileID];\n            }\n        });\n        // Remove files from the `fileIDs` list in each upload.\n        function fileIsNotRemoved(uploadFileID) {\n            return removedFiles[uploadFileID] === undefined;\n        }\n        Object.keys(updatedUploads).forEach((uploadID) => {\n            const newFileIDs = currentUploads[uploadID].fileIDs.filter(fileIsNotRemoved);\n            // Remove the upload if no files are associated with it anymore.\n            if (newFileIDs.length === 0) {\n                delete updatedUploads[uploadID];\n                return;\n            }\n            const { capabilities } = this.getState();\n            if (newFileIDs.length !== currentUploads[uploadID].fileIDs.length &&\n                !capabilities.individualCancellation) {\n                throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n            }\n            updatedUploads[uploadID] = {\n                ...currentUploads[uploadID],\n                fileIDs: newFileIDs,\n            };\n        });\n        const stateUpdate = {\n            currentUploads: updatedUploads,\n            files: updatedFiles,\n        };\n        // If all files were removed - allow new uploads,\n        // and clear recoveredState\n        if (Object.keys(updatedFiles).length === 0) {\n            stateUpdate.allowNewUpload = true;\n            stateUpdate.error = null;\n            stateUpdate.recoveredState = null;\n        }\n        this.setState(stateUpdate);\n        this.#updateTotalProgressThrottled();\n        const removedFileIDs = Object.keys(removedFiles);\n        removedFileIDs.forEach((fileID) => {\n            this.emit('file-removed', removedFiles[fileID]);\n        });\n        if (removedFileIDs.length > 5) {\n            this.log(`Removed ${removedFileIDs.length} files`);\n        }\n        else {\n            this.log(`Removed files: ${removedFileIDs.join(', ')}`);\n        }\n    }\n    removeFile(fileID) {\n        this.removeFiles([fileID]);\n    }\n    pauseResume(fileID) {\n        if (!this.getState().capabilities.resumableUploads ||\n            this.getFile(fileID).progress.uploadComplete) {\n            return undefined;\n        }\n        const file = this.getFile(fileID);\n        const wasPaused = file.isPaused || false;\n        const isPaused = !wasPaused;\n        this.setFileState(fileID, {\n            isPaused,\n        });\n        this.emit('upload-pause', file, isPaused);\n        return isPaused;\n    }\n    pauseAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = { ...updatedFiles[file], isPaused: true };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('pause-all');\n    }\n    resumeAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = {\n                ...updatedFiles[file],\n                isPaused: false,\n                error: null,\n            };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('resume-all');\n    }\n    #getFilesToRetry() {\n        const { files } = this.getState();\n        return Object.keys(files).filter((fileId) => {\n            const file = files[fileId];\n            // Only retry files that have errors AND don't have missing required metadata\n            return (file.error &&\n                (!file.missingRequiredMetaFields ||\n                    file.missingRequiredMetaFields.length === 0));\n        });\n    }\n    async #doRetryAll() {\n        const filesToRetry = this.#getFilesToRetry();\n        const updatedFiles = { ...this.getState().files };\n        filesToRetry.forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                isPaused: false,\n                error: null,\n            };\n        });\n        this.setState({\n            files: updatedFiles,\n            error: null,\n        });\n        this.emit('retry-all', this.getFilesByIds(filesToRetry));\n        if (filesToRetry.length === 0) {\n            return {\n                successful: [],\n                failed: [],\n            };\n        }\n        const uploadID = this.#createUpload(filesToRetry, {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    async retryAll() {\n        const result = await this.#doRetryAll();\n        this.emit('complete', result);\n        return result;\n    }\n    cancelAll() {\n        this.emit('cancel-all');\n        const { files } = this.getState();\n        const fileIDs = Object.keys(files);\n        if (fileIDs.length) {\n            this.removeFiles(fileIDs);\n        }\n        this.setState(defaultUploadState);\n    }\n    /**\n     * Retry a specific file that has errored.\n     */\n    retryUpload(fileID) {\n        this.setFileState(fileID, {\n            error: null,\n            isPaused: false,\n        });\n        this.emit('upload-retry', this.getFile(fileID));\n        const uploadID = this.#createUpload([fileID], {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    logout() {\n        this.iteratePlugins((plugin) => {\n            ;\n            plugin.provider?.logout?.();\n        });\n    }\n    #handleUploadProgress = (file, progress) => {\n        const fileInState = file ? this.getFile(file.id) : undefined;\n        if (file == null || !fileInState) {\n            this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n            return;\n        }\n        if (fileInState.progress.percentage === 100) {\n            this.log(`Not setting progress for a file that has been already uploaded: ${file.id}`);\n            return;\n        }\n        const newProgress = {\n            bytesTotal: progress.bytesTotal,\n            // bytesTotal may be null or zero; in that case we can't divide by it\n            percentage: progress.bytesTotal != null &&\n                Number.isFinite(progress.bytesTotal) &&\n                progress.bytesTotal > 0\n                ? Math.round((progress.bytesUploaded / progress.bytesTotal) * 100)\n                : undefined,\n        };\n        if (fileInState.progress.uploadStarted != null) {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                    bytesUploaded: progress.bytesUploaded,\n                },\n            });\n        }\n        else {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                },\n            });\n        }\n        this.#updateTotalProgressThrottled();\n    };\n    #updateTotalProgress() {\n        const totalProgress = this.#calculateTotalProgress();\n        let totalProgressPercent = null;\n        if (totalProgress != null) {\n            totalProgressPercent = Math.round(totalProgress * 100);\n            if (totalProgressPercent > 100)\n                totalProgressPercent = 100;\n            else if (totalProgressPercent < 0)\n                totalProgressPercent = 0;\n        }\n        this.emit('progress', totalProgressPercent ?? 0);\n        this.setState({\n            totalProgress: totalProgressPercent ?? 0,\n        });\n    }\n    // ___Why throttle at 500ms?\n    //    - We must throttle at >250ms for superfocus in Dashboard to work well\n    //    (because animation takes 0.25s, and we want to wait for all animations to be over before refocusing).\n    //    [Practical Check]: if thottle is at 100ms, then if you are uploading a file,\n    //    and click 'ADD MORE FILES', - focus won't activate in Firefox.\n    //    - We must throttle at around >500ms to avoid performance lags.\n    //    [Practical Check] Firefox, try to upload a big file for a prolonged period of time. Laptop will start to heat up.\n    #updateTotalProgressThrottled = throttle(() => this.#updateTotalProgress(), 500, { leading: true, trailing: true });\n    [Symbol.for('uppy test: updateTotalProgress')]() {\n        return this.#updateTotalProgress();\n    }\n    #calculateTotalProgress() {\n        // calculate total progress, using the number of files currently uploading,\n        // between 0 and 1 and sum of individual progress of each file\n        const files = this.getFiles();\n        // note: also includes files that have completed uploading:\n        const filesInProgress = files.filter((file) => {\n            return (file.progress.uploadStarted ||\n                file.progress.preprocess ||\n                file.progress.postprocess);\n        });\n        if (filesInProgress.length === 0) {\n            return 0;\n        }\n        if (filesInProgress.every((file) => file.progress.uploadComplete)) {\n            // If every uploading file is complete, and we're still getting progress, it probably means\n            // there's a bug somewhere in some progress reporting code (maybe not even our code)\n            // and we're still getting progress, so let's just assume it means a 100% progress\n            return 1;\n        }\n        const isSizedFile = (file) => file.progress.bytesTotal != null && file.progress.bytesTotal !== 0;\n        const sizedFilesInProgress = filesInProgress.filter(isSizedFile);\n        const unsizedFilesInProgress = filesInProgress.filter((file) => !isSizedFile(file));\n        if (sizedFilesInProgress.every((file) => file.progress.uploadComplete) &&\n            unsizedFilesInProgress.length > 0 &&\n            !unsizedFilesInProgress.every((file) => file.progress.uploadComplete)) {\n            // we are done with uploading all files of known size, however\n            // there is at least one file with unknown size still uploading,\n            // and we cannot say anything about their progress\n            // In any case, return null because it doesn't make any sense to show a progress\n            return null;\n        }\n        const totalFilesSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesTotal ?? 0), 0);\n        const totalUploadedSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesUploaded || 0), 0);\n        return totalFilesSize === 0 ? 0 : totalUploadedSize / totalFilesSize;\n    }\n    /**\n     * Registers listeners for all global actions, like:\n     * `error`, `file-removed`, `upload-progress`\n     */\n    #addListeners() {\n        // Type inference only works for inline functions so we have to type it again\n        const errorHandler = (error, file, response) => {\n            let errorMsg = error.message || 'Unknown error';\n            if (error.details) {\n                errorMsg += ` ${error.details}`;\n            }\n            this.setState({ error: errorMsg });\n            if (file != null && file.id in this.getState().files) {\n                this.setFileState(file.id, {\n                    error: errorMsg,\n                    response,\n                });\n            }\n        };\n        this.on('error', errorHandler);\n        this.on('upload-error', (file, error, response) => {\n            errorHandler(error, file, response);\n            if (typeof error === 'object' && error.message) {\n                this.log(error.message, 'error');\n                const newError = new Error(this.i18n('failedToUpload', { file: file?.name ?? '' })); // we may want a new custom error here\n                newError.isUserFacing = true; // todo maybe don't do this with all errors?\n                newError.details = error.message;\n                if (error.details) {\n                    newError.details += ` ${error.details}`;\n                }\n                this.#informAndEmit([newError]);\n            }\n            else {\n                this.#informAndEmit([error]);\n            }\n        });\n        let uploadStalledWarningRecentlyEmitted = null;\n        this.on('upload-stalled', (error, files) => {\n            const { message } = error;\n            const details = files.map((file) => file.meta.name).join(', ');\n            if (!uploadStalledWarningRecentlyEmitted) {\n                this.info({ message, details }, 'warning', this.opts.infoTimeout);\n                uploadStalledWarningRecentlyEmitted = setTimeout(() => {\n                    uploadStalledWarningRecentlyEmitted = null;\n                }, this.opts.infoTimeout);\n            }\n            this.log(`${message} ${details}`.trim(), 'warning');\n        });\n        this.on('upload', () => {\n            this.setState({ error: null });\n        });\n        const onUploadStarted = (files) => {\n            const filesFiltered = files.filter((file) => {\n                const exists = file != null && this.getFile(file.id);\n                if (!exists)\n                    this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return exists;\n            });\n            const filesState = Object.fromEntries(filesFiltered.map((file) => [\n                file.id,\n                {\n                    progress: {\n                        uploadStarted: Date.now(),\n                        uploadComplete: false,\n                        bytesUploaded: 0,\n                        bytesTotal: file.size,\n                    },\n                },\n            ]));\n            this.patchFilesState(filesState);\n        };\n        this.on('upload-start', onUploadStarted);\n        this.on('upload-progress', this.#handleUploadProgress);\n        this.on('upload-success', (file, uploadResp) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const currentProgress = this.getFile(file.id).progress;\n            const needsPostProcessing = this.#postProcessors.size > 0;\n            this.setFileState(file.id, {\n                progress: {\n                    ...currentProgress,\n                    postprocess: needsPostProcessing\n                        ? {\n                            mode: 'indeterminate',\n                        }\n                        : undefined,\n                    uploadComplete: true,\n                    ...(!needsPostProcessing && { complete: true }),\n                    percentage: 100,\n                    bytesUploaded: currentProgress.bytesTotal,\n                },\n                response: uploadResp,\n                uploadURL: uploadResp.uploadURL,\n                isPaused: false,\n            });\n            // Remote providers sometimes don't tell us the file size,\n            // but we can know how many bytes we uploaded once the upload is complete.\n            if (file.size == null) {\n                this.setFileState(file.id, {\n                    size: uploadResp.bytesUploaded || currentProgress.bytesTotal,\n                });\n            }\n            this.#updateTotalProgressThrottled();\n        });\n        this.on('preprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: { ...this.getFile(file.id).progress, preprocess: progress },\n            });\n        });\n        this.on('preprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = { ...this.getState().files };\n            files[file.id] = {\n                ...files[file.id],\n                progress: { ...files[file.id].progress },\n            };\n            delete files[file.id].progress.preprocess;\n            this.setState({ files });\n        });\n        this.on('postprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: {\n                    ...this.getState().files[file.id].progress,\n                    postprocess: progress,\n                },\n            });\n        });\n        this.on('postprocess-complete', (fileIn) => {\n            const file = fileIn && this.getFile(fileIn.id);\n            if (file == null) {\n                this.log(`Not setting progress for a file that has been removed: ${fileIn?.id}`);\n                return;\n            }\n            const { postprocess: _deleted, ...newProgress } = file.progress;\n            this.patchFilesState({\n                [file.id]: {\n                    progress: {\n                        ...newProgress,\n                        complete: true,\n                    },\n                },\n            });\n        });\n        this.on('restored', () => {\n            // Files may have changed--ensure progress is still accurate.\n            this.#updateTotalProgressThrottled();\n        });\n        // @ts-expect-error should fix itself when dashboard it typed (also this doesn't belong here)\n        this.on('dashboard:file-edit-complete', (file) => {\n            if (file) {\n                this.#checkRequiredMetaFieldsOnFile(file);\n            }\n        });\n        // show informer if offline\n        if (typeof window !== 'undefined' && window.addEventListener) {\n            window.addEventListener('online', this.#updateOnlineStatus);\n            window.addEventListener('offline', this.#updateOnlineStatus);\n            setTimeout(this.#updateOnlineStatus, 3000);\n        }\n    }\n    updateOnlineStatus() {\n        const online = window.navigator.onLine ?? true;\n        if (!online) {\n            this.emit('is-offline');\n            this.info(this.i18n('noInternetConnection'), 'error', 0);\n            this.wasOffline = true;\n        }\n        else {\n            this.emit('is-online');\n            if (this.wasOffline) {\n                this.emit('back-online');\n                this.info(this.i18n('connectedToInternet'), 'success', 3000);\n                this.wasOffline = false;\n            }\n        }\n    }\n    #updateOnlineStatus = this.updateOnlineStatus.bind(this);\n    getID() {\n        return this.opts.id;\n    }\n    /**\n     * Registers a plugin with Core.\n     */\n    use(Plugin, \n    // We want to let the plugin decide whether `opts` is optional or not\n    // so we spread the argument rather than defining `opts:` ourselves.\n    ...args) {\n        if (typeof Plugin !== 'function') {\n            const msg = `Expected a plugin class, but got ${Plugin === null ? 'null' : typeof Plugin}.` +\n                ' Please verify that the plugin was imported and spelled correctly.';\n            throw new TypeError(msg);\n        }\n        // Instantiate\n        const plugin = new Plugin(this, ...args);\n        const pluginId = plugin.id;\n        if (!pluginId) {\n            throw new Error('Your plugin must have an id');\n        }\n        if (!plugin.type) {\n            throw new Error('Your plugin must have a type');\n        }\n        const existsPluginAlready = this.getPlugin(pluginId);\n        if (existsPluginAlready) {\n            const msg = `Already found a plugin named '${existsPluginAlready.id}'. ` +\n                `Tried to use: '${pluginId}'.\\n` +\n                'Uppy plugins must have unique `id` options.';\n            throw new Error(msg);\n        }\n        // @ts-expect-error does exist\n        if (Plugin.VERSION) {\n            // @ts-expect-error does exist\n            this.log(`Using ${pluginId} v${Plugin.VERSION}`);\n        }\n        if (plugin.type in this.#plugins) {\n            this.#plugins[plugin.type].push(plugin);\n        }\n        else {\n            this.#plugins[plugin.type] = [plugin];\n        }\n        plugin.install();\n        this.emit('plugin-added', plugin);\n        return this;\n    }\n    getPlugin(id) {\n        for (const plugins of Object.values(this.#plugins)) {\n            const foundPlugin = plugins.find((plugin) => plugin.id === id);\n            if (foundPlugin != null) {\n                return foundPlugin;\n            }\n        }\n        return undefined;\n    }\n    [Symbol.for('uppy test: getPlugins')](type) {\n        return this.#plugins[type];\n    }\n    /**\n     * Iterate through all `use`d plugins.\n     *\n     */\n    iteratePlugins(method) {\n        Object.values(this.#plugins).flat(1).forEach(method);\n    }\n    /**\n     * Uninstall and remove a plugin.\n     *\n     * @param {object} instance The plugin instance to remove.\n     */\n    removePlugin(instance) {\n        this.log(`Removing plugin ${instance.id}`);\n        this.emit('plugin-remove', instance);\n        if (instance.uninstall) {\n            instance.uninstall();\n        }\n        const list = this.#plugins[instance.type];\n        // list.indexOf failed here, because Vue3 converted the plugin instance\n        // to a Proxy object, which failed the strict comparison test:\n        // obj !== objProxy\n        const index = list.findIndex((item) => item.id === instance.id);\n        if (index !== -1) {\n            list.splice(index, 1);\n        }\n        const state = this.getState();\n        const updatedState = {\n            plugins: {\n                ...state.plugins,\n                [instance.id]: undefined,\n            },\n        };\n        this.setState(updatedState);\n    }\n    /**\n     * Uninstall all plugins and close down this Uppy instance.\n     */\n    destroy() {\n        this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`);\n        this.cancelAll();\n        this.#storeUnsubscribe();\n        this.iteratePlugins((plugin) => {\n            this.removePlugin(plugin);\n        });\n        if (typeof window !== 'undefined' && window.removeEventListener) {\n            window.removeEventListener('online', this.#updateOnlineStatus);\n            window.removeEventListener('offline', this.#updateOnlineStatus);\n        }\n    }\n    hideInfo() {\n        const { info } = this.getState();\n        this.setState({ info: info.slice(1) });\n        this.emit('info-hidden');\n    }\n    /**\n     * Set info message in `state.info`, so that UI plugins like `Informer`\n     * can display the message.\n     */\n    info(message, type = 'info', duration = 3000) {\n        const isComplexMessage = typeof message === 'object';\n        this.setState({\n            info: [\n                ...this.getState().info,\n                {\n                    type,\n                    message: isComplexMessage ? message.message : message,\n                    details: isComplexMessage ? message.details : null,\n                },\n            ],\n        });\n        setTimeout(() => this.hideInfo(), duration);\n        this.emit('info-visible');\n    }\n    /**\n     * Passes messages to a function, provided in `opts.logger`.\n     * If `opts.logger: Uppy.debugLogger` or `opts.debug: true`, logs to the browser console.\n     */\n    log(message, type) {\n        const { logger } = this.opts;\n        switch (type) {\n            case 'error':\n                logger.error(message);\n                break;\n            case 'warning':\n                logger.warn(message);\n                break;\n            default:\n                logger.debug(message);\n                break;\n        }\n    }\n    // We need to store request clients by a unique ID, so we can share RequestClient instances across files\n    // this allows us to do rate limiting and synchronous operations like refreshing provider tokens\n    // example: refreshing tokens: if each file has their own requestclient,\n    // we don't have any way to synchronize all requests in order to\n    // - block all requests\n    // - refresh the token\n    // - unblock all requests and allow them to run with a the new access token\n    // back when we had a requestclient per file, once an access token expired,\n    // all 6 files would go ahead and refresh the token at the same time\n    // (calling /refresh-token up to 6 times), which will probably fail for some providers\n    #requestClientById = new Map();\n    registerRequestClient(id, client) {\n        this.#requestClientById.set(id, client);\n    }\n    /** @protected */\n    getRequestClientForFile(file) {\n        if (!('remote' in file && file.remote))\n            throw new Error(`Tried to get RequestClient for a non-remote file ${file.id}`);\n        const requestClient = this.#requestClientById.get(file.remote.requestClientId);\n        if (requestClient == null)\n            throw new Error(`requestClientId \"${file.remote.requestClientId}\" not registered for file \"${file.id}\"`);\n        return requestClient;\n    }\n    /**\n     * Restore an upload by its ID.\n     */\n    async restore(uploadID) {\n        this.log(`Core: Running restored upload \"${uploadID}\"`);\n        const result = await this.#runUpload(uploadID);\n        this.emit('complete', result);\n        return result;\n    }\n    /**\n     * Create an upload for a bunch of files.\n     *\n     */\n    #createUpload(fileIDs, opts = {}) {\n        // uppy.retryAll sets this to true \u2014 when retrying we want to ignore `allowNewUpload: false`\n        const { forceAllowNewUpload = false } = opts;\n        const { allowNewUpload, currentUploads } = this.getState();\n        if (!allowNewUpload && !forceAllowNewUpload) {\n            throw new Error('Cannot create a new upload: already uploading.');\n        }\n        const uploadID = nanoid();\n        this.emit('upload', uploadID, this.getFilesByIds(fileIDs));\n        this.setState({\n            allowNewUpload: this.opts.allowMultipleUploadBatches !== false &&\n                this.opts.allowMultipleUploads !== false,\n            currentUploads: {\n                ...currentUploads,\n                [uploadID]: {\n                    fileIDs,\n                    step: 0,\n                    result: {},\n                },\n            },\n        });\n        return uploadID;\n    }\n    [Symbol.for('uppy test: createUpload')](...args) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/47595\n        return this.#createUpload(...args);\n    }\n    #getUpload(uploadID) {\n        const { currentUploads } = this.getState();\n        return currentUploads[uploadID];\n    }\n    /**\n     * Add data to an upload's result object.\n     */\n    addResultData(uploadID, data) {\n        if (!this.#getUpload(uploadID)) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            return;\n        }\n        const { currentUploads } = this.getState();\n        const currentUpload = {\n            ...currentUploads[uploadID],\n            result: { ...currentUploads[uploadID].result, ...data },\n        };\n        this.setState({\n            currentUploads: { ...currentUploads, [uploadID]: currentUpload },\n        });\n    }\n    /**\n     * Remove an upload, eg. if it has been canceled or completed.\n     *\n     */\n    #removeUpload(uploadID) {\n        const { [uploadID]: _deleted, ...currentUploads } = this.getState().currentUploads;\n        this.setState({\n            currentUploads,\n        });\n    }\n    /**\n     * Run an upload. This picks up where it left off in case the upload is being restored.\n     */\n    async #runUpload(uploadID) {\n        const getCurrentUpload = () => {\n            const { currentUploads } = this.getState();\n            return currentUploads[uploadID];\n        };\n        let currentUpload = getCurrentUpload();\n        if (!currentUpload) {\n            throw new Error('Nonexistent upload');\n        }\n        const steps = [\n            ...this.#preProcessors,\n            ...this.#uploaders,\n            ...this.#postProcessors,\n        ];\n        try {\n            for (let step = currentUpload.step || 0; step < steps.length; step++) {\n                const fn = steps[step];\n                this.setState({\n                    currentUploads: {\n                        ...this.getState().currentUploads,\n                        [uploadID]: {\n                            ...currentUpload,\n                            step,\n                        },\n                    },\n                });\n                const { fileIDs } = currentUpload;\n                // TODO give this the `updatedUpload` object as its only parameter maybe?\n                // Otherwise when more metadata may be added to the upload this would keep getting more parameters\n                await fn(fileIDs, uploadID);\n                // Update currentUpload value in case it was modified asynchronously.\n                currentUpload = getCurrentUpload();\n                if (!currentUpload) {\n                    break;\n                }\n            }\n        }\n        catch (err) {\n            this.#removeUpload(uploadID);\n            throw err;\n        }\n        // Set result data.\n        if (currentUpload) {\n            // Mark postprocessing step as complete if necessary; this addresses a case where we might get\n            // stuck in the postprocessing UI while the upload is fully complete.\n            // If the postprocessing steps do not do any work, they may not emit postprocessing events at\n            // all, and never mark the postprocessing as complete. This is fine on its own but we\n            // introduced code in the @uppy/core upload-success handler to prepare postprocessing progress\n            // state if any postprocessors are registered. That is to avoid a \"flash of completed state\"\n            // before the postprocessing plugins can emit events.\n            //\n            // So, just in case an upload with postprocessing plugins *has* completed *without* emitting\n            // postprocessing completion, we do it instead.\n            currentUpload.fileIDs.forEach((fileID) => {\n                const file = this.getFile(fileID);\n                if (file?.progress.postprocess) {\n                    this.emit('postprocess-complete', file);\n                }\n            });\n            const files = currentUpload.fileIDs.map((fileID) => this.getFile(fileID));\n            const successful = files.filter((file) => !file.error);\n            const failed = files.filter((file) => file.error);\n            this.addResultData(uploadID, { successful, failed, uploadID });\n            // Update currentUpload value in case it was modified asynchronously.\n            currentUpload = getCurrentUpload();\n        }\n        // Emit completion events.\n        // This is in a separate function so that the `currentUploads` variable\n        // always refers to the latest state. In the handler right above it refers\n        // to an outdated object without the `.result` property.\n        let result;\n        if (currentUpload) {\n            result = currentUpload.result;\n            this.#removeUpload(uploadID);\n        }\n        if (result == null) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            result = {\n                successful: [],\n                failed: [],\n                uploadID,\n            };\n        }\n        return result;\n    }\n    /**\n     * Start an upload for all the files that are not currently being uploaded.\n     */\n    async upload() {\n        if (!this.#plugins.uploader?.length) {\n            this.log('No uploader type plugins are used', 'warning');\n        }\n        let { files } = this.getState();\n        // retry any failed files from a previous upload() call\n        const filesToRetry = this.#getFilesToRetry();\n        if (filesToRetry.length > 0) {\n            const retryResult = await this.#doRetryAll(); // we don't want the complete event to fire\n            const hasNewFiles = this.getFiles().filter((file) => file.progress.uploadStarted == null)\n                .length > 0;\n            // if no new files, make it idempotent and return\n            if (!hasNewFiles) {\n                this.emit('complete', retryResult);\n                return retryResult;\n            }\n            // reload files which might have  changed after retry\n            ;\n            ({ files } = this.getState());\n        }\n        // If no files to retry, proceed with original upload() behavior for new files\n        const onBeforeUploadResult = this.opts.onBeforeUpload(files);\n        if (onBeforeUploadResult === false) {\n            throw new Error('Not starting the upload because onBeforeUpload returned false');\n        }\n        if (onBeforeUploadResult && typeof onBeforeUploadResult === 'object') {\n            files = onBeforeUploadResult;\n            // Updating files in state, because uploader plugins receive file IDs,\n            // and then fetch the actual file object from state\n            this.setState({\n                files,\n            });\n        }\n        try {\n            this.#restricter.validateMinNumberOfFiles(files);\n            if (!this.#checkRequiredMetaFields(files)) {\n                throw new RestrictionError(this.i18n('missingRequiredMetaField'));\n            }\n            const { currentUploads } = this.getState();\n            // get a list of files that are currently assigned to uploads\n            const currentlyUploadingFiles = Object.values(currentUploads).flatMap((curr) => curr.fileIDs);\n            const waitingFileIDs = Object.keys(files).filter((fileID) => {\n                const file = this.getFile(fileID);\n                // if the file hasn't started uploading and hasn't already been assigned to an upload..\n                return (file &&\n                    !file.progress.uploadStarted &&\n                    !currentlyUploadingFiles.includes(fileID));\n            });\n            const uploadID = this.#createUpload(waitingFileIDs);\n            const result = await this.#runUpload(uploadID);\n            this.emit('complete', result);\n            return result;\n        }\n        catch (err) {\n            this.#informAndEmit([err]);\n            throw err;\n        }\n    }\n}\nexport default Uppy;\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "{\n  \"name\": \"@uppy/core\",\n  \"description\": \"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:\",\n  \"version\": \"5.2.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/store-default\": \"^5.0.0\",\n    \"@uppy/utils\": \"^7.1.4\",\n    \"lodash\": \"^4.17.21\",\n    \"mime-match\": \"^1.0.2\",\n    \"namespace-emitter\": \"^2.0.1\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/deep-freeze\": \"^0\",\n    \"cssnano\": \"^7.0.7\",\n    \"deep-freeze\": \"^0.0.1\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  }\n}", "export default function getFileName(fileType, fileDescriptor) {\n    if (fileDescriptor.name) {\n        return fileDescriptor.name;\n    }\n    if (fileType.split('/')[0] === 'image') {\n        return `${fileType.split('/')[0]}.${fileType.split('/')[1]}`;\n    }\n    return 'noname';\n}\n", "export default {\n    strings: {\n        addBulkFilesFailed: {\n            0: 'Failed to add %{smart_count} file due to an internal error',\n            1: 'Failed to add %{smart_count} files due to internal errors',\n        },\n        youCanOnlyUploadX: {\n            0: 'You can only upload %{smart_count} file',\n            1: 'You can only upload %{smart_count} files',\n        },\n        youHaveToAtLeastSelectX: {\n            0: 'You have to select at least %{smart_count} file',\n            1: 'You have to select at least %{smart_count} files',\n        },\n        aggregateExceedsSize: 'You selected %{size} of files, but maximum allowed size is %{sizeAllowed}',\n        exceedsSize: '%{file} exceeds maximum allowed size of %{size}',\n        missingRequiredMetaField: 'Missing required meta fields',\n        missingRequiredMetaFieldOnFile: 'Missing required meta fields in %{fileName}',\n        inferiorSize: 'This file is smaller than the allowed size of %{size}',\n        youCanOnlyUploadFileTypes: 'You can only upload: %{types}',\n        noMoreFilesAllowed: 'Cannot add more files',\n        noDuplicates: \"Cannot add the duplicate file '%{fileName}', it already exists\",\n        companionError: 'Connection with Companion failed',\n        authAborted: 'Authentication aborted',\n        companionUnauthorizeHint: 'To unauthorize to your %{provider} account, please go to %{url}',\n        failedToUpload: 'Failed to upload %{file}',\n        noInternetConnection: 'No Internet connection',\n        connectedToInternet: 'Connected to the Internet',\n        // Strings for remote providers\n        noFilesFound: 'You have no files or folders here',\n        noSearchResults: 'Unfortunately, there are no results for this search',\n        selectX: {\n            0: 'Select %{smart_count}',\n            1: 'Select %{smart_count}',\n        },\n        allFilesFromFolderNamed: 'All files from folder %{name}',\n        openFolderNamed: 'Open folder %{name}',\n        cancel: 'Cancel',\n        logOut: 'Log out',\n        logIn: 'Log in',\n        pickFiles: 'Pick files',\n        pickPhotos: 'Pick photos',\n        filter: 'Filter',\n        resetFilter: 'Reset filter',\n        loading: 'Loading...',\n        loadedXFiles: 'Loaded %{numFiles} files',\n        authenticateWithTitle: 'Please authenticate with %{pluginName} to select files',\n        authenticateWith: 'Connect to %{pluginName}',\n        signInWithGoogle: 'Sign in with Google',\n        searchImages: 'Search for images',\n        enterTextToSearch: 'Enter text to search for images',\n        search: 'Search',\n        resetSearch: 'Reset search',\n        emptyFolderAdded: 'No files were added from empty folder',\n        addedNumFiles: 'Added %{numFiles} file(s)',\n        folderAlreadyAdded: 'The folder \"%{folder}\" was already added',\n        folderAdded: {\n            0: 'Added %{smart_count} file from %{folder}',\n            1: 'Added %{smart_count} files from %{folder}',\n        },\n        additionalRestrictionsFailed: '%{count} additional restrictions were not fulfilled',\n        unnamed: 'Unnamed',\n        pleaseWait: 'Please wait',\n    },\n};\n", "// Edge 15.x does not fire 'progress' events on uploads.\n// See https://github.com/transloadit/uppy/issues/945\n// And https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12224510/\nexport default function supportsUploadProgress(userAgent) {\n    // Allow passing in userAgent for tests\n    if (userAgent == null && typeof navigator !== 'undefined') {\n        userAgent = navigator.userAgent;\n    }\n    // Assume it works because basically everything supports progress events.\n    if (!userAgent)\n        return true;\n    const m = /Edge\\/(\\d+\\.\\d+)/.exec(userAgent);\n    if (!m)\n        return true;\n    const edgeVersion = m[1];\n    const version = edgeVersion.split('.', 2);\n    const major = parseInt(version[0], 10);\n    const minor = parseInt(version[1], 10);\n    // Worked before:\n    // Edge 40.15063.0.0\n    // Microsoft EdgeHTML 15.15063\n    if (major < 15 || (major === 15 && minor < 15063)) {\n        return true;\n    }\n    // Fixed in:\n    // Microsoft EdgeHTML 18.18218\n    if (major > 18 || (major === 18 && minor >= 18218)) {\n        return true;\n    }\n    // other versions don't work.\n    return false;\n}\n", "import { nanoid } from 'nanoid/non-secure';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\n/**\n * Hook to create a form element outside the component tree to avoid nested forms.\n * Returns a formId that can be used with the `form` attribute on inputs and buttons.\n *\n * This allows form submission (Enter key) to work properly even when the component\n * is rendered inside another form element.\n *\n * @param onSubmit - Callback to execute when the form is submitted\n * @returns Object containing the formId to use with form attribute\n */\nexport function useSearchForm(onSubmit) {\n    const submit = useCallback((ev) => {\n        ev.preventDefault();\n        onSubmit();\n    }, [onSubmit]);\n    // We create a form element and append it to document.body to avoid nested <form>s\n    // (See https://github.com/transloadit/uppy/pull/5050#discussion_r1640392516)\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    useEffect(() => {\n        document.body.appendChild(form);\n        form.addEventListener('submit', submit);\n        return () => {\n            form.removeEventListener('submit', submit);\n            document.body.removeChild(form);\n        };\n    }, [form, submit]);\n    return { formId: form.id };\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { useSearchForm } from './useSearchForm.js';\n/**\n * FilterInput component for client-side filtering with search icon and clear button.\n * Supports Enter key submission via form element.\n */\nfunction FilterInput({ value, onChange, onSubmit, inputLabel, i18n, }) {\n    const { formId } = useSearchForm(onSubmit);\n    return (_jsxs(\"section\", { className: \"uppy-ProviderBrowser-searchFilter\", children: [_jsx(\"input\", { className: \"uppy-u-reset uppy-ProviderBrowser-searchFilterInput\", type: \"search\", \"aria-label\": inputLabel, placeholder: inputLabel, value: value, onInput: (e) => onChange(e.target.value), form: formId, \"data-uppy-super-focusable\": true }), _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon\", width: \"12\", height: \"12\", viewBox: \"0 0 12 12\", children: _jsx(\"path\", { d: \"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z\" }) }), value && (_jsx(\"button\", { className: \"uppy-u-reset uppy-ProviderBrowser-searchFilterReset\", type: \"button\", \"aria-label\": i18n('resetFilter'), onClick: () => onChange(''), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", viewBox: \"0 0 19 19\", children: _jsx(\"path\", { d: \"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\" }) }) }))] }));\n}\nexport default FilterInput;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { useCallback } from 'preact/hooks';\nfunction GoogleIcon() {\n    return (_jsx(\"svg\", { width: \"26\", height: \"26\", viewBox: \"0 0 26 26\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsxs(\"g\", { fill: \"none\", \"fill-rule\": \"evenodd\", children: [_jsx(\"circle\", { fill: \"#FFF\", cx: \"13\", cy: \"13\", r: \"13\" }), _jsx(\"path\", { d: \"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z\", fill: \"#4285F4\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z\", fill: \"#34A853\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z\", fill: \"#FBBC05\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z\", fill: \"#EA4335\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M4 4h18v18H4z\" })] }) }));\n}\nfunction DefaultForm({ pluginName, i18n, onAuth, }) {\n    // In order to comply with Google's brand we need to create a different button\n    // for the Google Drive plugin\n    const isGoogleDrive = pluginName === 'Google Drive';\n    const onSubmit = useCallback((e) => {\n        e.preventDefault();\n        onAuth();\n    }, [onAuth]);\n    return (_jsx(\"form\", { onSubmit: onSubmit, children: isGoogleDrive ? (_jsxs(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google\", \"data-uppy-super-focusable\": true, children: [_jsx(GoogleIcon, {}), i18n('signInWithGoogle')] })) : (_jsx(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn\", \"data-uppy-super-focusable\": true, children: i18n('authenticateWith', { pluginName }) })) }));\n}\nconst defaultRenderForm = ({ pluginName, i18n, onAuth, }) => _jsx(DefaultForm, { pluginName: pluginName, i18n: i18n, onAuth: onAuth });\nexport default function AuthView({ loading, pluginName, pluginIcon, i18n, handleAuth, renderForm = defaultRenderForm, }) {\n    return (_jsxs(\"div\", { className: \"uppy-Provider-auth\", children: [_jsx(\"div\", { className: \"uppy-Provider-authIcon\", children: pluginIcon() }), _jsx(\"div\", { className: \"uppy-Provider-authTitle\", children: i18n('authenticateWithTitle', {\n                    pluginName,\n                }) }), renderForm({ pluginName, i18n, loading, onAuth: handleAuth })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { remoteFileObjToLocal } from '@uppy/utils';\nimport classNames from 'classnames';\nimport debounce from 'lodash/debounce.js';\nimport packageJson from '../../package.json' with { type: 'json' };\nimport Browser from '../Browser.js';\nimport FilterInput from '../FilterInput.js';\nimport FooterActions from '../FooterActions.js';\nimport addFiles from '../utils/addFiles.js';\nimport getClickedRange from '../utils/getClickedRange.js';\nimport handleError from '../utils/handleError.js';\nimport getBreadcrumbs from '../utils/PartialTreeUtils/getBreadcrumbs.js';\nimport getCheckedFilesWithPaths from '../utils/PartialTreeUtils/getCheckedFilesWithPaths.js';\nimport getNumberOfSelectedFiles from '../utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nimport PartialTreeUtils from '../utils/PartialTreeUtils/index.js';\nimport shouldHandleScroll from '../utils/shouldHandleScroll.js';\nimport AuthView from './AuthView.js';\nimport GlobalSearchView from './GlobalSearchView.js';\nimport Header from './Header.js';\nexport function defaultPickerIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"30\", height: \"30\", viewBox: \"0 0 30 30\", children: _jsx(\"path\", { d: \"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z\" }) }));\n}\nconst getDefaultState = (rootFolderId) => ({\n    authenticated: undefined, // we don't know yet\n    partialTree: [\n        {\n            type: 'root',\n            id: rootFolderId,\n            cached: false,\n            nextPagePath: null,\n        },\n    ],\n    currentFolderId: rootFolderId,\n    searchString: '',\n    didFirstRender: false,\n    username: null,\n    loading: false,\n});\n/**\n * Class to easily generate generic views for Provider plugins\n *\n * We have a *search view* and a *normal view*.\n * Search view is only used when the Provider supports server side search i.e. provider.search method is implemented for the provider.\n * The state is stored in searchResults.\n * Search view is implemented in components GlobalSearchView and SearchResultItem.\n * We conditionally switch between search view and normal in the render method when a server side search is initiated.\n * When users type their search query in search input box (SearchInput component), we debounce the input and call provider.search method to fetch results from the server.\n * when the user enters a folder in search results or clears the search input query we switch back to Normal View.\n */\nexport default class ProviderView {\n    static VERSION = packageJson.version;\n    // Test hook (mirrors GoldenRetriever pattern): allow tests to override debounce time\n    // @ts-expect-error test-only hook key\n    static [Symbol.for('uppy test: searchDebounceMs')];\n    plugin;\n    provider;\n    opts;\n    isHandlingScroll = false;\n    previousCheckbox = null;\n    #searchDebounced;\n    constructor(plugin, opts) {\n        this.plugin = plugin;\n        this.provider = opts.provider;\n        const defaultOptions = {\n            viewType: 'list',\n            showTitles: true,\n            showFilter: true,\n            showBreadcrumbs: true,\n            loadAllFiles: false,\n            virtualList: false,\n        };\n        this.opts = { ...defaultOptions, ...opts };\n        this.openFolder = this.openFolder.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleAuth = this.handleAuth.bind(this);\n        this.handleScroll = this.handleScroll.bind(this);\n        this.resetPluginState = this.resetPluginState.bind(this);\n        this.donePicking = this.donePicking.bind(this);\n        this.render = this.render.bind(this);\n        this.cancelSelection = this.cancelSelection.bind(this);\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n        this.openSearchResultFolder = this.openSearchResultFolder.bind(this);\n        this.clearSearchState = this.clearSearchState.bind(this);\n        // Set default state for the plugin\n        this.resetPluginState();\n        // todo\n        // @ts-expect-error this should be typed in @uppy/dashboard.\n        this.plugin.uppy.on('dashboard:close-panel', this.resetPluginState);\n        this.plugin.uppy.registerRequestClient(this.provider.provider, this.provider);\n        // Configure debounced search with test override\n        const testHookSymbol = Symbol.for('uppy test: searchDebounceMs');\n        const testWait = ProviderView[testHookSymbol];\n        const wait = testWait ?? 500;\n        const debounceOpts = testWait === 0 ? { leading: true, trailing: true } : undefined;\n        this.#searchDebounced = debounce(this.#search, wait, debounceOpts);\n    }\n    resetPluginState() {\n        this.plugin.setPluginState(getDefaultState(this.plugin.rootFolderId));\n    }\n    tearDown() {\n        // Nothing.\n    }\n    setLoading(loading) {\n        this.plugin.setPluginState({ loading });\n    }\n    get isLoading() {\n        return this.plugin.getPluginState().loading;\n    }\n    cancelSelection() {\n        const { partialTree } = this.plugin.getPluginState();\n        const newPartialTree = partialTree.map((item) => item.type === 'root' ? item : { ...item, status: 'unchecked' });\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n    }\n    clearSearchState() {\n        this.plugin.setPluginState({\n            searchResults: undefined,\n        });\n    }\n    #abortController;\n    async #withAbort(op) {\n        // prevent multiple requests in parallel from causing race conditions\n        this.#abortController?.abort();\n        const abortController = new AbortController();\n        this.#abortController = abortController;\n        const cancelRequest = () => {\n            abortController.abort();\n        };\n        try {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.on('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.on('cancel-all', cancelRequest);\n            await op(abortController.signal);\n        }\n        finally {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.off('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.off('cancel-all', cancelRequest);\n            this.#abortController = undefined;\n        }\n    }\n    async #search() {\n        const { partialTree, currentFolderId, searchString } = this.plugin.getPluginState();\n        const currentFolder = partialTree.find((i) => i.id === currentFolderId);\n        if (searchString.trim() === '') {\n            this.#abortController?.abort();\n            this.clearSearchState();\n            return;\n        }\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            const scopePath = currentFolder.type === 'root' ? undefined : currentFolderId;\n            const { items } = await this.provider.search(searchString, {\n                signal,\n                path: scopePath,\n            });\n            // For each searched file, build the entire path (from the root all the way to the leaf node)\n            // This is because we need to make sure all ancestor folders are present in the partialTree before we open the folder or check the file.\n            // This is needed because when the user opens a folder we need to have all its parent folders in the partialTree to be able to render the breadcrumbs correctly.\n            // Similarly when the user checks a file, we need to have all it's ancestor folders in the partialTree to be able to percolateUp the checked state correctly to its ancestors.\n            const { partialTree } = this.plugin.getPluginState();\n            const newPartialTree = [...partialTree];\n            for (const file of items) {\n                // Decode URI and split into path segments\n                const decodedPath = decodeURIComponent(file.requestPath);\n                const segments = decodedPath.split('/').filter((s) => s.length > 0);\n                // Start from root\n                let parentId = this.plugin.rootFolderId;\n                let isParentFolderChecked;\n                // Walk through each segment starting from the root and build child nodes if they don't exist\n                segments.forEach((segment, index, arr) => {\n                    const pathSegments = segments.slice(0, index + 1);\n                    const encodedPath = encodeURIComponent(`/${pathSegments.join('/')}`);\n                    // Skip if node already exists\n                    const existingNode = newPartialTree.find((n) => n.id === encodedPath && n.type !== 'root');\n                    if (existingNode) {\n                        parentId = encodedPath;\n                        isParentFolderChecked = existingNode.status === 'checked';\n                        return;\n                    }\n                    const isLeafNode = index === arr.length - 1;\n                    let node;\n                    // propagate checked state from parent to children, if the user has checked the parent folder before searching\n                    // and the parent folder is an ancestor of the searched file\n                    // see also afterOpenFolder which contains similar logic, we should probably refactor and reuse some\n                    const status = isParentFolderChecked ? 'checked' : 'unchecked';\n                    // Build the Leaf Node, it can be a file (`PartialTreeFile`) or a folder (`PartialTreeFolderNode`).\n                    // Since we Already have the leaf node's data (`file`, `CompanionFile`) from the searchResults: CompanionFile[], we just use that.\n                    if (isLeafNode) {\n                        if (file.isFolder) {\n                            node = {\n                                type: 'folder',\n                                id: encodedPath,\n                                cached: false,\n                                nextPagePath: null,\n                                status,\n                                parentId,\n                                data: file,\n                            };\n                        }\n                        else {\n                            const restrictionError = this.validateSingleFile(file);\n                            node = {\n                                type: 'file',\n                                id: encodedPath,\n                                restrictionError,\n                                status: !restrictionError ? status : 'unchecked',\n                                parentId,\n                                data: file,\n                            };\n                        }\n                    }\n                    else {\n                        // not leaf node, so by definition it is a folder leading up to the leaf node\n                        node = {\n                            type: 'folder',\n                            id: encodedPath,\n                            cached: false,\n                            nextPagePath: null,\n                            status,\n                            parentId,\n                            data: {\n                                // we don't have any data, so fill only the necessary fields\n                                name: decodeURIComponent(segment),\n                                icon: 'folder',\n                                isFolder: true,\n                            },\n                        };\n                    }\n                    newPartialTree.push(node);\n                    parentId = encodedPath; // This node becomes parent for the next iteration\n                    isParentFolderChecked = status === 'checked';\n                });\n            }\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                searchResults: items.map((item) => item.requestPath),\n            });\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    // debounced search function is initialized in the constructor\n    onSearchInput = (s) => {\n        this.plugin.setPluginState({ searchString: s });\n        if (this.opts.supportsSearch) {\n            this.#searchDebounced();\n        }\n    };\n    async openSearchResultFolder(folderId) {\n        // stop searching\n        this.plugin.setPluginState({ searchString: '' });\n        // now open folder using the normal view\n        await this.openFolder(folderId);\n    }\n    async openFolder(folderId) {\n        // always switch away from the search view when opening a folder, whether it happens from the search view or by clicking breadcrumbs\n        this.clearSearchState();\n        this.previousCheckbox = null;\n        // Returning cached folder\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedFolder = partialTree.find((folder) => folder.id === folderId);\n        if (clickedFolder.cached) {\n            this.plugin.setPluginState({\n                currentFolderId: folderId,\n                searchString: '',\n            });\n            return;\n        }\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            let currentPagePath = folderId;\n            let currentItems = [];\n            do {\n                const { username, nextPagePath, items } = await this.provider.list(currentPagePath, { signal });\n                // It's important to set the username during one of our first fetches\n                this.plugin.setPluginState({ username });\n                currentPagePath = nextPagePath;\n                currentItems = currentItems.concat(items);\n                this.setLoading(this.plugin.uppy.i18n('loadedXFiles', {\n                    numFiles: currentItems.length,\n                }));\n            } while (this.opts.loadAllFiles && currentPagePath);\n            const newPartialTree = PartialTreeUtils.afterOpenFolder(partialTree, currentItems, clickedFolder, currentPagePath, this.validateSingleFile);\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                currentFolderId: folderId,\n                searchString: '',\n            });\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    /**\n     * Removes session token on client side.\n     */\n    async logout() {\n        await this.#withAbort(async (signal) => {\n            const res = await this.provider.logout({\n                signal,\n            });\n            // res.ok is from the JSON body, not to be confused with Response.ok\n            if (res.ok) {\n                if (!res.revoked) {\n                    const message = this.plugin.uppy.i18n('companionUnauthorizeHint', {\n                        provider: this.plugin.title,\n                        url: res.manual_revoke_url,\n                    });\n                    this.plugin.uppy.info(message, 'info', 7000);\n                }\n                this.plugin.setPluginState({\n                    ...getDefaultState(this.plugin.rootFolderId),\n                    authenticated: false,\n                });\n            }\n        }).catch(handleError(this.plugin.uppy));\n    }\n    async handleAuth(authFormData) {\n        await this.#withAbort(async (signal) => {\n            this.setLoading(true);\n            await this.provider.login({ authFormData, signal });\n            this.plugin.setPluginState({ authenticated: true });\n            await Promise.all([\n                this.provider.fetchPreAuthToken(),\n                this.openFolder(this.plugin.rootFolderId),\n            ]);\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    async handleScroll(event) {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        const currentFolder = partialTree.find((i) => i.id === currentFolderId);\n        if (shouldHandleScroll(event) &&\n            !this.isHandlingScroll &&\n            currentFolder.nextPagePath) {\n            this.isHandlingScroll = true;\n            await this.#withAbort(async (signal) => {\n                const { nextPagePath, items } = await this.provider.list(currentFolder.nextPagePath, { signal });\n                const newPartialTree = PartialTreeUtils.afterScrollFolder(partialTree, currentFolderId, items, nextPagePath, this.validateSingleFile);\n                this.plugin.setPluginState({ partialTree: newPartialTree });\n            }).catch(handleError(this.plugin.uppy));\n            this.isHandlingScroll = false;\n        }\n    }\n    validateSingleFile = (file) => {\n        const companionFile = remoteFileObjToLocal(file);\n        const result = this.plugin.uppy.validateSingleFile(companionFile);\n        return result;\n    };\n    async donePicking() {\n        const { partialTree } = this.plugin.getPluginState();\n        if (this.isLoading)\n            return;\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            // 1. Enrich our partialTree by fetching all 'checked' but not-yet-fetched folders\n            const enrichedTree = await PartialTreeUtils.afterFill(partialTree, (path) => this.provider.list(path, { signal }), this.validateSingleFile, (n) => {\n                this.setLoading(this.plugin.uppy.i18n('addedNumFiles', { numFiles: n }));\n            });\n            // 2. Now that we know how many files there are - recheck aggregateRestrictions!\n            const aggregateRestrictionError = this.validateAggregateRestrictions(enrichedTree);\n            if (aggregateRestrictionError) {\n                this.plugin.setPluginState({ partialTree: enrichedTree });\n                return;\n            }\n            // 3. Add files\n            const companionFiles = getCheckedFilesWithPaths(enrichedTree);\n            addFiles(companionFiles, this.plugin, this.provider);\n            // 4. Reset state\n            this.resetPluginState();\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    toggleCheckbox(ourItem, isShiftKeyPressed) {\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedRange = getClickedRange(ourItem.id, this.getDisplayedPartialTree(), isShiftKeyPressed, this.previousCheckbox);\n        const newPartialTree = PartialTreeUtils.afterToggleCheckbox(partialTree, clickedRange);\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n        this.previousCheckbox = ourItem.id;\n    }\n    getDisplayedPartialTree = () => {\n        const { partialTree, currentFolderId, searchString } = this.plugin.getPluginState();\n        const inThisFolder = partialTree.filter((item) => item.type !== 'root' && item.parentId === currentFolderId);\n        // If provider supports server side search, we don't filter the items client side\n        const filtered = this.opts.supportsSearch || searchString.trim() === ''\n            ? inThisFolder\n            : inThisFolder.filter((item) => (item.data.name ?? this.plugin.uppy.i18n('unnamed'))\n                .toLowerCase()\n                .indexOf(searchString.trim().toLowerCase()) !== -1);\n        return filtered;\n    };\n    getBreadcrumbs = () => {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        return getBreadcrumbs(partialTree, currentFolderId);\n    };\n    getSelectedAmount = () => {\n        const { partialTree } = this.plugin.getPluginState();\n        return getNumberOfSelectedFiles(partialTree);\n    };\n    validateAggregateRestrictions = (partialTree) => {\n        const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n        const uppyFiles = checkedFiles.map((file) => file.data);\n        return this.plugin.uppy.validateAggregateRestrictions(uppyFiles);\n    };\n    #renderSearchResults() {\n        const { i18n } = this.plugin.uppy;\n        const { searchResults: ids, partialTree } = this.plugin.getPluginState();\n        // todo memoize this so we don't have to do it on every render\n        const itemsById = new Map();\n        partialTree.forEach((item) => {\n            if (item.type !== 'root') {\n                itemsById.set(item.id, item);\n            }\n        });\n        // the search results view needs data from the partial tree,\n        const searchResults = ids.map((id) => {\n            const partialTreeItem = itemsById.get(id);\n            if (partialTreeItem == null)\n                throw new Error('Partial tree not complete');\n            return partialTreeItem;\n        });\n        return (_jsx(GlobalSearchView, { searchResults: searchResults, openFolder: this.openSearchResultFolder, toggleCheckbox: this.toggleCheckbox, i18n: i18n }));\n    }\n    render(state, viewOptions = {}) {\n        const { didFirstRender } = this.plugin.getPluginState();\n        const { i18n } = this.plugin.uppy;\n        if (!didFirstRender) {\n            this.plugin.setPluginState({ didFirstRender: true });\n            this.provider.fetchPreAuthToken();\n            this.openFolder(this.plugin.rootFolderId);\n        }\n        const opts = { ...this.opts, ...viewOptions };\n        const { authenticated, loading } = this.plugin.getPluginState();\n        const pluginIcon = this.plugin.icon || defaultPickerIcon;\n        if (authenticated === false) {\n            return (_jsx(AuthView, { pluginName: this.plugin.title, pluginIcon: pluginIcon, handleAuth: this.handleAuth, i18n: this.plugin.uppy.i18n, renderForm: opts.renderAuthForm, loading: loading }));\n        }\n        const { partialTree, username, searchString, searchResults } = this.plugin.getPluginState();\n        const breadcrumbs = this.getBreadcrumbs();\n        return (_jsxs(\"div\", { className: classNames('uppy-ProviderBrowser', `uppy-ProviderBrowser-viewType--${opts.viewType}`), children: [_jsx(Header, { showBreadcrumbs: opts.showBreadcrumbs, openFolder: this.openFolder, breadcrumbs: breadcrumbs, pluginIcon: pluginIcon, title: this.plugin.title, logout: this.logout, username: username, i18n: i18n }), opts.showFilter && (_jsx(FilterInput, { value: searchString, onChange: (s) => this.onSearchInput(s), onSubmit: () => { }, inputLabel: i18n('filter'), i18n: i18n })), searchResults ? (this.#renderSearchResults()) : (_jsx(Browser, { toggleCheckbox: this.toggleCheckbox, displayedPartialTree: this.getDisplayedPartialTree(), openFolder: this.openFolder, virtualList: opts.virtualList, noResultsLabel: i18n('noFilesFound'), handleScroll: this.handleScroll, viewType: opts.viewType, showTitles: opts.showTitles, i18n: this.plugin.uppy.i18n, isLoading: loading, utmSource: \"Companion\" })), _jsx(FooterActions, { partialTree: partialTree, donePicking: this.donePicking, cancelSelection: this.cancelSelection, i18n: i18n, validateAggregateRestrictions: this.validateAggregateRestrictions })] }));\n    }\n}\n", "{\n  \"name\": \"@uppy/provider-views\",\n  \"description\": \"View library for Uppy remote provider plugins.\",\n  \"version\": \"5.2.2\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.5\",\n    \"classnames\": \"^2.2.6\",\n    \"lodash\": \"^4.17.21\",\n    \"nanoid\": \"^5.0.9\",\n    \"p-queue\": \"^8.0.0\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/gapi\": \"^0.0.47\",\n    \"@types/google.accounts\": \"^0.0.14\",\n    \"@types/google.picker\": \"^0.0.42\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport GridItem from './components/GridItem.js';\nimport ListItem from './components/ListItem.js';\nexport default function Item(props) {\n    const { viewType, toggleCheckbox, showTitles, i18n, openFolder, file, utmSource, } = props;\n    const restrictionError = file.type === 'folder' ? null : file.restrictionError;\n    const isDisabled = !!restrictionError && file.status !== 'checked';\n    const ourProps = {\n        file,\n        openFolder,\n        toggleCheckbox,\n        utmSource,\n        i18n,\n        viewType,\n        showTitles,\n        className: classNames('uppy-ProviderBrowserItem', { 'uppy-ProviderBrowserItem--disabled': isDisabled }, { 'uppy-ProviderBrowserItem--noPreview': file.data.icon === 'video' }, { 'uppy-ProviderBrowserItem--is-checked': file.status === 'checked' }, { 'uppy-ProviderBrowserItem--is-partial': file.status === 'partial' }),\n        isDisabled,\n        restrictionError,\n    };\n    switch (viewType) {\n        case 'grid':\n            return _jsx(GridItem, { ...ourProps });\n        case 'list':\n            return _jsx(ListItem, { ...ourProps });\n        case 'unsplash':\n            return (_jsx(GridItem, { ...ourProps, children: _jsx(\"a\", { href: `${file.data.author.url}?utm_source=${utmSource}&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", className: \"uppy-ProviderBrowserItem-author\", tabIndex: -1, children: file.data.author.name }) }));\n        default:\n            throw new Error(`There is no such type ${viewType}`);\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction FileIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: 11, height: 14.5, viewBox: \"0 0 44 58\", children: _jsx(\"path\", { d: \"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z\" }) }));\n}\nfunction FolderIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", style: { minWidth: 16, marginRight: 3 }, viewBox: \"0 0 276.157 276.157\", children: _jsx(\"path\", { d: \"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z\" }) }));\n}\nfunction VideoIcon() {\n    return (_jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", style: { width: 16, marginRight: 4 }, viewBox: \"0 0 58 58\", children: [_jsx(\"path\", { d: \"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z\" }), _jsx(\"path\", { d: \"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z\" })] }));\n}\nexport default function ItemIcon({ itemIconString, alt = undefined, }) {\n    if (itemIconString === null)\n        return null;\n    switch (itemIconString) {\n        case 'file':\n            return _jsx(FileIcon, {});\n        case 'folder':\n            return _jsx(FolderIcon, {});\n        case 'video':\n            return _jsx(VideoIcon, {});\n        default: {\n            return (_jsx(\"img\", { src: itemIconString, alt: alt, referrerPolicy: \"no-referrer\", loading: \"lazy\", width: 16, height: 16 }));\n        }\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nfunction GridItem({ file, toggleCheckbox, className, isDisabled, restrictionError, showTitles, children = null, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: isDisabled && restrictionError ? restrictionError : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid\", onChange: toggleCheckbox, name: \"listitem\", id: file.id, checked: file.status === 'checked', disabled: isDisabled, \"data-uppy-super-focusable\": true }), _jsxs(\"label\", { htmlFor: file.id, \"aria-label\": file.data.name ?? i18n('unnamed'), className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(ItemIcon, { itemIconString: file.data.thumbnail || file.data.icon }), showTitles && (file.data.name ?? i18n('unnamed')), children] })] }));\n}\nexport default GridItem;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nexport default function ListItem({ file, openFolder, className, isDisabled, restrictionError, toggleCheckbox, showTitles, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: file.status !== 'checked' && restrictionError\n            ? restrictionError\n            : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox\", onChange: toggleCheckbox, \n                // for the <label/>\n                name: \"listitem\", id: file.id, checked: file.status === 'checked', \"aria-label\": file.data.isFolder\n                    ? i18n('allFilesFromFolderNamed', {\n                        name: file.data.name ?? i18n('unnamed'),\n                    })\n                    : null, disabled: isDisabled, \"data-uppy-super-focusable\": true }), file.data.isFolder ? (\n            // button to open a folder\n            _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner\", onClick: () => openFolder(file.id), \"aria-label\": i18n('openFolderNamed', {\n                    name: file.data.name ?? i18n('unnamed'),\n                }), children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && file.data.name ? (_jsx(\"span\", { className: \"uppy-truncate-text\", children: file.data.name })) : (i18n('unnamed'))] })) : (\n            // label for a checkbox\n            _jsxs(\"label\", { htmlFor: file.id, className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && (_jsx(\"span\", { className: \"uppy-truncate-text\", children: file.data.name ?? i18n('unnamed') }))] }))] }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { VirtualList } from '@uppy/utils';\nimport { useEffect, useState } from 'preact/hooks';\nimport Item from './Item/index.js';\nfunction Browser(props) {\n    const { displayedPartialTree, viewType, toggleCheckbox, handleScroll, showTitles, i18n, isLoading, openFolder, noResultsLabel, virtualList, utmSource, } = props;\n    const [isShiftKeyPressed, setIsShiftKeyPressed] = useState(false);\n    // This records whether the user is holding the SHIFT key this very moment.\n    // Typically, this is implemented using `onClick((e) => e.shiftKey)` -\n    // however we can't use that, because for accessibility reasons\n    // we're using html tags that don't support `e.shiftKey` property (see #3768).\n    useEffect(() => {\n        const handleKeyUp = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(false);\n        };\n        const handleKeyDown = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(true);\n        };\n        document.addEventListener('keyup', handleKeyUp);\n        document.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document.removeEventListener('keyup', handleKeyUp);\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    if (isLoading) {\n        return (_jsx(\"div\", { className: \"uppy-Provider-loading\", children: typeof isLoading === 'string' ? isLoading : i18n('loading') }));\n    }\n    if (displayedPartialTree.length === 0) {\n        return _jsx(\"div\", { className: \"uppy-Provider-empty\", children: noResultsLabel });\n    }\n    const renderItem = (item) => (_jsx(Item, { viewType: viewType, toggleCheckbox: (event) => {\n            event.stopPropagation();\n            event.preventDefault();\n            // Prevent shift-clicking from highlighting file names\n            // (https://stackoverflow.com/a/1527797/3192470)\n            document.getSelection()?.removeAllRanges();\n            toggleCheckbox(item, isShiftKeyPressed);\n        }, showTitles: showTitles, i18n: i18n, openFolder: openFolder, file: item, utmSource: utmSource }, item.id));\n    // todo remove virtuallist option and always use virtual list\n    if (virtualList) {\n        return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(VirtualList, { className: \"uppy-ProviderBrowser-list\", data: displayedPartialTree, renderRow: renderItem, rowHeight: 35.5 }) }));\n    }\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(\"ul\", { className: \"uppy-ProviderBrowser-list\", onScroll: handleScroll, \n            // making <ul> not focusable for firefox\n            tabIndex: -1, children: displayedPartialTree.map(renderItem) }) }));\n}\nexport default Browser;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useMemo } from 'preact/hooks';\nimport getNumberOfSelectedFiles from './utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nexport default function FooterActions({ cancelSelection, donePicking, i18n, partialTree, validateAggregateRestrictions, }) {\n    const aggregateRestrictionError = useMemo(() => {\n        return validateAggregateRestrictions(partialTree);\n    }, [partialTree, validateAggregateRestrictions]);\n    const nOfSelectedFiles = useMemo(() => {\n        return getNumberOfSelectedFiles(partialTree);\n    }, [partialTree]);\n    if (nOfSelectedFiles === 0) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer\", children: [_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer-buttons\", children: [_jsx(\"button\", { className: classNames('uppy-u-reset uppy-c-btn uppy-c-btn-primary', {\n                            'uppy-c-btn--disabled': aggregateRestrictionError,\n                        }), disabled: !!aggregateRestrictionError, onClick: donePicking, type: \"button\", children: i18n('selectX', {\n                            smart_count: nOfSelectedFiles,\n                        }) }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link\", onClick: cancelSelection, type: \"button\", children: i18n('cancel') })] }), aggregateRestrictionError && (_jsx(\"div\", { className: \"uppy-ProviderBrowser-footer-error\", children: aggregateRestrictionError }))] }));\n}\n", "/**\n * We're interested in all 'checked' leaves of this tree,\n * but we don't yet know how many files there are inside of each checked folder.\n * `getNumberOfSelectedFiles()` returns the most intuitive number we can show to the user\n * in this situation.\n */\nconst getNumberOfSelectedFiles = (partialTree) => {\n    const checkedLeaves = partialTree.filter((item) => {\n        if (item.type === 'file' && item.status === 'checked') {\n            return true;\n        }\n        if (item.type === 'folder' && item.status === 'checked') {\n            const doesItHaveChildren = partialTree.some((i) => i.type !== 'root' && i.parentId === item.id);\n            return !doesItHaveChildren;\n        }\n        return false;\n    });\n    return checkedLeaves.length;\n};\nexport default getNumberOfSelectedFiles;\n", "const companionFileToUppyFile = (file, plugin, provider) => {\n    const name = file.name || file.id;\n    return {\n        id: file.id,\n        source: plugin.id,\n        name,\n        type: file.mimeType,\n        isRemote: true,\n        data: file,\n        preview: file.thumbnail || undefined,\n        // @ts-expect-error TODO: fixme\n        meta: {\n            // name, // todo shouldn't this be here?\n            authorName: file.author?.name,\n            authorUrl: file.author?.url,\n            // We need to do this `|| null` check, because null value\n            // for .relDirPath is `undefined` and for .relativePath is `null`.\n            // I do think we should just use `null` everywhere.\n            relativePath: file.relDirPath || null,\n            absolutePath: file.absDirPath,\n        },\n        body: {\n            fileId: file.id,\n        },\n        remote: {\n            companionUrl: plugin.opts.companionUrl,\n            url: `${provider.fileUrl(file.requestPath)}`,\n            body: {\n                fileId: file.id,\n            },\n            providerName: provider.name,\n            provider: provider.provider,\n            requestClientId: provider.provider,\n        },\n    };\n};\nexport default companionFileToUppyFile;\n", "import { getSafeFileId } from '@uppy/utils';\nimport companionFileToUppyFile from './companionFileToUppyFile.js';\nconst addFiles = (companionFiles, plugin, provider) => {\n    const uppyFiles = companionFiles.map((f) => companionFileToUppyFile(f, plugin, provider));\n    const filesToAdd = [];\n    const filesAlreadyAdded = [];\n    uppyFiles.forEach((file) => {\n        if (plugin.uppy.checkIfFileAlreadyExists(getSafeFileId(file, plugin.uppy.getID()))) {\n            filesAlreadyAdded.push(file);\n        }\n        else {\n            filesToAdd.push(file);\n        }\n    });\n    if (filesToAdd.length > 0) {\n        plugin.uppy.info(plugin.uppy.i18n('addedNumFiles', { numFiles: filesToAdd.length }));\n    }\n    if (filesAlreadyAdded.length > 0) {\n        plugin.uppy.info(`Not adding ${filesAlreadyAdded.length} files because they already exist`);\n    }\n    plugin.uppy.addFiles(filesToAdd);\n};\nexport default addFiles;\n", "// Shift-clicking selects a single consecutive list of items\n// starting at the previous click.\nconst getClickedRange = (clickedId, displayedPartialTree, isShiftKeyPressed, previousCheckbox) => {\n    const previousCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === previousCheckbox);\n    if (previousCheckboxIndex !== -1 && isShiftKeyPressed) {\n        const newCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === clickedId);\n        const clickedRange = displayedPartialTree.slice(Math.min(previousCheckboxIndex, newCheckboxIndex), Math.max(previousCheckboxIndex, newCheckboxIndex) + 1);\n        return clickedRange.map((item) => item.id);\n    }\n    return [clickedId];\n};\nexport default getClickedRange;\n", "const handleError = (uppy) => (error) => {\n    // authError just means we're not authenticated, don't report it\n    if (error.isAuthError) {\n        return;\n    }\n    // AbortError means the user has clicked \"cancel\" on an operation\n    if (error.name === 'AbortError') {\n        uppy.log('Aborting request', 'warning');\n        return;\n    }\n    uppy.log(error, 'error');\n    if (error.name === 'UserFacingApiError') {\n        uppy.info({\n            message: uppy.i18n('companionError'),\n            details: uppy.i18n(error.message),\n        }, 'warning', 5000);\n    }\n};\nexport default handleError;\n", "const getBreadcrumbs = (partialTree, currentFolderId) => {\n    let folder = partialTree.find((f) => f.id === currentFolderId);\n    let breadcrumbs = [];\n    while (true) {\n        breadcrumbs = [folder, ...breadcrumbs];\n        if (folder.type === 'root')\n            break;\n        const currentParentId = folder.parentId;\n        folder = partialTree.find((f) => f.id === currentParentId);\n    }\n    return breadcrumbs;\n};\nexport default getBreadcrumbs;\n", "const getPath = (partialTree, id, cache) => {\n    const sId = id === null ? 'null' : id;\n    if (cache[sId])\n        return cache[sId];\n    const file = partialTree.find((f) => f.id === id);\n    if (file.type === 'root')\n        return [];\n    const meAndParentPath = [...getPath(partialTree, file.parentId, cache), file];\n    cache[sId] = meAndParentPath;\n    return meAndParentPath;\n};\n// See \"Uppy file properties\" documentation for `.absolutePath` and `.relativePath`\n// (https://uppy.io/docs/uppy/#working-with-uppy-files)\nconst getCheckedFilesWithPaths = (partialTree) => {\n    // Equivalent to `const cache = {}`, but makes keys such as 'hasOwnProperty' safe too\n    const cache = Object.create(null);\n    // We're only interested in injecting paths into 'checked' files\n    const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n    const companionFilesWithInjectedPaths = checkedFiles.map((file) => {\n        const absFolders = getPath(partialTree, file.id, cache);\n        const firstCheckedFolderIndex = absFolders.findIndex((i) => i.type === 'folder' && i.status === 'checked');\n        const relFolders = absFolders.slice(firstCheckedFolderIndex);\n        const absDirPath = `/${absFolders.map((i) => i.data.name).join('/')}`;\n        const relDirPath = relFolders.length === 1\n            ? // Must return `undefined` (which later turns into `null` in `.companionFileToUppyFile()`)\n                // (https://github.com/transloadit/uppy/pull/4537#issuecomment-1629136652)\n                undefined\n            : relFolders.map((i) => i.data.name).join('/');\n        return {\n            ...file.data,\n            absDirPath,\n            relDirPath,\n        };\n    });\n    return companionFilesWithInjectedPaths;\n};\nexport default getCheckedFilesWithPaths;\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "export class TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\n/**\nAn error to be thrown when the request is aborted by AbortController.\nDOMException is thrown instead of this Error when DOMException is available.\n*/\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\n/**\nTODO: Remove AbortError and just throw DOMException when targeting Node 18.\n*/\nconst getDOMException = errorMessage => globalThis.DOMException === undefined\n\t? new AbortError(errorMessage)\n\t: new DOMException(errorMessage);\n\n/**\nTODO: Remove below function and just 'reject(signal.reason)' when targeting Node 18.\n*/\nconst getAbortedReason = signal => {\n\tconst reason = signal.reason === undefined\n\t\t? getDOMException('This operation was aborted.')\n\t\t: signal.reason;\n\n\treturn reason instanceof Error ? reason : getDOMException(reason);\n};\n\nexport default function pTimeout(promise, options) {\n\tconst {\n\t\tmilliseconds,\n\t\tfallback,\n\t\tmessage,\n\t\tcustomTimers = {setTimeout, clearTimeout},\n\t} = options;\n\n\tlet timer;\n\tlet abortHandler;\n\n\tconst wrappedPromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || Math.sign(milliseconds) !== 1) {\n\t\t\tthrow new TypeError(`Expected \\`milliseconds\\` to be a positive number, got \\`${milliseconds}\\``);\n\t\t}\n\n\t\tif (options.signal) {\n\t\t\tconst {signal} = options;\n\t\t\tif (signal.aborted) {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t}\n\n\t\t\tabortHandler = () => {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t};\n\n\t\t\tsignal.addEventListener('abort', abortHandler, {once: true});\n\t\t}\n\n\t\tif (milliseconds === Number.POSITIVE_INFINITY) {\n\t\t\tpromise.then(resolve, reject);\n\t\t\treturn;\n\t\t}\n\n\t\t// We create the error outside of `setTimeout` to preserve the stack trace.\n\t\tconst timeoutError = new TimeoutError();\n\n\t\ttimer = customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (fallback) {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\tif (message === false) {\n\t\t\t\tresolve();\n\t\t\t} else if (message instanceof Error) {\n\t\t\t\treject(message);\n\t\t\t} else {\n\t\t\t\ttimeoutError.message = message ?? `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\t\treject(timeoutError);\n\t\t\t}\n\t\t}, milliseconds);\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tresolve(await promise);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t})();\n\t});\n\n\tconst cancelablePromise = wrappedPromise.finally(() => {\n\t\tcancelablePromise.clear();\n\t\tif (abortHandler && options.signal) {\n\t\t\toptions.signal.removeEventListener('abort', abortHandler);\n\t\t}\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\tcustomTimers.clearTimeout.call(undefined, timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n}\n", "// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nexport default function lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = Math.trunc(count / 2);\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\n", "import lowerBound from './lower-bound.js';\nexport default class PriorityQueue {\n    #queue = [];\n    enqueue(run, options) {\n        options = {\n            priority: 0,\n            ...options,\n        };\n        const element = {\n            priority: options.priority,\n            id: options.id,\n            run,\n        };\n        if (this.size === 0 || this.#queue[this.size - 1].priority >= options.priority) {\n            this.#queue.push(element);\n            return;\n        }\n        const index = lowerBound(this.#queue, element, (a, b) => b.priority - a.priority);\n        this.#queue.splice(index, 0, element);\n    }\n    setPriority(id, priority) {\n        const index = this.#queue.findIndex((element) => element.id === id);\n        if (index === -1) {\n            throw new ReferenceError(`No promise function with the id \"${id}\" exists in the queue.`);\n        }\n        const [item] = this.#queue.splice(index, 1);\n        this.enqueue(item.run, { priority, id });\n    }\n    dequeue() {\n        const item = this.#queue.shift();\n        return item?.run;\n    }\n    filter(options) {\n        return this.#queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this.#queue.length;\n    }\n}\n", "import { EventEmitter } from 'eventemitter3';\nimport pTimeout, { TimeoutError } from 'p-timeout';\nimport PriorityQueue from './priority-queue.js';\n/**\nPromise queue with concurrency control.\n*/\nexport default class PQueue extends EventEmitter {\n    #carryoverConcurrencyCount;\n    #isIntervalIgnored;\n    #intervalCount = 0;\n    #intervalCap;\n    #interval;\n    #intervalEnd = 0;\n    #intervalId;\n    #timeoutId;\n    #queue;\n    #queueClass;\n    #pending = 0;\n    // The `!` is needed because of https://github.com/microsoft/TypeScript/issues/32194\n    #concurrency;\n    #isPaused;\n    #throwOnTimeout;\n    // Use to assign a unique identifier to a promise function, if not explicitly specified\n    #idAssigner = 1n;\n    /**\n    Per-operation timeout in milliseconds. Operations fulfill once `timeout` elapses if they haven't already.\n\n    Applies to each future operation.\n    */\n    timeout;\n    // TODO: The `throwOnTimeout` option should affect the return types of `add()` and `addAll()`\n    constructor(options) {\n        super();\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = {\n            carryoverConcurrencyCount: false,\n            intervalCap: Number.POSITIVE_INFINITY,\n            interval: 0,\n            concurrency: Number.POSITIVE_INFINITY,\n            autoStart: true,\n            queueClass: PriorityQueue,\n            ...options,\n        };\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${options.intervalCap?.toString() ?? ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${options.interval?.toString() ?? ''}\\` (${typeof options.interval})`);\n        }\n        this.#carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n        this.#isIntervalIgnored = options.intervalCap === Number.POSITIVE_INFINITY || options.interval === 0;\n        this.#intervalCap = options.intervalCap;\n        this.#interval = options.interval;\n        this.#queue = new options.queueClass();\n        this.#queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        this.timeout = options.timeout;\n        this.#throwOnTimeout = options.throwOnTimeout === true;\n        this.#isPaused = options.autoStart === false;\n    }\n    get #doesIntervalAllowAnother() {\n        return this.#isIntervalIgnored || this.#intervalCount < this.#intervalCap;\n    }\n    get #doesConcurrentAllowAnother() {\n        return this.#pending < this.#concurrency;\n    }\n    #next() {\n        this.#pending--;\n        this.#tryToStartAnother();\n        this.emit('next');\n    }\n    #onResumeInterval() {\n        this.#onInterval();\n        this.#initializeIntervalIfNeeded();\n        this.#timeoutId = undefined;\n    }\n    get #isIntervalPaused() {\n        const now = Date.now();\n        if (this.#intervalId === undefined) {\n            const delay = this.#intervalEnd - now;\n            if (delay < 0) {\n                // Act as the interval was done\n                // We don't need to resume it here because it will be resumed on line 160\n                this.#intervalCount = (this.#carryoverConcurrencyCount) ? this.#pending : 0;\n            }\n            else {\n                // Act as the interval is pending\n                if (this.#timeoutId === undefined) {\n                    this.#timeoutId = setTimeout(() => {\n                        this.#onResumeInterval();\n                    }, delay);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #tryToStartAnother() {\n        if (this.#queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            if (this.#intervalId) {\n                clearInterval(this.#intervalId);\n            }\n            this.#intervalId = undefined;\n            this.emit('empty');\n            if (this.#pending === 0) {\n                this.emit('idle');\n            }\n            return false;\n        }\n        if (!this.#isPaused) {\n            const canInitializeInterval = !this.#isIntervalPaused;\n            if (this.#doesIntervalAllowAnother && this.#doesConcurrentAllowAnother) {\n                const job = this.#queue.dequeue();\n                if (!job) {\n                    return false;\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this.#initializeIntervalIfNeeded();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #initializeIntervalIfNeeded() {\n        if (this.#isIntervalIgnored || this.#intervalId !== undefined) {\n            return;\n        }\n        this.#intervalId = setInterval(() => {\n            this.#onInterval();\n        }, this.#interval);\n        this.#intervalEnd = Date.now() + this.#interval;\n    }\n    #onInterval() {\n        if (this.#intervalCount === 0 && this.#pending === 0 && this.#intervalId) {\n            clearInterval(this.#intervalId);\n            this.#intervalId = undefined;\n        }\n        this.#intervalCount = this.#carryoverConcurrencyCount ? this.#pending : 0;\n        this.#processQueue();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    #processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this.#tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this.#concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this.#concurrency = newConcurrency;\n        this.#processQueue();\n    }\n    async #throwOnAbort(signal) {\n        return new Promise((_resolve, reject) => {\n            signal.addEventListener('abort', () => {\n                reject(signal.reason);\n            }, { once: true });\n        });\n    }\n    /**\n    Updates the priority of a promise function by its id, affecting its execution order. Requires a defined concurrency limit to take effect.\n\n    For example, this can be used to prioritize a promise function to run earlier.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 0, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n\n    queue.setPriority('\uD83E\uDD80', 2);\n    ```\n\n    In this case, the promise function with `id: '\uD83E\uDD80'` runs second.\n\n    You can also deprioritize a promise function to delay its execution:\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 1, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84');\n    queue.add(async () => '\uD83E\uDD84', {priority: 0});\n\n    queue.setPriority('\uD83E\uDD80', -1);\n    ```\n    Here, the promise function with `id: '\uD83E\uDD80'` executes last.\n    */\n    setPriority(id, priority) {\n        this.#queue.setPriority(id, priority);\n    }\n    async add(function_, options = {}) {\n        // In case `id` is not defined.\n        options.id ??= (this.#idAssigner++).toString();\n        options = {\n            timeout: this.timeout,\n            throwOnTimeout: this.#throwOnTimeout,\n            ...options,\n        };\n        return new Promise((resolve, reject) => {\n            this.#queue.enqueue(async () => {\n                this.#pending++;\n                try {\n                    options.signal?.throwIfAborted();\n                    this.#intervalCount++;\n                    let operation = function_({ signal: options.signal });\n                    if (options.timeout) {\n                        operation = pTimeout(Promise.resolve(operation), { milliseconds: options.timeout });\n                    }\n                    if (options.signal) {\n                        operation = Promise.race([operation, this.#throwOnAbort(options.signal)]);\n                    }\n                    const result = await operation;\n                    resolve(result);\n                    this.emit('completed', result);\n                }\n                catch (error) {\n                    if (error instanceof TimeoutError && !options.throwOnTimeout) {\n                        resolve();\n                        return;\n                    }\n                    reject(error);\n                    this.emit('error', error);\n                }\n                finally {\n                    this.#next();\n                }\n            }, options);\n            this.emit('add');\n            this.#tryToStartAnother();\n        });\n    }\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this.#isPaused) {\n            return this;\n        }\n        this.#isPaused = false;\n        this.#processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this.#isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this.#queue = new this.#queueClass();\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('empty');\n    }\n    /**\n    @returns A promise that settles when the queue size is less than the given limit: `queue.size < limit`.\n\n    If you want to avoid having the queue grow beyond a certain size you can `await queue.onSizeLessThan()` before adding a new item.\n\n    Note that this only limits the number of items waiting to start. There could still be up to `concurrency` jobs already running that this call does not include in its calculation.\n    */\n    async onSizeLessThan(limit) {\n        // Instantly resolve if the queue is empty.\n        if (this.#queue.size < limit) {\n            return;\n        }\n        await this.#onEvent('next', () => this.#queue.size < limit);\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this.#pending === 0 && this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('idle');\n    }\n    async #onEvent(event, filter) {\n        return new Promise(resolve => {\n            const listener = () => {\n                if (filter && !filter()) {\n                    return;\n                }\n                this.off(event, listener);\n                resolve();\n            };\n            this.on(event, listener);\n        });\n    }\n    /**\n    Size of the queue, the number of queued items waiting to run.\n    */\n    get size() {\n        return this.#queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-array-callback-reference\n        return this.#queue.filter(options).length;\n    }\n    /**\n    Number of running items (no longer in the queue).\n    */\n    get pending() {\n        return this.#pending;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this.#isPaused;\n    }\n}\n", "/**\n * One-level copying is sufficient as mutations within our `partialTree` are limited to properties\n * such as `.status`, `.cached`, `.nextPagePath`, and not `.data = { THIS }`.\n */\nconst shallowClone = (partialTree) => {\n    return partialTree.map((item) => ({ ...item }));\n};\nexport default shallowClone;\n", "// p-queue does not have a `\"main\"` field in its `package.json`, and that makes `import/no-unresolved` freak out.\n// We can safely ignore it because bundlers will happily use the `\"exports\"` field instead.\nimport PQueue from 'p-queue';\nimport shallowClone from './shallowClone.js';\nconst recursivelyFetch = async (queue, poorTree, poorFolder, apiList, validateSingleFile) => {\n    let items = [];\n    let currentPath = poorFolder.cached\n        ? poorFolder.nextPagePath\n        : poorFolder.id;\n    while (currentPath) {\n        const response = await apiList(currentPath);\n        items = items.concat(response.items);\n        currentPath = response.nextPagePath;\n    }\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: 'checked',\n        parentId: poorFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: restrictionError ? 'unchecked' : 'checked',\n            parentId: poorFolder.id,\n            data: file,\n        };\n    });\n    poorFolder.cached = true;\n    poorFolder.nextPagePath = null;\n    poorTree.push(...files, ...folders);\n    folders.forEach(async (folder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, folder, apiList, validateSingleFile));\n    });\n};\nconst afterFill = async (partialTree, apiList, validateSingleFile, reportProgress) => {\n    const queue = new PQueue({ concurrency: 6 });\n    // fill up the missing parts of a partialTree!\n    const poorTree = shallowClone(partialTree);\n    const poorFolders = poorTree.filter((item) => item.type === 'folder' &&\n        item.status === 'checked' &&\n        // either \"not yet cached at all\" or \"some pages are left to fetch\"\n        (item.cached === false || item.nextPagePath));\n    // per each poor folder, recursively fetch all files and make them .checked!\n    poorFolders.forEach((poorFolder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, poorFolder, apiList, validateSingleFile));\n    });\n    queue.on('completed', () => {\n        const nOfFilesChecked = poorTree.filter((i) => i.type === 'file' && i.status === 'checked').length;\n        reportProgress(nOfFilesChecked);\n    });\n    await queue.onIdle();\n    return poorTree;\n};\nexport default afterFill;\n", "const afterOpenFolder = (oldPartialTree, discoveredItems, clickedFolder, currentPagePath, validateSingleFile) => {\n    // Filter out existing items in the partial tree (we don't want duplicates)\n    // If we don't, we would get a duplicate when the item is already added to the partial tree in the search view\n    // and the user then enters its parent from the normal view e.g either through breadcrumbs or manually navigating to it.\n    const discoveredUniqueItems = discoveredItems.filter((i) => !oldPartialTree.find((f) => f.id === i.requestPath));\n    const discoveredFolders = discoveredUniqueItems.filter((i) => i.isFolder === true);\n    const discoveredFiles = discoveredUniqueItems.filter((i) => i.isFolder === false);\n    const isParentFolderChecked = clickedFolder.type === 'folder' && clickedFolder.status === 'checked';\n    const folders = discoveredFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: clickedFolder.id,\n        data: folder,\n    }));\n    const files = discoveredFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: clickedFolder.id,\n            data: file,\n        };\n    });\n    // just doing `clickedFolder.cached = true` in a non-mutating way\n    const updatedClickedFolder = {\n        ...clickedFolder,\n        cached: true,\n        nextPagePath: currentPagePath,\n    };\n    const partialTreeWithUpdatedClickedFolder = oldPartialTree.map((folder) => folder.id === updatedClickedFolder.id ? updatedClickedFolder : folder);\n    const newPartialTree = [\n        ...partialTreeWithUpdatedClickedFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterOpenFolder;\n", "const afterScrollFolder = (oldPartialTree, currentFolderId, items, nextPagePath, validateSingleFile) => {\n    const currentFolder = oldPartialTree.find((i) => i.id === currentFolderId);\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    // just doing `scrolledFolder.nextPagePath = ...` in a non-mutating way\n    const scrolledFolder = { ...currentFolder, nextPagePath };\n    const partialTreeWithUpdatedScrolledFolder = oldPartialTree.map((folder) => folder.id === scrolledFolder.id ? scrolledFolder : folder);\n    const isParentFolderChecked = scrolledFolder.type === 'folder' && scrolledFolder.status === 'checked';\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: scrolledFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: scrolledFolder.id,\n            data: file,\n        };\n    });\n    const newPartialTree = [\n        ...partialTreeWithUpdatedScrolledFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterScrollFolder;\n", "import shallowClone from './shallowClone.js';\n/*\n  FROM        | TO\n\n  root        |  root\n    folder    |    folder\n    folder \u2705\uFE0E  |    folder \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      folder  |      folder \u2705\uFE0E\n        file  |        file \u2705\uFE0E\n    file      |    file\n    file      |    file\n*/\nconst percolateDown = (tree, id, shouldMarkAsChecked) => {\n    const children = tree.filter((item) => item.type !== 'root' && item.parentId === id);\n    children.forEach((item) => {\n        item.status =\n            shouldMarkAsChecked && !(item.type === 'file' && item.restrictionError)\n                ? 'checked'\n                : 'unchecked';\n        percolateDown(tree, item.id, shouldMarkAsChecked);\n    });\n};\n/*\n  FROM         | TO\n\n  root         |  root\n    folder     |    folder\n    folder     |    folder [\u25AC] ('partial' status)\n      file     |      file\n      folder   |      folder \u2705\uFE0E\n        file \u2705\uFE0E |       file \u2705\uFE0E\n    file       |    file\n    file       |    file\n*/\nconst percolateUp = (tree, id) => {\n    const folder = tree.find((item) => item.id === id);\n    if (folder.type === 'root')\n        return;\n    const validChildren = tree.filter((item) => \n    // is a child\n    item.type !== 'root' &&\n        item.parentId === folder.id &&\n        // does pass validations\n        !(item.type === 'file' && item.restrictionError));\n    const areAllChildrenChecked = validChildren.every((item) => item.status === 'checked');\n    const areAllChildrenUnchecked = validChildren.every((item) => item.status === 'unchecked');\n    /**\n     * We should *only* set parent folder to checked/unchecked if it has been fully read (`cached`).\n     * Otherwise, checking a nested folder from the search view also marks its parent as checked,\n     * which could be incorrect because there might be more unselected (unloaded) files.\n     *\n     * Example: /foo/bar/new/myfolder\n     * If we search for \"myfolder\", we only build the minimal path (using ProviderView.#buildSearchResultPath)\n     * up to that folder adding nodes for \"bar\", \"new\", and \"myfolder\" (assuming \"foo\" is already\n     * present in the partialTree as part of the root folder).\n     * Since \"foo\", \"bar\", and \"new\" aren\u2019t fully fetched yet, we don\u2019t know if they have other children.\n     * If the user checks \"myfolder\" from the search results and we propagate the checked state\n     * upward without verifying parent.cached, it would incorrectly mark all its parents as checked.\n     * Later, when the user navigates to any of \"foo\", \"bar\", \"new\" through the Normal View (via breadcrumbs or manually),\n     * PartialTreeUtils.afterOpenFolder would then incorrectly mark and display all its children as checked.\n     */\n    if (areAllChildrenChecked && folder.cached) {\n        folder.status = 'checked';\n    }\n    else if (areAllChildrenUnchecked) {\n        folder.status = 'unchecked';\n    }\n    else {\n        folder.status = 'partial';\n    }\n    percolateUp(tree, folder.parentId);\n};\nconst afterToggleCheckbox = (oldTree, checkedIds) => {\n    const tree = shallowClone(oldTree);\n    const newlyCheckedItems = tree.filter((item) => item.type !== 'root' && checkedIds.includes(item.id));\n    newlyCheckedItems.forEach((item) => {\n        // allow toggling:\n        const newStatus = item.status === 'checked' ? 'unchecked' : 'checked';\n        // and if it's a file, we need to respect restrictions\n        if (item.type === 'file') {\n            item.status = item.restrictionError ? 'unchecked' : newStatus;\n        }\n        else {\n            item.status = newStatus;\n        }\n        percolateDown(tree, item.id, item.status === 'checked');\n    });\n    // all checked items have the same parent so we only need to perlocate the first item\n    percolateUp(tree, newlyCheckedItems[0].parentId);\n    return tree;\n};\nexport default afterToggleCheckbox;\n", "import afterFill from './afterFill.js';\nimport afterOpenFolder from './afterOpenFolder.js';\nimport afterScrollFolder from './afterScrollFolder.js';\nimport afterToggleCheckbox from './afterToggleCheckbox.js';\nexport default {\n    afterOpenFolder,\n    afterScrollFolder,\n    afterToggleCheckbox,\n    afterFill,\n};\n", "const shouldHandleScroll = (event) => {\n    const { scrollHeight, scrollTop, offsetHeight } = event.target;\n    const scrollPosition = scrollHeight - (scrollTop + offsetHeight);\n    return scrollPosition < 50;\n};\nexport default shouldHandleScroll;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport ItemIcon from './ItemIcon.js';\nconst SearchResultItem = ({ i18n, item, toggleCheckbox, openFolder, }) => {\n    const isDisabled = 'restrictionError' in item &&\n        item.restrictionError != null &&\n        item.status !== 'checked';\n    return (_jsxs(\"li\", { className: classNames('uppy-ProviderBrowserItem', { 'uppy-ProviderBrowserItem--disabled': isDisabled }, { 'uppy-ProviderBrowserItem--noPreview': item.data.icon === 'video' }, { 'uppy-ProviderBrowserItem--is-checked': item.status === 'checked' }, { 'uppy-ProviderBrowserItem--is-partial': item.status === 'partial' }), title: ('restrictionError' in item ? item.restrictionError : undefined) ??\n            undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox\", onChange: () => toggleCheckbox(item, false), checked: item.status === 'checked', \"aria-label\": item.data.name ?? i18n('unnamed'), disabled: isDisabled, \"data-uppy-super-focusable\": true }), _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner\", disabled: isDisabled, \"aria-label\": item.data.name, onClick: () => {\n                    if (item.data.isFolder) {\n                        openFolder(item.id);\n                    }\n                }, children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: item.data.icon }) }), item.data.name ?? i18n('unnamed')] })] }));\n};\nexport default SearchResultItem;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport SearchResultItem from '../Item/components/SearchResultItem.js';\nconst GlobalSearchView = ({ searchResults, toggleCheckbox, openFolder, i18n, }) => {\n    if (searchResults.length === 0) {\n        return _jsx(\"div\", { className: \"uppy-Provider-empty\", children: i18n('noFilesFound') });\n    }\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(\"ul\", { className: \"uppy-ProviderBrowser-list\", children: searchResults.map((item) => (_jsx(SearchResultItem, { i18n: i18n, item: item, toggleCheckbox: toggleCheckbox, openFolder: openFolder }, item.id))) }) }));\n};\nexport default GlobalSearchView;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport Breadcrumbs from '../Breadcrumbs.js';\nimport User from './User.js';\nexport default function Header(props) {\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-header\", children: _jsxs(\"div\", { className: classNames('uppy-ProviderBrowser-headerBar', !props.showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple'), children: [props.showBreadcrumbs && (_jsx(Breadcrumbs, { openFolder: props.openFolder, breadcrumbs: props.breadcrumbs, breadcrumbsIcon: props.pluginIcon?.(), title: props.title, i18n: props.i18n })), _jsx(User, { logout: props.logout, username: props.username, i18n: props.i18n })] }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function Breadcrumbs(props) {\n    const { openFolder, title, breadcrumbsIcon, breadcrumbs, i18n } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Provider-breadcrumbs\", children: [_jsx(\"div\", { className: \"uppy-Provider-breadcrumbsIcon\", children: breadcrumbsIcon }), breadcrumbs.map((folder, index) => (_jsxs(Fragment, { children: [_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn\", onClick: () => openFolder(folder.id), children: folder.type === 'root'\n                            ? title\n                            : (folder.data.name ?? i18n('unnamed')) }, folder.id), breadcrumbs.length === index + 1 ? '' : ' / '] })))] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function User({ i18n, logout, username }) {\n    return (_jsxs(Fragment, { children: [username && (_jsx(\"span\", { className: \"uppy-ProviderBrowser-user\", children: username }, \"username\")), _jsx(\"button\", { type: \"button\", onClick: logout, className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout\", children: i18n('logOut') }, \"logout\")] }));\n}\n", "function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var t=\"undefined\"!=typeof self?self:global;const s=\"undefined\"!=typeof navigator,i=s&&\"undefined\"==typeof HTMLImageElement,n=!(\"undefined\"==typeof global||\"undefined\"==typeof process||!process.versions||!process.versions.node),r=t.Buffer,a=!!r,h=e=>void 0!==e;function f(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(h).length)}function l(e){let t=new Error(e);throw delete t.stack,t}function o(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const u=e=>String.fromCharCode.apply(null,e),d=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf-8\"):void 0;class c{static from(e,t){return e instanceof this&&e.le===t?e:new c(e,void 0,void 0,t)}constructor(e,t=0,s,i){if(\"boolean\"==typeof i&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===s&&(s=e.byteLength-t);let i=new DataView(e,t,s);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof c){void 0===s&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&l(\"Creating view outside of available memory in ArrayBuffer\");let i=new DataView(e.buffer,t,s);this._swapDataView(i)}else if(\"number\"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else l(\"Invalid input argument for BufferView: \"+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=c){return e instanceof DataView||e instanceof c?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||l(\"BufferView.set(): Invalid data argument.\"),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new c(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return i=s,d?d.decode(i):a?Buffer.from(i).toString(\"utf8\"):decodeURIComponent(escape(u(i)));var i}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return u(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)s.push(this.getUint16(e+i));return u(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function p(e,t){l(`${e} '${t}' was not loaded, try using full build of exifr.`)}class g extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||p(this.kind,e),t&&(e in t||function(e,t){l(`Unknown ${e} '${t}'.`)}(this.kind,e),t[e].enabled||p(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var m=new g(\"file parser\"),y=new g(\"segment parser\"),b=new g(\"file reader\");let w=t.fetch;function k(e,t){return(i=e).startsWith(\"data:\")||i.length>1e4?v(e,t,\"base64\"):n&&e.includes(\"://\")?O(e,t,\"url\",S):n?v(e,t,\"fs\"):s?O(e,t,\"url\",S):void l(\"Invalid input argument\");var i}async function O(e,t,s,i){return b.has(s)?v(e,t,s):i?async function(e,t){let s=await t(e);return new c(s)}(e,i):void l(`Parser ${s} is not loaded`)}async function v(e,t,s){let i=new(b.get(s))(e,t);return await i.read(),i}const S=e=>w(e).then((e=>e.arrayBuffer())),A=e=>new Promise(((t,s)=>{let i=new FileReader;i.onloadend=()=>t(i.result||new ArrayBuffer),i.onerror=s,i.readAsArrayBuffer(e)}));class U extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function x(e,t,s){let i=new U;for(let[e,t]of s)i.set(e,t);if(Array.isArray(t))for(let s of t)e.set(s,i);else e.set(t,i);return i}function C(e,t,s){let i,n=e.get(t);for(i of s)n.set(i[0],i[1])}const B=new Map,V=new Map,I=new Map,L=[\"chunked\",\"firstChunkSize\",\"firstChunkSizeNode\",\"firstChunkSizeBrowser\",\"chunkSize\",\"chunkLimit\"],T=[\"jfif\",\"xmp\",\"icc\",\"iptc\",\"ihdr\"],z=[\"tiff\",...T],P=[\"ifd0\",\"ifd1\",\"exif\",\"gps\",\"interop\"],F=[...z,...P],j=[\"makerNote\",\"userComment\"],E=[\"translateKeys\",\"translateValues\",\"reviveValues\",\"multiSegment\"],M=[...E,\"sanitize\",\"mergeOutput\",\"silentErrors\"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class D extends _{get needed(){return this.enabled||this.deps.size>0}constructor(t,s,i,n){if(super(),e(this,\"enabled\",!1),e(this,\"skip\",new Set),e(this,\"pick\",new Set),e(this,\"deps\",new Set),e(this,\"translateKeys\",!1),e(this,\"translateValues\",!1),e(this,\"reviveValues\",!1),this.key=t,this.enabled=s,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=P.includes(t),this.canBeFiltered&&(this.dict=B.get(t)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(\"object\"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:e,skip:t}=i;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:l(`Invalid options argument: ${i}`)}applyInheritables(e){let t,s;for(t of E)s=e[t],void 0!==s&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,i,{tagKeys:n,tagValues:r}=this.dict;for(s of e)\"string\"==typeof s?(i=r.indexOf(s),-1===i&&(i=n.indexOf(Number(s))),-1!==i&&t.add(Number(n[i]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _{static useCached(e){let t=$.get(e);return void 0!==t||(t=new this(e),$.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):\"object\"==typeof e?this.setupFromObject(e):l(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=s?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=N[e];for(e of F)this[e]=new D(e,N[e],void 0,this)}setupFromTrue(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=!0;for(e of F)this[e]=new D(e,!0,void 0,this)}setupFromArray(e){let t;for(t of L)this[t]=N[t];for(t of M)this[t]=N[t];for(t of j)this[t]=N[t];for(t of F)this[t]=new D(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,P)}setupFromObject(e){let t;for(t of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,e),L))this[t]=W(e[t],N[t]);for(t of M)this[t]=W(e[t],N[t]);for(t of j)this[t]=W(e[t],N[t]);for(t of z)this[t]=new D(t,N[t],e[t],this);for(t of P)this[t]=new D(t,N[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,P,F),!0===e.tiff?this.batchEnableWithBool(P,!0):!1===e.tiff?this.batchEnableWithUserValue(P,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,P):\"object\"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,P)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let e=t[s];this[s].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,s,i=s){if(e&&e.length){for(let e of i)this[e].enabled=!1;let t=K(e,s);for(let[e,s]of t)X(this[e].pick,s),this[e].enabled=!0}else if(t&&t.length){let e=K(t,s);for(let[t,s]of e)X(this[t].skip,s)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:i,icc:n}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=P.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let e of P)this[e].finalizeFilters()}get onlyTiff(){return!T.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of z)this[e].enabled&&!y.has(e)&&p(\"segment parser\",e)}}function K(e,t){let s,i,n,r,a=[];for(n of t){for(r of(s=B.get(n),i=[],s))(e.includes(r[0])||e.includes(r[1]))&&i.push(r[0]);i.length&&a.push([n,i])}return a}function W(e,t){return void 0!==e?e:void 0!==t?t:void 0}function X(e,t){for(let s of t)e.add(s)}e(R,\"default\",N);class H{constructor(t){e(this,\"parsers\",{}),e(this,\"output\",{}),e(this,\"errors\",[]),e(this,\"pushToErrors\",(e=>this.errors.push(e))),this.options=R.useCached(t)}async read(e){this.file=await function(e,t){return\"string\"==typeof e?k(e,t):s&&!i&&e instanceof HTMLImageElement?k(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new c(e):s&&e instanceof Blob?O(e,t,\"blob\",A):void l(\"Invalid input argument\")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,i]of m)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),l(\"Unknown file format\")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),f(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let s=await t.parse();t.assignToOutput(e,s)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=y.get(\"tiff\",e);var i;if(t.tiff?i={start:0,type:\"tiff\"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment(\"tiff\")),void 0===i)return;let n=await this.fileParser.ensureSegmentChunk(i),r=this.parsers.tiff=new s(n,e,t),a=await r.extractThumbnail();return t.close&&t.close(),a}}async function Y(e,t){let s=new H(t);return await s.read(e),s.parse()}var G=Object.freeze({__proto__:null,parse:Y,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R});class J{static findPosition(e,t){let s=e.getUint16(t+2)+2,i=\"function\"==typeof this.headerLength?this.headerLength(e,t,s):this.headerLength,n=t+i,r=s-i;return{offset:t,length:s,headerLength:i,start:n,size:r,end:n+r}}static parse(e,t={}){return new this(e,new R({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof c?e:new c(e)}constructor(t,s={},i){e(this,\"errors\",[]),e(this,\"raw\",new Map),e(this,\"handleError\",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=s,this.localOptions=s[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=I.get(t),i=V.get(t),n=B.get(t),r=this.options[t],a=r.reviveValues&&!!s,h=r.translateValues&&!!i,f=r.translateKeys&&!!n,l={};for(let[t,r]of e)a&&s.has(t)?r=s.get(t)(r):h&&i.has(t)&&(r=this.translateValue(r,i.get(t))),f&&n.has(t)&&(t=n.get(t)||t),l[t]=r;return l}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}e(J,\"headerLength\",4),e(J,\"type\",void 0),e(J,\"multiSegment\",!1),e(J,\"canHandle\",(()=>!1));function q(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Q(e){return e>=224&&e<=239}function Z(e,t,s){for(let[i,n]of y)if(n.canHandle(e,t,s))return i}class ee extends class{constructor(t,s,i){e(this,\"errors\",[]),e(this,\"ensureSegmentChunk\",(async e=>{let t=e.start,s=e.size||65536;if(this.file.chunked)if(this.file.available(t,s))e.chunk=this.file.subarray(t,s);else try{e.chunk=await this.file.readChunk(t,s)}catch(t){l(`Couldn't read segment: ${JSON.stringify(e)}. ${t.message}`)}else this.file.byteLength>t+s?e.chunk=this.file.subarray(t,s):void 0===e.size?e.chunk=this.file.subarray(t):l(\"Segment unreachable: \"+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=s,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(y.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:e,chunk:s}=t,i=this.options[e];if(i&&i.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...t){super(...t),e(this,\"appSegments\",[]),e(this,\"jpegSegments\",[]),e(this,\"unknownSegments\",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(y.keyList())):(e=void 0===e?y.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&y.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:i,wanted:n,remaining:r}=this;if(!i&&this.file.chunked&&(i=Array.from(n).some((e=>{let t=y.get(e),s=this.options[e];return t.multiSegment&&s.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let t=!1;for(;r.size>0&&!t&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:i}=s,n=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>i&&!n?!await s.readNextChunk(e):!await s.readNextChunk(i),void 0===(e=this.findAppSegmentsInRange(e,s.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let s,i,n,r,a,h,{file:f,findAll:l,wanted:o,remaining:u,options:d}=this;for(;e<t;e++)if(255===f.getUint8(e))if(s=f.getUint8(e+1),Q(s)){if(i=f.getUint16(e+2),n=Z(f,e,i),n&&o.has(n)&&(r=y.get(n),a=r.findPosition(f,e),h=d[n],a.type=n,this.appSegments.push(a),!l&&(r.multiSegment&&h.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||u.delete(n)):u.delete(n),0===u.size)))break;d.recordUnknownSegments&&(a=J.findPosition(f,e),a.marker=s,this.unknownSegments.push(a)),e+=i+1}else if(q(s)){if(i=f.getUint16(e+2),218===s&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:s}),e+=i+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e,t){let s,i,n,r=new Map;for(let a=0;a<e.length;a++)s=e[a],i=s[t],r.has(i)?n=r.get(i):r.set(i,n=[]),n.push(s);return Array.from(r)}(this.appSegments,\"type\");this.mergedAppSegments=e.map((([e,t])=>{let s=y.get(e,this.options);if(s.handleMultiSegments){return{type:e,chunk:s.handleMultiSegments(t)}}return t[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}e(ee,\"type\",\"jpeg\"),m.set(\"jpeg\",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:i,skip:n}=this.options[t];i=new Set(i);let r=i.size>0,a=0===n.size,h=this.chunk.getUint16(e);e+=2;for(let f=0;f<h;f++){let h=this.chunk.getUint16(e);if(r){if(i.has(h)&&(s.set(h,this.parseTag(e,h,t)),i.delete(h),0===i.size))break}else!a&&n.has(h)||s.set(h,this.parseTag(e,h,t));e+=12}return s}parseTag(e,t,s){let{chunk:i}=this,n=i.getUint16(e+2),r=i.getUint32(e+4),a=te[n];if(a*r<=4?e+=8:e=i.getUint32(e+8),(n<1||n>13)&&l(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e}`),e>i.byteLength&&l(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${i.byteLength}`),1===n)return i.getUint8Array(e,r);if(2===n)return\"\"===(h=function(e){for(;e.endsWith(\"\\0\");)e=e.slice(0,-1);return e}(h=i.getString(e,r)).trim())?void 0:h;var h;if(7===n)return i.getUint8Array(e,r);if(1===r)return this.parseTagValue(n,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(r),s=a;for(let i=0;i<r;i++)t[i]=this.parseTagValue(n,e),e+=s;return t}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:l(`Invalid tiff type ${e}`)}}}class ie extends se{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse(\"parseExifBlock\"),e.gps.enabled&&await this.safeParse(\"parseGpsBlock\"),e.interop.enabled&&await this.safeParse(\"parseInteropBlock\"),e.ifd1.enabled&&await this.safeParse(\"parseThumbnailBlock\"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l(\"Malformed EXIF data\"),!e.chunked&&this.ifd0Offset>e.byteLength&&l(`IFD0 offset points to outside of file.\\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,o(this.options));let t=this.parseBlock(this.ifd0Offset,\"ifd0\");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o(this.options));let e=this.parseBlock(this.exifOffset,\"exif\");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&1===s.length&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,\"gps\");return e&&e.has(2)&&e.has(4)&&(e.set(\"latitude\",ne(...e.get(2),e.get(1))),e.set(\"longitude\",ne(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,\"interop\")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,\"ifd1\"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,i={};for(t of P)if(e=this[t],!f(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(\"ifd1\"===t)continue;Object.assign(i,s)}else i[t]=s;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,i]of Object.entries(t))this.assignObjectToOutput(e,s,i)}}function ne(e,t,s,i){var n=e+t/60+s/3600;return\"S\"!==i&&\"W\"!==i||(n*=-1),n}e(ie,\"type\",\"tiff\"),e(ie,\"headerLength\",10),y.set(\"tiff\",ie);var re=Object.freeze({__proto__:null,default:G,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R,parse:Y});const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},he=Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});async function fe(e){let t=new H(he);await t.read(e);let s=await t.parse();if(s&&s.gps){let{latitude:e,longitude:t}=s.gps;return{latitude:e,longitude:t}}}const le=Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oe(e){let t=new H(le);await t.read(e);let s=await t.extractThumbnail();return s&&a?r.from(s):s}async function ue(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(e){let t=new H(de);await t.read(e);let s=await t.parse();if(s&&s.ifd0)return s.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(\"object\"==typeof navigator){let e=navigator.userAgent;if(e.includes(\"iPad\")||e.includes(\"iPhone\")){let t=e.match(/OS (\\d+)_(\\d+)/);if(t){let[,e,s]=t,i=Number(e)+.1*Number(s);ge=i<13.4,me=!1}}else if(e.includes(\"OS X 10\")){let[,t]=e.match(/OS X 10[_.](\\d+)/);ge=me=Number(t)<15}if(e.includes(\"Chrome/\")){let[,t]=e.match(/Chrome\\/(\\d+)/);ge=me=Number(t)<81}else if(e.includes(\"Firefox/\")){let[,t]=e.match(/Firefox\\/(\\d+)/);ge=me=Number(t)<77}}async function ye(e){let t=await ce(e);return Object.assign({canvas:ge,css:me},pe[t])}class be extends c{constructor(...t){super(...t),e(this,\"ranges\",new we),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(0===e&&0===this.byteLength&&s){let e=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(e)}else{let s=e+t;if(s>this.byteLength){let{dataView:e}=this._extend(s);this._swapDataView(e)}}}_extend(e){let t;t=a?r.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class we{constructor(){e(this,\"list\",[])}get length(){return this.list.length}add(e,t,s=0){let i=e+t,n=this.list.filter((t=>ke(e,t.offset,i)||ke(e,t.end,i)));if(n.length>0){e=Math.min(e,...n.map((e=>e.offset))),i=Math.max(i,...n.map((e=>e.end))),t=i-e;let s=n.shift();s.offset=e,s.length=t,s.end=i,this.list=this.list.filter((e=>!n.includes(e)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let s=e+t;return this.list.some((t=>t.offset<=e&&s<=t.end))}}function ke(e,t,s){return e<=t&&t<=s}class Oe extends be{constructor(t,s){super(0),e(this,\"chunksRead\",0),this.input=t,this.options=s}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b.set(\"blob\",class extends Oe{async readWhole(){this.chunked=!1;let e=await A(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let s=t?e+t:void 0,i=this.input.slice(e,s),n=await A(i);return this.set(n,e,!0)}});export default re;export{H as Exifr,R as Options,M as allFormatters,L as chunkedProps,x as createDictionary,C as extendDictionary,S as fetchUrlAsArrayBuffer,m as fileParsers,b as fileReaders,fe as gps,he as gpsOnlyOptions,E as inheritables,ce as orientation,de as orientationOnlyOptions,T as otherSegments,Y as parse,A as readBlobAsArrayBuffer,ge as rotateCanvas,me as rotateCss,ye as rotation,pe as rotations,y as segmentParsers,z as segments,F as segmentsAndBlocks,B as tagKeys,I as tagRevivers,V as tagValues,oe as thumbnail,le as thumbnailOnlyOptions,ue as thumbnailUrl,P as tiffBlocks,j as tiffExtractables};\n", "{\n  \"name\": \"@uppy/thumbnail-generator\",\n  \"description\": \"Uppy plugin that generates small previews of images to show on your upload UI.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"thumbnail\",\n    \"preview\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"exifr\": \"^7.0.0\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"namespace-emitter\": \"2.0.1\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "export default {\n    strings: {\n        generatingThumbnails: 'Generating thumbnails...',\n    },\n};\n", "import { UIPlugin } from '@uppy/core';\nimport { dataURItoBlob, isObjectURL, isPreviewSupported } from '@uppy/utils';\n// @ts-ignore untyped\nimport { rotation } from 'exifr/dist/mini.esm.mjs';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\n/**\n * Save a <canvas> element's content to a Blob object.\n *\n */\nfunction canvasToBlob(canvas, type, quality) {\n    try {\n        canvas.getContext('2d').getImageData(0, 0, 1, 1);\n    }\n    catch (err) {\n        if (err.code === 18) {\n            return Promise.reject(new Error('cannot read image, probably an svg with external resources'));\n        }\n    }\n    if (canvas.toBlob) {\n        return new Promise((resolve) => {\n            canvas.toBlob(resolve, type, quality);\n        }).then((blob) => {\n            if (blob === null) {\n                throw new Error('cannot read image, probably an svg with external resources');\n            }\n            return blob;\n        });\n    }\n    return Promise.resolve()\n        .then(() => {\n        return dataURItoBlob(canvas.toDataURL(type, quality), {});\n    })\n        .then((blob) => {\n        if (blob === null) {\n            throw new Error('could not extract blob, probably an old browser');\n        }\n        return blob;\n    });\n}\nfunction rotateImage(image, translate) {\n    let w = image.width;\n    let h = image.height;\n    if (translate.deg === 90 || translate.deg === 270) {\n        w = image.height;\n        h = image.width;\n    }\n    const canvas = document.createElement('canvas');\n    canvas.width = w;\n    canvas.height = h;\n    const context = canvas.getContext('2d');\n    context.translate(w / 2, h / 2);\n    if (translate.canvas) {\n        context.rotate(translate.rad);\n        context.scale(translate.scaleX, translate.scaleY);\n    }\n    context.drawImage(image, -image.width / 2, -image.height / 2, image.width, image.height);\n    return canvas;\n}\n/**\n * Make sure the image doesn\u2019t exceed browser/device canvas limits.\n * For ios with 256 RAM and ie\n */\nfunction protect(image) {\n    // https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n    const ratio = image.width / image.height;\n    const maxSquare = 5000000; // ios max canvas square\n    const maxSize = 4096; // ie max canvas dimensions\n    let maxW = Math.floor(Math.sqrt(maxSquare * ratio));\n    let maxH = Math.floor(maxSquare / Math.sqrt(maxSquare * ratio));\n    if (maxW > maxSize) {\n        maxW = maxSize;\n        maxH = Math.round(maxW / ratio);\n    }\n    if (maxH > maxSize) {\n        maxH = maxSize;\n        maxW = Math.round(ratio * maxH);\n    }\n    if (image.width > maxW) {\n        const canvas = document.createElement('canvas');\n        canvas.width = maxW;\n        canvas.height = maxH;\n        canvas.getContext('2d').drawImage(image, 0, 0, maxW, maxH);\n        return canvas;\n    }\n    return image;\n}\nconst defaultOptions = {\n    thumbnailWidth: null,\n    thumbnailHeight: null,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    lazy: false,\n};\n/**\n * The Thumbnail Generator plugin\n */\nexport default class ThumbnailGenerator extends UIPlugin {\n    static VERSION = packageJson.version;\n    queue;\n    queueProcessing;\n    defaultThumbnailDimension;\n    thumbnailType;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.type = 'modifier';\n        this.id = this.opts.id || 'ThumbnailGenerator';\n        this.title = 'Thumbnail Generator';\n        this.queue = [];\n        this.queueProcessing = false;\n        this.defaultThumbnailDimension = 200;\n        this.thumbnailType = this.opts.thumbnailType;\n        this.defaultLocale = locale;\n        this.i18nInit();\n        if (this.opts.lazy && this.opts.waitForThumbnailsBeforeUpload) {\n            throw new Error('ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.');\n        }\n    }\n    createThumbnail(file, targetWidth, targetHeight) {\n        if (file.data == null)\n            throw new Error('File data is empty');\n        const originalUrl = URL.createObjectURL(file.data);\n        const onload = new Promise((resolve, reject) => {\n            const image = new Image();\n            image.src = originalUrl;\n            image.addEventListener('load', () => {\n                URL.revokeObjectURL(originalUrl);\n                resolve(image);\n            });\n            image.addEventListener('error', (event) => {\n                URL.revokeObjectURL(originalUrl);\n                reject(event.error || new Error('Could not create thumbnail'));\n            });\n        });\n        const orientationPromise = rotation(file.data).catch(() => 1);\n        return Promise.all([onload, orientationPromise])\n            .then(([image, orientation]) => {\n            const dimensions = this.getProportionalDimensions(image, targetWidth, targetHeight, orientation.deg);\n            const rotatedImage = rotateImage(image, orientation);\n            const resizedImage = this.resizeImage(rotatedImage, dimensions.width, dimensions.height);\n            return canvasToBlob(resizedImage, this.thumbnailType, 80);\n        })\n            .then((blob) => {\n            return URL.createObjectURL(blob);\n        });\n    }\n    /**\n     * Get the new calculated dimensions for the given image and a target width\n     * or height. If both width and height are given, only width is taken into\n     * account. If neither width nor height are given, the default dimension\n     * is used.\n     */\n    getProportionalDimensions(img, width, height, deg) {\n        let aspect = img.width / img.height;\n        if (deg === 90 || deg === 270) {\n            aspect = img.height / img.width;\n        }\n        if (width != null) {\n            let targetWidth = width;\n            // Thumbnail shouldn\u2019t be enlarged / upscaled, only reduced.\n            // If img is already smaller than width/height, leave it as is.\n            if (img.width < width)\n                targetWidth = img.width;\n            return {\n                width: targetWidth,\n                height: Math.round(targetWidth / aspect),\n            };\n        }\n        if (height != null) {\n            let targetHeight = height;\n            if (img.height < height)\n                targetHeight = img.height;\n            return {\n                width: Math.round(targetHeight * aspect),\n                height: targetHeight,\n            };\n        }\n        return {\n            width: this.defaultThumbnailDimension,\n            height: Math.round(this.defaultThumbnailDimension / aspect),\n        };\n    }\n    /**\n     * Resize an image to the target `width` and `height`.\n     *\n     * Returns a Canvas with the resized image on it.\n     */\n    resizeImage(image, targetWidth, targetHeight) {\n        // Resizing in steps refactored to use a solution from\n        // https://blog.uploadcare.com/image-resize-in-browsers-is-broken-e38eed08df01\n        let img = protect(image);\n        let steps = Math.ceil(Math.log2(img.width / targetWidth));\n        if (steps < 1) {\n            steps = 1;\n        }\n        let sW = targetWidth * 2 ** (steps - 1);\n        let sH = targetHeight * 2 ** (steps - 1);\n        const x = 2;\n        while (steps--) {\n            const canvas = document.createElement('canvas');\n            canvas.width = sW;\n            canvas.height = sH;\n            canvas.getContext('2d').drawImage(img, 0, 0, sW, sH);\n            img = canvas;\n            sW = Math.round(sW / x);\n            sH = Math.round(sH / x);\n        }\n        return img;\n    }\n    /**\n     * Set the preview URL for a file.\n     */\n    setPreviewURL(fileID, preview) {\n        this.uppy.setFileState(fileID, { preview });\n    }\n    addToQueue(fileID) {\n        this.queue.push(fileID);\n        if (this.queueProcessing === false) {\n            this.processQueue();\n        }\n    }\n    processQueue() {\n        this.queueProcessing = true;\n        if (this.queue.length > 0) {\n            const current = this.uppy.getFile(this.queue.shift());\n            if (!current) {\n                this.uppy.log('[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug', 'error');\n                return Promise.resolve();\n            }\n            return this.requestThumbnail(current)\n                .catch(() => { })\n                .then(() => this.processQueue());\n        }\n        this.queueProcessing = false;\n        this.uppy.log('[ThumbnailGenerator] Emptied thumbnail queue');\n        this.uppy.emit('thumbnail:all-generated');\n        return Promise.resolve();\n    }\n    requestThumbnail(file) {\n        if (isPreviewSupported(file.type) && !file.isRemote) {\n            return this.createThumbnail(file, this.opts.thumbnailWidth, this.opts.thumbnailHeight)\n                .then((preview) => {\n                this.setPreviewURL(file.id, preview);\n                this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${file.id}`);\n                this.uppy.emit('thumbnail:generated', this.uppy.getFile(file.id), preview);\n            })\n                .catch((err) => {\n                this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${file.id}:`, 'warning');\n                this.uppy.log(err, 'warning');\n                this.uppy.emit('thumbnail:error', this.uppy.getFile(file.id), err);\n            });\n        }\n        return Promise.resolve();\n    }\n    onFileAdded = (file) => {\n        if (!file.preview &&\n            file.data &&\n            isPreviewSupported(file.type) &&\n            !file.isRemote) {\n            this.addToQueue(file.id);\n        }\n    };\n    /**\n     * Cancel a lazy request for a thumbnail if the thumbnail has not yet been generated.\n     */\n    onCancelRequest = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n    };\n    /**\n     * Clean up the thumbnail for a file. Cancel lazy requests and free the thumbnail URL.\n     */\n    onFileRemoved = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n        // Clean up object URLs.\n        if (file.preview && isObjectURL(file.preview)) {\n            URL.revokeObjectURL(file.preview);\n        }\n    };\n    onRestored = () => {\n        const restoredFiles = this.uppy.getFiles().filter((file) => file.isRestored);\n        restoredFiles.forEach((file) => {\n            // Only add blob URLs; they are likely invalid after being restored.\n            if (!file.preview || isObjectURL(file.preview)) {\n                this.addToQueue(file.id);\n            }\n        });\n    };\n    onAllFilesRemoved = () => {\n        this.queue = [];\n    };\n    waitUntilAllProcessed = (fileIDs) => {\n        fileIDs.forEach((fileID) => {\n            const file = this.uppy.getFile(fileID);\n            this.uppy.emit('preprocess-progress', file, {\n                mode: 'indeterminate',\n                message: this.i18n('generatingThumbnails'),\n            });\n        });\n        const emitPreprocessCompleteForAll = () => {\n            fileIDs.forEach((fileID) => {\n                const file = this.uppy.getFile(fileID);\n                this.uppy.emit('preprocess-complete', file);\n            });\n        };\n        return new Promise((resolve) => {\n            if (this.queueProcessing) {\n                this.uppy.once('thumbnail:all-generated', () => {\n                    emitPreprocessCompleteForAll();\n                    resolve();\n                });\n            }\n            else {\n                emitPreprocessCompleteForAll();\n                resolve();\n            }\n        });\n    };\n    install() {\n        this.uppy.on('file-removed', this.onFileRemoved);\n        this.uppy.on('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('file-added', this.onFileAdded);\n            this.uppy.on('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.addPreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n    uninstall() {\n        this.uppy.off('file-removed', this.onFileRemoved);\n        this.uppy.off('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('file-added', this.onFileAdded);\n            this.uppy.off('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.removePreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n}\n", "{\n  \"name\": \"@uppy/dashboard\",\n  \"description\": \"Universal UI plugin for Uppy.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --silent='passed-only'\",\n    \"test:e2e\": \"vitest run --project browser\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"dashboard\",\n    \"ui\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/provider-views\": \"^5.2.0\",\n    \"@uppy/thumbnail-generator\": \"^5.1.0\",\n    \"@uppy/utils\": \"^7.1.4\",\n    \"classnames\": \"^2.2.6\",\n    \"lodash\": \"^4.17.21\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\",\n    \"shallow-equal\": \"^3.0.0\"\n  },\n  \"devDependencies\": {\n    \"@uppy/core\": \"^5.2.0\",\n    \"@uppy/dropbox\": \"^5.1.0\",\n    \"@uppy/google-drive\": \"^5.1.0\",\n    \"@uppy/url\": \"^5.1.0\",\n    \"@uppy/webcam\": \"^5.1.0\",\n    \"@vitest/browser\": \"^3.2.4\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"playwright\": \"1.54.1\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"resize-observer-polyfill\": \"^1.5.0\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { isDragDropSupported } from '@uppy/utils';\nimport classNames from 'classnames';\nimport AddFiles from './AddFiles.js';\nimport AddFilesPanel from './AddFilesPanel.js';\nimport EditorPanel from './EditorPanel.js';\nimport FileCard from './FileCard/index.js';\nimport FileList from './FileList.js';\nimport Informer from './Informer/Informer.js';\nimport PickerPanelContent from './PickerPanelContent.js';\nimport PanelTopBar from './PickerPanelTopBar.js';\nimport Slide from './Slide.js';\nimport StatusBar from './StatusBar/StatusBar.js';\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n// https://github.com/ghosh/micromodal\nconst WIDTH_XL = 900;\nconst WIDTH_LG = 700;\nconst WIDTH_MD = 576;\nconst HEIGHT_MD = 330;\nexport default function Dashboard(props) {\n    const isNoFiles = props.totalFileCount === 0;\n    const isSingleFile = props.totalFileCount === 1;\n    const isSizeMD = props.containerWidth > WIDTH_MD;\n    const isSizeHeightMD = props.containerHeight > HEIGHT_MD;\n    const dashboardClassName = classNames({\n        'uppy-Dashboard': true,\n        'uppy-Dashboard--isDisabled': props.disabled,\n        'uppy-Dashboard--animateOpenClose': props.animateOpenClose,\n        'uppy-Dashboard--isClosing': props.isClosing,\n        'uppy-Dashboard--isDraggingOver': props.isDraggingOver,\n        'uppy-Dashboard--modal': !props.inline,\n        'uppy-size--md': props.containerWidth > WIDTH_MD,\n        'uppy-size--lg': props.containerWidth > WIDTH_LG,\n        'uppy-size--xl': props.containerWidth > WIDTH_XL,\n        'uppy-size--height-md': props.containerHeight > HEIGHT_MD,\n        // We might want to enable this in the future\n        // 'uppy-size--height-lg': props.containerHeight > HEIGHT_LG,\n        // 'uppy-size--height-xl': props.containerHeight > HEIGHT_XL,\n        'uppy-Dashboard--isAddFilesPanelVisible': props.showAddFilesPanel,\n        'uppy-Dashboard--isInnerWrapVisible': props.areInsidesReadyToBeVisible,\n        // Only enable \u201Ccentered single file\u201D mode when Dashboard is tall enough\n        'uppy-Dashboard--singleFile': props.singleFileFullScreen && isSingleFile && isSizeHeightMD,\n    });\n    // Important: keep these in sync with the percent width values in `src/components/FileItem/index.scss`.\n    let itemsPerRow = 1; // mobile\n    if (props.containerWidth > WIDTH_XL) {\n        itemsPerRow = 5;\n    }\n    else if (props.containerWidth > WIDTH_LG) {\n        itemsPerRow = 4;\n    }\n    else if (props.containerWidth > WIDTH_MD) {\n        itemsPerRow = 3;\n    }\n    const showFileList = props.showSelectedFiles && !isNoFiles;\n    const numberOfFilesForRecovery = props.recoveredState\n        ? Object.keys(props.recoveredState.files).length\n        : null;\n    const numberOfGhosts = props.files\n        ? Object.keys(props.files).filter((fileID) => props.files[fileID].isGhost)\n            .length\n        : 0;\n    const renderRestoredText = () => {\n        if (numberOfGhosts > 0) {\n            return props.i18n('recoveredXFiles', {\n                smart_count: numberOfGhosts,\n            });\n        }\n        return props.i18n('recoveredAllFiles');\n    };\n    const dashboard = (\n    // biome-ignore lint/a11y/useAriaPropsSupportedByRole: ...\n    _jsxs(\"div\", { className: dashboardClassName, \"data-uppy-theme\": props.theme, \"data-uppy-num-acquirers\": props.acquirers.length, \"data-uppy-drag-drop-supported\": !props.disableLocalFiles && isDragDropSupported(), \"aria-hidden\": props.inline ? 'false' : props.isHidden, \"aria-disabled\": props.disabled, \"aria-label\": !props.inline\n            ? props.i18n('dashboardWindowTitle')\n            : props.i18n('dashboardTitle'), onPaste: props.handlePaste, onDragOver: props.handleDragOver, onDragLeave: props.handleDragLeave, onDrop: props.handleDrop, children: [_jsx(\"div\", { \"aria-hidden\": \"true\", className: \"uppy-Dashboard-overlay\", tabIndex: -1, onClick: props.handleClickOutside }), _jsxs(\"div\", { className: \"uppy-Dashboard-inner\", role: props.inline ? undefined : 'dialog', style: {\n                    width: props.inline && props.width ? props.width : '',\n                    height: props.inline && props.height ? props.height : '',\n                }, children: [!props.inline ? (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-close\", type: \"button\", \"aria-label\": props.i18n('closeModal'), title: props.i18n('closeModal'), onClick: props.closeModal, children: _jsx(\"span\", { \"aria-hidden\": \"true\", children: \"\\u00D7\" }) })) : null, _jsxs(\"div\", { className: \"uppy-Dashboard-innerWrap\", children: [_jsx(\"div\", { className: \"uppy-Dashboard-dropFilesHereHint\", children: props.i18n('dropHint') }), showFileList && _jsx(PanelTopBar, { ...props }), numberOfFilesForRecovery != null && numberOfFilesForRecovery > 0 && (_jsxs(\"div\", { className: \"uppy-Dashboard-serviceMsg\", children: [_jsx(\"svg\", { className: \"uppy-Dashboard-serviceMsg-icon\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"21\", height: \"16\", viewBox: \"0 0 24 19\", children: _jsxs(\"g\", { transform: \"translate(0 -1)\", fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z\", fill: \"#FFD300\" }), _jsx(\"path\", { fill: \"#000\", d: \"M11 6h2l-.3 8h-1.4z\" }), _jsx(\"circle\", { fill: \"#000\", cx: \"12\", cy: \"17\", r: \"1\" })] }) }), _jsx(\"strong\", { className: \"uppy-Dashboard-serviceMsg-title\", children: props.i18n('sessionRestored') }), _jsx(\"div\", { className: \"uppy-Dashboard-serviceMsg-text\", children: renderRestoredText() })] })), showFileList ? (_jsx(FileList, { id: props.id, i18n: props.i18n, uppy: props.uppy, files: props.files, resumableUploads: props.resumableUploads, hideRetryButton: props.hideRetryButton, hidePauseResumeButton: props.hidePauseResumeButton, hideCancelButton: props.hideCancelButton, showLinkToFileUploadResult: props.showLinkToFileUploadResult, showRemoveButtonAfterComplete: props.showRemoveButtonAfterComplete, metaFields: props.metaFields, toggleFileCard: props.toggleFileCard, handleRequestThumbnail: props.handleRequestThumbnail, handleCancelThumbnail: props.handleCancelThumbnail, recoveredState: props.recoveredState, individualCancellation: props.individualCancellation, openFileEditor: props.openFileEditor, canEditFile: props.canEditFile, toggleAddFilesPanel: props.toggleAddFilesPanel, isSingleFile: isSingleFile, itemsPerRow: itemsPerRow, containerWidth: props.containerWidth, containerHeight: props.containerHeight })) : (_jsx(AddFiles, { i18n: props.i18n, i18nArray: props.i18nArray, acquirers: props.acquirers, handleInputChange: props.handleInputChange, maxNumberOfFiles: props.maxNumberOfFiles, allowedFileTypes: props.allowedFileTypes, showNativePhotoCameraButton: props.showNativePhotoCameraButton, showNativeVideoCameraButton: props.showNativeVideoCameraButton, nativeCameraFacingMode: props.nativeCameraFacingMode, showPanel: props.showPanel, activePickerPanel: props.activePickerPanel, disableLocalFiles: props.disableLocalFiles, fileManagerSelectionType: props.fileManagerSelectionType, note: props.note, proudlyDisplayPoweredByUppy: props.proudlyDisplayPoweredByUppy })), _jsx(Slide, { children: props.showAddFilesPanel ? (_jsx(AddFilesPanel, { ...props, isSizeMD: isSizeMD }, \"AddFiles\")) : null }), _jsx(Slide, { children: props.fileCardFor ? _jsx(FileCard, { ...props }, \"FileCard\") : null }), _jsx(Slide, { children: props.activePickerPanel ? (_jsx(PickerPanelContent, { ...props }, \"Picker\")) : null }), _jsx(Slide, { children: props.showFileEditor ? (_jsx(EditorPanel, { ...props }, \"Editor\")) : null }), _jsxs(\"div\", { className: \"uppy-Dashboard-progressindicators\", children: [!props.disableInformer && _jsx(Informer, { uppy: props.uppy }), !props.disableStatusBar && (_jsx(StatusBar, { uppy: props.uppy, i18n: props.i18n, hideProgressDetails: props.hideProgressDetails, hideUploadButton: props.hideUploadButton, hideRetryButton: props.hideRetryButton, hidePauseResumeButton: props.hidePauseResumeButton, hideCancelButton: props.hideCancelButton, hideAfterFinish: props.hideProgressAfterFinish, doneButtonHandler: props.doneButtonHandler })), !props.disableInformer && _jsx(Informer, { uppy: props.uppy }), props.progressindicators.map((target) => {\n                                        // TODO\n                                        // Here we're telling typescript all `this.type = 'progressindicator'` plugins inherit from `UIPlugin`\n                                        // This is factually true in Uppy right now, but maybe it doesn't have to be\n                                        return props.uppy.getPlugin(target.id).render(props.state);\n                                    })] })] })] })] }));\n    return dashboard;\n}\n", "import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"preact/jsx-runtime\";\nimport { Component, Fragment } from 'preact';\nclass AddFiles extends Component {\n    fileInput = null;\n    folderInput = null;\n    mobilePhotoFileInput = null;\n    mobileVideoFileInput = null;\n    triggerFileInputClick = () => {\n        this.fileInput?.click();\n    };\n    triggerFolderInputClick = () => {\n        this.folderInput?.click();\n    };\n    triggerVideoCameraInputClick = () => {\n        this.mobileVideoFileInput?.click();\n    };\n    triggerPhotoCameraInputClick = () => {\n        this.mobilePhotoFileInput?.click();\n    };\n    onFileInputChange = (event) => {\n        this.props.handleInputChange(event);\n        // Clear the input so that Chrome/Safari/etc. can detect file section when the same file is repeatedly selected\n        // (see https://github.com/transloadit/uppy/issues/768#issuecomment-2264902758)\n        event.currentTarget.value = '';\n    };\n    renderHiddenInput = (isFolder, refCallback) => {\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, \n            // @ts-expect-error default types don't yet know about the `webkitdirectory` property\n            webkitdirectory: isFolder, type: \"file\", name: \"files[]\", multiple: this.props.maxNumberOfFiles !== 1, onChange: this.onFileInputChange, accept: this.props.allowedFileTypes?.join(', '), ref: refCallback }));\n    };\n    renderHiddenCameraInput = (type, nativeCameraFacingMode, refCallback) => {\n        const typeToAccept = { photo: 'image/*', video: 'video/*' };\n        const accept = typeToAccept[type];\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, type: \"file\", name: `camera-${type}`, onChange: this.onFileInputChange, capture: nativeCameraFacingMode === '' ? 'environment' : nativeCameraFacingMode, accept: accept, ref: refCallback }));\n    };\n    renderMyDeviceAcquirer = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MyDevice\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerFileInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { className: \"uppy-DashboardTab-iconMyDevice\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z\", fill: \"currentcolor\", \"fill-rule\": \"evenodd\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('myDevice') })] }) }));\n    };\n    renderPhotoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobilePhotoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerPhotoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z\", fill: \"#02B383\", \"fill-rule\": \"nonzero\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('takePictureBtn') })] }) }));\n    };\n    renderVideoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobileVideoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerVideoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { fill: \"#FF675E\", fillRule: \"nonzero\", d: \"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z \" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('recordVideoBtn') })] }) }));\n    };\n    renderBrowseButton = (text, onClickFn) => {\n        const numberOfAcquirers = this.props.acquirers.length;\n        return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-browse\", onClick: onClickFn, \"data-uppy-super-focusable\": numberOfAcquirers === 0, children: text }));\n    };\n    renderDropPasteBrowseTagline = (numberOfAcquirers) => {\n        const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick);\n        const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick);\n        // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower\n        // to Camel\n        const lowerFMSelectionType = this.props.fileManagerSelectionType;\n        const camelFMSelectionType = lowerFMSelectionType.charAt(0).toUpperCase() +\n            lowerFMSelectionType.slice(1);\n        return (_jsx(\"div\", { class: \"uppy-Dashboard-AddFiles-title\", children: this.props.disableLocalFiles\n                ? this.props.i18n('importFiles')\n                : numberOfAcquirers > 0\n                    ? this.props.i18nArray(`dropPasteImport${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    })\n                    : this.props.i18nArray(`dropPaste${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    }) }));\n    };\n    [Symbol.for('uppy test: disable unused locale key warning')]() {\n        // Those are actually used in `renderDropPasteBrowseTagline` method.\n        this.props.i18nArray('dropPasteBoth');\n        this.props.i18nArray('dropPasteFiles');\n        this.props.i18nArray('dropPasteFolders');\n        this.props.i18nArray('dropPasteImportBoth');\n        this.props.i18nArray('dropPasteImportFiles');\n        this.props.i18nArray('dropPasteImportFolders');\n    }\n    renderAcquirer = (acquirer) => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": acquirer.id, children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-cy\": acquirer.id, \"aria-controls\": `uppy-DashboardContent-panel--${acquirer.id}`, \"aria-selected\": this.props.activePickerPanel?.id === acquirer.id, \"data-uppy-super-focusable\": true, onClick: () => this.props.showPanel(acquirer.id), children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: acquirer.icon() }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: acquirer.name })] }) }));\n    };\n    renderAcquirers = (acquirers) => {\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const acquirersWithoutLastTwo = [...acquirers];\n        const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length);\n        return (_jsxs(_Fragment, { children: [acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer)), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwoAcquirers.map((acquirer) => this.renderAcquirer(acquirer)) })] }));\n    };\n    renderSourcesList = (acquirers, disableLocalFiles) => {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton } = this.props;\n        let list = [];\n        const myDeviceKey = 'myDevice';\n        if (!disableLocalFiles)\n            list.push({\n                key: myDeviceKey,\n                elements: this.renderMyDeviceAcquirer(),\n            });\n        if (showNativePhotoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderPhotoCamera(),\n            });\n        if (showNativeVideoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderVideoCamera(),\n            });\n        list.push(...acquirers.map((acquirer) => ({\n            key: acquirer.id,\n            elements: this.renderAcquirer(acquirer),\n        })));\n        // doesn't make sense to show only a lonely \"My Device\"\n        const hasOnlyMyDevice = list.length === 1 && list[0].key === myDeviceKey;\n        if (hasOnlyMyDevice)\n            list = [];\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const listWithoutLastTwo = [...list];\n        const lastTwo = listWithoutLastTwo.splice(list.length - 2, list.length);\n        return (_jsxs(_Fragment, { children: [this.renderDropPasteBrowseTagline(list.length), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-list\", role: \"tablist\", children: [listWithoutLastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))) })] })] }));\n    };\n    renderPoweredByUppy() {\n        const { i18nArray } = this.props;\n        const uppyBranding = (_jsxs(\"span\", { children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-poweredByIcon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z\", fillRule: \"evenodd\" }) }), _jsx(\"span\", { className: \"uppy-Dashboard-poweredByUppy\", children: \"Uppy\" })] }));\n        const linkText = i18nArray('poweredBy', { uppy: uppyBranding });\n        return (_jsx(\"a\", { tabIndex: -1, href: \"https://uppy.io\", rel: \"noreferrer noopener\", target: \"_blank\", className: \"uppy-Dashboard-poweredBy\", children: linkText }));\n    }\n    render() {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton, nativeCameraFacingMode, } = this.props;\n        return (_jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles\", children: [this.renderHiddenInput(false, (ref) => {\n                    this.fileInput = ref;\n                }), this.renderHiddenInput(true, (ref) => {\n                    this.folderInput = ref;\n                }), showNativePhotoCameraButton &&\n                    this.renderHiddenCameraInput('photo', nativeCameraFacingMode, (ref) => {\n                        this.mobilePhotoFileInput = ref;\n                    }), showNativeVideoCameraButton &&\n                    this.renderHiddenCameraInput('video', nativeCameraFacingMode, (ref) => {\n                        this.mobileVideoFileInput = ref;\n                    }), this.renderSourcesList(this.props.acquirers, this.props.disableLocalFiles), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-info\", children: [this.props.note && (_jsx(\"div\", { className: \"uppy-Dashboard-note\", children: this.props.note })), this.props.proudlyDisplayPoweredByUppy && this.renderPoweredByUppy()] })] }));\n    }\n}\nexport default AddFiles;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport AddFiles from './AddFiles.js';\nconst AddFilesPanel = (props) => {\n    return (_jsxs(\"div\", { className: classNames('uppy-Dashboard-AddFilesPanel', props.className), \"data-uppy-panelType\": \"AddFiles\", \"aria-hidden\": !props.showAddFilesPanel, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18n('addingMoreFiles') }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => props.toggleAddFilesPanel(false), children: props.i18n('back') })] }), _jsx(AddFiles, { ...props })] }));\n};\nexport default AddFilesPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nfunction EditorPanel(props) {\n    const file = props.files[props.fileCardFor];\n    const handleCancel = () => {\n        props.uppy.emit('file-editor:cancel', file);\n        props.closeFileEditor();\n    };\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', props.className), role: \"tabpanel\", \"data-uppy-panelType\": \"FileEditor\", id: \"uppy-DashboardContent-panel--editor\", children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: handleCancel, children: props.i18n('cancel') }), _jsx(\"button\", { className: \"uppy-DashboardContent-save\", type: \"button\", onClick: props.saveFileEditor, children: props.i18n('save') })] }), _jsx(\"div\", { className: \"uppy-DashboardContent-panelBody\", children: props.editors.map((target) => {\n                    return props.uppy.getPlugin(target.id).render(props.state);\n                }) })] }));\n}\nexport default EditorPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { nanoid } from 'nanoid/non-secure';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport getFileTypeIcon from '../../utils/getFileTypeIcon.js';\nimport ignoreEvent from '../../utils/ignoreEvent.js';\nimport FilePreview from '../FilePreview.js';\nimport RenderMetaFields from './RenderMetaFields.js';\nexport default function FileCard(props) {\n    const { files, fileCardFor, toggleFileCard, saveFileCard, metaFields, requiredMetaFields, openFileEditor, i18n, i18nArray, className, canEditFile, } = props;\n    const getMetaFields = () => {\n        return typeof metaFields === 'function'\n            ? metaFields(files[fileCardFor])\n            : metaFields;\n    };\n    const file = files[fileCardFor];\n    const computedMetaFields = getMetaFields() ?? [];\n    const showEditButton = canEditFile(file);\n    const storedMetaData = {};\n    computedMetaFields.forEach((field) => {\n        storedMetaData[field.id] = file.meta[field.id] ?? '';\n    });\n    const [formState, setFormState] = useState(storedMetaData);\n    const handleSave = useCallback((ev) => {\n        ev.preventDefault();\n        saveFileCard(formState, fileCardFor);\n    }, [saveFileCard, formState, fileCardFor]);\n    const updateMeta = (newVal, name) => {\n        setFormState({\n            ...formState,\n            [name]: newVal,\n        });\n    };\n    const handleCancel = () => {\n        toggleFileCard(false);\n    };\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    // We need to know where Uppy is being rendered\n    const domRef = useRef(null);\n    useEffect(() => {\n        /**\n         * Use the \"rootNode\" of whereever Uppy is rendered, falling back\n         * to `window.document` if domRef isn't initialized for some reason\n         */\n        const rootNode = domRef.current?.getRootNode() ?? document;\n        /**\n         * This is the case for the Light DOM and <iframes>.\n         * In these scenarios, we don't want to append a child to an\n         * <html> element, but to the <body>\n         */\n        if (rootNode instanceof Document) {\n            rootNode.body.appendChild(form);\n        }\n        // This is the case for the Shadow DOM\n        else if (rootNode instanceof ShadowRoot) {\n            rootNode.appendChild(form);\n        }\n        // Everything else (realistically there isn't)\n        else {\n            rootNode.appendChild(form);\n        }\n        form.addEventListener('submit', handleSave);\n        return () => {\n            form.removeEventListener('submit', handleSave);\n            // check if form is still in the DOM before removing\n            if (form.parentNode) {\n                form.parentNode.removeChild(form);\n            }\n        };\n    }, [form, handleSave]);\n    return (\n    // biome-ignore lint/a11y/noStaticElementInteractions: ...\n    _jsxs(\"div\", { className: classNames('uppy-Dashboard-FileCard', className), \"data-uppy-panelType\": \"FileCard\", onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, ref: domRef, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", form: form.id, title: i18n('finishEditingFile'), onClick: handleCancel, children: i18n('cancel') })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-inner\", children: [_jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-preview\", style: { backgroundColor: getFileTypeIcon(file.type).color }, children: [_jsx(FilePreview, { file: file }), showEditButton && (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit\", onClick: (event) => {\n                                    // When opening the image editor we want to save any meta fields changes.\n                                    // Otherwise it's confusing for the user to click save in the editor,\n                                    // but the changes here are discarded. This bypasses validation,\n                                    // but we are okay with that.\n                                    handleSave(event);\n                                    openFileEditor(file);\n                                }, children: i18n('editImage') }))] }), _jsx(\"div\", { className: \"uppy-Dashboard-FileCard-info\", children: _jsx(RenderMetaFields, { computedMetaFields: computedMetaFields, requiredMetaFields: requiredMetaFields, updateMeta: updateMeta, form: form, formState: formState }) }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-actions\", children: [_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn\", \n                                // If `form` attribute is supported, we want a submit button to trigger the form validation.\n                                // Otherwise, fallback to a classic button with a onClick event handler.\n                                type: \"submit\", form: form.id, children: i18n('saveChanges') }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn\", type: \"button\", onClick: handleCancel, form: form.id, children: i18n('cancel') })] })] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction iconImage() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#686DE0\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z\", fillRule: \"nonzero\" }), _jsx(\"path\", { d: \"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z\", fillRule: \"nonzero\" }), _jsx(\"circle\", { cx: \"7.5\", cy: \"9.5\", r: \"1.5\" })] }) }));\n}\nfunction iconAudio() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z\", fill: \"#049BCF\", fillRule: \"nonzero\" }) }));\n}\nfunction iconVideo() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z\", fill: \"#19AF67\", fillRule: \"nonzero\" }) }));\n}\nfunction iconPDF() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z\", fill: \"#E2514A\", fillRule: \"nonzero\" }) }));\n}\nfunction iconArchive() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z\", fill: \"#00C469\", fillRule: \"nonzero\" }) }));\n}\nfunction iconFile() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#A7AFB7\", fillRule: \"nonzero\", children: [_jsx(\"path\", { d: \"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z\" }), _jsx(\"path\", { d: \"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z\" })] }) }));\n}\nfunction iconText() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z\", fill: \"#5A5E69\", fillRule: \"nonzero\" }) }));\n}\nexport default function getIconByMime(fileType) {\n    const defaultChoice = {\n        color: '#838999',\n        icon: iconFile(),\n    };\n    if (!fileType)\n        return defaultChoice;\n    const fileTypeGeneral = fileType.split('/')[0];\n    const fileTypeSpecific = fileType.split('/')[1];\n    // Text\n    if (fileTypeGeneral === 'text') {\n        return {\n            color: '#5a5e69',\n            icon: iconText(),\n        };\n    }\n    // Image\n    if (fileTypeGeneral === 'image') {\n        return {\n            color: '#686de0',\n            icon: iconImage(),\n        };\n    }\n    // Audio\n    if (fileTypeGeneral === 'audio') {\n        return {\n            color: '#068dbb',\n            icon: iconAudio(),\n        };\n    }\n    // Video\n    if (fileTypeGeneral === 'video') {\n        return {\n            color: '#19af67',\n            icon: iconVideo(),\n        };\n    }\n    // PDF\n    if (fileTypeGeneral === 'application' && fileTypeSpecific === 'pdf') {\n        return {\n            color: '#e25149',\n            icon: iconPDF(),\n        };\n    }\n    // Archive\n    const archiveTypes = [\n        'zip',\n        'x-7z-compressed',\n        'x-zip-compressed',\n        'x-rar-compressed',\n        'x-tar',\n        'x-gzip',\n        'x-apple-diskimage',\n    ];\n    if (fileTypeGeneral === 'application' &&\n        archiveTypes.indexOf(fileTypeSpecific) !== -1) {\n        return {\n            color: '#00C469',\n            icon: iconArchive(),\n        };\n    }\n    return defaultChoice;\n}\n", "// ignore drop/paste events if they are not in input or textarea \u2014\n// otherwise when Url plugin adds drop/paste listeners to this.el,\n// draging UI elements or pasting anything into any field triggers those events \u2014\n// Url treats them as URLs that need to be imported\nfunction ignoreEvent(ev) {\n    const { tagName } = ev.target;\n    if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n        ev.stopPropagation();\n        return;\n    }\n    ev.preventDefault();\n    ev.stopPropagation();\n}\nexport default ignoreEvent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport getFileTypeIcon from '../utils/getFileTypeIcon.js';\nexport default function FilePreview(props) {\n    const { file } = props;\n    if (file.preview) {\n        return (_jsx(\"img\", { draggable: false, className: \"uppy-Dashboard-Item-previewImg\", alt: file.name, src: file.preview }));\n    }\n    const { color, icon } = getFileTypeIcon(file.type);\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewIconWrap\", children: [_jsx(\"span\", { className: \"uppy-Dashboard-Item-previewIcon\", style: { color }, children: icon }), _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-Dashboard-Item-previewIconBg\", width: \"58\", height: \"76\", viewBox: \"0 0 58 76\", children: _jsx(\"rect\", { fill: \"#FFF\", width: \"58\", height: \"76\", rx: \"3\", fillRule: \"evenodd\" }) })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nexport default function RenderMetaFields(props) {\n    const { computedMetaFields, requiredMetaFields, updateMeta, form, formState, } = props;\n    const fieldCSSClasses = {\n        text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input',\n    };\n    return computedMetaFields.map((field) => {\n        const id = `uppy-Dashboard-FileCard-input-${field.id}`;\n        const required = requiredMetaFields.includes(field.id);\n        return (_jsxs(\"fieldset\", { className: \"uppy-Dashboard-FileCard-fieldset\", children: [_jsx(\"label\", { className: \"uppy-Dashboard-FileCard-label\", htmlFor: id, children: field.name }), field.render !== undefined ? (field.render({\n                    value: formState[field.id],\n                    onChange: (newVal) => updateMeta(newVal, field.id),\n                    fieldCSSClasses,\n                    required,\n                    form: form.id,\n                }, h)) : (_jsx(\"input\", { className: fieldCSSClasses.text, id: id, form: form.id, type: field.type || 'text', required: required, value: formState[field.id], placeholder: field.placeholder, onInput: (ev) => updateMeta(ev.target.value, field.id), \"data-uppy-super-focusable\": true }))] }, field.id));\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\n// biome-ignore lint/style/useImportType: h is not a type\nimport { Component, h } from 'preact';\nimport { shallowEqualObjects } from 'shallow-equal';\nimport Buttons from './Buttons/index.js';\nimport FileInfo from './FileInfo/index.js';\nimport FilePreviewAndLink from './FilePreviewAndLink/index.js';\nimport FileProgress from './FileProgress/index.js';\nexport default class FileItem extends Component {\n    componentDidMount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    shouldComponentUpdate(nextProps) {\n        return !shallowEqualObjects(this.props, nextProps);\n    }\n    // VirtualList mounts FileItems again and they emit `thumbnail:request`\n    // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n    componentDidUpdate() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    componentWillUnmount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleCancelThumbnail(file);\n        }\n    }\n    render() {\n        const { file } = this.props;\n        const isProcessing = file.progress.preprocess || file.progress.postprocess;\n        const isUploaded = !!file.progress.uploadComplete && !isProcessing && !file.error;\n        const uploadInProgressOrComplete = !!file.progress.uploadStarted || !!isProcessing;\n        const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) ||\n            isProcessing;\n        const error = file.error || false;\n        // File that Golden Retriever was able to partly restore (only meta, not blob),\n        // users still need to re-add it, so it\u2019s a ghost\n        const { isGhost } = file;\n        let showRemoveButton = this.props.individualCancellation\n            ? !isUploaded\n            : !uploadInProgress && !isUploaded;\n        if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n            showRemoveButton = true;\n        }\n        const dashboardItemClass = classNames({\n            'uppy-Dashboard-Item': true,\n            'is-inprogress': uploadInProgress && !this.props.recoveredState,\n            'is-processing': isProcessing,\n            'is-complete': isUploaded,\n            'is-error': !!error,\n            'is-resumable': this.props.resumableUploads,\n            'is-noIndividualCancellation': !this.props.individualCancellation,\n            'is-ghost': isGhost,\n        });\n        return (_jsxs(\"div\", { className: dashboardItemClass, id: `uppy_${file.id}`, role: this.props.role, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-preview\", children: [_jsx(FilePreviewAndLink, { file: file, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, i18n: this.props.i18n, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields }), _jsx(FileProgress, { uppy: this.props.uppy, file: file, error: error, isUploaded: isUploaded, hideRetryButton: this.props.hideRetryButton, hideCancelButton: this.props.hideCancelButton, hidePauseResumeButton: this.props.hidePauseResumeButton, recoveredState: this.props.recoveredState, resumableUploads: this.props.resumableUploads, individualCancellation: this.props.individualCancellation, i18n: this.props.i18n })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfoAndButtons\", children: [_jsx(FileInfo, { file: file, containerWidth: this.props.containerWidth, containerHeight: this.props.containerHeight, i18n: this.props.i18n, toggleAddFilesPanel: this.props.toggleAddFilesPanel, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields, isSingleFile: this.props.isSingleFile }), _jsx(Buttons, { file: file, metaFields: this.props.metaFields, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, showRemoveButton: showRemoveButton, canEditFile: this.props.canEditFile, uploadInProgressOrComplete: uploadInProgressOrComplete, toggleFileCard: this.props.toggleFileCard, openFileEditor: this.props.openFileEditor, uppy: this.props.uppy, i18n: this.props.i18n })] })] }));\n    }\n}\n", "export type validArrayValue = any[] | null | undefined;\n\nexport default function shallowEqualArrays(\n  arrA: validArrayValue,\n  arrB: validArrayValue\n): boolean {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  const len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "export type validObjectValue = Record<string, any> | null | undefined;\n\nexport default function shallowEqualObjects<T>(\n  objA: validObjectValue,\n  objB: validObjectValue\n): boolean {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    const key = aKeys[i];\n\n    if (\n      objA[key] !== objB[key] ||\n      !Object.prototype.hasOwnProperty.call(objB, key)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import shallowEqualArrays from \"./arrays\";\nimport shallowEqualObjects from \"./objects\";\n\ntype Comparable = Record<string, any> | any[] | null | undefined;\n\nfunction shallowEqual<T extends Comparable>(a: T, b: T): boolean {\n  const aIsArr = Array.isArray(a);\n  const bIsArr = Array.isArray(b);\n\n  if (aIsArr !== bIsArr) {\n    return false;\n  }\n\n  if (aIsArr && bIsArr) {\n    return shallowEqualArrays(a, b);\n  }\n\n  return shallowEqualObjects(a, b);\n}\n\nexport { shallowEqual, shallowEqualObjects, shallowEqualArrays };\n", "/**\n * Copies text to clipboard by creating an almost invisible textarea,\n * adding text there, then running execCommand('copy').\n * Falls back to prompt() when the easy way fails (hello, Safari!)\n * From http://stackoverflow.com/a/30810322\n *\n * @param {string} textToCopy\n * @param {string} fallbackString\n * @returns {Promise}\n */\nexport default function copyToClipboard(textToCopy, fallbackString = 'Copy the URL below') {\n    return new Promise((resolve) => {\n        const textArea = document.createElement('textarea');\n        textArea.setAttribute('style', {\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '2em',\n            height: '2em',\n            padding: 0,\n            border: 'none',\n            outline: 'none',\n            boxShadow: 'none',\n            background: 'transparent',\n        });\n        textArea.value = textToCopy;\n        document.body.appendChild(textArea);\n        textArea.select();\n        const magicCopyFailed = () => {\n            document.body.removeChild(textArea);\n            window.prompt(fallbackString, textToCopy);\n            resolve();\n        };\n        try {\n            const successful = document.execCommand('copy');\n            if (!successful) {\n                return magicCopyFailed();\n            }\n            document.body.removeChild(textArea);\n            return resolve();\n        }\n        catch (_err) {\n            document.body.removeChild(textArea);\n            return magicCopyFailed();\n        }\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport copyToClipboard from '../../../utils/copyToClipboard.js';\nfunction EditButton({ file, uploadInProgressOrComplete, metaFields, canEditFile, i18n, onClick, }) {\n    if ((!uploadInProgressOrComplete && metaFields && metaFields.length > 0) ||\n        (!uploadInProgressOrComplete && canEditFile(file))) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit\", type: \"button\", \"aria-label\": i18n('editFileWithFilename', { file: file.meta.name }), title: i18n('editFileWithFilename', { file: file.meta.name }), onClick: () => onClick(), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 14\", children: _jsxs(\"g\", { fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z\", fillRule: \"nonzero\" }), _jsx(\"rect\", { x: \"1\", y: \"12.293\", width: \"11\", height: \"1\", rx: \".5\" }), _jsx(\"path\", { fillRule: \"nonzero\", d: \"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z\" })] }) }) }));\n    }\n    return null;\n}\nfunction RemoveButton({ i18n, onClick, file, }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove\", type: \"button\", \"aria-label\": i18n('removeFile', { file: file.meta.name }), title: i18n('removeFile', { file: file.meta.name }), onClick: () => onClick(), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"18\", height: \"18\", viewBox: \"0 0 18 18\", children: [_jsx(\"path\", { d: \"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z\" })] }) }));\n}\nfunction CopyLinkButton({ file, uppy, i18n, }) {\n    const copyLinkToClipboard = (event) => {\n        copyToClipboard(file.uploadURL, i18n('copyLinkToClipboardFallback'))\n            .then(() => {\n            uppy.log('Link copied to clipboard.');\n            uppy.info(i18n('copyLinkToClipboardSuccess'), 'info', 3000);\n        })\n            .catch(uppy.log)\n            // avoid losing focus\n            .then(() => event.target.focus({ preventScroll: true }));\n    };\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink\", type: \"button\", \"aria-label\": i18n('copyLink'), title: i18n('copyLink'), onClick: (event) => copyLinkToClipboard(event), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 12\", children: _jsx(\"path\", { d: \"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z\" }) }) }));\n}\nexport default function Buttons(props) {\n    const { uppy, file, uploadInProgressOrComplete, canEditFile, metaFields, showLinkToFileUploadResult, showRemoveButton, i18n, toggleFileCard, openFileEditor, } = props;\n    const editAction = () => {\n        if (metaFields && metaFields.length > 0) {\n            toggleFileCard(true, file.id);\n        }\n        else {\n            openFileEditor(file);\n        }\n    };\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-actionWrapper\", children: [_jsx(EditButton, { i18n: i18n, file: file, uploadInProgressOrComplete: uploadInProgressOrComplete, canEditFile: canEditFile, metaFields: metaFields, onClick: editAction }), showLinkToFileUploadResult && file.uploadURL ? (_jsx(CopyLinkButton, { file: file, uppy: uppy, i18n: i18n })) : null, showRemoveButton ? (_jsx(RemoveButton, { i18n: i18n, file: file, onClick: () => uppy.removeFile(file.id) })) : null] }));\n}\n", "import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport { truncateString } from '@uppy/utils';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nconst renderFileName = (props) => {\n    const { author, name } = props.file.meta;\n    function getMaxNameLength() {\n        if (props.isSingleFile && props.containerHeight >= 350) {\n            return 90;\n        }\n        if (props.containerWidth <= 352) {\n            return 35;\n        }\n        if (props.containerWidth <= 576) {\n            return 60;\n        }\n        // When `author` is present, we want to make sure\n        // the file name fits on one line so we can place\n        // the author on the second line.\n        return author ? 20 : 30;\n    }\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-name\", title: name, children: truncateString(name, getMaxNameLength()) }));\n};\nconst renderAuthor = (props) => {\n    const { author } = props.file.meta;\n    const providerName = 'remote' in props.file ? props.file.remote?.providerName : undefined;\n    const dot = `\\u00B7`;\n    if (!author) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-author\", children: [_jsx(\"a\", { href: `${author.url}?utm_source=Companion&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", children: truncateString(author.name, 13) }), providerName ? (_jsxs(_Fragment, { children: [` ${dot} `, providerName, ` ${dot} `] })) : null] }));\n};\nconst renderFileSize = (props) => props.file.size && (_jsx(\"div\", { className: \"uppy-Dashboard-Item-statusSize\", children: prettierBytes(props.file.size) }));\nconst ReSelectButton = (props) => props.file.isGhost && (_jsxs(\"span\", { children: [' \\u2022 ', _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\", type: \"button\", onClick: () => props.toggleAddFilesPanel(true), children: props.i18n('reSelect') })] }));\nconst ErrorButton = ({ file, onClick, }) => {\n    if (file.error) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\", \"aria-label\": file.error, \"data-microtip-position\": \"bottom\", \"data-microtip-size\": \"medium\", onClick: onClick, type: \"button\", children: \"?\" }));\n    }\n    return null;\n};\nexport default function FileInfo(props) {\n    const { file, i18n, toggleFileCard, metaFields, toggleAddFilesPanel, isSingleFile, containerHeight, containerWidth, } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfo\", \"data-uppy-file-source\": file.source, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileName\", children: [renderFileName({\n                        file,\n                        isSingleFile,\n                        containerHeight,\n                        containerWidth,\n                    }), _jsx(ErrorButton, { file: file, onClick: () => alert(file.error) })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-status\", children: [renderAuthor({ file }), renderFileSize({ file }), ReSelectButton({ file, toggleAddFilesPanel, i18n })] }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nconst metaFieldIdToName = (metaFieldId, metaFields) => {\n    const fields = typeof metaFields === 'function' ? metaFields() : metaFields;\n    const field = fields.filter((f) => f.id === metaFieldId);\n    return field[0].name;\n};\nexport default function MetaErrorMessage(props) {\n    const { file, toggleFileCard, i18n, metaFields } = props;\n    const { missingRequiredMetaFields } = file;\n    if (!missingRequiredMetaFields?.length) {\n        return null;\n    }\n    const metaFieldsString = missingRequiredMetaFields\n        .map((missingMetaField) => metaFieldIdToName(missingMetaField, metaFields))\n        .join(', ');\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-errorMessage\", children: [i18n('missingRequiredMetaFields', {\n                smart_count: missingRequiredMetaFields.length,\n                fields: metaFieldsString,\n            }), ' ', _jsx(\"button\", { type: \"button\", class: \"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn\", onClick: () => toggleFileCard(true, file.id), children: i18n('editFile') })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport getFileTypeIcon from '../../../utils/getFileTypeIcon.js';\nimport FilePreview from '../../FilePreview.js';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nexport default function FilePreviewAndLink(props) {\n    const { file, i18n, toggleFileCard, metaFields, showLinkToFileUploadResult } = props;\n    const white = 'rgba(255, 255, 255, 0.5)';\n    const previewBackgroundColor = file.preview\n        ? white\n        : getFileTypeIcon(file.type).color;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewInnerWrap\", style: { backgroundColor: previewBackgroundColor }, children: [showLinkToFileUploadResult && file.uploadURL && (_jsx(\"a\", { className: \"uppy-Dashboard-Item-previewLink\", href: file.uploadURL, rel: \"noreferrer noopener\", target: \"_blank\", \"aria-label\": file.meta.name, children: _jsx(\"span\", { hidden: true, children: file.meta.name }) })), _jsx(FilePreview, { file: file }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction onPauseResumeCancelRetry(props) {\n    if (props.isUploaded)\n        return;\n    if (props.error && !props.hideRetryButton) {\n        props.uppy.retryUpload(props.file.id);\n        return;\n    }\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        props.uppy.pauseResume(props.file.id);\n    }\n    else if (props.individualCancellation && !props.hideCancelButton) {\n        props.uppy.removeFile(props.file.id);\n    }\n}\nfunction progressIndicatorTitle(props) {\n    if (props.isUploaded) {\n        return props.i18n('uploadComplete');\n    }\n    if (props.error) {\n        return props.i18n('retryUpload');\n    }\n    if (props.resumableUploads) {\n        if (props.file.isPaused) {\n            return props.i18n('resumeUpload');\n        }\n        return props.i18n('pauseUpload');\n    }\n    if (props.individualCancellation) {\n        return props.i18n('cancelUpload');\n    }\n    return '';\n}\nfunction ProgressIndicatorButton(props) {\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator\", type: \"button\", \"aria-label\": progressIndicatorTitle(props), title: progressIndicatorTitle(props), onClick: () => onPauseResumeCancelRetry(props), children: props.children }) }));\n}\nfunction ProgressCircleContainer({ children }) {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"70\", height: \"70\", viewBox: \"0 0 36 36\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle\", children: children }));\n}\nfunction ProgressCircle({ progress }) {\n    // circle length equals 2 * PI * R\n    const circleLength = 2 * Math.PI * 15;\n    return (_jsxs(\"g\", { children: [_jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--bg\", r: \"15\", cx: \"18\", cy: \"18\", \"stroke-width\": \"2\", fill: \"none\" }), _jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--progress\", r: \"15\", cx: \"18\", cy: \"18\", transform: \"rotate(-90, 18, 18)\", fill: \"none\", \"stroke-width\": \"2\", \"stroke-dasharray\": circleLength, \"stroke-dashoffset\": circleLength - (circleLength / 100) * progress })] }));\n}\nexport default function FileProgress(props) {\n    // Nothing if upload has not started\n    if (!props.file.progress.uploadStarted) {\n        return null;\n    }\n    if (props.file.progress.percentage === undefined) {\n        return null;\n    }\n    // Green checkmark when complete\n    if (props.isUploaded) {\n        return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsxs(ProgressCircleContainer, { children: [_jsx(\"circle\", { r: \"15\", cx: \"18\", cy: \"18\", fill: \"#1bb240\" }), _jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--check\", transform: \"translate(2, 3)\", points: \"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634\" })] }) }) }));\n    }\n    if (props.recoveredState) {\n        return null;\n    }\n    // Retry button for error\n    if (props.error && !props.hideRetryButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry\", width: \"28\", height: \"31\", viewBox: \"0 0 16 19\", children: [_jsx(\"path\", { d: \"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z\" }), _jsx(\"path\", { d: \"M7.9 3H10v2H7.9z\" }), _jsx(\"path\", { d: \"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z\" }), _jsx(\"path\", { d: \"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z\" })] }) }));\n    }\n    // Pause/resume button for resumable uploads\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), props.file.isPaused ? (_jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--play\", transform: \"translate(3, 3)\", points: \"12 20 12 10 20 15\" })) : (_jsxs(\"g\", { className: \"uppy-Dashboard-Item-progressIcon--pause\", transform: \"translate(14.5, 13)\", children: [_jsx(\"rect\", { x: \"0\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" }), _jsx(\"rect\", { x: \"5\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" })] }))] }) }));\n    }\n    // Cancel button for non-resumable uploads if individualCancellation is supported (not bundled)\n    if (!props.resumableUploads &&\n        props.individualCancellation &&\n        !props.hideCancelButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), _jsx(\"polygon\", { className: \"cancel\", transform: \"translate(2, 2)\", points: \"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12\" })] }) }));\n    }\n    // Just progress when buttons are disabled\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsx(ProgressCircleContainer, { children: _jsx(ProgressCircle, { progress: props.file.progress.percentage }) }) }) }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\n// @ts-ignore untyped\nimport { VirtualList } from '@uppy/utils';\nimport { useMemo } from 'preact/hooks';\nimport FileItem from './FileItem/index.js';\nfunction chunks(list, size) {\n    const chunked = [];\n    let currentChunk = [];\n    list.forEach((item) => {\n        if (currentChunk.length < size) {\n            currentChunk.push(item);\n        }\n        else {\n            chunked.push(currentChunk);\n            currentChunk = [item];\n        }\n    });\n    if (currentChunk.length)\n        chunked.push(currentChunk);\n    return chunked;\n}\nexport default function FileList({ id, i18n, uppy, files, resumableUploads, hideRetryButton, hidePauseResumeButton, hideCancelButton, showLinkToFileUploadResult, showRemoveButtonAfterComplete, metaFields, isSingleFile, toggleFileCard, handleRequestThumbnail, handleCancelThumbnail, recoveredState, individualCancellation, itemsPerRow, openFileEditor, canEditFile, toggleAddFilesPanel, containerWidth, containerHeight, }) {\n    // It's not great that this is hardcoded!\n    // It's ESPECIALLY not great that this is checking against `itemsPerRow`!\n    const rowHeight = itemsPerRow === 1\n        ? // Mobile\n            71\n        : // 190px height + 2 * 5px margin\n            200;\n    // Sort files by file.isGhost, ghost files first, only if recoveredState is present\n    const rows = useMemo(() => {\n        const sortByGhostComesFirst = (file1, file2) => Number(files[file2].isGhost) - Number(files[file1].isGhost);\n        const fileIds = Object.keys(files);\n        if (recoveredState)\n            fileIds.sort(sortByGhostComesFirst);\n        return chunks(fileIds, itemsPerRow);\n    }, [files, itemsPerRow, recoveredState]);\n    const renderRow = (row) => (_jsx(\"div\", { class: \"uppy-Dashboard-filesInner\", \n        // The `role=\"presentation` attribute ensures that the list items are properly\n        // associated with the `VirtualList` element.\n        role: \"presentation\", children: row.map((fileID) => (_jsx(FileItem, { uppy: uppy, \n            // FIXME This is confusing, it's actually the Dashboard's plugin ID\n            id: id, \n            // TODO move this to context\n            i18n: i18n, \n            // features\n            resumableUploads: resumableUploads, individualCancellation: individualCancellation, \n            // visual options\n            hideRetryButton: hideRetryButton, hidePauseResumeButton: hidePauseResumeButton, hideCancelButton: hideCancelButton, showLinkToFileUploadResult: showLinkToFileUploadResult, showRemoveButtonAfterComplete: showRemoveButtonAfterComplete, metaFields: metaFields, recoveredState: recoveredState, isSingleFile: isSingleFile, containerWidth: containerWidth, containerHeight: containerHeight, \n            // callbacks\n            toggleFileCard: toggleFileCard, handleRequestThumbnail: handleRequestThumbnail, handleCancelThumbnail: handleCancelThumbnail, role: \"listitem\", openFileEditor: openFileEditor, canEditFile: canEditFile, toggleAddFilesPanel: toggleAddFilesPanel, file: files[fileID] }, fileID))) }, row[0]));\n    if (isSingleFile) {\n        return _jsx(\"div\", { class: \"uppy-Dashboard-files\", children: renderRow(rows[0]) });\n    }\n    return (_jsx(VirtualList, { class: \"uppy-Dashboard-files\", role: \"list\", data: rows, renderRow: renderRow, rowHeight: rowHeight }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, createRef } from 'preact';\nconst TRANSITION_MS = 300;\nexport default class FadeIn extends Component {\n    ref = createRef();\n    componentWillEnter(callback) {\n        this.ref.current.style.opacity = '1';\n        this.ref.current.style.transform = 'none';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    componentWillLeave(callback) {\n        this.ref.current.style.opacity = '0';\n        this.ref.current.style.transform = 'translateY(350%)';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    render() {\n        const { children } = this.props;\n        return (_jsx(\"div\", { className: \"uppy-Informer-animated\", ref: this.ref, children: children }));\n    }\n}\n", "// INFO: not typing copy pasted libarary code\n// @ts-nocheck\n/**\n * @source https://github.com/developit/preact-transition-group\n */\nimport { Component, cloneElement, h, toChildArray } from 'preact';\nfunction assign(obj, props) {\n    return Object.assign(obj, props);\n}\nfunction getKey(vnode, fallback) {\n    return vnode?.key ?? fallback;\n}\nfunction linkRef(component, name) {\n    // biome-ignore lint/suspicious/noAssignInExpressions: ...\n    const cache = component._ptgLinkedRefs || (component._ptgLinkedRefs = {});\n    return (cache[name] ||\n        // biome-ignore lint/suspicious/noAssignInExpressions: ...\n        (cache[name] = (c) => {\n            component.refs[name] = c;\n        }));\n}\nfunction getChildMapping(children) {\n    const out = {};\n    for (let i = 0; i < children.length; i++) {\n        if (children[i] != null) {\n            const key = getKey(children[i], i.toString(36));\n            out[key] = children[i];\n        }\n    }\n    return out;\n}\nfunction mergeChildMappings(prev, next) {\n    prev = prev || {};\n    next = next || {};\n    const getValueForKey = (key) => Object.hasOwn(next, key) ? next[key] : prev[key];\n    // For each key of `next`, the list of keys to insert before that key in\n    // the combined list\n    const nextKeysPending = {};\n    let pendingKeys = [];\n    for (const prevKey in prev) {\n        if (Object.hasOwn(next, prevKey)) {\n            if (pendingKeys.length) {\n                nextKeysPending[prevKey] = pendingKeys;\n                pendingKeys = [];\n            }\n        }\n        else {\n            pendingKeys.push(prevKey);\n        }\n    }\n    const childMapping = {};\n    for (const nextKey in next) {\n        if (Object.hasOwn(nextKeysPending, nextKey)) {\n            for (let i = 0; i < nextKeysPending[nextKey].length; i++) {\n                const pendingNextKey = nextKeysPending[nextKey][i];\n                childMapping[nextKeysPending[nextKey][i]] =\n                    getValueForKey(pendingNextKey);\n            }\n        }\n        childMapping[nextKey] = getValueForKey(nextKey);\n    }\n    // Finally, add the keys which didn't appear before any key in `next`\n    for (let i = 0; i < pendingKeys.length; i++) {\n        childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n    }\n    return childMapping;\n}\nconst identity = (i) => i;\nclass TransitionGroup extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.refs = {};\n        this.state = {\n            children: getChildMapping(toChildArray(toChildArray(this.props.children)) || []),\n        };\n        this.performAppear = this.performAppear.bind(this);\n        this.performEnter = this.performEnter.bind(this);\n        this.performLeave = this.performLeave.bind(this);\n    }\n    componentWillMount() {\n        this.currentlyTransitioningKeys = {};\n        this.keysToAbortLeave = [];\n        this.keysToEnter = [];\n        this.keysToLeave = [];\n    }\n    componentDidMount() {\n        const initialChildMapping = this.state.children;\n        for (const key in initialChildMapping) {\n            if (initialChildMapping[key]) {\n                // this.performAppear(getKey(initialChildMapping[key], key));\n                this.performAppear(key);\n            }\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        const nextChildMapping = getChildMapping(toChildArray(nextProps.children) || []);\n        const prevChildMapping = this.state.children;\n        this.setState((prevState) => ({\n            children: mergeChildMappings(prevState.children, nextChildMapping),\n        }));\n        let key;\n        for (key in nextChildMapping) {\n            if (Object.hasOwn(nextChildMapping, key)) {\n                const hasPrev = prevChildMapping && Object.hasOwn(prevChildMapping, key);\n                // We should re-enter the component and abort its leave function\n                if (nextChildMapping[key] &&\n                    hasPrev &&\n                    this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                    this.keysToAbortLeave.push(key);\n                }\n                else if (nextChildMapping[key] &&\n                    !hasPrev &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                }\n            }\n        }\n        for (key in prevChildMapping) {\n            if (Object.hasOwn(prevChildMapping, key)) {\n                const hasNext = nextChildMapping && Object.hasOwn(nextChildMapping, key);\n                if (prevChildMapping[key] &&\n                    !hasNext &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToLeave.push(key);\n                }\n            }\n        }\n    }\n    componentDidUpdate() {\n        const { keysToEnter } = this;\n        this.keysToEnter = [];\n        keysToEnter.forEach(this.performEnter);\n        const { keysToLeave } = this;\n        this.keysToLeave = [];\n        keysToLeave.forEach(this.performLeave);\n    }\n    _finishAbort(key) {\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            this.keysToAbortLeave.splice(idx, 1);\n        }\n    }\n    performAppear(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillAppear) {\n            component.componentWillAppear(this._handleDoneAppearing.bind(this, key));\n        }\n        else {\n            this._handleDoneAppearing(key);\n        }\n    }\n    _handleDoneAppearing(key) {\n        const component = this.refs[key];\n        if (component?.componentDidAppear) {\n            component.componentDidAppear();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully appeared. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performEnter(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillEnter) {\n            component.componentWillEnter(this._handleDoneEntering.bind(this, key));\n        }\n        else {\n            this._handleDoneEntering(key);\n        }\n    }\n    _handleDoneEntering(key) {\n        const component = this.refs[key];\n        if (component?.componentDidEnter) {\n            component.componentDidEnter();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully entered. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performLeave(key) {\n        // If we should immediately abort this leave function,\n        // don't run the leave transition at all.\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillLeave) {\n            component.componentWillLeave(this._handleDoneLeaving.bind(this, key));\n        }\n        else {\n            // Note that this is somewhat dangerous b/c it calls setState()\n            // again, effectively mutating the component before all the work\n            // is done.\n            this._handleDoneLeaving(key);\n        }\n    }\n    _handleDoneLeaving(key) {\n        // If we should immediately abort the leave,\n        // then skip this altogether\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        const component = this.refs[key];\n        if (component?.componentDidLeave) {\n            component.componentDidLeave();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (currentChildMapping && Object.hasOwn(currentChildMapping, key)) {\n            // This entered again before it fully left. Add it again.\n            this.performEnter(key);\n        }\n        else {\n            const children = assign({}, this.state.children);\n            delete children[key];\n            this.setState({ children });\n        }\n    }\n    render({ childFactory, transitionLeave, transitionName, transitionAppear, transitionEnter, transitionLeaveTimeout, transitionEnterTimeout, transitionAppearTimeout, component, ...props }, { children }) {\n        // TODO: we could get rid of the need for the wrapper node\n        // by cloning a single child\n        const childrenToRender = Object.entries(children)\n            .map(([key, child]) => {\n            if (!child)\n                return undefined;\n            const ref = linkRef(this, key);\n            return cloneElement(childFactory(child), { ref, key });\n        })\n            .filter(Boolean);\n        return h(component, props, childrenToRender);\n    }\n}\nTransitionGroup.defaultProps = {\n    component: 'span',\n    childFactory: identity,\n};\nexport default TransitionGroup;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact';\nimport FadeIn from './FadeIn.js';\nimport TransitionGroup from './TransitionGroup.js';\nexport default class Informer extends Component {\n    render() {\n        // Get info from the uppy instance passed in props\n        const { info } = this.props.uppy.getState();\n        return (_jsx(\"div\", { className: \"uppy uppy-Informer\", children: _jsx(TransitionGroup, { children: info.map((info) => (_jsx(FadeIn, { children: _jsxs(\"p\", { role: \"alert\", children: [info.message, ' ', info.details && (\n                            // biome-ignore lint/a11y/useKeyWithClickEvents: don't think it's needed\n                            _jsx(\"span\", { \"aria-label\": info.details, \"data-microtip-position\": \"top-left\", \"data-microtip-size\": \"medium\", role: \"tooltip\", onClick: () => alert(`${info.message} \\n\\n ${info.details}`), children: \"?\" }))] }) }, info.message))) }) }));\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useRef } from 'preact/hooks';\nimport ignoreEvent from '../utils/ignoreEvent.js';\nfunction PickerPanelContent({ activePickerPanel, className, hideAllPanels, i18n, state, uppy, }) {\n    const ref = useRef(null);\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', className), role: \"tabpanel\", \"data-uppy-panelType\": \"PickerPanel\", id: `uppy-DashboardContent-panel--${activePickerPanel.id}`, onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18n('importFrom', { name: activePickerPanel.name }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: hideAllPanels, children: i18n('cancel') })] }), _jsx(\"div\", { ref: ref, className: \"uppy-DashboardContent-panelBody\", children: uppy.getPlugin(activePickerPanel.id).render(state, ref.current) })] }));\n}\nexport default PickerPanelContent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nconst uploadStates = {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n    STATE_PAUSED: 'paused',\n};\nfunction getUploadingState(isAllErrored, isAllComplete, isAllPaused, files = {}) {\n    if (isAllErrored) {\n        return uploadStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return uploadStates.STATE_COMPLETE;\n    }\n    if (isAllPaused) {\n        return uploadStates.STATE_PAUSED;\n    }\n    let state = uploadStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return uploadStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess && state !== uploadStates.STATE_UPLOADING) {\n            state = uploadStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess &&\n            state !== uploadStates.STATE_UPLOADING &&\n            state !== uploadStates.STATE_PREPROCESSING) {\n            state = uploadStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nfunction UploadStatus({ files, i18n, isAllComplete, isAllErrored, isAllPaused, inProgressNotPausedFiles, newFiles, processingFiles, }) {\n    const uploadingState = getUploadingState(isAllErrored, isAllComplete, isAllPaused, files);\n    switch (uploadingState) {\n        case 'uploading':\n            return i18n('uploadingXFiles', {\n                smart_count: inProgressNotPausedFiles.length,\n            });\n        case 'preprocessing':\n        case 'postprocessing':\n            return i18n('processingXFiles', { smart_count: processingFiles.length });\n        case 'paused':\n            return i18n('uploadPaused');\n        case 'waiting':\n            return i18n('xFilesSelected', { smart_count: newFiles.length });\n        case 'complete':\n            return i18n('uploadComplete');\n        case 'error':\n            return i18n('error');\n        default:\n    }\n}\nfunction PanelTopBar(props) {\n    const { i18n, isAllComplete, hideCancelButton, maxNumberOfFiles, toggleAddFilesPanel, uppy, } = props;\n    let { allowNewUpload } = props;\n    // TODO maybe this should be done in ../Dashboard.js, then just pass that down as `allowNewUpload`\n    if (allowNewUpload && maxNumberOfFiles) {\n        allowNewUpload = props.totalFileCount < props.maxNumberOfFiles;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [!isAllComplete && !hideCancelButton ? (_jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => uppy.cancelAll(), children: i18n('cancel') })) : (_jsx(\"div\", {})), _jsx(\"div\", { className: \"uppy-DashboardContent-title\", children: _jsx(UploadStatus, { ...props }) }), allowNewUpload ? (_jsxs(\"button\", { className: \"uppy-DashboardContent-addMore\", type: \"button\", \"aria-label\": i18n('addMoreFiles'), title: i18n('addMoreFiles'), onClick: () => toggleAddFilesPanel(true), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"15\", height: \"15\", viewBox: \"0 0 15 15\", children: _jsx(\"path\", { d: \"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z\" }) }), _jsx(\"span\", { className: \"uppy-DashboardContent-addMoreCaption\", children: i18n('addMore') })] })) : (_jsx(\"div\", {}))] }));\n}\nexport default PanelTopBar;\n", "import classNames from 'classnames';\nimport { cloneElement, toChildArray, } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nconst transitionName = 'uppy-transition-slideDownUp';\nconst duration = 250;\n/**\n * Vertical slide transition.\n *\n * This can take a _single_ child component, which _must_ accept a `className` prop.\n *\n * Currently this is specific to the `uppy-transition-slideDownUp` transition,\n * but it should be simple to extend this for any type of single-element\n * transition by setting the CSS name and duration as props.\n */\nfunction Slide({ children }) {\n    const [cachedChildren, setCachedChildren] = useState(null);\n    const [className, setClassName] = useState('');\n    const enterTimeoutRef = useRef();\n    const leaveTimeoutRef = useRef();\n    const animationFrameRef = useRef();\n    const handleEnterTransition = useCallback(() => {\n        setClassName(`${transitionName}-enter`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(leaveTimeoutRef.current);\n        leaveTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-enter ${transitionName}-enter-active`);\n            enterTimeoutRef.current = setTimeout(() => {\n                setClassName('');\n            }, duration);\n        });\n    }, []);\n    const handleLeaveTransition = useCallback(() => {\n        setClassName(`${transitionName}-leave`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(enterTimeoutRef.current);\n        enterTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-leave ${transitionName}-leave-active`);\n            leaveTimeoutRef.current = setTimeout(() => {\n                setCachedChildren(null);\n                setClassName('');\n            }, duration);\n        });\n    }, []);\n    useEffect(() => {\n        const child = toChildArray(children)[0];\n        if (cachedChildren === child)\n            return;\n        if (child && !cachedChildren) {\n            handleEnterTransition();\n        }\n        else if (cachedChildren && !child && !leaveTimeoutRef.current) {\n            handleLeaveTransition();\n        }\n        setCachedChildren(child);\n    }, [children, cachedChildren, handleEnterTransition, handleLeaveTransition]); // Dependency array to trigger effect on children change\n    useEffect(() => {\n        return () => {\n            clearTimeout(enterTimeoutRef.current);\n            clearTimeout(leaveTimeoutRef.current);\n            cancelAnimationFrame(animationFrameRef.current);\n        };\n    }, []); // Cleanup useEffect\n    if (!cachedChildren)\n        return null;\n    return cloneElement(cachedChildren, {\n        className: classNames(className, cachedChildren.props.className),\n    });\n}\nexport default Slide;\n", "export default {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { CancelBtn, DoneBtn, PauseResumeButton, ProgressBarComplete, ProgressBarError, ProgressBarProcessing, ProgressBarUploading, RetryBtn, UploadBtn, } from './Components.js';\nimport calculateProcessingProgress from './calculateProcessingProgress.js';\nimport statusBarStates from './StatusBarStates.js';\nconst { STATE_ERROR, STATE_WAITING, STATE_PREPROCESSING, STATE_UPLOADING, STATE_POSTPROCESSING, STATE_COMPLETE, } = statusBarStates;\nexport default function StatusBarUI({ newFiles, allowNewUpload, isUploadInProgress, isAllPaused, resumableUploads, error, hideUploadButton = undefined, hidePauseResumeButton = false, hideCancelButton = false, hideRetryButton = false, recoveredState, uploadState, totalProgress, files, supportsUploadProgress, hideAfterFinish = false, isSomeGhost, doneButtonHandler = undefined, isUploadStarted, i18n, startUpload, uppy, isAllComplete, hideProgressDetails = undefined, numUploads, complete, totalSize, totalETA, totalUploadedSize, }) {\n    function getProgressValue() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const progress = calculateProcessingProgress(files);\n                if (progress.mode === 'determinate') {\n                    return progress.value * 100;\n                }\n                return totalProgress;\n            }\n            case STATE_ERROR: {\n                return null;\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return null;\n                }\n                return totalProgress;\n            }\n            default:\n                return totalProgress;\n        }\n    }\n    function getIsIndeterminate() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const { mode } = calculateProcessingProgress(files);\n                return mode === 'indeterminate';\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return true;\n                }\n                return false;\n            }\n            default:\n                return false;\n        }\n    }\n    const progressValue = getProgressValue();\n    const width = progressValue ?? 100;\n    const showUploadBtn = !error &&\n        newFiles &&\n        ((!isUploadInProgress && !isAllPaused) || recoveredState) &&\n        allowNewUpload &&\n        !hideUploadButton;\n    const showCancelBtn = !hideCancelButton &&\n        uploadState !== STATE_WAITING &&\n        uploadState !== STATE_COMPLETE;\n    const showPauseResumeBtn = resumableUploads &&\n        !hidePauseResumeButton &&\n        uploadState === STATE_UPLOADING;\n    const showRetryBtn = error && !isAllComplete && !hideRetryButton;\n    const showDoneBtn = doneButtonHandler && uploadState === STATE_COMPLETE;\n    const progressClassNames = classNames('uppy-StatusBar-progress', {\n        'is-indeterminate': getIsIndeterminate(),\n    });\n    const statusBarClassNames = classNames('uppy-StatusBar', `is-${uploadState}`, { 'has-ghosts': isSomeGhost });\n    const progressBarStateEl = (() => {\n        switch (uploadState) {\n            case STATE_PREPROCESSING:\n            case STATE_POSTPROCESSING:\n                return (_jsx(ProgressBarProcessing, { progress: calculateProcessingProgress(files) }));\n            case STATE_COMPLETE:\n                return _jsx(ProgressBarComplete, { i18n: i18n });\n            case STATE_ERROR:\n                return (_jsx(ProgressBarError, { error: error, i18n: i18n, numUploads: numUploads, complete: complete }));\n            case STATE_UPLOADING:\n                return (_jsx(ProgressBarUploading, { i18n: i18n, supportsUploadProgress: supportsUploadProgress, totalProgress: totalProgress, hideProgressDetails: hideProgressDetails, isUploadStarted: isUploadStarted, isAllComplete: isAllComplete, isAllPaused: isAllPaused, newFiles: newFiles, numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, startUpload: startUpload }));\n            default:\n                return null;\n        }\n    })();\n    const atLeastOneAction = showUploadBtn ||\n        showRetryBtn ||\n        showPauseResumeBtn ||\n        showCancelBtn ||\n        showDoneBtn;\n    const thereIsNothingInside = !atLeastOneAction && !progressBarStateEl;\n    const isHidden = thereIsNothingInside || (uploadState === STATE_COMPLETE && hideAfterFinish);\n    if (isHidden) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: statusBarClassNames, children: [_jsx(\"div\", { className: progressClassNames, style: { width: `${width}%` }, role: \"progressbar\", \"aria-label\": `${width}%`, \"aria-valuetext\": `${width}%`, \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-valuenow\": progressValue }), progressBarStateEl, _jsxs(\"div\", { className: \"uppy-StatusBar-actions\", children: [showUploadBtn ? (_jsx(UploadBtn, { newFiles: newFiles, isUploadStarted: isUploadStarted, recoveredState: recoveredState, i18n: i18n, isSomeGhost: isSomeGhost, startUpload: startUpload, uploadState: uploadState })) : null, showRetryBtn ? _jsx(RetryBtn, { i18n: i18n, uppy: uppy }) : null, showPauseResumeBtn ? (_jsx(PauseResumeButton, { isAllPaused: isAllPaused, i18n: i18n, isAllComplete: isAllComplete, resumableUploads: resumableUploads, uppy: uppy })) : null, showCancelBtn ? _jsx(CancelBtn, { i18n: i18n, uppy: uppy }) : null, showDoneBtn ? (_jsx(DoneBtn, { i18n: i18n, doneButtonHandler: doneButtonHandler })) : null] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport { prettyETA } from '@uppy/utils';\nimport classNames from 'classnames';\nimport statusBarStates from './StatusBarStates.js';\nconst DOT = `\\u00B7`;\nconst renderDot = () => ` ${DOT} `;\nfunction UploadBtn(props) {\n    const { newFiles, isUploadStarted, recoveredState, i18n, uploadState, isSomeGhost, startUpload, } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--upload', {\n        'uppy-c-btn-primary': uploadState === statusBarStates.STATE_WAITING,\n    }, { 'uppy-StatusBar-actionBtn--disabled': isSomeGhost });\n    const uploadBtnText = newFiles && isUploadStarted && !recoveredState\n        ? i18n('uploadXNewFiles', { smart_count: newFiles })\n        : i18n('uploadXFiles', { smart_count: newFiles });\n    return (_jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, disabled: isSomeGhost, \"data-uppy-super-focusable\": true, children: uploadBtnText }));\n}\nfunction RetryBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry\", \"aria-label\": i18n('retryUpload'), onClick: () => uppy.retryAll().catch(() => {\n            /* Error reported and handled via an event */\n        }), \"data-uppy-super-focusable\": true, \"data-cy\": \"retry\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"8\", height: \"10\", viewBox: \"0 0 8 10\", children: _jsx(\"path\", { d: \"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z\" }) }), i18n('retry')] }));\n}\nfunction CancelBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", title: i18n('cancel'), \"aria-label\": i18n('cancel'), onClick: () => uppy.cancelAll(), \"data-cy\": \"cancel\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z\" })] }) }) }));\n}\nfunction PauseResumeButton(props) {\n    const { isAllPaused, i18n, isAllComplete, resumableUploads, uppy } = props;\n    const title = isAllPaused ? i18n('resume') : i18n('pause');\n    function togglePauseResume() {\n        if (isAllComplete)\n            return;\n        if (!resumableUploads) {\n            uppy.cancelAll();\n            return;\n        }\n        if (isAllPaused) {\n            uppy.resumeAll();\n            return;\n        }\n        uppy.pauseAll();\n    }\n    return (_jsx(\"button\", { title: title, \"aria-label\": title, className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", type: \"button\", onClick: togglePauseResume, \"data-cy\": \"togglePauseResume\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: isAllPaused\n                            ? 'M6 4.25L11.5 8 6 11.75z'\n                            : 'M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z' })] }) }) }));\n}\nfunction DoneBtn(props) {\n    const { i18n, doneButtonHandler } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done\", onClick: doneButtonHandler, \"data-uppy-super-focusable\": true, children: i18n('done') }));\n}\nfunction LoadingSpinner() {\n    return (_jsx(\"svg\", { className: \"uppy-StatusBar-spinner\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"14\", height: \"14\", children: _jsx(\"path\", { d: \"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0\", fillRule: \"evenodd\" }) }));\n}\nfunction ProgressBarProcessing(props) {\n    const { progress } = props;\n    const { value, mode, message } = progress;\n    const dot = `\\u00B7`;\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", children: [_jsx(LoadingSpinner, {}), mode === 'determinate' ? `${Math.round(value * 100)}% ${dot} ` : '', message] }));\n}\nfunction ProgressDetails(props) {\n    const { numUploads, complete, totalUploadedSize, totalSize, totalETA, i18n } = props;\n    const ifShowFilesUploadedOfTotal = numUploads > 1;\n    const totalUploadedSizeStr = prettierBytes(totalUploadedSize);\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [ifShowFilesUploadedOfTotal &&\n                i18n('filesUploadedOfTotal', {\n                    complete,\n                    smart_count: numUploads,\n                }), _jsxs(\"span\", { className: \"uppy-StatusBar-additionalInfo\", children: [ifShowFilesUploadedOfTotal && renderDot(), totalSize != null\n                        ? i18n('dataUploadedOfTotal', {\n                            complete: totalUploadedSizeStr,\n                            total: prettierBytes(totalSize),\n                        })\n                        : i18n('dataUploadedOfUnknown', { complete: totalUploadedSizeStr }), renderDot(), totalETA != null &&\n                        i18n('xTimeLeft', {\n                            time: prettyETA(totalETA),\n                        })] })] }));\n}\nfunction FileUploadCount(props) {\n    const { i18n, complete, numUploads } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: i18n('filesUploadedOfTotal', { complete, smart_count: numUploads }) }));\n}\nfunction UploadNewlyAddedFiles(props) {\n    const { i18n, newFiles, startUpload } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--uploadNewlyAdded');\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondaryHint\", children: i18n('xMoreFilesAdded', { smart_count: newFiles }) }), _jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, children: i18n('upload') })] }));\n}\nfunction ProgressBarUploading(props) {\n    const { i18n, supportsUploadProgress, totalProgress, hideProgressDetails, isUploadStarted, isAllComplete, isAllPaused, newFiles, numUploads, complete, totalUploadedSize, totalSize, totalETA, startUpload, } = props;\n    const showUploadNewlyAddedFiles = newFiles && isUploadStarted;\n    if (!isUploadStarted || isAllComplete) {\n        return null;\n    }\n    const title = isAllPaused ? i18n('paused') : i18n('uploading');\n    function renderProgressDetails() {\n        if (!isAllPaused && !showUploadNewlyAddedFiles && !hideProgressDetails) {\n            if (supportsUploadProgress) {\n                return (_jsx(ProgressDetails, { numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, i18n: i18n }));\n            }\n            return (_jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads }));\n        }\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: title, children: [!isAllPaused ? _jsx(LoadingSpinner, {}) : null, _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: supportsUploadProgress && totalProgress !== 0\n                            ? `${title}: ${totalProgress}%`\n                            : title }), renderProgressDetails(), showUploadNewlyAddedFiles ? (_jsx(UploadNewlyAddedFiles, { i18n: i18n, newFiles: newFiles, startUpload: startUpload })) : null] })] }));\n}\nfunction ProgressBarComplete(props) {\n    const { i18n } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-content\", \n        // biome-ignore lint/a11y/useSemanticElements: ...\n        role: \"status\", title: i18n('complete'), children: _jsx(\"div\", { className: \"uppy-StatusBar-status\", children: _jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"15\", height: \"11\", viewBox: \"0 0 15 11\", children: _jsx(\"path\", { d: \"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z\" }) }), i18n('complete')] }) }) }));\n}\nfunction ProgressBarError(props) {\n    const { error, i18n, complete, numUploads } = props;\n    function displayErrorAlert() {\n        const errorMessage = `${i18n('uploadFailed')} \\n\\n ${error}`;\n        alert(errorMessage); // TODO: move to custom alert implementation\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: i18n('uploadFailed'), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z\" }) }), _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [i18n('uploadFailed'), _jsx(\"button\", { className: \"uppy-u-reset uppy-StatusBar-details\", \"aria-label\": i18n('showErrorDetails'), \"data-microtip-position\": \"top-right\", \"data-microtip-size\": \"medium\", onClick: displayErrorAlert, type: \"button\", children: \"?\" })] }), _jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads })] })] }));\n}\nexport { UploadBtn, RetryBtn, CancelBtn, PauseResumeButton, DoneBtn, LoadingSpinner, ProgressDetails, ProgressBarProcessing, ProgressBarError, ProgressBarUploading, ProgressBarComplete, };\n", "export default function calculateProcessingProgress(files) {\n    const values = [];\n    let mode = 'indeterminate';\n    let message;\n    for (const { progress } of Object.values(files)) {\n        const { preprocess, postprocess } = progress;\n        // In the future we should probably do this differently. For now we'll take the\n        // mode and message from the first file\u2026\n        if (message == null && (preprocess || postprocess)) {\n            ;\n            ({ mode, message } = preprocess || postprocess);\n        }\n        if (preprocess?.mode === 'determinate')\n            values.push(preprocess.value);\n        if (postprocess?.mode === 'determinate')\n            values.push(postprocess.value);\n    }\n    const value = values.reduce((total, progressValue) => {\n        return total + progressValue / values.length;\n    }, 0);\n    return {\n        mode,\n        message,\n        value,\n    };\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { emaFilter } from '@uppy/utils';\nimport { Component } from 'preact';\nimport statusBarStates from './StatusBarStates.js';\nimport StatusBarUI, {} from './StatusBarUI.js';\nconst speedFilterHalfLife = 2000;\nconst ETAFilterHalfLife = 2000;\nfunction getUploadingState(error, isAllComplete, recoveredState, files) {\n    if (error) {\n        return statusBarStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return statusBarStates.STATE_COMPLETE;\n    }\n    if (recoveredState) {\n        return statusBarStates.STATE_WAITING;\n    }\n    let state = statusBarStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return statusBarStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess) {\n            state = statusBarStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess && state !== statusBarStates.STATE_PREPROCESSING) {\n            state = statusBarStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nexport default class StatusBar extends Component {\n    #lastUpdateTime;\n    #previousUploadedBytes;\n    #previousSpeed;\n    #previousETA;\n    componentDidMount() {\n        // Initialize ETA calculation variables\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = this.props.uppy\n            .getFiles()\n            .reduce((pv, file) => pv + (file.progress.bytesUploaded || 0), 0);\n        // Listen for upload start to reset ETA calculation\n        this.props.uppy.on('upload', this.#onUploadStart);\n    }\n    componentWillUnmount() {\n        this.props.uppy.off('upload', this.#onUploadStart);\n    }\n    #onUploadStart = () => {\n        const { recoveredState } = this.props.uppy.getState();\n        this.#previousSpeed = null;\n        this.#previousETA = null;\n        if (recoveredState) {\n            this.#previousUploadedBytes = Object.values(recoveredState.files).reduce((pv, { progress }) => pv + (progress.bytesUploaded || 0), 0);\n            // We don't set `#lastUpdateTime` at this point because the upload won't\n            // actually resume until the user asks for it.\n            return;\n        }\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = 0;\n    };\n    #computeSmoothETA(totalBytes) {\n        if (totalBytes.total == null || totalBytes.total === 0) {\n            return null;\n        }\n        const remaining = totalBytes.total - totalBytes.uploaded;\n        if (remaining <= 0) {\n            return null;\n        }\n        // When state is restored, lastUpdateTime is still nullish at this point.\n        this.#lastUpdateTime ??= performance.now();\n        const dt = performance.now() - this.#lastUpdateTime;\n        if (dt === 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        // Initialize previousUploadedBytes if it's null\n        if (this.#previousUploadedBytes == null) {\n            this.#previousUploadedBytes = totalBytes.uploaded;\n            return null; // Can't calculate speed on first call\n        }\n        const uploadedBytesSinceLastTick = totalBytes.uploaded - this.#previousUploadedBytes;\n        this.#previousUploadedBytes = totalBytes.uploaded;\n        // uploadedBytesSinceLastTick can be negative in some cases (packet loss?)\n        // in which case, we wait for next tick to update ETA.\n        if (uploadedBytesSinceLastTick <= 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        const currentSpeed = uploadedBytesSinceLastTick / dt;\n        // Guard against invalid speed values\n        if (!Number.isFinite(currentSpeed) || currentSpeed <= 0) {\n            return null;\n        }\n        const filteredSpeed = this.#previousSpeed == null\n            ? currentSpeed\n            : emaFilter(currentSpeed, this.#previousSpeed, speedFilterHalfLife, dt);\n        // Guard against invalid filtered speed\n        if (!Number.isFinite(filteredSpeed) || filteredSpeed <= 0) {\n            return null;\n        }\n        this.#previousSpeed = filteredSpeed;\n        const instantETA = remaining / filteredSpeed;\n        // Guard against invalid instantETA\n        if (!Number.isFinite(instantETA) || instantETA < 0) {\n            return null;\n        }\n        const updatedPreviousETA = Math.max((this.#previousETA ?? 0) - dt, 0);\n        const filteredETA = this.#previousETA == null\n            ? instantETA\n            : emaFilter(instantETA, updatedPreviousETA, ETAFilterHalfLife, dt);\n        // Guard against invalid filteredETA\n        if (!Number.isFinite(filteredETA) || filteredETA < 0) {\n            return null;\n        }\n        this.#previousETA = filteredETA;\n        this.#lastUpdateTime = performance.now();\n        return Math.round(filteredETA / 100) / 10;\n    }\n    startUpload = () => {\n        const { recoveredState } = this.props.uppy.getState();\n        if (recoveredState) {\n            this.props.uppy.emit('restore-confirmed');\n        }\n        else {\n            this.props.uppy.upload().catch((() => {\n                // Error logged in Core\n            }));\n        }\n    };\n    render() {\n        const { capabilities, files, allowNewUpload, totalProgress, error, recoveredState, } = this.props.uppy.getState();\n        const { newFiles, startedFiles, completeFiles, isUploadStarted, isAllComplete, isAllPaused, isUploadInProgress, isSomeGhost, } = this.props.uppy.getObjectOfFilesPerState();\n        const newFilesOrRecovered = recoveredState ? Object.values(files) : newFiles;\n        const resumableUploads = !!capabilities.resumableUploads;\n        const supportsUploadProgress = capabilities.uploadProgress !== false;\n        let totalSize = null;\n        let totalUploadedSize = 0;\n        // Only if all files have a known size, does it make sense to display a total size\n        if (startedFiles.every((f) => f.progress.bytesTotal != null && f.progress.bytesTotal !== 0)) {\n            totalSize = 0;\n            startedFiles.forEach((file) => {\n                totalSize += file.progress.bytesTotal || 0;\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        else {\n            // however uploaded size we will always have\n            startedFiles.forEach((file) => {\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        const totalETA = this.#computeSmoothETA({\n            uploaded: totalUploadedSize,\n            total: totalSize,\n        });\n        return (_jsx(StatusBarUI, { error: error, uploadState: getUploadingState(error, isAllComplete, recoveredState, files || {}), allowNewUpload: allowNewUpload, totalProgress: totalProgress, totalSize: totalSize, totalUploadedSize: totalUploadedSize, isAllComplete: isAllComplete, isAllPaused: isAllPaused, isUploadStarted: isUploadStarted, isUploadInProgress: isUploadInProgress, isSomeGhost: isSomeGhost, recoveredState: recoveredState, complete: completeFiles.length, newFiles: newFilesOrRecovered.length, numUploads: startedFiles.length, totalETA: totalETA, files: files, i18n: this.props.i18n, uppy: this.props.uppy, startUpload: this.startUpload, doneButtonHandler: this.props.doneButtonHandler, resumableUploads: resumableUploads, supportsUploadProgress: supportsUploadProgress, hideProgressDetails: this.props.hideProgressDetails, hideUploadButton: this.props.hideUploadButton, hideRetryButton: this.props.hideRetryButton, hidePauseResumeButton: this.props.hidePauseResumeButton, hideCancelButton: this.props.hideCancelButton, hideAfterFinish: this.props.hideAfterFinish }));\n    }\n}\n", "export default {\n    strings: {\n        // When `inline: false`, used as the screen reader label for the button that closes the modal.\n        closeModal: 'Close Modal',\n        // Used as the screen reader label for the plus (+) button that shows the \u201CAdd more files\u201D screen\n        addMoreFiles: 'Add more files',\n        addingMoreFiles: 'Adding more files',\n        // Used as the header for import panels, e.g., \u201CImport from Google Drive\u201D.\n        importFrom: 'Import from %{name}',\n        // When `inline: false`, used as the screen reader label for the dashboard modal.\n        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',\n        // When `inline: true`, used as the screen reader label for the dashboard area.\n        dashboardTitle: 'Uppy Dashboard',\n        // Shown in the Informer when a link to a file was copied to the clipboard.\n        copyLinkToClipboardSuccess: 'Link copied to clipboard.',\n        // Used when a link cannot be copied automatically \u2014 the user has to select the text from the\n        // input element below this string.\n        copyLinkToClipboardFallback: 'Copy the URL below',\n        // Used as the hover title and screen reader label for buttons that copy a file link.\n        copyLink: 'Copy link',\n        back: 'Back',\n        // Used as the screen reader label for buttons that remove a file.\n        removeFile: 'Remove file',\n        // Used as the screen reader label for buttons that open the metadata editor panel for a file.\n        editFile: 'Edit file',\n        editImage: 'Edit image',\n        // Shown in the panel header for the metadata editor. Rendered as \u201CEditing image.png\u201D.\n        editing: 'Editing %{file}',\n        // Shown on the main upload screen when an upload error occurs\n        error: 'Error',\n        // Used as the screen reader label for the button that saves metadata edits and returns to the\n        // file list view.\n        finishEditingFile: 'Finish editing file',\n        saveChanges: 'Save changes',\n        // Used as the label for the tab button that opens the system file selection dialog.\n        myDevice: 'My Device',\n        dropHint: 'Drop your files here',\n        // Used as the hover text and screen reader label for file progress indicators when\n        // they have been fully uploaded.\n        uploadComplete: 'Upload complete',\n        uploadPaused: 'Upload paused',\n        // Used as the hover text and screen reader label for the buttons to resume paused uploads.\n        resumeUpload: 'Resume upload',\n        // Used as the hover text and screen reader label for the buttons to pause uploads.\n        pauseUpload: 'Pause upload',\n        // Used as the hover text and screen reader label for the buttons to retry failed uploads.\n        retryUpload: 'Retry upload',\n        // Used as the hover text and screen reader label for the buttons to cancel uploads.\n        cancelUpload: 'Cancel upload',\n        // Used in a title, how many files are currently selected\n        xFilesSelected: {\n            0: '%{smart_count} file selected',\n            1: '%{smart_count} files selected',\n        },\n        uploadingXFiles: {\n            0: 'Uploading %{smart_count} file',\n            1: 'Uploading %{smart_count} files',\n        },\n        processingXFiles: {\n            0: 'Processing %{smart_count} file',\n            1: 'Processing %{smart_count} files',\n        },\n        // The \"powered by Uppy\" link at the bottom of the Dashboard.\n        poweredBy: 'Powered by %{uppy}',\n        addMore: 'Add more',\n        editFileWithFilename: 'Edit file %{file}',\n        save: 'Save',\n        cancel: 'Cancel',\n        dropPasteFiles: 'Drop files here or %{browseFiles}',\n        dropPasteFolders: 'Drop files here or %{browseFolders}',\n        dropPasteBoth: 'Drop files here, %{browseFiles} or %{browseFolders}',\n        dropPasteImportFiles: 'Drop files here, %{browseFiles} or import from:',\n        dropPasteImportFolders: 'Drop files here, %{browseFolders} or import from:',\n        dropPasteImportBoth: 'Drop files here, %{browseFiles}, %{browseFolders} or import from:',\n        importFiles: 'Import files from:',\n        browseFiles: 'browse files',\n        browseFolders: 'browse folders',\n        recoveredXFiles: {\n            0: 'We could not fully recover 1 file. Please re-select it and resume the upload.',\n            1: 'We could not fully recover %{smart_count} files. Please re-select them and resume the upload.',\n        },\n        recoveredAllFiles: 'We restored all files. You can now resume the upload.',\n        sessionRestored: 'Session restored',\n        reSelect: 'Re-select',\n        missingRequiredMetaFields: {\n            0: 'Missing required meta field: %{fields}.',\n            1: 'Missing required meta fields: %{fields}.',\n        },\n        // Used for native device camera buttons on mobile\n        takePictureBtn: 'Take Picture',\n        recordVideoBtn: 'Record Video',\n        // Strings for StatusBar\n        // Shown in the status bar while files are being uploaded.\n        uploading: 'Uploading',\n        // Shown in the status bar once all files have been uploaded.\n        complete: 'Complete',\n        // Shown in the status bar if an upload failed.\n        uploadFailed: 'Upload failed',\n        // Shown in the status bar while the upload is paused.\n        paused: 'Paused',\n        // Used as the label for the button that retries an upload.\n        retry: 'Retry',\n        // Used as the label for the button that pauses an upload.\n        pause: 'Pause',\n        // Used as the label for the button that resumes an upload.\n        resume: 'Resume',\n        // Used as the label for the button that resets the upload state after an upload\n        done: 'Done',\n        // When `hideProgressDetails` is set to false, shows the number of files that have been fully uploaded so far.\n        filesUploadedOfTotal: {\n            0: '%{complete} of %{smart_count} file uploaded',\n            1: '%{complete} of %{smart_count} files uploaded',\n        },\n        // When `hideProgressDetails` is set to false, shows the amount of bytes that have been uploaded so far.\n        dataUploadedOfTotal: '%{complete} of %{total}',\n        dataUploadedOfUnknown: '%{complete} of unknown',\n        // When `hideProgressDetails` is set to false, shows an estimation of how long the upload will take to complete.\n        xTimeLeft: '%{time} left',\n        // Used as the label for the button that starts an upload.\n        uploadXFiles: {\n            0: 'Upload %{smart_count} file',\n            1: 'Upload %{smart_count} files',\n        },\n        // Used as the label for the button that starts an upload, if another upload has been started in the past\n        // and new files were added later.\n        uploadXNewFiles: {\n            0: 'Upload +%{smart_count} file',\n            1: 'Upload +%{smart_count} files',\n        },\n        upload: 'Upload',\n        xMoreFilesAdded: {\n            0: '%{smart_count} more file added',\n            1: '%{smart_count} more files added',\n        },\n        showErrorDetails: 'Show error details',\n    },\n};\n", "// @ts-ignore untyped\nimport { FOCUSABLE_ELEMENTS } from '@uppy/utils';\nimport debounce from 'lodash/debounce.js';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\n/*\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses\n     on the first superfocusable element, and leaves focus up to the control of\n     a user (until currently focused element disappears from the screen [which\n     can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses\n     on the first focusable element, but switches focus if superfocusable elements appear on next render.\n*/\nexport default function createSuperFocus() {\n    let lastFocusWasOnSuperFocusableEl = false;\n    const superFocus = (dashboardEl, activeOverlayType) => {\n        const overlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n        const isFocusInOverlay = overlayEl.contains(document.activeElement);\n        // If focus is already in the topmost overlay, AND on last update we focused on the superfocusable\n        // element - then leave focus up to the user.\n        // [Practical check] without this line, typing in the search input in googledrive overlay won't work.\n        if (isFocusInOverlay && lastFocusWasOnSuperFocusableEl)\n            return;\n        const superFocusableEl = overlayEl.querySelector('[data-uppy-super-focusable]');\n        // If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.\n        // [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the\n        // bg, - focus will be jumping to Done all the time.\n        if (isFocusInOverlay && !superFocusableEl)\n            return;\n        if (superFocusableEl) {\n            superFocusableEl.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = true;\n        }\n        else {\n            const firstEl = overlayEl.querySelector(FOCUSABLE_ELEMENTS);\n            firstEl?.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = false;\n        }\n    };\n    // ___Why do we need to debounce?\n    //    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update()\n    //       already executed.\n    //    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.\n    //    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.\n    //    2. Performance: there can be many state update()s in a second, and this function is called every time.\n    return debounce(superFocus, 260);\n}\n", "/**\n * @returns {HTMLElement} - either dashboard element, or the overlay that's most on top\n */\nexport default function getActiveOverlayEl(dashboardEl, activeOverlayType) {\n    if (activeOverlayType) {\n        const overlayEl = dashboardEl.querySelector(`[data-uppy-paneltype=\"${activeOverlayType}\"]`);\n        // if an overlay is already mounted\n        if (overlayEl)\n            return overlayEl;\n    }\n    return dashboardEl;\n}\n", "// @ts-ignore untyped\nimport { FOCUSABLE_ELEMENTS, toArray } from '@uppy/utils';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\nfunction focusOnFirstNode(event, nodes) {\n    const node = nodes[0];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\nfunction focusOnLastNode(event, nodes) {\n    const node = nodes[nodes.length - 1];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\n// ___Why not just use (focusedItemIndex === -1)?\n//    Firefox thinks <ul> is focusable, but we don't have <ul>s in our FOCUSABLE_ELEMENTS. Which means that if we tab into\n//    the <ul>, code will think that we are not in the active overlay, and we should focusOnFirstNode() of the currently\n//    active overlay!\n//    [Practical check] if we use (focusedItemIndex === -1), instagram provider in firefox will never get focus on its pics\n//    in the <ul>.\nfunction isFocusInOverlay(activeOverlayEl) {\n    return activeOverlayEl.contains(document.activeElement);\n}\nfunction trapFocus(event, activeOverlayType, dashboardEl) {\n    const activeOverlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n    const focusableNodes = toArray(activeOverlayEl.querySelectorAll(FOCUSABLE_ELEMENTS));\n    const focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n    // If we pressed tab, and focus is not yet within the current overlay - focus on\n    // the first element within the current overlay.\n    // This is a safety measure (for when user returns from another tab e.g.), most\n    // plugins will try to focus on some important element as it loads.\n    if (!isFocusInOverlay(activeOverlayEl)) {\n        focusOnFirstNode(event, focusableNodes);\n        // If we pressed shift + tab, and we're on the first element of a modal\n    }\n    else if (event.shiftKey && focusedItemIndex === 0) {\n        focusOnLastNode(event, focusableNodes);\n        // If we pressed tab, and we're on the last element of the modal\n    }\n    else if (!event.shiftKey &&\n        focusedItemIndex === focusableNodes.length - 1) {\n        focusOnFirstNode(event, focusableNodes);\n    }\n}\n// Traps focus inside of the currently open overlay (e.g. Dashboard, or e.g. Instagram),\n// never lets focus disappear from the modal.\nexport { trapFocus as forModal };\n// Traps focus inside of the currently open overlay, unless overlay is null - then let the user tab away.\nexport function forInline(event, activeOverlayType, dashboardEl) {\n    // ___When we're in the bare 'Drop files here, paste, browse or import from' screen\n    if (activeOverlayType === null) {\n        // Do nothing and let the browser handle it, user can tab away from Uppy to other elements on the page\n        // ___When there is some overlay with 'Done' button\n    }\n    else {\n        // Trap the focus inside this overlay!\n        // User can close the overlay (click 'Done') if they want to travel away from Uppy.\n        trapFocus(event, activeOverlayType, dashboardEl);\n    }\n}\n", "import { UIPlugin } from '@uppy/core';\nimport { defaultPickerIcon } from '@uppy/provider-views';\nimport ThumbnailGenerator from '@uppy/thumbnail-generator';\nimport { findAllDOMElements, getDroppedFiles, toArray } from '@uppy/utils';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport DashboardUI from './components/Dashboard.js';\nimport locale from './locale.js';\nimport createSuperFocus from './utils/createSuperFocus.js';\nimport * as trapFocus from './utils/trapFocus.js';\nconst TAB_KEY = 9;\nconst ESC_KEY = 27;\nfunction createPromise() {\n    const o = {};\n    o.promise = new Promise((resolve, reject) => {\n        o.resolve = resolve;\n        o.reject = reject;\n    });\n    return o;\n}\nconst defaultOptions = {\n    target: 'body',\n    metaFields: [],\n    thumbnailWidth: 280,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    defaultPickerIcon,\n    showLinkToFileUploadResult: false,\n    hideProgressDetails: false,\n    hideUploadButton: false,\n    hideCancelButton: false,\n    hideRetryButton: false,\n    hidePauseResumeButton: false,\n    hideProgressAfterFinish: false,\n    note: null,\n    singleFileFullScreen: true,\n    disableStatusBar: false,\n    disableInformer: false,\n    disableThumbnailGenerator: false,\n    fileManagerSelectionType: 'files',\n    proudlyDisplayPoweredByUppy: true,\n    showSelectedFiles: true,\n    showRemoveButtonAfterComplete: false,\n    showNativePhotoCameraButton: false,\n    showNativeVideoCameraButton: false,\n    theme: 'light',\n    autoOpen: null,\n    disabled: false,\n    disableLocalFiles: false,\n    nativeCameraFacingMode: '',\n    onDragLeave: () => { },\n    onDragOver: () => { },\n    onDrop: () => { },\n    plugins: [],\n    // Dynamic default options, they have to be defined in the constructor (because\n    // they require access to the `this` keyword), but we still want them to\n    // appear in the default options so TS knows they'll be defined.\n    doneButtonHandler: undefined,\n    onRequestCloseModal: null,\n    // defaultModalOptions\n    inline: false,\n    animateOpenClose: true,\n    browserBackButtonClose: false,\n    closeAfterFinish: false,\n    closeModalOnClickOutside: false,\n    disablePageScrollWhenModalOpen: true,\n    trigger: null,\n    // defaultInlineOptions\n    width: 750,\n    height: 550,\n};\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nexport default class Dashboard extends UIPlugin {\n    static VERSION = packageJson.version;\n    #disabledNodes;\n    modalName = `uppy-Dashboard-${nanoid()}`;\n    superFocus = createSuperFocus();\n    ifFocusedOnUppyRecently = false;\n    dashboardIsDisabled;\n    savedScrollPosition;\n    savedActiveElement;\n    resizeObserver;\n    darkModeMediaQuery;\n    // Timeouts\n    makeDashboardInsidesVisibleAnywayTimeout;\n    constructor(uppy, opts) {\n        const autoOpen = opts?.autoOpen ?? null;\n        super(uppy, { ...defaultOptions, ...opts, autoOpen });\n        this.id = this.opts.id || 'Dashboard';\n        this.title = 'Dashboard';\n        this.type = 'orchestrator';\n        this.defaultLocale = locale;\n        // Dynamic default options:\n        if (this.opts.doneButtonHandler === undefined) {\n            // `null` means \"do not display a Done button\", while `undefined` means\n            // \"I want the default behavior\". For this reason, we need to differentiate `null` and `undefined`.\n            this.opts.doneButtonHandler = () => {\n                this.uppy.clear();\n                this.requestCloseModal();\n            };\n        }\n        this.opts.onRequestCloseModal ??= () => this.closeModal();\n        this.i18nInit();\n    }\n    removeTarget = (plugin) => {\n        const pluginState = this.getPluginState();\n        // filter out the one we want to remove\n        const newTargets = pluginState.targets.filter((target) => target.id !== plugin.id);\n        this.setPluginState({\n            targets: newTargets,\n        });\n    };\n    addTarget = (plugin) => {\n        const callerPluginId = plugin.id || plugin.constructor.name;\n        const callerPluginName = plugin.title || callerPluginId;\n        const callerPluginType = plugin.type;\n        if (callerPluginType !== 'acquirer' &&\n            callerPluginType !== 'progressindicator' &&\n            callerPluginType !== 'editor') {\n            const msg = 'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor';\n            this.uppy.log(msg, 'error');\n            return null;\n        }\n        const target = {\n            id: callerPluginId,\n            name: callerPluginName,\n            type: callerPluginType,\n        };\n        const state = this.getPluginState();\n        const newTargets = state.targets.slice();\n        newTargets.push(target);\n        this.setPluginState({\n            targets: newTargets,\n        });\n        return this.el;\n    };\n    hideAllPanels = () => {\n        const state = this.getPluginState();\n        const update = {\n            activePickerPanel: undefined,\n            showAddFilesPanel: false,\n            activeOverlayType: null,\n            fileCardFor: null,\n            showFileEditor: false,\n        };\n        if (state.activePickerPanel === update.activePickerPanel &&\n            state.showAddFilesPanel === update.showAddFilesPanel &&\n            state.showFileEditor === update.showFileEditor &&\n            state.activeOverlayType === update.activeOverlayType) {\n            // avoid doing a state update if nothing changed\n            return;\n        }\n        this.setPluginState(update);\n        this.uppy.emit('dashboard:close-panel', state.activePickerPanel?.id);\n    };\n    showPanel = (id) => {\n        const { targets } = this.getPluginState();\n        const activePickerPanel = targets.find((target) => {\n            return target.type === 'acquirer' && target.id === id;\n        });\n        this.setPluginState({\n            activePickerPanel,\n            activeOverlayType: 'PickerPanel',\n        });\n        this.uppy.emit('dashboard:show-panel', id);\n    };\n    canEditFile = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        return editors.some((target) => this.uppy.getPlugin(target.id).canEditFile(file));\n    };\n    openFileEditor = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        this.setPluginState({\n            showFileEditor: true,\n            fileCardFor: file.id || null,\n            activeOverlayType: 'FileEditor',\n        });\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).selectFile(file);\n        });\n    };\n    closeFileEditor = () => {\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        if (isMetaEditorEnabled) {\n            this.setPluginState({\n                showFileEditor: false,\n                activeOverlayType: 'FileCard',\n            });\n        }\n        else {\n            this.setPluginState({\n                showFileEditor: false,\n                fileCardFor: null,\n                activeOverlayType: 'AddFiles',\n            });\n        }\n    };\n    saveFileEditor = () => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).save();\n        });\n        this.closeFileEditor();\n    };\n    openModal = () => {\n        const { promise, resolve } = createPromise();\n        // save scroll position\n        this.savedScrollPosition = window.pageYOffset;\n        // save active element, so we can restore focus when modal is closed\n        this.savedActiveElement = document.activeElement;\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.add('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose && this.getPluginState().isClosing) {\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: false,\n                });\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: false,\n            });\n            resolve();\n        }\n        if (this.opts.browserBackButtonClose) {\n            this.updateBrowserHistory();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.addEventListener('keydown', this.handleKeyDownInModal);\n        this.uppy.emit('dashboard:modal-open');\n        return promise;\n    };\n    closeModal = (opts) => {\n        // Whether the modal is being closed by the user (`true`) or by other means (e.g. browser back button)\n        const manualClose = opts?.manualClose ?? true;\n        const { isHidden, isClosing } = this.getPluginState();\n        if (isHidden || isClosing) {\n            // short-circuit if animation is ongoing\n            return undefined;\n        }\n        const { promise, resolve } = createPromise();\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose) {\n            this.setPluginState({\n                isClosing: true,\n            });\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: true,\n                    isClosing: false,\n                });\n                this.superFocus.cancel();\n                this.savedActiveElement.focus();\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: true,\n            });\n            this.superFocus.cancel();\n            this.savedActiveElement.focus();\n            resolve();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.removeEventListener('keydown', this.handleKeyDownInModal);\n        if (manualClose) {\n            if (this.opts.browserBackButtonClose) {\n                // Make sure that the latest entry in the history state is our modal name\n                if (history.state?.[this.modalName]) {\n                    // Go back in history to clear out the entry we created (ultimately closing the modal)\n                    history.back();\n                }\n            }\n        }\n        this.uppy.emit('dashboard:modal-closed');\n        return promise;\n    };\n    isModalOpen = () => {\n        return !this.getPluginState().isHidden || false;\n    };\n    requestCloseModal = () => {\n        if (this.opts.onRequestCloseModal) {\n            return this.opts.onRequestCloseModal();\n        }\n        return this.closeModal();\n    };\n    setDarkModeCapability = (isDarkModeOn) => {\n        const { capabilities } = this.uppy.getState();\n        this.uppy.setState({\n            capabilities: {\n                ...capabilities,\n                darkMode: isDarkModeOn,\n            },\n        });\n    };\n    handleSystemDarkModeChange = (event) => {\n        const isDarkModeOnNow = event.matches;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnNow ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnNow);\n    };\n    toggleFileCard = (show, fileID) => {\n        const file = this.uppy.getFile(fileID);\n        if (show) {\n            this.uppy.emit('dashboard:file-edit-start', file);\n        }\n        else {\n            this.uppy.emit('dashboard:file-edit-complete', file);\n        }\n        this.setPluginState({\n            fileCardFor: show ? fileID : null,\n            activeOverlayType: show ? 'FileCard' : null,\n        });\n    };\n    toggleAddFilesPanel = (show) => {\n        this.setPluginState({\n            showAddFilesPanel: show,\n            activeOverlayType: show ? 'AddFiles' : null,\n        });\n    };\n    addFiles = (files) => {\n        const descriptors = files.map((file) => ({\n            source: this.id,\n            name: file.name,\n            type: file.type,\n            data: file,\n            meta: {\n                // path of the file relative to the ancestor directory the user selected.\n                // e.g. 'docs/Old Prague/airbnb.pdf'\n                relativePath: file.relativePath || file.webkitRelativePath || null,\n            },\n        }));\n        try {\n            this.uppy.addFiles(descriptors);\n        }\n        catch (err) {\n            this.uppy.log(err);\n        }\n    };\n    // ___Why make insides of Dashboard invisible until first ResizeObserver event is emitted?\n    //    ResizeOberserver doesn't emit the first resize event fast enough, users can see the jump from one .uppy-size-- to\n    //    another (e.g. in Safari)\n    // ___Why not apply visibility property to .uppy-Dashboard-inner?\n    //    Because ideally, acc to specs, ResizeObserver should see invisible elements as of width 0. So even though applying\n    //    invisibility to .uppy-Dashboard-inner works now, it may not work in the future.\n    startListeningToResize = () => {\n        // Watch for Dashboard container (`.uppy-Dashboard-inner`) resize\n        // and update containerWidth/containerHeight in plugin state accordingly.\n        // Emits first event on initialization.\n        this.resizeObserver = new ResizeObserver((entries) => {\n            const uppyDashboardInnerEl = entries[0];\n            const { width, height } = uppyDashboardInnerEl.contentRect;\n            this.setPluginState({\n                containerWidth: width,\n                containerHeight: height,\n                areInsidesReadyToBeVisible: true,\n            });\n        });\n        this.resizeObserver.observe(this.el.querySelector('.uppy-Dashboard-inner'));\n        // If ResizeObserver fails to emit an event telling us what size to use - default to the mobile view\n        this.makeDashboardInsidesVisibleAnywayTimeout = setTimeout(() => {\n            const pluginState = this.getPluginState();\n            const isModalAndClosed = !this.opts.inline && pluginState.isHidden;\n            if (\n            // We might want to enable this in the future\n            // if ResizeObserver hasn't yet fired,\n            !pluginState.areInsidesReadyToBeVisible &&\n                // and it's not due to the modal being closed\n                !isModalAndClosed) {\n                this.uppy.log('[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout', 'warning');\n                this.setPluginState({\n                    areInsidesReadyToBeVisible: true,\n                });\n            }\n        }, 1000);\n    };\n    stopListeningToResize = () => {\n        this.resizeObserver.disconnect();\n        clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout);\n    };\n    // Records whether we have been interacting with uppy right now,\n    // which is then used to determine whether state updates should trigger a refocusing.\n    recordIfFocusedOnUppyRecently = (event) => {\n        if (this.el.contains(event.target)) {\n            this.ifFocusedOnUppyRecently = true;\n        }\n        else {\n            this.ifFocusedOnUppyRecently = false;\n            // ___Why run this.superFocus.cancel here when it already runs in superFocusOnEachUpdate?\n            //    Because superFocus is debounced, when we move from Uppy to some other element on the page,\n            //    previously run superFocus sometimes hits and moves focus back to Uppy.\n            this.superFocus.cancel();\n        }\n    };\n    disableInteractiveElements = (disable) => {\n        const NODES_TO_DISABLE = [\n            'a[href]',\n            'input:not([disabled])',\n            'select:not([disabled])',\n            'textarea:not([disabled])',\n            'button:not([disabled])',\n            '[role=\"button\"]:not([disabled])',\n        ];\n        const nodesToDisable = this.#disabledNodes ??\n            toArray(this.el.querySelectorAll(NODES_TO_DISABLE)).filter((node) => !node.classList.contains('uppy-Dashboard-close'));\n        for (const node of nodesToDisable) {\n            // Links can\u2019t have `disabled` attr, so we use `aria-disabled` for a11y\n            if (node.tagName === 'A') {\n                node.setAttribute('aria-disabled', disable);\n            }\n            else {\n                node.disabled = disable;\n            }\n        }\n        if (disable) {\n            this.#disabledNodes = nodesToDisable;\n        }\n        else {\n            this.#disabledNodes = null;\n        }\n        this.dashboardIsDisabled = disable;\n    };\n    updateBrowserHistory = () => {\n        // Ensure history state does not already contain our modal name to avoid double-pushing\n        if (!history.state?.[this.modalName]) {\n            // Push to history so that the page is not lost on browser back button press\n            history.pushState({\n                ...history.state,\n                [this.modalName]: true,\n            }, '');\n        }\n        // Listen for back button presses\n        window.addEventListener('popstate', this.handlePopState, false);\n    };\n    handlePopState = (event) => {\n        // Close the modal if the history state no longer contains our modal name\n        if (this.isModalOpen() && (!event.state || !event.state[this.modalName])) {\n            this.closeModal({ manualClose: false });\n        }\n        // When the browser back button is pressed and uppy is now the latest entry\n        // in the history but the modal is closed, fix the history by removing the\n        // uppy history entry.\n        // This occurs when another entry is added into the history state while the\n        // modal is open, and then the modal gets manually closed.\n        // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)\n        if (!this.isModalOpen() && event.state?.[this.modalName]) {\n            history.back();\n        }\n    };\n    handleKeyDownInModal = (event) => {\n        // close modal on esc key press\n        if (event.keyCode === ESC_KEY)\n            this.requestCloseModal();\n        // trap focus on tab key press\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forModal(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    handleClickOutside = () => {\n        if (this.opts.closeModalOnClickOutside)\n            this.requestCloseModal();\n    };\n    handlePaste = (event) => {\n        // Let any acquirer plugin (Url/Webcam/etc.) handle pastes to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootPaste(event)\n                ;\n                plugin.handleRootPaste?.(event);\n            }\n        });\n        // Add all dropped files\n        const files = toArray(event.clipboardData.files);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files pasted');\n            this.addFiles(files);\n        }\n    };\n    handleInputChange = (event) => {\n        event.preventDefault();\n        const files = toArray(event.currentTarget.files || []);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files selected through input');\n            this.addFiles(files);\n        }\n    };\n    handleDragOver = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        // Check if some plugin can handle the datatransfer without files \u2014\n        // for instance, the Url plugin can import a url\n        const canSomePluginHandleRootDrop = () => {\n            let somePluginCanHandleRootDrop = true;\n            this.uppy.iteratePlugins((plugin) => {\n                if (plugin.canHandleRootDrop?.(event)) {\n                    somePluginCanHandleRootDrop = true;\n                }\n            });\n            return somePluginCanHandleRootDrop;\n        };\n        // Check if the \"type\" of the datatransfer object includes files\n        const doesEventHaveFiles = () => {\n            const { types } = event.dataTransfer;\n            return types.some((type) => type === 'Files');\n        };\n        // Deny drop, if no plugins can handle datatransfer, there are no files,\n        // or when opts.disabled is set, or new uploads are not allowed\n        const somePluginCanHandleRootDrop = canSomePluginHandleRootDrop();\n        const hasFiles = doesEventHaveFiles();\n        if ((!somePluginCanHandleRootDrop && !hasFiles) ||\n            this.opts.disabled ||\n            // opts.disableLocalFiles should only be taken into account if no plugins\n            // can handle the datatransfer\n            (this.opts.disableLocalFiles &&\n                (hasFiles || !somePluginCanHandleRootDrop)) ||\n            !this.uppy.getState().allowNewUpload) {\n            event.dataTransfer.dropEffect = 'none';\n            return;\n        }\n        // Add a small (+) icon on drop\n        // (and prevent browsers from interpreting this as files being _moved_ into the\n        // browser, https://github.com/transloadit/uppy/issues/1978).\n        event.dataTransfer.dropEffect = 'copy';\n        this.setPluginState({ isDraggingOver: true });\n        this.opts.onDragOver(event);\n    };\n    handleDragLeave = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        this.opts.onDragLeave(event);\n    };\n    handleDrop = async (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        // Let any acquirer plugin (Url/Webcam/etc.) handle drops to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootDrop(event)\n                ;\n                plugin.handleRootDrop?.(event);\n            }\n        });\n        // Add all dropped files\n        let executedDropErrorOnce = false;\n        const logDropError = (error) => {\n            this.uppy.log(error, 'error');\n            // In practice all drop errors are most likely the same,\n            // so let's just show one to avoid overwhelming the user\n            if (!executedDropErrorOnce) {\n                this.uppy.info(error.message, 'error');\n                executedDropErrorOnce = true;\n            }\n        };\n        this.uppy.log('[Dashboard] Processing dropped files');\n        // Add all dropped files\n        const files = await getDroppedFiles(event.dataTransfer, { logDropError });\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files dropped');\n            this.addFiles(files);\n        }\n        this.opts.onDrop(event);\n    };\n    handleRequestThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:request', file);\n        }\n    };\n    /**\n     * We cancel thumbnail requests when a file item component unmounts to avoid\n     * clogging up the queue when the user scrolls past many elements.\n     */\n    handleCancelThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:cancel', file);\n        }\n    };\n    handleKeyDownInInline = (event) => {\n        // Trap focus on tab key press.\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forInline(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    // ___Why do we listen to the 'paste' event on a document instead of onPaste={props.handlePaste} prop,\n    //    or this.el.addEventListener('paste')?\n    //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.\n    //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our\n    //       particular Uppy instance.\n    // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi?\n    //    Because if we click on the 'Drop files here' caption e.g., `document.activeElement` will be 'body'. Which means our\n    //    standard determination of whether we're pasting into our Uppy instance won't work.\n    //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.\n    handlePasteOnBody = (event) => {\n        const isFocusInOverlay = this.el.contains(document.activeElement);\n        if (isFocusInOverlay) {\n            this.handlePaste(event);\n        }\n    };\n    handleComplete = ({ failed }) => {\n        if (this.opts.closeAfterFinish && !failed?.length) {\n            // All uploads are done\n            this.requestCloseModal();\n        }\n    };\n    #generateLargeThumbnailIfSingleFile = () => {\n        if (this.opts.disableThumbnailGenerator) {\n            return;\n        }\n        const LARGE_THUMBNAIL = 600;\n        const files = this.uppy.getFiles();\n        if (files.length === 1) {\n            const thumbnailGenerator = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            thumbnailGenerator?.setOptions({ thumbnailWidth: LARGE_THUMBNAIL });\n            const fileForThumbnail = { ...files[0], preview: undefined };\n            thumbnailGenerator?.requestThumbnail(fileForThumbnail).then(() => {\n                thumbnailGenerator?.setOptions({\n                    thumbnailWidth: this.opts.thumbnailWidth,\n                });\n            });\n        }\n    };\n    #openFileEditorWhenFilesAdded = (files) => {\n        const firstFile = files[0];\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        const isImageEditorEnabled = this.canEditFile(firstFile);\n        if (isMetaEditorEnabled && this.opts.autoOpen === 'metaEditor') {\n            this.toggleFileCard(true, firstFile.id);\n        }\n        else if (isImageEditorEnabled && this.opts.autoOpen === 'imageEditor') {\n            this.openFileEditor(firstFile);\n        }\n    };\n    initEvents = () => {\n        // Modal open button\n        if (this.opts.trigger && !this.opts.inline) {\n            const showModalTrigger = findAllDOMElements(this.opts.trigger);\n            if (showModalTrigger) {\n                showModalTrigger.forEach((trigger) => trigger.addEventListener('click', this.openModal));\n            }\n            else {\n                this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself', 'warning');\n            }\n        }\n        this.startListeningToResize();\n        document.addEventListener('paste', this.handlePasteOnBody);\n        this.uppy.on('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.on('plugin-remove', this.removeTarget);\n        this.uppy.on('file-added', this.hideAllPanels);\n        this.uppy.on('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.on('complete', this.handleComplete);\n        this.uppy.on('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.on('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        // ___Why fire on capture?\n        //    Because this.ifFocusedOnUppyRecently needs to change before onUpdate() fires.\n        document.addEventListener('focus', this.recordIfFocusedOnUppyRecently, true);\n        document.addEventListener('click', this.recordIfFocusedOnUppyRecently, true);\n        if (this.opts.inline) {\n            this.el.addEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.on('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    removeEvents = () => {\n        const showModalTrigger = findAllDOMElements(this.opts.trigger);\n        if (!this.opts.inline && showModalTrigger) {\n            showModalTrigger.forEach((trigger) => trigger.removeEventListener('click', this.openModal));\n        }\n        this.stopListeningToResize();\n        document.removeEventListener('paste', this.handlePasteOnBody);\n        window.removeEventListener('popstate', this.handlePopState, false);\n        this.uppy.off('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.off('plugin-remove', this.removeTarget);\n        this.uppy.off('file-added', this.hideAllPanels);\n        this.uppy.off('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.off('complete', this.handleComplete);\n        this.uppy.off('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.off('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        document.removeEventListener('focus', this.recordIfFocusedOnUppyRecently);\n        document.removeEventListener('click', this.recordIfFocusedOnUppyRecently);\n        if (this.opts.inline) {\n            this.el.removeEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.off('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    superFocusOnEachUpdate = () => {\n        const isFocusInUppy = this.el.contains(document.activeElement);\n        // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)\n        const isFocusNowhere = document.activeElement === document.body ||\n            document.activeElement === null;\n        const isInformerHidden = this.uppy.getState().info.length === 0;\n        const isModal = !this.opts.inline;\n        if (\n        // If update is connected to showing the Informer - let the screen reader calmly read it.\n        isInformerHidden &&\n            // If we are in a modal - always superfocus without concern for other elements\n            // on the page (user is unlikely to want to interact with the rest of the page)\n            (isModal ||\n                // If we are already inside of Uppy, or\n                isFocusInUppy ||\n                // If we are not focused on anything BUT we have already, at least once, focused on uppy\n                //   1. We focus when isFocusNowhere, because when the element we were focused\n                //      on disappears (e.g. an overlay), - focus gets lost. If user is typing\n                //      something somewhere else on the page, - focus won't be 'nowhere'.\n                //   2. We only focus when focus is nowhere AND this.ifFocusedOnUppyRecently,\n                //      to avoid focus jumps if we do something else on the page.\n                //   [Practical check] Without '&& this.ifFocusedOnUppyRecently', in Safari, in inline mode,\n                //                     when file is uploading, - navigate via tab to the checkbox,\n                //                     try to press space multiple times. Focus will jump to Uppy.\n                (isFocusNowhere && this.ifFocusedOnUppyRecently))) {\n            this.superFocus(this.el, this.getPluginState().activeOverlayType);\n        }\n        else {\n            this.superFocus.cancel();\n        }\n    };\n    afterUpdate = () => {\n        if (this.opts.disabled && !this.dashboardIsDisabled) {\n            this.disableInteractiveElements(true);\n            return;\n        }\n        if (!this.opts.disabled && this.dashboardIsDisabled) {\n            this.disableInteractiveElements(false);\n        }\n        this.superFocusOnEachUpdate();\n    };\n    saveFileCard = (meta, fileID) => {\n        this.uppy.setFileMeta(fileID, meta);\n        this.toggleFileCard(false, fileID);\n    };\n    #attachRenderFunctionToTarget = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        return {\n            ...target,\n            icon: plugin.icon || this.opts.defaultPickerIcon,\n            render: plugin.render,\n        };\n    };\n    #isTargetSupported = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n        if (typeof plugin.isSupported !== 'function') {\n            return true;\n        }\n        return plugin.isSupported();\n    };\n    #getAcquirers = (targets) => {\n        return targets\n            .filter((target) => target.type === 'acquirer' && this.#isTargetSupported(target))\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getProgressIndicators = (targets) => {\n        return targets\n            .filter((target) => target.type === 'progressindicator')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getEditors = (targets) => {\n        return targets\n            .filter((target) => target.type === 'editor')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    render = (state) => {\n        const pluginState = this.getPluginState();\n        const { files, capabilities, allowNewUpload } = state;\n        const { newFiles, uploadStartedFiles, completeFiles, erroredFiles, inProgressFiles, inProgressNotPausedFiles, processingFiles, isUploadStarted, isAllComplete, isAllPaused, } = this.uppy.getObjectOfFilesPerState();\n        const acquirers = this.#getAcquirers(pluginState.targets);\n        const progressindicators = this.#getProgressIndicators(pluginState.targets);\n        const editors = this.#getEditors(pluginState.targets);\n        let theme;\n        if (this.opts.theme === 'auto') {\n            theme = capabilities.darkMode ? 'dark' : 'light';\n        }\n        else {\n            theme = this.opts.theme;\n        }\n        if (['files', 'folders', 'both'].indexOf(this.opts.fileManagerSelectionType) <\n            0) {\n            this.opts.fileManagerSelectionType = 'files';\n            console.warn(`Unsupported option for \"fileManagerSelectionType\". Using default of \"${this.opts.fileManagerSelectionType}\".`);\n        }\n        return DashboardUI({\n            state,\n            isHidden: pluginState.isHidden,\n            files,\n            newFiles,\n            uploadStartedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted,\n            isAllComplete,\n            isAllPaused,\n            totalFileCount: Object.keys(files).length,\n            totalProgress: state.totalProgress,\n            allowNewUpload,\n            acquirers,\n            theme,\n            disabled: this.opts.disabled,\n            disableLocalFiles: this.opts.disableLocalFiles,\n            direction: this.opts.direction,\n            activePickerPanel: pluginState.activePickerPanel,\n            showFileEditor: pluginState.showFileEditor,\n            saveFileEditor: this.saveFileEditor,\n            closeFileEditor: this.closeFileEditor,\n            disableInteractiveElements: this.disableInteractiveElements,\n            animateOpenClose: this.opts.animateOpenClose,\n            isClosing: pluginState.isClosing,\n            progressindicators,\n            editors,\n            autoProceed: this.uppy.opts.autoProceed,\n            id: this.id,\n            closeModal: this.requestCloseModal,\n            handleClickOutside: this.handleClickOutside,\n            handleInputChange: this.handleInputChange,\n            handlePaste: this.handlePaste,\n            inline: this.opts.inline,\n            showPanel: this.showPanel,\n            hideAllPanels: this.hideAllPanels,\n            i18n: this.i18n,\n            i18nArray: this.i18nArray,\n            uppy: this.uppy,\n            note: this.opts.note,\n            recoveredState: state.recoveredState,\n            metaFields: pluginState.metaFields,\n            resumableUploads: capabilities.resumableUploads || false,\n            individualCancellation: capabilities.individualCancellation,\n            isMobileDevice: capabilities.isMobileDevice,\n            fileCardFor: pluginState.fileCardFor,\n            toggleFileCard: this.toggleFileCard,\n            toggleAddFilesPanel: this.toggleAddFilesPanel,\n            showAddFilesPanel: pluginState.showAddFilesPanel,\n            saveFileCard: this.saveFileCard,\n            openFileEditor: this.openFileEditor,\n            canEditFile: this.canEditFile,\n            width: this.opts.width,\n            height: this.opts.height,\n            showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n            fileManagerSelectionType: this.opts.fileManagerSelectionType,\n            proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n            showRemoveButtonAfterComplete: this.opts.showRemoveButtonAfterComplete,\n            containerWidth: pluginState.containerWidth,\n            containerHeight: pluginState.containerHeight,\n            areInsidesReadyToBeVisible: pluginState.areInsidesReadyToBeVisible,\n            parentElement: this.el,\n            allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n            maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles,\n            requiredMetaFields: this.uppy.opts.restrictions.requiredMetaFields,\n            showSelectedFiles: this.opts.showSelectedFiles,\n            showNativePhotoCameraButton: this.opts.showNativePhotoCameraButton,\n            showNativeVideoCameraButton: this.opts.showNativeVideoCameraButton,\n            nativeCameraFacingMode: this.opts.nativeCameraFacingMode,\n            singleFileFullScreen: this.opts.singleFileFullScreen,\n            handleRequestThumbnail: this.handleRequestThumbnail,\n            handleCancelThumbnail: this.handleCancelThumbnail,\n            // drag props\n            isDraggingOver: pluginState.isDraggingOver,\n            handleDragOver: this.handleDragOver,\n            handleDragLeave: this.handleDragLeave,\n            handleDrop: this.handleDrop,\n            // informer props\n            disableInformer: this.opts.disableInformer,\n            // status-bar props\n            disableStatusBar: this.opts.disableStatusBar,\n            hideProgressDetails: this.opts.hideProgressDetails,\n            hideUploadButton: this.opts.hideUploadButton,\n            hideRetryButton: this.opts.hideRetryButton,\n            hidePauseResumeButton: this.opts.hidePauseResumeButton,\n            hideCancelButton: this.opts.hideCancelButton,\n            hideProgressAfterFinish: this.opts.hideProgressAfterFinish,\n            doneButtonHandler: this.opts.doneButtonHandler,\n        });\n    };\n    #addSpecifiedPluginsFromOptions = () => {\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin) {\n                ;\n                plugin.mount(this, plugin);\n            }\n            else {\n                this.uppy.log(`[Uppy] Dashboard could not find plugin '${pluginID}', make sure to uppy.use() the plugins you are specifying`, 'warning');\n            }\n        });\n    };\n    #autoDiscoverPlugins = () => {\n        this.uppy.iteratePlugins(this.#addSupportedPluginIfNoTarget);\n    };\n    #addSupportedPluginIfNoTarget = (plugin) => {\n        // Only these types belong on the Dashboard,\n        // we wouldn\u2019t want to try and mount Compressor or Tus, for example.\n        const typesAllowed = ['acquirer', 'editor'];\n        if (plugin && !plugin.opts?.target && typesAllowed.includes(plugin.type)) {\n            const pluginAlreadyAdded = this.getPluginState().targets.some((installedPlugin) => plugin.id === installedPlugin.id);\n            if (!pluginAlreadyAdded) {\n                ;\n                plugin.mount(this, plugin);\n            }\n        }\n    };\n    #getThumbnailGeneratorOpts() {\n        const { thumbnailWidth, thumbnailHeight, thumbnailType, waitForThumbnailsBeforeUpload, } = this.opts;\n        return {\n            thumbnailWidth,\n            thumbnailHeight,\n            thumbnailType,\n            waitForThumbnailsBeforeUpload,\n            // If we don't block on thumbnails, we can lazily generate them\n            lazy: !waitForThumbnailsBeforeUpload,\n        };\n    }\n    setOptions(opts) {\n        super.setOptions(opts);\n        this.uppy\n            .getPlugin(this.#getThumbnailGeneratorId())\n            ?.setOptions(this.#getThumbnailGeneratorOpts());\n    }\n    #getThumbnailGeneratorId() {\n        return `${this.id}:ThumbnailGenerator`;\n    }\n    install = () => {\n        // Set default state for Dashboard\n        this.setPluginState({\n            isHidden: true,\n            fileCardFor: null,\n            activeOverlayType: null,\n            showAddFilesPanel: false,\n            activePickerPanel: undefined,\n            showFileEditor: false,\n            metaFields: this.opts.metaFields,\n            targets: [],\n            // We'll make them visible once .containerWidth is determined\n            areInsidesReadyToBeVisible: false,\n            isDraggingOver: false,\n        });\n        const { inline, closeAfterFinish } = this.opts;\n        if (inline && closeAfterFinish) {\n            throw new Error('[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.');\n        }\n        const { allowMultipleUploads, allowMultipleUploadBatches } = this.uppy.opts;\n        if ((allowMultipleUploads || allowMultipleUploadBatches) &&\n            closeAfterFinish) {\n            this.uppy.log('[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true', 'warning');\n        }\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n        if (!this.opts.disableThumbnailGenerator) {\n            this.uppy.use(ThumbnailGenerator, {\n                id: this.#getThumbnailGeneratorId(),\n                ...this.#getThumbnailGeneratorOpts(),\n            });\n        }\n        // Dark Mode / theme\n        this.darkModeMediaQuery =\n            typeof window !== 'undefined' && window.matchMedia\n                ? window.matchMedia('(prefers-color-scheme: dark)')\n                : null;\n        const isDarkModeOnFromTheStart = this.darkModeMediaQuery\n            ? this.darkModeMediaQuery.matches\n            : false;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnFromTheStart ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnFromTheStart);\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange);\n        }\n        this.#addSpecifiedPluginsFromOptions();\n        this.#autoDiscoverPlugins();\n        this.initEvents();\n    };\n    uninstall = () => {\n        if (!this.opts.disableThumbnailGenerator) {\n            const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            if (thumbnail)\n                this.uppy.removePlugin(thumbnail);\n        }\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin)\n                plugin.unmount();\n        });\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange);\n        }\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        this.unmount();\n        this.removeEvents();\n    };\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport { canvasToBlob, getFileTypeExtension, mimeTypes } from '@uppy/utils';\nimport { isMobile } from 'is-mobile';\n// biome-ignore lint/style/useImportType: h is not a type\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport CameraIcon from './CameraIcon.js';\nimport CameraScreen from './CameraScreen.js';\nimport locale from './locale.js';\nimport PermissionsScreen from './PermissionsScreen.js';\nimport supportsMediaRecorder from './supportsMediaRecorder.js';\n/**\n * Normalize a MIME type or file extension into a MIME type.\n *\n * @param fileType - MIME type or a file extension prefixed with `.`.\n * @returns The MIME type or `undefined` if the fileType is an extension and is not known.\n */\nfunction toMimeType(fileType) {\n    if (fileType[0] === '.') {\n        return mimeTypes[fileType.slice(1)];\n    }\n    return fileType;\n}\n/**\n * Is this MIME type a video?\n */\nfunction isVideoMimeType(mimeType) {\n    return /^video\\/[^*]+$/.test(mimeType);\n}\n/**\n * Is this MIME type an image?\n */\nfunction isImageMimeType(mimeType) {\n    return /^image\\/[^*]+$/.test(mimeType);\n}\nfunction getMediaDevices() {\n    // bug in the compatibility data\n    return navigator.mediaDevices;\n}\nfunction isModeAvailable(modes, mode) {\n    return modes.includes(mode);\n}\n// set default options\nexport const defaultOptions = {\n    onBeforeSnapshot: () => Promise.resolve(),\n    countdown: false,\n    modes: ['video-audio', 'video-only', 'audio-only', 'picture'],\n    mirror: true,\n    showVideoSourceDropdown: false,\n    preferredImageMimeType: null,\n    preferredVideoMimeType: null,\n    showRecordingLength: false,\n    mobileNativeCamera: isMobile({ tablet: true }),\n};\n/**\n * Webcam\n */\nexport default class Webcam extends UIPlugin {\n    static VERSION = packageJson.version;\n    // enableMirror is used to toggle mirroring, for instance when discarding the video,\n    // while `opts.mirror` is used to remember the initial user setting\n    #enableMirror;\n    mediaDevices;\n    supportsUserMedia;\n    protocol;\n    capturedMediaFile;\n    icon;\n    webcamActive;\n    stream = null;\n    recorder = null;\n    recordingChunks = null;\n    recordingLengthTimer;\n    captureInProgress = false;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.mediaDevices = getMediaDevices();\n        this.supportsUserMedia = !!this.mediaDevices;\n        this.protocol = location.protocol.match(/https/i) ? 'https' : 'http';\n        this.id = this.opts.id || 'Webcam';\n        this.type = 'acquirer';\n        this.capturedMediaFile = null;\n        this.icon = () => (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z\", fill: \"#02B383\", fillRule: \"nonzero\" }) }));\n        this.defaultLocale = locale;\n        this.i18nInit();\n        this.title = this.i18n('pluginNameCamera');\n        this.#enableMirror = this.opts.mirror;\n        this.install = this.install.bind(this);\n        this.setPluginState = this.setPluginState.bind(this);\n        this.render = this.render.bind(this);\n        // Camera controls\n        this.start = this.start.bind(this);\n        this.stop = this.stop.bind(this);\n        this.takeSnapshot = this.takeSnapshot.bind(this);\n        this.startRecording = this.startRecording.bind(this);\n        this.stopRecording = this.stopRecording.bind(this);\n        this.discardRecordedMedia = this.discardRecordedMedia.bind(this);\n        this.submit = this.submit.bind(this);\n        this.oneTwoThreeSmile = this.oneTwoThreeSmile.bind(this);\n        this.focus = this.focus.bind(this);\n        this.changeVideoSource = this.changeVideoSource.bind(this);\n        this.webcamActive = false;\n        if (this.opts.countdown) {\n            this.opts.onBeforeSnapshot = this.oneTwoThreeSmile;\n        }\n        this.setPluginState({\n            hasCamera: false,\n            cameraReady: false,\n            cameraError: null,\n            recordingLengthSeconds: 0,\n            videoSources: [],\n            currentDeviceId: null,\n            capturedSnapshot: null,\n        });\n    }\n    getStatus() {\n        const { recordedVideo, capturedSnapshot, isRecording, cameraReady, cameraError, } = this.getPluginState();\n        if (isRecording)\n            return 'recording';\n        if (recordedVideo != null || capturedSnapshot != null)\n            return 'captured';\n        if (cameraReady)\n            return 'ready';\n        if (cameraError)\n            return 'error';\n        return 'init';\n    }\n    setOptions(newOpts) {\n        super.setOptions({\n            ...newOpts,\n            videoConstraints: {\n                // May be undefined but ... handles that\n                ...this.opts.videoConstraints,\n                ...newOpts?.videoConstraints,\n            },\n        });\n    }\n    hasCameraCheck() {\n        if (!this.mediaDevices) {\n            return Promise.resolve(false);\n        }\n        return this.mediaDevices.enumerateDevices().then((devices) => {\n            return devices.some((device) => device.kind === 'videoinput');\n        });\n    }\n    isAudioOnly() {\n        return this.opts.modes.length === 1 && this.opts.modes[0] === 'audio-only';\n    }\n    getConstraints(deviceId = null) {\n        const acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 ||\n            this.opts.modes.indexOf('audio-only') !== -1;\n        const acceptsVideo = !this.isAudioOnly() &&\n            (this.opts.modes.indexOf('video-audio') !== -1 ||\n                this.opts.modes.indexOf('video-only') !== -1 ||\n                this.opts.modes.indexOf('picture') !== -1);\n        const videoConstraints = {\n            ...(this.opts.videoConstraints || {}),\n            ...(deviceId != null && { deviceId }),\n        };\n        return {\n            audio: acceptsAudio,\n            video: acceptsVideo ? videoConstraints : false,\n        };\n    }\n    start(options = null) {\n        if (!this.supportsUserMedia) {\n            return Promise.reject(new Error('Webcam access not supported'));\n        }\n        this.webcamActive = true;\n        if (this.opts.mirror) {\n            this.#enableMirror = true;\n        }\n        const constraints = this.getConstraints(options?.deviceId);\n        // TODO: add a return and/or convert this to async/await\n        this.hasCameraCheck().then((hasCamera) => {\n            this.setPluginState({\n                hasCamera,\n            });\n            // ask user for access to their camera\n            return this.mediaDevices\n                .getUserMedia(constraints)\n                .then((stream) => {\n                this.stream = stream;\n                let currentDeviceId = null;\n                const tracks = this.isAudioOnly()\n                    ? stream.getAudioTracks()\n                    : stream.getVideoTracks();\n                if (!options || !options.deviceId) {\n                    currentDeviceId = tracks[0].getSettings().deviceId;\n                }\n                else {\n                    tracks.forEach((track) => {\n                        if (track.getSettings().deviceId === options.deviceId) {\n                            currentDeviceId = track.getSettings().deviceId;\n                        }\n                    });\n                }\n                // Update the sources now, so we can access the names.\n                this.updateVideoSources();\n                this.setPluginState({\n                    currentDeviceId,\n                    cameraReady: true,\n                });\n            })\n                .catch((err) => {\n                this.setPluginState({\n                    cameraReady: false,\n                    cameraError: err,\n                });\n                this.uppy.info(err.message, 'error');\n            });\n        });\n    }\n    getMediaRecorderOptions() {\n        const options = {};\n        // Try to use the `opts.preferredVideoMimeType` or one of the `allowedFileTypes` for the recording.\n        // If the browser doesn't support it, we'll fall back to the browser default instead.\n        // Safari doesn't have the `isTypeSupported` API.\n        if (MediaRecorder.isTypeSupported) {\n            const { restrictions } = this.uppy.opts;\n            let preferredVideoMimeTypes = [];\n            if (this.opts.preferredVideoMimeType) {\n                preferredVideoMimeTypes = [this.opts.preferredVideoMimeType];\n            }\n            else if (restrictions.allowedFileTypes) {\n                preferredVideoMimeTypes = restrictions.allowedFileTypes\n                    .map(toMimeType)\n                    .filter(isVideoMimeType);\n            }\n            const filterSupportedTypes = (candidateType) => MediaRecorder.isTypeSupported(candidateType) &&\n                getFileTypeExtension(candidateType);\n            const acceptableMimeTypes = preferredVideoMimeTypes.filter(filterSupportedTypes);\n            if (acceptableMimeTypes.length > 0) {\n                options.mimeType = acceptableMimeTypes[0];\n            }\n        }\n        return options;\n    }\n    startRecording() {\n        // only used if supportsMediaRecorder() returned true\n        this.recorder = new MediaRecorder(this.stream, this.getMediaRecorderOptions());\n        this.recordingChunks = [];\n        let stoppingBecauseOfMaxSize = false;\n        this.recorder.addEventListener('dataavailable', (event) => {\n            this.recordingChunks.push(event.data);\n            const { restrictions } = this.uppy.opts;\n            if (this.recordingChunks.length > 1 &&\n                restrictions.maxFileSize != null &&\n                !stoppingBecauseOfMaxSize) {\n                const totalSize = this.recordingChunks.reduce((acc, chunk) => acc + chunk.size, 0);\n                // Exclude the initial chunk from the average size calculation because it is likely to be a very small outlier\n                const averageChunkSize = (totalSize - this.recordingChunks[0].size) /\n                    (this.recordingChunks.length - 1);\n                const expectedEndChunkSize = averageChunkSize * 3;\n                const maxSize = Math.max(0, restrictions.maxFileSize - expectedEndChunkSize);\n                if (totalSize > maxSize) {\n                    stoppingBecauseOfMaxSize = true;\n                    this.uppy.info(this.i18n('recordingStoppedMaxSize'), 'warning', 4000);\n                    this.stopRecording();\n                }\n            }\n        });\n        // use a \"time slice\" of 500ms: ondataavailable will be called each 500ms\n        // smaller time slices mean we can more accurately check the max file size restriction\n        this.recorder.start(500);\n        if (this.opts.showRecordingLength) {\n            // Start the recordingLengthTimer if we are showing the recording length.\n            this.recordingLengthTimer = setInterval(() => {\n                const currentRecordingLength = this.getPluginState().recordingLengthSeconds;\n                this.setPluginState({\n                    recordingLengthSeconds: currentRecordingLength + 1,\n                });\n            }, 1000);\n        }\n        this.setPluginState({\n            isRecording: true,\n        });\n    }\n    stopRecording() {\n        const stopped = new Promise((resolve) => {\n            this.recorder.addEventListener('stop', () => {\n                resolve();\n            });\n            this.recorder.stop();\n            if (this.opts.showRecordingLength) {\n                // Stop the recordingLengthTimer if we are showing the recording length.\n                clearInterval(this.recordingLengthTimer);\n                this.setPluginState({ recordingLengthSeconds: 0 });\n            }\n        });\n        return stopped\n            .then(() => {\n            this.setPluginState({\n                isRecording: false,\n            });\n            return this.getVideo();\n        })\n            .then((file) => {\n            try {\n                this.capturedMediaFile = file;\n                // create object url for capture result preview\n                this.setPluginState({\n                    recordedVideo: URL.createObjectURL(file.data),\n                });\n                this.#enableMirror = false;\n            }\n            catch (err) {\n                // Logging the error, exept restrictions, which is handled in Core\n                if (!err.isRestriction) {\n                    this.uppy.log(err);\n                }\n            }\n        })\n            .then(() => {\n            this.recordingChunks = null;\n            this.recorder = null;\n        }, (error) => {\n            this.recordingChunks = null;\n            this.recorder = null;\n            throw error;\n        });\n    }\n    discardRecordedMedia() {\n        const { recordedVideo, capturedSnapshot } = this.getPluginState();\n        if (recordedVideo) {\n            URL.revokeObjectURL(recordedVideo);\n        }\n        if (capturedSnapshot) {\n            URL.revokeObjectURL(capturedSnapshot);\n        }\n        this.setPluginState({\n            recordedVideo: null,\n            capturedSnapshot: null,\n        });\n        if (this.opts.mirror) {\n            this.#enableMirror = true;\n        }\n        this.capturedMediaFile = null;\n    }\n    submit() {\n        try {\n            if (this.capturedMediaFile) {\n                this.uppy.addFile(this.capturedMediaFile);\n            }\n        }\n        catch (err) {\n            // Logging the error, exept restrictions, which is handled in Core\n            if (!err.isRestriction) {\n                this.uppy.log(err, 'error');\n            }\n        }\n    }\n    async stop() {\n        if (this.stream) {\n            const audioTracks = this.stream.getAudioTracks();\n            const videoTracks = this.stream.getVideoTracks();\n            audioTracks.concat(videoTracks).forEach((track) => track.stop());\n        }\n        if (this.recorder) {\n            await new Promise((resolve) => {\n                this.recorder.addEventListener('stop', resolve, { once: true });\n                this.recorder.stop();\n                if (this.opts.showRecordingLength) {\n                    clearInterval(this.recordingLengthTimer);\n                }\n            });\n        }\n        this.recordingChunks = null;\n        this.recorder = null;\n        this.webcamActive = false;\n        this.stream = null;\n        this.setPluginState({\n            recordedVideo: null,\n            capturedSnapshot: null,\n            isRecording: false,\n            recordingLengthSeconds: 0,\n        });\n    }\n    getVideoElement() {\n        return this.el.querySelector('.uppy-Webcam-video');\n    }\n    oneTwoThreeSmile() {\n        return new Promise((resolve, reject) => {\n            let count = this.opts.countdown;\n            const countDown = setInterval(() => {\n                if (!this.webcamActive) {\n                    clearInterval(countDown);\n                    this.captureInProgress = false;\n                    return reject(new Error('Webcam is not active'));\n                }\n                if (count) {\n                    this.uppy.info(`${count}...`, 'warning', 800);\n                    count--;\n                }\n                else {\n                    clearInterval(countDown);\n                    this.uppy.info(this.i18n('smile'), 'success', 1500);\n                    setTimeout(() => resolve(), 1500);\n                }\n            }, 1000);\n        });\n    }\n    async takeSnapshot() {\n        if (this.captureInProgress)\n            return;\n        this.captureInProgress = true;\n        try {\n            await this.opts.onBeforeSnapshot();\n        }\n        catch (err) {\n            const message = typeof err === 'object' ? err.message : err;\n            this.uppy.info(message, 'error', 5000);\n            throw new Error(`onBeforeSnapshot: ${message}`);\n        }\n        try {\n            const file = await this.getImage();\n            this.capturedMediaFile = file;\n            if (file.data == null)\n                throw new Error('File data is empty');\n            // Create object URL for preview\n            const capturedSnapshotUrl = URL.createObjectURL(file.data);\n            this.setPluginState({ capturedSnapshot: capturedSnapshotUrl });\n            this.captureInProgress = false;\n        }\n        catch (error) {\n            // Logging the error, except restrictions, which is handled in Core\n            this.captureInProgress = false;\n            if (!error.isRestriction) {\n                this.uppy.log(error);\n            }\n        }\n    }\n    async getImage() {\n        const video = this.getVideoElement();\n        if (!video) {\n            return Promise.reject(new Error('No video element found, likely due to the Webcam tab being closed.'));\n        }\n        const width = video.videoWidth;\n        const height = video.videoHeight;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(video, 0, 0);\n        const { restrictions } = this.uppy.opts;\n        let preferredImageMimeTypes = [];\n        if (this.opts.preferredImageMimeType) {\n            preferredImageMimeTypes = [this.opts.preferredImageMimeType];\n        }\n        else if (restrictions.allowedFileTypes) {\n            preferredImageMimeTypes = restrictions.allowedFileTypes\n                .map(toMimeType)\n                .filter(isImageMimeType);\n        }\n        const mimeType = preferredImageMimeTypes[0] || 'image/jpeg';\n        const ext = getFileTypeExtension(mimeType) || 'jpg';\n        const name = `cam-${Date.now()}.${ext}`;\n        return canvasToBlob(canvas, mimeType).then((blob) => {\n            return {\n                source: this.id,\n                name,\n                data: new Blob([blob], { type: mimeType }),\n                type: mimeType,\n            };\n        });\n    }\n    getVideo() {\n        // Sometimes in iOS Safari, Blobs (especially the first Blob in the recordingChunks Array)\n        // have empty 'type' attributes (e.g. '') so we need to find a Blob that has a defined 'type'\n        // attribute in order to determine the correct MIME type.\n        const mimeType = this.recordingChunks.find((blob) => blob.type?.length > 0).type;\n        const fileExtension = getFileTypeExtension(mimeType);\n        if (!fileExtension) {\n            return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type \"${mimeType}\"`));\n        }\n        const name = `webcam-${Date.now()}.${fileExtension}`;\n        const blob = new Blob(this.recordingChunks, { type: mimeType });\n        const file = {\n            source: this.id,\n            name,\n            data: new Blob([blob], { type: mimeType }),\n            type: mimeType,\n        };\n        return Promise.resolve(file);\n    }\n    focus() {\n        if (!this.opts.countdown)\n            return;\n        setTimeout(() => {\n            this.uppy.info(this.i18n('smile'), 'success', 1500);\n        }, 1000);\n    }\n    changeVideoSource(deviceId) {\n        this.stop();\n        this.start({ deviceId });\n    }\n    updateVideoSources() {\n        this.mediaDevices.enumerateDevices().then((devices) => {\n            this.setPluginState({\n                videoSources: devices.filter((device) => device.kind === 'videoinput'),\n            });\n        });\n    }\n    render() {\n        if (!this.webcamActive) {\n            this.start();\n        }\n        const webcamState = this.getPluginState();\n        if (!webcamState.cameraReady || !webcamState.hasCamera) {\n            return (_jsx(PermissionsScreen, { icon: CameraIcon, i18n: this.i18n, hasCamera: webcamState.hasCamera }));\n        }\n        return (_jsx(CameraScreen, { ...webcamState, onChangeVideoSource: this.changeVideoSource, onSnapshot: this.takeSnapshot, onStartRecording: this.startRecording, onStopRecording: this.stopRecording, onDiscardRecordedMedia: this.discardRecordedMedia, onSubmit: this.submit, onFocus: this.focus, onStop: this.stop, i18n: this.i18n, modes: this.opts.modes, showRecordingLength: this.opts.showRecordingLength, showVideoSourceDropdown: this.opts.showVideoSourceDropdown, supportsRecording: supportsMediaRecorder(), recording: webcamState.isRecording, mirror: this.#enableMirror, src: this.stream }));\n    }\n    install() {\n        const { mobileNativeCamera, modes, videoConstraints } = this.opts;\n        const { target } = this.opts;\n        if (mobileNativeCamera && target) {\n            this.getTargetPlugin(target)?.setOptions({\n                showNativeVideoCameraButton: isModeAvailable(modes, 'video-only') ||\n                    isModeAvailable(modes, 'video-audio'),\n                showNativePhotoCameraButton: isModeAvailable(modes, 'picture'),\n                nativeCameraFacingMode: videoConstraints?.facingMode,\n            });\n            return;\n        }\n        this.setPluginState({\n            cameraReady: false,\n            recordingLengthSeconds: 0,\n        });\n        if (target) {\n            this.mount(target, this);\n        }\n        if (this.mediaDevices) {\n            this.updateVideoSources();\n            this.mediaDevices.ondevicechange = () => {\n                this.updateVideoSources();\n                if (this.stream) {\n                    let restartStream = true;\n                    const { videoSources, currentDeviceId } = this.getPluginState();\n                    videoSources.forEach((videoSource) => {\n                        if (currentDeviceId === videoSource.deviceId) {\n                            restartStream = false;\n                        }\n                    });\n                    if (restartStream) {\n                        this.stop();\n                        this.start();\n                    }\n                }\n            };\n        }\n    }\n    uninstall() {\n        this.stop();\n        this.unmount();\n    }\n    onUnmount() {\n        this.stop();\n    }\n}\n", "{\n  \"name\": \"@uppy/webcam\",\n  \"description\": \"Uppy plugin that takes photos or records videos using the device's camera.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"webcam\",\n    \"picture\",\n    \"photo\",\n    \"video\",\n    \"record\",\n    \"mediarecorder\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"is-mobile\": \"^4.0.0\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function CameraIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", fill: \"#0097DC\", width: \"66\", height: \"55\", viewBox: \"0 0 66 55\", children: _jsx(\"path\", { d: \"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z\", fillRule: \"evenodd\" }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction DiscardButton({ onDiscard, i18n }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard\", type: \"button\", title: i18n('discardRecordedFile'), \"aria-label\": i18n('discardRecordedFile'), onClick: onDiscard, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { width: \"13\", height: \"13\", viewBox: \"0 0 13 13\", xmlns: \"http://www.w3.org/2000/svg\", \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", children: _jsxs(\"g\", { fill: \"#FFF\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z\" }), _jsx(\"path\", { d: \"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z\" })] }) }) }));\n}\nexport default DiscardButton;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function RecordButton({ recording, onStartRecording, onStopRecording, i18n, }) {\n    if (recording) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\", type: \"button\", title: i18n('stopRecording'), \"aria-label\": i18n('stopRecording'), onClick: onStopRecording, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"100\", height: \"100\", viewBox: \"0 0 100 100\", children: _jsx(\"rect\", { x: \"15\", y: \"15\", width: \"70\", height: \"70\" }) }) }));\n    }\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\", type: \"button\", title: i18n('startRecording'), \"aria-label\": i18n('startRecording'), onClick: onStartRecording, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"100\", height: \"100\", viewBox: \"0 0 100 100\", children: _jsx(\"circle\", { cx: \"50\", cy: \"50\", r: \"40\" }) }) }));\n}\n", "/**\n * Takes an Integer value of seconds (e.g. 83) and converts it into a human-readable formatted string (e.g. '1:23').\n *\n */\nexport default function formatSeconds(seconds) {\n    return `${Math.floor(seconds / 60)}:${String(seconds % 60).padStart(2, '0')}`;\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport formatSeconds from './formatSeconds.js';\nexport default function RecordingLength({ recordingLengthSeconds, }) {\n    const formattedRecordingLengthSeconds = formatSeconds(recordingLengthSeconds);\n    return _jsx(\"span\", { children: formattedRecordingLengthSeconds });\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport CameraIcon from './CameraIcon.js';\nexport default function SnapshotButton({ onSnapshot, i18n, }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture\", type: \"button\", title: i18n('takePicture'), \"aria-label\": i18n('takePicture'), onClick: onSnapshot, \"data-uppy-super-focusable\": true, children: CameraIcon() }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nfunction SubmitButton({ onSubmit, i18n }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit\", type: \"button\", title: i18n('submitRecordedFile'), \"aria-label\": i18n('submitRecordedFile'), onClick: onSubmit, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { width: \"12\", height: \"9\", viewBox: \"0 0 12 9\", xmlns: \"http://www.w3.org/2000/svg\", \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", children: _jsx(\"path\", { fill: \"#fff\", fillRule: \"nonzero\", d: \"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z\" }) }) }));\n}\nexport default SubmitButton;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function VideoSourceSelect({ currentDeviceId, videoSources, onChangeVideoSource, }) {\n    return (_jsx(\"div\", { className: \"uppy-Webcam-videoSource\", children: _jsx(\"select\", { className: \"uppy-u-reset uppy-Webcam-videoSource-select\", onChange: (event) => {\n                onChangeVideoSource(event.target.value);\n            }, children: videoSources.map((videoSource) => (_jsx(\"option\", { value: videoSource.deviceId, selected: videoSource.deviceId === currentDeviceId, children: videoSource.label }, videoSource.deviceId))) }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact';\nimport DiscardButton from './DiscardButton.js';\nimport RecordButton from './RecordButton.js';\nimport RecordingLength from './RecordingLength.js';\nimport SnapshotButton from './SnapshotButton.js';\nimport SubmitButton from './SubmitButton.js';\nimport VideoSourceSelect, {} from './VideoSourceSelect.js';\nfunction isModeAvailable(modes, mode) {\n    return modes.includes(mode);\n}\nclass CameraScreen extends Component {\n    videoElement;\n    refs;\n    componentDidMount() {\n        const { onFocus } = this.props;\n        onFocus();\n    }\n    componentWillUnmount() {\n        const { onStop } = this.props;\n        onStop();\n    }\n    render() {\n        const { src, recordedVideo, capturedSnapshot, recording, modes, supportsRecording, videoSources, showVideoSourceDropdown, showRecordingLength, onSubmit, i18n, mirror, onSnapshot, onStartRecording, onStopRecording, onDiscardRecordedMedia, recordingLengthSeconds, } = this.props;\n        const hasRecordedVideo = !!recordedVideo;\n        const hasCapturedSnapshot = !!capturedSnapshot;\n        const hasRecordedMedia = hasRecordedVideo || hasCapturedSnapshot;\n        const shouldShowRecordButton = !hasRecordedMedia &&\n            supportsRecording &&\n            (isModeAvailable(modes, 'video-only') ||\n                isModeAvailable(modes, 'audio-only') ||\n                isModeAvailable(modes, 'video-audio'));\n        const shouldShowSnapshotButton = !hasRecordedMedia && isModeAvailable(modes, 'picture');\n        const shouldShowRecordingLength = supportsRecording && showRecordingLength && !hasRecordedVideo;\n        const shouldShowVideoSourceDropdown = showVideoSourceDropdown && videoSources && videoSources.length > 1;\n        const videoProps = {\n            playsInline: true,\n        };\n        if (recordedVideo) {\n            videoProps.muted = false;\n            videoProps.controls = true;\n            videoProps.src = recordedVideo;\n            // reset srcObject in dom. If not resetted, stream sticks in element\n            if (this.videoElement) {\n                this.videoElement.srcObject = null;\n            }\n        }\n        else {\n            videoProps.muted = true;\n            videoProps.autoPlay = true;\n            videoProps.srcObject = src;\n        }\n        return (_jsxs(\"div\", { className: \"uppy uppy-Webcam-container\", children: [_jsx(\"div\", { className: \"uppy-Webcam-videoContainer\", children: capturedSnapshot && !recording && !recordedVideo ? (_jsx(\"div\", { className: \"uppy-Webcam-imageContainer\", children: _jsx(\"img\", { src: capturedSnapshot, className: \"uppy-Webcam-video\", alt: \"capturedSnapshot\" }) })) : (_jsx(\"video\", { ref: (videoElement) => {\n                            this.videoElement = videoElement;\n                        }, className: `uppy-Webcam-video  ${mirror ? 'uppy-Webcam-video--mirrored' : ''}`, ...videoProps })) }), _jsxs(\"div\", { className: \"uppy-Webcam-footer\", children: [_jsx(\"div\", { className: \"uppy-Webcam-videoSourceContainer\", children: shouldShowVideoSourceDropdown\n                                ? VideoSourceSelect(this.props)\n                                : null }), _jsxs(\"div\", { className: \"uppy-Webcam-buttonContainer\", children: [shouldShowSnapshotButton && (_jsx(SnapshotButton, { onSnapshot: onSnapshot, i18n: i18n })), shouldShowRecordButton && (_jsx(RecordButton, { recording: recording, onStartRecording: onStartRecording, onStopRecording: onStopRecording, i18n: i18n })), (hasRecordedVideo || hasCapturedSnapshot) && (_jsx(SubmitButton, { onSubmit: onSubmit, i18n: i18n })), (hasRecordedVideo || hasCapturedSnapshot) && (_jsx(DiscardButton, { onDiscard: onDiscardRecordedMedia, i18n: i18n }))] }), _jsx(\"div\", { className: \"uppy-Webcam-recordingLength\", children: shouldShowRecordingLength && (_jsx(RecordingLength, { recordingLengthSeconds: recordingLengthSeconds })) })] })] }));\n    }\n}\nexport default CameraScreen;\n", "export default {\n    strings: {\n        pluginNameCamera: 'Camera',\n        noCameraTitle: 'Camera Not Available',\n        noCameraDescription: 'In order to take pictures or record video, please connect a camera device',\n        recordingStoppedMaxSize: 'Recording stopped because the file size is about to exceed the limit',\n        submitRecordedFile: 'Submit recorded file',\n        discardRecordedFile: 'Discard recorded file',\n        // Shown before a picture is taken when the `countdown` option is set.\n        smile: 'Smile!',\n        // Used as the label for the button that takes a picture.\n        // This is not visibly rendered but is picked up by screen readers.\n        takePicture: 'Take a picture',\n        // Used as the label for the button that starts a video recording.\n        // This is not visibly rendered but is picked up by screen readers.\n        startRecording: 'Begin video recording',\n        // Used as the label for the button that stops a video recording.\n        // This is not visibly rendered but is picked up by screen readers.\n        stopRecording: 'Stop video recording',\n        // Used as the label for the recording length counter. See the showRecordingLength option.\n        // This is not visibly rendered but is picked up by screen readers.\n        recordingLength: 'Recording length %{recording_length}',\n        // Title on the \u201Callow access\u201D screen\n        allowAccessTitle: 'Please allow access to your camera',\n        // Description on the \u201Callow access\u201D screen\n        allowAccessDescription: 'In order to take pictures or record video with your camera, please allow camera access for this site.',\n    },\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function PermissionsScreen({ icon, i18n, hasCamera, }) {\n    return (_jsxs(\"div\", { className: \"uppy-Webcam-permissons\", children: [_jsx(\"div\", { className: \"uppy-Webcam-permissonsIcon\", children: icon() }), _jsx(\"div\", { className: \"uppy-Webcam-title\", children: hasCamera ? i18n('allowAccessTitle') : i18n('noCameraTitle') }), _jsx(\"p\", { children: hasCamera\n                    ? i18n('allowAccessDescription')\n                    : i18n('noCameraDescription') })] }));\n}\n", "export default function supportsMediaRecorder() {\n    return (typeof MediaRecorder === 'function' &&\n        !!MediaRecorder.prototype &&\n        typeof MediaRecorder.prototype.start === 'function');\n}\n", "{\n  \"name\": \"@uppy/xhr-upload\",\n  \"description\": \"Plain and simple classic HTML multipart form uploads with Uppy, as well as uploads using the HTTP PUT method.\",\n  \"version\": \"5.1.1\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"xhr\",\n    \"xhr upload\",\n    \"XMLHttpRequest\",\n    \"ajax\",\n    \"fetch\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/companion-client\": \"^5.1.1\",\n    \"@uppy/utils\": \"^7.1.5\"\n  },\n  \"devDependencies\": {\n    \"@uppy/core\": \"^5.2.0\",\n    \"jsdom\": \"^26.1.0\",\n    \"nock\": \"^13.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "export default {\n    strings: {\n        // Shown in the Informer if an upload is being canceled because it stalled for too long.\n        uploadStalled: 'Upload has not made any progress for %{seconds} seconds. You may want to retry it.',\n    },\n};\n", "import { BasePlugin, EventManager } from '@uppy/core';\nimport { fetcher, filterFilesToEmitUploadStarted, filterFilesToUpload, getAllowedMetaFields, internalRateLimitedQueue, isNetworkError, NetworkError, RateLimitedQueue, } from '@uppy/utils';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\nfunction buildResponseError(xhr, err) {\n    let error = err;\n    // No error message\n    if (!error)\n        error = new Error('Upload error');\n    // Got an error message string\n    if (typeof error === 'string')\n        error = new Error(error);\n    // Got something else\n    if (!(error instanceof Error)) {\n        error = Object.assign(new Error('Upload error'), { data: error });\n    }\n    if (isNetworkError(xhr)) {\n        error = new NetworkError(error, xhr);\n        return error;\n    }\n    // @ts-expect-error request can only be set on NetworkError\n    // but we use NetworkError to distinguish between errors.\n    error.request = xhr;\n    return error;\n}\n/**\n * Set `data.type` in the blob to `file.meta.type`,\n * because we might have detected a more accurate file type in Uppy\n * https://stackoverflow.com/a/50875615\n */\nfunction setTypeInBlob(file) {\n    const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type);\n    return dataWithUpdatedType;\n}\nconst defaultOptions = {\n    formData: true,\n    fieldName: 'file',\n    method: 'post',\n    allowedMetaFields: true,\n    bundle: false,\n    headers: {},\n    timeout: 30 * 1000,\n    limit: 5,\n    withCredentials: false,\n    responseType: '',\n};\nexport default class XHRUpload extends BasePlugin {\n    static VERSION = packageJson.version;\n    #getFetcher;\n    requests;\n    uploaderEvents;\n    constructor(uppy, opts) {\n        super(uppy, {\n            ...defaultOptions,\n            fieldName: opts.bundle ? 'files[]' : 'file',\n            ...opts,\n        });\n        this.type = 'uploader';\n        this.id = this.opts.id || 'XHRUpload';\n        this.defaultLocale = locale;\n        this.i18nInit();\n        // Simultaneous upload limiting is shared across all uploads with this plugin.\n        if (internalRateLimitedQueue in this.opts) {\n            // @ts-ignore untyped internal\n            this.requests = this.opts[internalRateLimitedQueue];\n        }\n        else {\n            this.requests = new RateLimitedQueue(this.opts.limit);\n        }\n        if (this.opts.bundle && !this.opts.formData) {\n            throw new Error('`opts.formData` must be true when `opts.bundle` is enabled.');\n        }\n        if (this.opts.bundle && typeof this.opts.headers === 'function') {\n            throw new Error('`opts.headers` can not be a function when the `bundle: true` option is set.');\n        }\n        if (opts?.allowedMetaFields === undefined && 'metaFields' in this.opts) {\n            throw new Error('The `metaFields` option has been renamed to `allowedMetaFields`.');\n        }\n        this.uploaderEvents = Object.create(null);\n        /**\n         * xhr-upload wrapper for `fetcher` to handle user options\n         * `validateStatus`, `getResponseError`, `getResponseData`\n         * and to emit `upload-progress`, `upload-error`, and `upload-success` events.\n         */\n        this.#getFetcher = (files) => {\n            return async (url, options) => {\n                try {\n                    const res = await fetcher(url, {\n                        ...options,\n                        onBeforeRequest: (xhr, retryCount) => this.opts.onBeforeRequest?.(xhr, retryCount, files),\n                        shouldRetry: this.opts.shouldRetry,\n                        onAfterResponse: this.opts.onAfterResponse,\n                        onTimeout: (timeout) => {\n                            const seconds = Math.ceil(timeout / 1000);\n                            const error = new Error(this.i18n('uploadStalled', { seconds }));\n                            this.uppy.emit('upload-stalled', error, files);\n                        },\n                        onUploadProgress: (event) => {\n                            if (event.lengthComputable) {\n                                for (const { id } of files) {\n                                    const file = this.uppy.getFile(id);\n                                    if (file != null) {\n                                        this.uppy.emit('upload-progress', file, {\n                                            uploadStarted: file.progress.uploadStarted ?? 0,\n                                            bytesUploaded: (event.loaded / event.total) * file.size,\n                                            bytesTotal: file.size,\n                                        });\n                                    }\n                                }\n                            }\n                        },\n                    });\n                    let body = await this.opts.getResponseData?.(res);\n                    if (res.responseType === 'json') {\n                        body ??= res.response;\n                    }\n                    else {\n                        try {\n                            body ??= JSON.parse(res.responseText);\n                        }\n                        catch (cause) {\n                            throw new Error('@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.', { cause });\n                        }\n                    }\n                    const uploadURL = typeof body?.url === 'string' ? body.url : undefined;\n                    for (const { id } of files) {\n                        this.uppy.emit('upload-success', this.uppy.getFile(id), {\n                            status: res.status,\n                            body,\n                            uploadURL,\n                        });\n                    }\n                    return res;\n                }\n                catch (error) {\n                    if (error.name === 'AbortError') {\n                        return undefined;\n                    }\n                    const request = error.request;\n                    for (const file of files) {\n                        this.uppy.emit('upload-error', this.uppy.getFile(file.id), buildResponseError(request, error), request);\n                    }\n                    throw error;\n                }\n            };\n        };\n    }\n    getOptions(file) {\n        const overrides = this.uppy.getState().xhrUpload;\n        const { headers } = this.opts;\n        const opts = {\n            ...this.opts,\n            ...(overrides || {}),\n            ...(file.xhrUpload || {}),\n            headers: {},\n        };\n        // Support for `headers` as a function, only in the XHRUpload settings.\n        // Options set by other plugins in Uppy state or on the files themselves are still merged in afterward.\n        //\n        // ```js\n        // headers: (file) => ({ expires: file.meta.expires })\n        // ```\n        if (typeof headers === 'function') {\n            opts.headers = headers(file);\n        }\n        else {\n            Object.assign(opts.headers, this.opts.headers);\n        }\n        if (overrides) {\n            Object.assign(opts.headers, overrides.headers);\n        }\n        if (file.xhrUpload) {\n            Object.assign(opts.headers, file.xhrUpload.headers);\n        }\n        return opts;\n    }\n    addMetadata(formData, meta, opts) {\n        const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, meta);\n        allowedMetaFields.forEach((item) => {\n            const value = meta[item];\n            if (Array.isArray(value)) {\n                // In this case we don't transform `item` to add brackets, it's up to\n                // the user to add the brackets so it won't be overridden.\n                value.forEach((subItem) => formData.append(item, subItem));\n            }\n            else {\n                formData.append(item, value);\n            }\n        });\n    }\n    createFormDataUpload(file, opts) {\n        const formPost = new FormData();\n        this.addMetadata(formPost, file.meta, opts);\n        const dataWithUpdatedType = setTypeInBlob(file);\n        if (file.name) {\n            formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name);\n        }\n        else {\n            formPost.append(opts.fieldName, dataWithUpdatedType);\n        }\n        return formPost;\n    }\n    createBundledUpload(files, opts) {\n        const formPost = new FormData();\n        const { meta } = this.uppy.getState();\n        this.addMetadata(formPost, meta, opts);\n        files.forEach((file) => {\n            const options = this.getOptions(file);\n            const dataWithUpdatedType = setTypeInBlob(file);\n            if (file.name) {\n                formPost.append(options.fieldName, dataWithUpdatedType, file.name);\n            }\n            else {\n                formPost.append(options.fieldName, dataWithUpdatedType);\n            }\n        });\n        return formPost;\n    }\n    async #uploadLocalFile(file) {\n        const events = new EventManager(this.uppy);\n        const controller = new AbortController();\n        const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n            const opts = this.getOptions(file);\n            const fetch = this.#getFetcher([file]);\n            const body = opts.formData\n                ? this.createFormDataUpload(file, opts)\n                : file.data;\n            const endpoint = typeof opts.endpoint === 'string'\n                ? opts.endpoint\n                : await opts.endpoint(file);\n            return fetch(endpoint, {\n                ...opts,\n                body,\n                signal: controller.signal,\n            });\n        });\n        events.onFileRemove(file.id, () => controller.abort());\n        events.onCancelAll(file.id, () => {\n            controller.abort();\n        });\n        try {\n            await uppyFetch();\n        }\n        catch (error) {\n            // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n            if (error.message !== 'Cancelled') {\n                throw error;\n            }\n        }\n        finally {\n            events.remove();\n        }\n    }\n    async #uploadBundle(files) {\n        const controller = new AbortController();\n        const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n            const optsFromState = this.uppy.getState().xhrUpload ?? {};\n            const fetch = this.#getFetcher(files);\n            const body = this.createBundledUpload(files, {\n                ...this.opts,\n                ...optsFromState,\n            });\n            const endpoint = typeof this.opts.endpoint === 'string'\n                ? this.opts.endpoint\n                : await this.opts.endpoint(files);\n            return fetch(endpoint, {\n                // headers can't be a function with bundle: true\n                ...this.opts,\n                body,\n                signal: controller.signal,\n            });\n        });\n        function abort() {\n            controller.abort();\n        }\n        // We only need to abort on cancel all because\n        // individual cancellations are not possible with bundle: true\n        this.uppy.once('cancel-all', abort);\n        try {\n            await uppyFetch();\n        }\n        catch (error) {\n            // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n            if (error.message !== 'Cancelled') {\n                throw error;\n            }\n        }\n        finally {\n            this.uppy.off('cancel-all', abort);\n        }\n    }\n    #getCompanionClientArgs(file) {\n        const opts = this.getOptions(file);\n        const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, file.meta);\n        return {\n            ...file.remote?.body,\n            protocol: 'multipart',\n            endpoint: opts.endpoint,\n            size: file.data.size,\n            fieldname: opts.fieldName,\n            metadata: Object.fromEntries(allowedMetaFields.map((name) => [name, file.meta[name]])),\n            httpMethod: opts.method,\n            useFormData: opts.formData,\n            headers: opts.headers,\n        };\n    }\n    async #uploadFiles(files) {\n        await Promise.allSettled(files.map((file) => {\n            if (file.isRemote) {\n                const getQueue = () => this.requests;\n                const controller = new AbortController();\n                const removedHandler = (removedFile) => {\n                    if (removedFile.id === file.id)\n                        controller.abort();\n                };\n                this.uppy.on('file-removed', removedHandler);\n                const uploadPromise = this.uppy\n                    .getRequestClientForFile(file)\n                    .uploadRemoteFile(file, this.#getCompanionClientArgs(file), {\n                    signal: controller.signal,\n                    getQueue,\n                });\n                this.requests.wrapSyncFunction(() => {\n                    this.uppy.off('file-removed', removedHandler);\n                }, { priority: -1 })();\n                return uploadPromise;\n            }\n            return this.#uploadLocalFile(file);\n        }));\n    }\n    #handleUpload = async (fileIDs) => {\n        if (fileIDs.length === 0) {\n            this.uppy.log('[XHRUpload] No files to upload!');\n            return;\n        }\n        // No limit configured by the user, and no RateLimitedQueue passed in by a \"parent\" plugin\n        // (basically just AwsS3) using the internal symbol\n        // @ts-ignore untyped internal\n        if (this.opts.limit === 0 && !this.opts[internalRateLimitedQueue]) {\n            this.uppy.log('[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0', 'warning');\n        }\n        this.uppy.log('[XHRUpload] Uploading...');\n        const files = this.uppy.getFilesByIds(fileIDs);\n        const filesFiltered = filterFilesToUpload(files);\n        const filesToEmit = filterFilesToEmitUploadStarted(filesFiltered);\n        this.uppy.emit('upload-start', filesToEmit);\n        if (this.opts.bundle) {\n            // if bundle: true, we don\u2019t support remote uploads\n            const isSomeFileRemote = filesFiltered.some((file) => file.isRemote);\n            if (isSomeFileRemote) {\n                throw new Error('Can\u2019t upload remote files when the `bundle: true` option is set');\n            }\n            if (typeof this.opts.headers === 'function') {\n                throw new TypeError('`headers` may not be a function when the `bundle: true` option is set');\n            }\n            await this.#uploadBundle(filesFiltered);\n        }\n        else {\n            await this.#uploadFiles(filesFiltered);\n        }\n    };\n    install() {\n        if (this.opts.bundle) {\n            const { capabilities } = this.uppy.getState();\n            this.uppy.setState({\n                capabilities: {\n                    ...capabilities,\n                    individualCancellation: false,\n                },\n            });\n        }\n        this.uppy.addUploader(this.#handleUpload);\n    }\n    uninstall() {\n        if (this.opts.bundle) {\n            const { capabilities } = this.uppy.getState();\n            this.uppy.setState({\n                capabilities: {\n                    ...capabilities,\n                    individualCancellation: true,\n                },\n            });\n        }\n        this.uppy.removeUploader(this.#handleUpload);\n    }\n}\n", "{\n  \"name\": \"@uppy/image-editor\",\n  \"description\": \"Image editor and cropping UI\",\n  \"version\": \"4.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"upload\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"image editor\",\n    \"cropper\",\n    \"crop\",\n    \"rotate\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"cropperjs\": \"^1.6.2\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\"\n  }\n}", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport Cropper from 'cropperjs';\nimport { Component } from 'preact';\nimport getCanvasDataThatFitsPerfectlyIntoContainer from './utils/getCanvasDataThatFitsPerfectlyIntoContainer.js';\nimport getScaleFactorThatRemovesDarkCorners from './utils/getScaleFactorThatRemovesDarkCorners.js';\nimport limitCropboxMovementOnMove from './utils/limitCropboxMovementOnMove.js';\nimport limitCropboxMovementOnResize from './utils/limitCropboxMovementOnResize.js';\nexport default class Editor extends Component {\n    imgElement;\n    cropper;\n    constructor(props) {\n        super(props);\n        this.state = {\n            angle90Deg: 0,\n            angleGranular: 0,\n            prevCropboxData: null,\n        };\n        this.storePrevCropboxData = this.storePrevCropboxData.bind(this);\n        this.limitCropboxMovement = this.limitCropboxMovement.bind(this);\n    }\n    componentDidMount() {\n        const { opts, storeCropperInstance } = this.props;\n        this.cropper = new Cropper(this.imgElement, opts.cropperOptions);\n        this.imgElement.addEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.addEventListener('cropend', this.limitCropboxMovement);\n        storeCropperInstance(this.cropper);\n    }\n    componentWillUnmount() {\n        this.cropper.destroy();\n        this.imgElement.removeEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.removeEventListener('cropend', this.limitCropboxMovement);\n    }\n    storePrevCropboxData() {\n        this.setState({ prevCropboxData: this.cropper.getCropBoxData() });\n    }\n    limitCropboxMovement(event) {\n        const canvasData = this.cropper.getCanvasData();\n        const cropboxData = this.cropper.getCropBoxData();\n        const { prevCropboxData } = this.state;\n        // 1. When we grab the cropbox in the middle and move it\n        if (event.detail.action === 'all') {\n            const newCropboxData = limitCropboxMovementOnMove(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n            // 2. When we stretch the cropbox by one of its sides\n        }\n        else {\n            const newCropboxData = limitCropboxMovementOnResize(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n        }\n    }\n    onRotate90Deg = () => {\n        // 1. Set state\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg - 90;\n        this.setState({\n            angle90Deg: newAngle,\n            angleGranular: 0,\n        });\n        // 2. Rotate the image\n        // Important to reset scale here, or cropper will get confused on further rotations\n        this.cropper.scale(1);\n        this.cropper.rotateTo(newAngle);\n        // 3. Fit the rotated image into the view\n        const canvasData = this.cropper.getCanvasData();\n        const containerData = this.cropper.getContainerData();\n        const newCanvasData = getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData);\n        this.cropper.setCanvasData(newCanvasData);\n        // 4. Make cropbox fully wrap the image\n        this.cropper.setCropBoxData(newCanvasData);\n    };\n    onRotateGranular = (ev) => {\n        // 1. Set state\n        const newGranularAngle = Number(ev.target.value);\n        this.setState({ angleGranular: newGranularAngle });\n        // 2. Rotate the image\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg + newGranularAngle;\n        this.cropper.rotateTo(newAngle);\n        // 3. Scale the image so that it fits into the cropbox\n        const image = this.cropper.getImageData();\n        const scaleFactor = getScaleFactorThatRemovesDarkCorners(image.naturalWidth, image.naturalHeight, newGranularAngle);\n        // Preserve flip\n        const scaleFactorX = this.cropper.getImageData().scaleX < 0 ? -scaleFactor : scaleFactor;\n        this.cropper.scale(scaleFactorX, scaleFactor);\n    };\n    renderGranularRotate() {\n        const { i18n } = this.props;\n        const { angleGranular } = this.state;\n        return (_jsx(\"label\", { role: \"tooltip\", \"aria-label\": `${angleGranular}\u00BA`, \"data-microtip-position\": \"top\", className: \"uppy-ImageCropper-rangeWrapper\", children: _jsx(\"input\", { className: \"uppy-ImageCropper-range uppy-u-reset\", type: \"range\", onInput: this.onRotateGranular, onChange: this.onRotateGranular, value: angleGranular, min: \"-45\", max: \"45\", \"aria-label\": i18n('rotate') }) }));\n    }\n    renderRevert() {\n        const { i18n, opts } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('revert'), onClick: () => {\n                this.cropper.reset();\n                this.cropper.setAspectRatio(opts.cropperOptions.initialAspectRatio);\n                this.setState({ angle90Deg: 0, angleGranular: 0 });\n            }, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\" })] }) }));\n    }\n    renderRotate() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('rotate'), onClick: this.onRotate90Deg, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z\" })] }) }));\n    }\n    renderFlip() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('flipHorizontal'), onClick: () => this.cropper.scaleX(-this.cropper.getData().scaleX || -1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z\" })] }) }));\n    }\n    renderZoomIn() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomIn'), onClick: () => this.cropper.zoom(0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", height: \"24\", viewBox: \"0 0 24 24\", width: \"24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }), _jsx(\"path\", { d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" })] }) }));\n    }\n    renderZoomOut() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomOut'), onClick: () => this.cropper.zoom(-0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\" })] }) }));\n    }\n    renderCropSquare() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioSquare'), onClick: () => this.cropper.setAspectRatio(1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" })] }) }));\n    }\n    renderCropWidescreen() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioLandscape'), onClick: () => this.cropper.setAspectRatio(16 / 9), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z\" }), _jsx(\"path\", { fill: \"none\", d: \"M0 0h24v24H0z\" })] }) }));\n    }\n    renderCropWidescreenVertical() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", \"aria-label\": i18n('aspectRatioPortrait'), className: \"uppy-u-reset uppy-c-btn\", onClick: () => this.cropper.setAspectRatio(9 / 16), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z\" }), _jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" })] }) }));\n    }\n    render() {\n        const { currentImage, opts } = this.props;\n        const { actions } = opts;\n        if (currentImage.data == null)\n            throw new Error('File data is empty');\n        const imageURL = URL.createObjectURL(currentImage.data);\n        return (_jsxs(\"div\", { className: \"uppy-ImageCropper\", children: [_jsx(\"div\", { className: \"uppy-ImageCropper-container\", children: _jsx(\"img\", { className: \"uppy-ImageCropper-image\", alt: currentImage.name, src: imageURL, ref: (ref) => {\n                            this.imgElement = ref;\n                        } }) }), _jsxs(\"div\", { className: \"uppy-ImageCropper-controls\", children: [actions.revert && this.renderRevert(), actions.rotate && this.renderRotate(), actions.granularRotate && this.renderGranularRotate(), actions.flip && this.renderFlip(), actions.zoomIn && this.renderZoomIn(), actions.zoomOut && this.renderZoomOut(), actions.cropSquare && this.renderCropSquare(), actions.cropWidescreen && this.renderCropWidescreen(), actions.cropWidescreenVertical &&\n                            this.renderCropWidescreenVertical()] })] }));\n    }\n}\n", "// See this cropperjs image to understand how container/image/canavas/cropbox relate to each other.\n// (https://github.com/fengyuanchen/cropperjs/blob/9b528a8baeaae876dc090085e37992a1683c6f34/docs/images/layers.jpg)\n//\nfunction getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData) {\n    // 1. Scale our canvas as much as possible\n    const widthRatio = containerData.width / canvasData.width;\n    const heightRatio = containerData.height / canvasData.height;\n    const scaleFactor = Math.min(widthRatio, heightRatio);\n    const newWidth = canvasData.width * scaleFactor;\n    const newHeight = canvasData.height * scaleFactor;\n    // 2. Center our canvas\n    const newLeft = (containerData.width - newWidth) / 2;\n    const newTop = (containerData.height - newHeight) / 2;\n    return {\n        width: newWidth,\n        height: newHeight,\n        left: newLeft,\n        top: newTop,\n    };\n}\nexport default getCanvasDataThatFitsPerfectlyIntoContainer;\n", "function toRadians(angle) {\n    return angle * (Math.PI / 180);\n}\nfunction getScaleFactorThatRemovesDarkCorners(w, h, granularAngle) {\n    const \u03B1 = Math.abs(toRadians(granularAngle));\n    const scaleFactor = Math.max((Math.sin(\u03B1) * w + Math.cos(\u03B1) * h) / h, (Math.sin(\u03B1) * h + Math.cos(\u03B1) * w) / w);\n    return scaleFactor;\n}\nexport default getScaleFactorThatRemovesDarkCorners;\n", "function limitCropboxMovementOnMove(canvas, cropbox, prevCropbox) {\n    // For the left boundary\n    if (cropbox.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.width,\n        };\n    }\n    // For the top boundary\n    if (cropbox.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.height,\n        };\n    }\n    // For the right boundary\n    if (cropbox.left + cropbox.width > canvas.left + canvas.width) {\n        return {\n            left: canvas.left + canvas.width - prevCropbox.width,\n            width: prevCropbox.width,\n        };\n    }\n    // For the bottom boundary\n    if (cropbox.top + cropbox.height > canvas.top + canvas.height) {\n        return {\n            top: canvas.top + canvas.height - prevCropbox.height,\n            height: prevCropbox.height,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnMove;\n", "function limitCropboxMovementOnResize(canvas, cropboxData, prevCropbox) {\n    // For the left boundary\n    if (cropboxData.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.left + prevCropbox.width - canvas.left,\n        };\n    }\n    // For the top boundary\n    if (cropboxData.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.top + prevCropbox.height - canvas.top,\n        };\n    }\n    // For the right boundary\n    if (cropboxData.left + cropboxData.width > canvas.left + canvas.width) {\n        return {\n            left: prevCropbox.left,\n            width: canvas.left + canvas.width - prevCropbox.left,\n        };\n    }\n    // For the bottom boundary\n    if (cropboxData.top + cropboxData.height > canvas.top + canvas.height) {\n        return {\n            top: prevCropbox.top,\n            height: canvas.top + canvas.height - prevCropbox.top,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnResize;\n", "export default {\n    strings: {\n        revert: 'Reset',\n        rotate: 'Rotate 90\u00B0',\n        zoomIn: 'Zoom in',\n        zoomOut: 'Zoom out',\n        flipHorizontal: 'Flip horizontally',\n        aspectRatioSquare: 'Crop square',\n        aspectRatioLandscape: 'Crop landscape (16:9)',\n        aspectRatioPortrait: 'Crop portrait (9:16)',\n    },\n};\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport packageJson from '../package.json' with { type: 'json' };\nimport Editor from './Editor.js';\nimport locale from './locale.js';\nconst defaultCropperOptions = {\n    viewMode: 0,\n    background: false,\n    autoCropArea: 1,\n    responsive: true,\n    minCropBoxWidth: 70,\n    minCropBoxHeight: 70,\n    croppedCanvasOptions: {},\n    initialAspectRatio: 0,\n};\nconst defaultActions = {\n    revert: true,\n    rotate: true,\n    granularRotate: true,\n    flip: true,\n    zoomIn: true,\n    zoomOut: true,\n    cropSquare: true,\n    cropWidescreen: true,\n    cropWidescreenVertical: true,\n};\nconst defaultOptions = {\n    // `quality: 1` increases the image size by orders of magnitude - 0.8 seems to be the sweet spot.\n    // see https://github.com/fengyuanchen/cropperjs/issues/538#issuecomment-1776279427\n    quality: 0.8,\n    actions: defaultActions,\n    cropperOptions: defaultCropperOptions,\n};\nexport default class ImageEditor extends UIPlugin {\n    static VERSION = packageJson.version;\n    cropper;\n    constructor(uppy, opts) {\n        super(uppy, {\n            ...defaultOptions,\n            ...opts,\n            actions: {\n                ...defaultActions,\n                ...opts?.actions,\n            },\n            cropperOptions: {\n                ...defaultCropperOptions,\n                ...opts?.cropperOptions,\n            },\n        });\n        this.id = this.opts.id || 'ImageEditor';\n        this.title = 'Image Editor';\n        this.type = 'editor';\n        this.defaultLocale = locale;\n        this.i18nInit();\n    }\n    canEditFile(file) {\n        if (!file.type || file.isRemote) {\n            return false;\n        }\n        const fileTypeSpecific = file.type.split('/')[1];\n        if (/^(jpe?g|gif|png|bmp|webp)$/.test(fileTypeSpecific)) {\n            return true;\n        }\n        return false;\n    }\n    save = () => {\n        const saveBlobCallback = (blob) => {\n            const { currentImage } = this.getPluginState();\n            this.uppy.setFileState(currentImage.id, {\n                // Reinserting image's name and type, because .toBlob loses both.\n                data: new File([blob], currentImage.name ?? this.i18n('unnamed'), {\n                    type: blob.type,\n                }),\n                size: blob.size,\n                preview: undefined,\n            });\n            const updatedFile = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('thumbnail:request', updatedFile);\n            this.setPluginState({\n                currentImage: updatedFile,\n            });\n            this.uppy.emit('file-editor:complete', updatedFile);\n        };\n        const { currentImage } = this.getPluginState();\n        // Fixes black 1px lines on odd-width images.\n        // This should be removed when cropperjs fixes this issue.\n        // (See https://github.com/transloadit/uppy/issues/4305 and https://github.com/fengyuanchen/cropperjs/issues/551).\n        const croppedCanvas = this.cropper.getCroppedCanvas({});\n        if (croppedCanvas.width % 2 !== 0) {\n            this.cropper.setData({ width: croppedCanvas.width - 1 });\n        }\n        if (croppedCanvas.height % 2 !== 0) {\n            this.cropper.setData({ height: croppedCanvas.height - 1 });\n        }\n        this.cropper\n            .getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions)\n            .toBlob(saveBlobCallback, currentImage.type, this.opts.quality);\n    };\n    storeCropperInstance = (cropper) => {\n        this.cropper = cropper;\n    };\n    selectFile = (file) => {\n        this.uppy.emit('file-editor:start', file);\n        this.setPluginState({\n            currentImage: file,\n        });\n    };\n    install() {\n        this.setPluginState({\n            currentImage: null,\n        });\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n    }\n    uninstall() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage) {\n            const file = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('file-editor:cancel', file);\n        }\n        this.unmount();\n    }\n    render() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage === null || currentImage.isRemote) {\n            return null;\n        }\n        return (_jsx(Editor, { currentImage: currentImage, storeCropperInstance: this.storeCropperInstance, save: this.save, opts: this.opts, i18n: this.i18n }));\n    }\n}\n", "const de_DE = {\n    strings: {},\n    pluralize(count) {\n        if (count === 1) {\n            return 0;\n        }\n        return 1;\n    },\n};\nde_DE.strings = {\n    addBulkFilesFailed: {\n        '0': 'Das Hinzuf\u00FCgen einer Datei ist aufgrund eines internen Fehlers fehlgeschlagen',\n        '1': 'Das Hinzuf\u00FCgen von %{smart_count} Dateien ist aufgrund eines internen Fehlers fehlgeschlagen',\n    },\n    addingMoreFiles: 'Dateien hinzuf\u00FCgen',\n    addMore: 'Mehr hinzuf\u00FCgen',\n    addMoreFiles: 'Dateien hinzuf\u00FCgen',\n    allFilesFromFolderNamed: 'Alle Dateien vom Ordner %{name}',\n    allowAccessDescription: 'Um Bilder oder Videos mit Ihrer Kamera aufzunehmen, erlauben Sie dieser Website bitte den Zugriff auf Ihre Kamera.',\n    allowAccessTitle: 'Bitte erlauben Sie Zugriff auf Ihre Kamera',\n    aspectRatioLandscape: 'Zuschneiden auf Querformat (16:9)',\n    aspectRatioPortrait: 'Zuschneiden auf Hochformat (9:16)',\n    aspectRatioSquare: 'Zuschneiden auf Quadrat',\n    authenticateWith: 'Mit %{pluginName} verbinden',\n    authenticateWithTitle: 'Bitte authentifizieren Sie sich mit %{pluginName}, um Dateien auszuw\u00E4hlen',\n    back: 'Zur\u00FCck',\n    backToSearch: 'Zur\u00FCck zur Suche',\n    browse: 'durchsuchen',\n    browseFiles: 'Dateien durchsuchen',\n    browseFolders: 'Ordner durchsuchen',\n    cancel: 'Abbrechen',\n    cancelUpload: 'Hochladen abbrechen',\n    closeModal: 'Fenster schlie\u00DFen',\n    companionError: 'Verbindung zu Companion fehlgeschlagen',\n    companionUnauthorizeHint: 'Um die Autorisierung f\u00FCr Ihr %{provider} Konto aufzuheben, gehen Sie bitte zu %{url}',\n    complete: 'Fertig',\n    connectedToInternet: 'Mit dem Internet verbunden',\n    copyLink: 'Link kopieren',\n    copyLinkToClipboardFallback: 'Untenstehende URL kopieren',\n    copyLinkToClipboardSuccess: 'Link in die Zwischenablage kopiert',\n    creatingAssembly: 'Das Hochladen wird vorbereiten...',\n    creatingAssemblyFailed: 'Transloadit: Assembly konnte nicht erstellt werden',\n    dashboardTitle: 'Hochladen von Dateien',\n    dashboardWindowTitle: 'Hochladen von Dateien (ESC dr\u00FCcken zum Schlie\u00DFen)',\n    dataUploadedOfTotal: '%{complete} von %{total}',\n    discardRecordedFile: 'Aufgenommene Datei verwerfen',\n    done: 'Abgeschlossen',\n    dropHint: 'Dateien hier ablegen',\n    dropPasteBoth: 'Dateien hier ablegen/einf\u00FCgen, %{browseFiles} oder %{browseFolders}',\n    dropPasteFiles: 'Dateien hier ablegen/einf\u00FCgen oder %{browseFiles}',\n    dropPasteFolders: 'Dateien hier ablegen/einf\u00FCgen oder %{browseFolders}',\n    dropPasteImportBoth: 'Dateien hier ablegen/einf\u00FCgen, %{browse} oder von folgenden Quellen importieren:',\n    dropPasteImportFiles: 'Dateien hier ablegen/einf\u00FCgen, %{browseFiles} oder von folgenden Quellen importieren:',\n    dropPasteImportFolders: 'Dateien hier ablegen/einf\u00FCgen, %{browseFolders} oder von folgenden Quellen importieren:',\n    editFile: 'Datei bearbeiten',\n    editImage: 'Bild bearbeiten',\n    editFileWithFilename: 'Datei %{file} bearbeiten',\n    editing: '%{file} bearbeiten',\n    emptyFolderAdded: 'Keine Dateien hinzugef\u00FCgt, da der Ordner leer war',\n    encoding: 'Kodieren...',\n    enterCorrectUrl: 'Falsche URL: Bitte stellen Sie sicher, dass Sie einen direkten Link zu einer Datei eingeben',\n    enterTextToSearch: 'Text zum Suchen von Bildern eingeben',\n    enterUrlToImport: 'URL zum Importieren einer Datei eingeben',\n    exceedsSize: 'Datei %{file} ist gr\u00F6\u00DFer als die maximal erlaubte Dateigr\u00F6\u00DFe von %{size}',\n    failedToFetch: 'Companion konnte diese URL nicht verarbeiten - stellen Sie bitte sicher, dass sie korrekt ist',\n    failedToUpload: 'Fehler beim Hochladen der Datei %{file}',\n    filesUploadedOfTotal: {\n        '0': '%{complete} von %{smart_count} Datei hochgeladen',\n        '1': '%{complete} von %{smart_count} Dateien hochgeladen',\n    },\n    filter: 'Filter',\n    finishEditingFile: 'Bearbeitung beenden',\n    flipHorizontal: 'Horizontal spiegeln',\n    folderAdded: {\n        '0': 'Eine Datei von %{folder} hinzugef\u00FCgt',\n        '1': '%{smart_count} Dateien von %{folder} hinzugef\u00FCgt',\n    },\n    folderAlreadyAdded: 'Der Ordner \"%{folder}\" wurde bereits hinzugef\u00FCgt',\n    generatingThumbnails: 'Erstellen von Miniaturansichten...',\n    import: 'Importieren',\n    importFiles: 'Importiere Dateien von:',\n    importFrom: 'Importieren von %{name}',\n    inferiorSize: 'Diese Datei ist kleiner als die minimal erlaubte Dateigr\u00F6\u00DFe von %{size}',\n    loading: 'Laden...',\n    logOut: 'Abmelden',\n    micDisabled: 'Zugriff auf Mikrofon von Benutzer abgelehnt',\n    missingRequiredMetaField: 'Fehlende erforderliche Meta-Felder',\n    missingRequiredMetaFieldOnFile: 'Fehlende erforderliche Meta-Felder in %{fileName}',\n    missingRequiredMetaFields: {\n        '0': 'Fehlendes erforderliches Meta-Feld: %{fields}.',\n        '1': 'Fehlende erforderliche Meta-Felder: %{fields}.',\n    },\n    myDevice: 'Mein Ger\u00E4t',\n    noCameraDescription: 'Bitte Kamera anschlie\u00DFen, um Bilder oder Videos aufzunehmen',\n    noCameraTitle: 'Kamera nicht verf\u00FCgbar',\n    noDuplicates: \"Datei '%{fileName}' existiert bereits und kann nicht erneut hinzugef\u00FCgt werden\",\n    noFilesFound: 'Sie haben hier keine Dateien oder Ordner',\n    noInternetConnection: 'Keine Internetverbindung',\n    noMoreFilesAllowed: 'W\u00E4hrend der Upload l\u00E4uft, k\u00F6nnen keine weiteren Dateien hinzugef\u00FCgt werden',\n    openFolderNamed: 'Ordner %{name} \u00F6ffnen',\n    pause: 'Pausieren',\n    paused: 'Pausiert',\n    pauseUpload: 'Hochladen pausieren',\n    pluginNameBox: 'Box',\n    pluginNameCamera: 'Kamera',\n    pluginNameDropbox: 'Dropbox',\n    pluginNameFacebook: 'Facebook',\n    pluginNameGoogleDrive: 'Google Drive',\n    pluginNameInstagram: 'Instagram',\n    pluginNameOneDrive: 'OneDrive',\n    pluginNameZoom: 'Zoom',\n    poweredBy: 'Powered by %{uppy}',\n    processingXFiles: {\n        '0': 'Eine Datei verarbeiten',\n        '1': '%{smart_count} Dateien verarbeiten',\n    },\n    recording: 'Aufnahme',\n    recordingLength: 'Aufnahmedauer %{recording_length}',\n    recordingStoppedMaxSize: 'Die Aufnahme wurde gestoppt, weil die Dateigr\u00F6\u00DFe das Limit \u00FCberschritten hat',\n    recordVideoBtn: 'Video aufnehmen',\n    recoveredAllFiles: 'Wir haben alle Dateien wiederhergestellt. Sie k\u00F6nnen mit dem Hochladen fortfahren.',\n    recoveredXFiles: {\n        '0': 'Wir konnten eine Datei nicht vollst\u00E4ndig wiederherstellen. Bitte w\u00E4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.',\n        '1': 'Wir konnten %{smart_count} Dateien nicht vollst\u00E4ndig wiederherstellen. Bitte w\u00E4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.',\n    },\n    removeFile: 'Datei entfernen',\n    reSelect: 'Erneut ausw\u00E4hlen',\n    resetFilter: 'Filter zur\u00FCcksetzen',\n    resume: 'Fortsetzen',\n    resumeUpload: 'Hochladen fortsetzen',\n    retry: 'Erneut versuchen',\n    retryUpload: 'Hochladen erneut versuchen',\n    revert: 'R\u00FCckg\u00E4ngig machen',\n    rotate: 'Drehen',\n    save: 'Speichern',\n    saveChanges: '\u00C4nderungen speichern',\n    searchImages: 'Suche nach Bildern',\n    selectX: {\n        '0': 'W\u00E4hlen Sie %{smart_count}',\n        '1': 'W\u00E4hlen Sie %{smart_count}',\n    },\n    sessionRestored: '',\n    smile: 'Bitte l\u00E4cheln!',\n    startCapturing: 'Bildschirmaufnahme starten',\n    startRecording: 'Videoaufnahme starten',\n    stopCapturing: 'Bildschirmaufnahme stoppen',\n    stopRecording: 'Videoaufnahme stoppen',\n    streamActive: 'Stream aktiv',\n    streamPassive: 'Stream passiv',\n    submitRecordedFile: 'Aufgezeichnete Datei verwenden',\n    takePicture: 'Ein Foto aufnehmen',\n    takePictureBtn: 'Foto aufnehmen',\n    timedOut: 'Upload f\u00FCr %{seconds} Sekunden stehen geblieben, breche ab.',\n    upload: 'Hochladen',\n    uploadComplete: 'Hochladen abgeschlossen',\n    uploadFailed: 'Hochladen fehlgeschlagen',\n    uploading: 'Wird hochgeladen',\n    uploadingXFiles: {\n        '0': 'Eine Datei wird hochgeladen',\n        '1': '%{smart_count} Dateien werden hochgeladen',\n    },\n    uploadPaused: 'Hochladen pausiert',\n    uploadXFiles: {\n        '0': 'Eine Datei hochladen',\n        '1': '%{smart_count} Dateien hochladen',\n    },\n    uploadXNewFiles: {\n        '0': '+%{smart_count} Datei hochladen',\n        '1': '+%{smart_count} Dateien hochladen',\n    },\n    xFilesSelected: {\n        '0': 'Eine Datei ausgew\u00E4hlt',\n        '1': '%{smart_count} Dateien ausgew\u00E4hlt',\n    },\n    xMoreFilesAdded: {\n        '0': 'Eine weitere Datei hinzugef\u00FCgt',\n        '1': '%{smart_count} weitere Dateien hinzugef\u00FCgt',\n    },\n    xTimeLeft: '%{time} verbleibend',\n    youCanOnlyUploadFileTypes: 'Sie k\u00F6nnen nur folgende Dateitypen hochladen: %{types}',\n    youCanOnlyUploadX: {\n        '0': 'Sie k\u00F6nnen nur eine Datei hochladen',\n        '1': 'Sie k\u00F6nnen nur %{smart_count} Dateien hochladen',\n    },\n    youHaveToAtLeastSelectX: {\n        '0': 'Sie m\u00FCssen mindestens eine Datei ausw\u00E4hlen',\n        '1': 'Sie m\u00FCssen mindestens %{smart_count} Dateien ausw\u00E4hlen',\n    },\n    zoomIn: 'Vergr\u00F6\u00DFern',\n    zoomOut: 'Verkleinern',\n};\n// @ts-ignore untyped\nif (typeof Uppy !== 'undefined') {\n    // @ts-ignore untyped\n    globalThis.Uppy.locales.de_DE = de_DE;\n}\nexport default de_DE;\n", "/**\n * Custom Chunk Uploader f\u00FCr gro\u00DFe Dateien\n * Orientiert an filepond's chunk-upload Implementierung\n */\nexport class ChunkUploader {\n    constructor(uppy, opts) {\n        this.uppy = uppy;\n        this.id = 'ChunkUploader'; // ID f\u00FCr Uppy\n        this.type = 'uploader';    // Typ f\u00FCr Uppy\n        this.opts = Object.assign({\n            endpoint: '',\n            chunkSize: 5 * 1024 * 1024, // 5MB default\n            categoryId: 0,\n            apiToken: ''\n        }, opts);\n        \n        this.uploaders = new Map();\n    }\n\n    install() {\n        this.uppy.addUploader(this.uploadFile.bind(this));\n    }\n\n    uninstall() {\n        // Cleanup\n    }\n\n    async uploadFile(fileIDs) {\n        const promises = fileIDs.map(id => this.uploadSingleFile(id));\n        return Promise.all(promises);\n    }\n\n    async uploadSingleFile(fileID) {\n        const file = this.uppy.getFile(fileID);\n        const chunkSize = this.opts.chunkSize;\n        const totalSize = file.data.size;\n        const totalChunks = Math.ceil(totalSize / chunkSize);\n        \n        // Set file state to uploading (wichtig f\u00FCr Dashboard UI)\n        this.uppy.setFileState(fileID, {\n            progress: {\n                uploadStarted: Date.now(),\n                uploadComplete: false,\n                percentage: 0,\n                bytesUploaded: 0,\n                bytesTotal: totalSize\n            }\n        });\n        \n        try {\n            // Prepare: Get fileId from server\n            const fileId = await this.prepareUpload(file);\n            \n            this.uppy.emit('upload-progress', this.uppy.getFile(fileID), {\n                uploader: this,\n                bytesUploaded: 0,\n                bytesTotal: totalSize\n            });\n\n            // Upload chunks sequentially\n            for (let chunkIndex = 0; chunkIndex < totalChunks; chunkIndex++) {\n                const start = chunkIndex * chunkSize;\n                const end = Math.min(start + chunkSize, totalSize);\n                const chunk = file.data.slice(start, end);\n                \n                await this.uploadChunk(fileId, chunk, chunkIndex, totalChunks, file);\n                \n                // Progress update (wird auch im uploadChunk gemacht, aber hier zur Sicherheit nochmal f\u00FCr 100% des Chunks)\n                this.uppy.emit('upload-progress', this.uppy.getFile(fileID), {\n                    uploader: this,\n                    bytesUploaded: end,\n                    bytesTotal: totalSize\n                });\n            }\n\n            // Finalize: Merge chunks and add to mediapool\n            const result = await this.finalizeUpload(fileId, file, totalChunks);\n            \n            try {\n                const currentFile = this.uppy.getFile(fileID);\n                \n                if (currentFile) {\n                    // Mark file as complete so it won't be uploaded again\n                    this.uppy.setFileState(fileID, {\n                        progress: {\n                            uploadComplete: true,\n                            uploadStarted: Date.now()\n                        }\n                    });\n                    \n                    this.uppy.emit('upload-success', currentFile, result);\n                    \n                    // Also emit complete event\n                    this.uppy.emit('complete', { successful: [currentFile], failed: [] });\n                } else {\n                    console.error('File not found in Uppy state:', fileID);\n                }\n            } catch (emitError) {\n                console.error('Fehler beim Emitten von upload-success:', emitError);\n            }\n            \n            return result;\n        } catch (error) {\n            console.error('ChunkUpload Fehler:', error);\n            this.uppy.emit('upload-error', this.uppy.getFile(fileID), error);\n            throw error;\n        }\n    }\n\n    async prepareUpload(file) {\n        const fileId = 'uppy_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);\n        const formData = new FormData();\n        formData.append('fileId', fileId);\n        formData.append('fileName', file.name);\n        formData.append('fieldName', 'file');\n        \n        // Endpoint URL enth\u00E4lt bereits Signatur-Parameter (siehe Constructor)\n        const url = `${this.opts.endpoint}&func=prepare&api_token=${this.opts.apiToken}`;\n        \n        const response = await fetch(url, {\n            method: 'POST',\n            body: formData,\n            credentials: 'same-origin'\n        });\n        \n        if (!response.ok) {\n            const text = await response.text();\n            console.error('Prepare failed:', text);\n            throw new Error('Prepare failed: ' + response.status);\n        }\n        \n        const data = await response.json();\n        return data.fileId || fileId;\n    }\n\n    async uploadChunk(fileId, chunk, chunkIndex, totalChunks, file) {\n        return new Promise((resolve, reject) => {\n            const formData = new FormData();\n            formData.append('file', chunk, file.name);\n            formData.append('fileId', fileId);\n            formData.append('chunkIndex', chunkIndex);\n            formData.append('totalChunks', totalChunks);\n            formData.append('fieldName', 'file');\n            \n            // Endpoint URL enth\u00E4lt bereits Signatur-Parameter\n            const url = `${this.opts.endpoint}&func=chunk&category_id=${this.opts.categoryId}&api_token=${this.opts.apiToken}`;\n            \n            const xhr = new XMLHttpRequest();\n            xhr.open('POST', url, true);\n            xhr.withCredentials = true;\n            \n            // Upload Progress f\u00FCr diesen Chunk\n            xhr.upload.onprogress = (e) => {\n                if (e.lengthComputable) {\n                    const chunkSize = this.opts.chunkSize;\n                    const start = chunkIndex * chunkSize;\n                    const totalUploaded = start + e.loaded;\n                    \n                    // Progress an Uppy melden\n                    // Wichtig: Immer das aktuellste File-Objekt holen\n                    const currentFile = this.uppy.getFile(file.id);\n                    if (currentFile) {\n                        this.uppy.emit('upload-progress', currentFile, {\n                            uploader: this,\n                            bytesUploaded: totalUploaded,\n                            bytesTotal: file.data.size\n                        });\n                    }\n                }\n            };\n            \n            xhr.onload = () => {\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    try {\n                        const response = JSON.parse(xhr.responseText);\n                        resolve(response);\n                    } catch (err) {\n                        console.error(`Chunk ${chunkIndex} JSON parse error:`, err);\n                        reject(new Error(`Chunk ${chunkIndex} invalid response`));\n                    }\n                } else {\n                    console.error(`Chunk ${chunkIndex} upload failed:`, xhr.statusText);\n                    reject(new Error(`Chunk ${chunkIndex} upload failed: ` + xhr.status));\n                }\n            };\n            \n            xhr.onerror = () => reject(new Error(`Chunk ${chunkIndex} network error`));\n            \n            xhr.send(formData);\n        });\n    }\n\n    async finalizeUpload(fileId, file, totalChunks) {\n        const formData = new FormData();\n        formData.append('fileId', fileId);\n        formData.append('fileName', file.name);\n        formData.append('totalChunks', totalChunks);\n        formData.append('fieldName', 'file');\n        \n        // Metadaten mitsenden\n        if (file.meta) {\n            formData.append('metadata', JSON.stringify(file.meta));\n        }\n        \n        // Endpoint URL enth\u00E4lt bereits Signatur-Parameter\n        const url = `${this.opts.endpoint}&func=finalize&category_id=${this.opts.categoryId}&api_token=${this.opts.apiToken}`;\n        \n        const response = await fetch(url, {\n            method: 'POST',\n            body: formData,\n            credentials: 'same-origin'\n        });\n        \n        if (!response.ok) {\n            const text = await response.text();\n            console.error('Finalize failed:', text);\n            throw new Error('Finalize failed: ' + response.status);\n        }\n        \n        const data = await response.json();\n        \n        // Uppy erwartet ein Response-Objekt mit status und body\n        const result = {\n            status: response.status,\n            body: {\n                success: data.success || true,\n                data: {\n                    filename: data.data?.filename || data.filename,\n                    title: data.data?.title || ''\n                }\n            },\n            uploadURL: ''\n        };\n        \n        return result;\n    }\n}\n"],
  "mappings": "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",
  "names": ["module", "input", "neg", "num", "units", "exponent", "value", "unit", "require_wildcard", "__commonJSMin", "exports", "module", "WildcardMatcher", "text", "separator", "input", "matches", "parts", "ii", "partsCount", "testParts", "key", "test", "matcher", "require_mime_match", "__commonJSMin", "exports", "module", "wildcard", "reMimePartSplit", "target", "pattern", "test", "result", "require_isObject", "__commonJSMin", "exports", "module", "isObject", "value", "type", "require_freeGlobal", "__commonJSMin", "exports", "module", "freeGlobal", "require_root", "__commonJSMin", "exports", "module", "freeGlobal", "freeSelf", "root", "require_now", "__commonJSMin", "exports", "module", "root", "now", "require_trimmedEndIndex", "__commonJSMin", "exports", "module", "reWhitespace", "trimmedEndIndex", "string", "index", "require_baseTrim", "__commonJSMin", "exports", "module", "trimmedEndIndex", "reTrimStart", "baseTrim", "string", "require_Symbol", "__commonJSMin", "exports", "module", "root", "Symbol", "require_getRawTag", "__commonJSMin", "exports", "module", "Symbol", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "getRawTag", "value", "isOwn", "tag", "unmasked", "result", "require_objectToString", "__commonJSMin", "exports", "module", "objectProto", "nativeObjectToString", "objectToString", "value", "require_baseGetTag", "__commonJSMin", "exports", "module", "Symbol", "getRawTag", "objectToString", "nullTag", "undefinedTag", "symToStringTag", "baseGetTag", "value", "require_isObjectLike", "__commonJSMin", "exports", "module", "isObjectLike", "value", "require_isSymbol", "__commonJSMin", "exports", "module", "baseGetTag", "isObjectLike", "symbolTag", "isSymbol", "value", "require_toNumber", "__commonJSMin", "exports", "module", "baseTrim", "isObject", "isSymbol", "NAN", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "toNumber", "value", "other", "isBinary", "require_debounce", "__commonJSMin", "exports", "module", "isObject", "now", "toNumber", "FUNC_ERROR_TEXT", "nativeMax", "nativeMin", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "result", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "require_throttle", "__commonJSMin", "exports", "module", "debounce", "isObject", "FUNC_ERROR_TEXT", "throttle", "func", "wait", "options", "leading", "trailing", "require_namespace_emitter", "__commonJSMin", "exports", "module", "emitter", "_fns", "event", "arg1", "arg2", "arg3", "arg4", "arg5", "arg6", "toEmit", "getListeners", "emitAll", "fn", "one", "keep", "fns", "i", "l", "e", "out", "idx", "args", "keys", "key", "require_classnames", "__commonJSMin", "exports", "module", "hasOwn", "classNames", "classes", "i", "arg", "appendClass", "parseValue", "key", "value", "newClass", "require_eventemitter3", "__commonJSMin", "exports", "module", "has", "prefix", "Events", "EE", "fn", "context", "once", "addListener", "emitter", "event", "listener", "evt", "clearEvent", "EventEmitter", "names", "events", "name", "handlers", "i", "l", "ee", "listeners", "a1", "a2", "a3", "a4", "a5", "len", "args", "length", "j", "require_is_mobile", "__commonJSMin", "exports", "module", "isMobile", "mobileRE", "notMobileRE", "tabletRE", "opts", "ua", "result", "require_cropper", "__commonJSMin", "exports", "module", "global", "factory", "ownKeys", "e", "r", "t", "o", "_objectSpread2", "_defineProperty", "_toPrimitive", "i", "_toPropertyKey", "_typeof", "_classCallCheck", "instance", "Constructor", "_defineProperties", "target", "props", "descriptor", "_createClass", "protoProps", "staticProps", "obj", "key", "value", "_toConsumableArray", "arr", "_arrayWithoutHoles", "_iterableToArray", "_unsupportedIterableToArray", "_nonIterableSpread", "_arrayLikeToArray", "iter", "minLen", "n", "len", "arr2", "IS_BROWSER", "WINDOW", "IS_TOUCH_DEVICE", "HAS_POINTER_EVENT", "NAMESPACE", "ACTION_ALL", "ACTION_CROP", "ACTION_MOVE", "ACTION_ZOOM", "ACTION_EAST", "ACTION_WEST", "ACTION_SOUTH", "ACTION_NORTH", "ACTION_NORTH_EAST", "ACTION_NORTH_WEST", "ACTION_SOUTH_EAST", "ACTION_SOUTH_WEST", "CLASS_CROP", "CLASS_DISABLED", "CLASS_HIDDEN", "CLASS_HIDE", "CLASS_INVISIBLE", "CLASS_MODAL", "CLASS_MOVE", "DATA_ACTION", "DATA_PREVIEW", "DRAG_MODE_CROP", "DRAG_MODE_MOVE", "DRAG_MODE_NONE", "EVENT_CROP", "EVENT_CROP_END", "EVENT_CROP_MOVE", "EVENT_CROP_START", "EVENT_DBLCLICK", "EVENT_TOUCH_START", "EVENT_TOUCH_MOVE", "EVENT_TOUCH_END", "EVENT_POINTER_DOWN", "EVENT_POINTER_MOVE", "EVENT_POINTER_UP", "EVENT_READY", "EVENT_RESIZE", "EVENT_WHEEL", "EVENT_ZOOM", "MIME_TYPE_JPEG", "REGEXP_ACTIONS", "REGEXP_DATA_URL", "REGEXP_DATA_URL_JPEG", "REGEXP_TAG_NAME", "MIN_CONTAINER_WIDTH", "MIN_CONTAINER_HEIGHT", "DEFAULTS", "TEMPLATE", "isNaN", "isNumber", "isPositiveNumber", "isUndefined", "isObject", "hasOwnProperty", "isPlainObject", "_constructor", "prototype", "isFunction", "slice", "toArray", "forEach", "data", "callback", "assign", "_len", "args", "_key", "arg", "REGEXP_DECIMALS", "normalizeDecimalNumber", "times", "REGEXP_SUFFIX", "setStyle", "element", "styles", "style", "property", "hasClass", "addClass", "elem", "className", "removeClass", "toggleClass", "added", "REGEXP_CAMEL_CASE", "toParamCase", "getData", "name", "setData", "removeData", "REGEXP_SPACES", "onceSupported", "supported", "once", "listener", "options", "removeListener", "type", "handler", "event", "listeners", "addListener", "_handler", "_element$listeners", "_len2", "_key2", "dispatchEvent", "getOffset", "box", "location", "REGEXP_ORIGINS", "isCrossOriginURL", "url", "parts", "addTimestamp", "timestamp", "getTransforms", "_ref", "rotate", "scaleX", "scaleY", "translateX", "translateY", "values", "transform", "getMaxZoomRatio", "pointers", "pointers2", "maxRatio", "pointer", "pointerId", "pointer2", "x1", "y1", "x2", "y2", "z1", "z2", "ratio", "getPointer", "_ref2", "endOnly", "pageX", "pageY", "end", "getPointersCenter", "count", "_ref3", "startX", "startY", "getAdjustedSizes", "_ref4", "aspectRatio", "height", "width", "isValidWidth", "isValidHeight", "adjustedWidth", "getRotatedSizes", "_ref5", "degree", "arc", "sinArc", "cosArc", "newWidth", "newHeight", "getSourceCanvas", "image", "_ref6", "_ref7", "_ref8", "imageAspectRatio", "imageNaturalWidth", "imageNaturalHeight", "_ref6$rotate", "_ref6$scaleX", "_ref6$scaleY", "naturalWidth", "naturalHeight", "_ref8$fillColor", "fillColor", "_ref8$imageSmoothingE", "imageSmoothingEnabled", "_ref8$imageSmoothingQ", "imageSmoothingQuality", "_ref8$maxWidth", "maxWidth", "_ref8$maxHeight", "maxHeight", "_ref8$minWidth", "minWidth", "_ref8$minHeight", "minHeight", "canvas", "context", "maxSizes", "minSizes", "destMaxSizes", "destMinSizes", "destWidth", "destHeight", "params", "param", "fromCharCode", "getStringFromCharCode", "dataView", "start", "length", "str", "REGEXP_DATA_URL_HEAD", "dataURLToArrayBuffer", "dataURL", "base64", "binary", "arrayBuffer", "uint8", "arrayBufferToDataURL", "mimeType", "chunks", "chunkSize", "resetAndGetOrientation", "orientation", "littleEndian", "app1Start", "ifdStart", "offset", "exifIDCode", "tiffOffset", "endianness", "firstIFDOffset", "_length", "_offset", "parseOrientation", "render", "container", "cropper", "containerData", "imageData", "viewMode", "rotated", "canvasWidth", "canvasHeight", "canvasData", "sizeLimited", "positionLimited", "cropBoxData", "cropped", "minCanvasWidth", "minCanvasHeight", "_getAdjustedSizes", "newCanvasLeft", "newCanvasTop", "changed", "transformed", "_getRotatedSizes", "autoCropArea", "limited", "minCropBoxWidth", "minCropBoxHeight", "maxCropBoxWidth", "maxCropBoxHeight", "preview", "crossOrigin", "alt", "previews", "el", "img", "cropBoxWidth", "cropBoxHeight", "left", "top", "originalWidth", "originalHeight", "events", "handlers", "ratioX", "ratioY", "_this", "delta", "buttons", "button", "action", "touch", "change", "right", "bottom", "minLeft", "minTop", "renderable", "range", "check", "side", "p", "methods", "hasSameSize", "offsetX", "offsetY", "_this$canvasData", "x", "y", "_originalEvent", "pivot", "center", "_scaleX", "_scaleY", "rounded", "widthChanged", "heightChanged", "source", "_this$getData", "initialX", "initialY", "initialWidth", "initialHeight", "_options$imageSmoothi", "sourceWidth", "sourceHeight", "srcX", "srcY", "srcWidth", "srcHeight", "dstX", "dstY", "dstWidth", "dstHeight", "scale", "mode", "dragBox", "face", "croppable", "movable", "AnotherCropper", "Cropper", "tagName", "xhr", "clone", "_parseOrientation", "crossOriginUrl", "_this2", "isIOSWebKit", "done", "sizingImage", "body", "template", "cropBox", "parentNode", "uppy_custom_widget_exports", "__export", "UppyCustomWidget", "canvasToBlob", "canvas", "type", "quality", "resolve", "DATA_URL_PATTERN", "dataURItoBlob", "dataURI", "opts", "toFile", "dataURIData", "mimeType", "data", "binary", "bytes", "i", "dataURItoBlob_default", "emaFilter", "newValue", "previousSmoothedValue", "halfLife", "dt", "FOCUSABLE_ELEMENTS_default", "NetworkError", "error", "xhr", "__publicField", "NetworkError_default", "_aliveTimer", "_isDone", "_onTimedOut", "_timeout", "ProgressTimeout", "timeout", "timeoutHandler", "__privateAdd", "__privateSet", "__privateGet", "ProgressTimeout_default", "noop", "fetcher", "url", "options", "body", "headers", "method", "onBeforeRequest", "onUploadProgress", "shouldRetry", "onAfterResponse", "onTimeout", "responseType", "retries", "signal", "timeout", "withCredentials", "delay", "attempt", "timer", "ProgressTimeout_default", "requestWithRetry", "retryCount", "resolve", "reject", "xhr", "onError", "error", "err", "NetworkError_default", "event", "key", "abort", "hasError", "file", "isCompleted", "filterFilesToUpload", "files", "filterFilesToEmitUploadStarted", "isDOMElement", "obj", "findAllDOMElements", "element", "elements", "isDOMElement", "findAllDOMElements_default", "findDOMElement", "element", "context", "isDOMElement", "findDOMElement_default", "getFileNameAndExtension", "fullFileName", "lastDot", "mimeTypes_default", "getFileType", "file", "fileExtension", "getFileNameAndExtension", "mimeTypes_default", "encodeCharacter", "character", "encodeFilename", "name", "suffix", "generateFileID", "file", "instanceId", "id", "hasFileStableId", "getSafeFileId", "fileType", "getFileType", "getAllowedMetaFields", "fields", "meta", "toArray_default", "fallbackApi", "dataTransfer", "files", "toArray_default", "getFilesAndDirectoriesFromDirectory", "directoryReader", "oldEntries", "logDropError", "onSuccess", "entries", "newEntries", "error", "getAsFileSystemHandleFromEntry", "entry", "logDropError", "resolve", "reject", "directoryReader", "getFilesAndDirectoriesFromDirectory", "dirEntries", "file", "createPromiseToAddFileOrParseDirectory", "relativePath", "lastResortFile", "getNextRelativePath", "handle", "getFilesFromDataTransfer", "dataTransfer", "fileSystemHandles", "item", "fileSystemHandle", "err", "getDroppedFiles", "dataTransfer", "options", "logDropError", "accumulator", "file", "getFilesFromDataTransfer", "fallbackApi", "mimeToExtensions", "getFileTypeExtension", "mimeType", "getTextDirection", "element", "getTextDirection_default", "pad", "number", "getTimeStamp", "date", "hours", "minutes", "seconds", "isDragDropSupported", "body", "isNetworkError", "xhr", "isNetworkError_default", "isObjectURL", "url", "isPreviewSupported", "fileType", "secondsToTime", "rawSeconds", "hours", "minutes", "seconds", "prettyETA", "seconds", "time", "secondsToTime", "hoursStr", "minutesStr", "secondsStr", "createCancelError", "cause", "abortOn", "signal", "abortPromise", "removeAbortListener", "_activeRequests", "_queuedHandlers", "_paused", "_pauseTimer", "_downLimit", "_upperLimit", "_rateLimitingTimer", "_RateLimitedQueue_instances", "call_fn", "queueNext_fn", "next_fn", "queue_fn", "dequeue_fn", "_resume", "_increaseLimit", "RateLimitedQueue", "limit", "__privateAdd", "__publicField", "__privateGet", "__privateSet", "i", "__privateMethod", "fn", "queueOptions", "args", "queuedRequest", "outerPromise", "resolve", "reject", "cancelError", "innerPromise", "err", "result", "duration", "done", "cancelActive", "next", "handler", "options", "index", "other", "internalRateLimitedQueue", "remoteFileObjToLocal", "file", "getFileNameAndExtension", "insertReplacement", "source", "rx", "replacement", "newParts", "chunk", "raw", "i", "list", "interpolate", "phrase", "options", "dollarRegex", "dollarBillsYall", "interpolated", "arg", "defaultOnMissingKey", "key", "_onMissingKey", "_Translator_instances", "apply_fn", "Translator", "locales", "onMissingKey", "__privateAdd", "__publicField", "n", "__privateMethod", "__privateSet", "string", "__privateGet", "plural", "locale", "prevLocale", "truncateString", "string", "maxLength", "charsToShow", "frontChars", "backChars", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "createRef", "current", "Fragment", "BaseComponent", "context", "this", "getDomSibling", "childIndex", "sibling", "updateParentDomPointers", "child", "base", "enqueueRender", "c", "__d", "push", "process", "__r", "debounceRendering", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "shift", "__P", "diff", "__n", "namespaceURI", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "newChildrenLength", "constructNewChildrenArray", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "String", "undefined", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "nodeType", "toChildArray", "out", "some", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "toLowerCase", "_attached", "addEventListener", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "hasRefUnmount", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "firstChild", "cloneElement", "vnode", "props", "children", "key", "ref", "i", "defaultProps", "normalizedProps", "assign", "type", "undefined", "arguments", "length", "slice", "call", "createVNode", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "vnodeId", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "defaultProps", "options", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "STYLE_INNER", "STYLE_CONTENT", "VirtualList", "data", "rowHeight", "renderRow", "overscanCount", "padding", "props", "scrollerRef", "A", "offset", "setOffset", "d", "height", "setHeight", "y", "resize", "handleScroll", "q", "start", "visibleRowCount", "end", "selection", "styleInner", "styleContent", "u", "BasePlugin", "uppy", "opts", "__publicField", "plugins", "update", "newOpts", "translator", "Translator", "plugin", "state", "_uppy", "_events", "EventManager", "uppy", "__privateAdd", "__privateSet", "event", "fn", "__privateGet", "fileID", "cb", "file", "isPaused", "eventHandler", "args", "justErrorsLogger", "args", "getTimeStamp", "debugLogger", "import_prettier_bytes", "import_mime_match", "defaultOptions", "RestrictionError", "message", "opts", "__publicField", "Restricter", "getOpts", "getI18n", "existingFiles", "addingFiles", "maxTotalFileSize", "maxNumberOfFiles", "f", "totalFilesSize", "total", "prettierBytes", "file", "maxFileSize", "minFileSize", "allowedFileTypes", "type", "match", "allowedFileTypesString", "addingFile", "files", "minNumberOfFiles", "error", "requiredMetaFields", "missingFields", "field", "debounce", "fn", "calling", "latestArgs", "args", "_updateUI", "_UIPlugin", "BasePlugin", "__privateAdd", "__publicField", "target", "targetPlugin", "Target", "p", "plugin", "callerPluginName", "targetElement", "findDOMElement_default", "uppyRootElement", "__privateSet", "state", "G", "getTextDirection_default", "message", "container", "_a", "__privateGet", "UIPlugin", "UIPlugin_default", "package_default", "_callbacks", "_DefaultStore_instances", "publish_fn", "DefaultStore", "__privateAdd", "__publicField", "patch", "prevState", "nextState", "__privateMethod", "listener", "__privateGet", "args", "package_default", "lib_default", "import_throttle", "import_namespace_emitter", "urlAlphabet", "nanoid", "size", "id", "i", "urlAlphabet", "package_default", "getFileName", "fileType", "fileDescriptor", "locale_default", "supportsUploadProgress", "userAgent", "m", "version", "major", "minor", "defaultUploadState", "_plugins", "_restricter", "_storeUnsubscribe", "_emitter", "_preProcessors", "_uploaders", "_postProcessors", "_Uppy_instances", "informAndEmit_fn", "checkRequiredMetaFieldsOnFile_fn", "checkRequiredMetaFields_fn", "assertNewUploadAllowed_fn", "transformFile_fn", "startIfAutoProceed_fn", "checkAndUpdateFileState_fn", "getFilesToRetry_fn", "doRetryAll_fn", "_handleUploadProgress", "updateTotalProgress_fn", "_updateTotalProgressThrottled", "calculateTotalProgress_fn", "addListeners_fn", "_updateOnlineStatus", "_requestClientById", "createUpload_fn", "getUpload_fn", "removeUpload_fn", "runUpload_fn", "_Uppy", "opts", "__privateAdd", "ee", "__publicField", "file", "progress", "fileInState", "newProgress", "__privateGet", "throttle", "__privateMethod", "locale_default", "defaultOptions", "files", "lib_default", "justErrorsLogger", "merged", "debugLogger", "supportsUploadProgress", "__privateSet", "Restricter", "prevState", "nextState", "patch", "event", "args", "callback", "state", "plugin", "filesWithNewState", "existingFilesState", "fileID", "newFileState", "onMissingKey", "key", "translator", "Translator", "newOpts", "defaultProgress", "updatedFiles", "capabilities", "currentUploads", "fn", "data", "updatedMeta", "newMeta", "ids", "id", "filesObject", "totalProgress", "error", "inProgressFiles", "newFiles", "startedFiles", "uploadStartedFiles", "pausedFiles", "completeFiles", "erroredFiles", "inProgressNotPausedFiles", "processingFiles", "err", "existingFiles", "nextFilesState", "validFilesToAdd", "errors", "restrictionErrors", "firstValidFileToAdd", "fileDescriptors", "nonRestrictionErrors", "message", "subError", "fileIDs", "updatedUploads", "removedFiles", "fileIsNotRemoved", "uploadFileID", "uploadID", "newFileIDs", "stateUpdate", "removedFileIDs", "isPaused", "updatedFile", "result", "Plugin", "msg", "pluginId", "existsPluginAlready", "plugins", "foundPlugin", "type", "method", "instance", "list", "index", "item", "updatedState", "info", "duration", "isComplexMessage", "logger", "client", "requestClient", "currentUpload", "retryResult", "onBeforeUploadResult", "RestrictionError", "currentlyUploadingFiles", "curr", "waitingFileIDs", "userFacingErrors", "maxNumToShow", "firstErrors", "additionalErrors", "details", "missingFields", "success", "allowNewUpload", "fileDescriptorOrFile", "fileType", "getFileType", "fileName", "getFileName", "fileExtension", "getFileNameAndExtension", "getSafeFileId", "meta", "size", "filesToAdd", "fileToAdd", "newFile", "existingFile", "isGhost", "onBeforeFileAddedResult", "fileId", "filesToRetry", "totalProgressPercent", "filesInProgress", "isSizedFile", "sizedFilesInProgress", "unsizedFilesInProgress", "totalFilesSize", "acc", "totalUploadedSize", "errorHandler", "response", "errorMsg", "newError", "uploadStalledWarningRecentlyEmitted", "onUploadStarted", "filesFiltered", "exists", "filesState", "uploadResp", "currentProgress", "needsPostProcessing", "fileIn", "_deleted", "forceAllowNewUpload", "nanoid", "getCurrentUpload", "steps", "step", "successful", "failed", "package_default", "Uppy", "Uppy_default", "useSearchForm", "onSubmit", "submit", "q", "ev", "form", "d", "formEl", "nanoid", "y", "FilterInput", "value", "onChange", "onSubmit", "inputLabel", "i18n", "formId", "useSearchForm", "u", "e", "FilterInput_default", "GoogleIcon", "u", "DefaultForm", "pluginName", "i18n", "onAuth", "isGoogleDrive", "onSubmit", "q", "e", "defaultRenderForm", "AuthView", "loading", "pluginIcon", "handleAuth", "renderForm", "import_classnames", "import_debounce", "package_default", "import_classnames", "FileIcon", "u", "FolderIcon", "VideoIcon", "ItemIcon", "itemIconString", "alt", "GridItem", "file", "toggleCheckbox", "className", "isDisabled", "restrictionError", "showTitles", "children", "i18n", "u", "ItemIcon", "GridItem_default", "ListItem", "file", "openFolder", "className", "isDisabled", "restrictionError", "toggleCheckbox", "showTitles", "i18n", "u", "ItemIcon", "Item", "props", "viewType", "toggleCheckbox", "showTitles", "i18n", "openFolder", "file", "utmSource", "restrictionError", "isDisabled", "ourProps", "classNames", "u", "GridItem_default", "ListItem", "Browser", "props", "displayedPartialTree", "viewType", "toggleCheckbox", "handleScroll", "showTitles", "i18n", "isLoading", "openFolder", "noResultsLabel", "virtualList", "utmSource", "isShiftKeyPressed", "setIsShiftKeyPressed", "d", "y", "handleKeyUp", "e", "handleKeyDown", "u", "renderItem", "item", "Item", "event", "VirtualList", "Browser_default", "import_classnames", "getNumberOfSelectedFiles", "partialTree", "item", "i", "getNumberOfSelectedFiles_default", "FooterActions", "cancelSelection", "donePicking", "i18n", "partialTree", "validateAggregateRestrictions", "aggregateRestrictionError", "T", "nOfSelectedFiles", "getNumberOfSelectedFiles_default", "u", "classNames", "companionFileToUppyFile", "file", "plugin", "provider", "name", "companionFileToUppyFile_default", "addFiles", "companionFiles", "plugin", "provider", "uppyFiles", "f", "companionFileToUppyFile_default", "filesToAdd", "filesAlreadyAdded", "file", "getSafeFileId", "addFiles_default", "getClickedRange", "clickedId", "displayedPartialTree", "isShiftKeyPressed", "previousCheckbox", "previousCheckboxIndex", "item", "newCheckboxIndex", "getClickedRange_default", "handleError", "uppy", "error", "handleError_default", "getBreadcrumbs", "partialTree", "currentFolderId", "folder", "f", "breadcrumbs", "currentParentId", "getBreadcrumbs_default", "getPath", "partialTree", "id", "cache", "sId", "file", "f", "meAndParentPath", "getCheckedFilesWithPaths", "item", "absFolders", "firstCheckedFolderIndex", "i", "relFolders", "absDirPath", "relDirPath", "getCheckedFilesWithPaths_default", "import_index", "TimeoutError", "message", "AbortError", "getDOMException", "errorMessage", "getAbortedReason", "signal", "reason", "pTimeout", "promise", "options", "milliseconds", "fallback", "customTimers", "timer", "abortHandler", "cancelablePromise", "resolve", "reject", "timeoutError", "error", "lowerBound", "array", "value", "comparator", "first", "count", "step", "it", "_queue", "PriorityQueue", "__privateAdd", "run", "options", "element", "__privateGet", "index", "lowerBound", "a", "b", "id", "priority", "item", "_carryoverConcurrencyCount", "_isIntervalIgnored", "_intervalCount", "_intervalCap", "_interval", "_intervalEnd", "_intervalId", "_timeoutId", "_queue", "_queueClass", "_pending", "_concurrency", "_isPaused", "_throwOnTimeout", "_idAssigner", "_PQueue_instances", "doesIntervalAllowAnother_get", "doesConcurrentAllowAnother_get", "next_fn", "onResumeInterval_fn", "isIntervalPaused_get", "tryToStartAnother_fn", "initializeIntervalIfNeeded_fn", "onInterval_fn", "processQueue_fn", "throwOnAbort_fn", "onEvent_fn", "PQueue", "EventEmitter", "options", "__privateAdd", "__publicField", "PriorityQueue", "__privateSet", "__privateGet", "newConcurrency", "__privateMethod", "id", "priority", "function_", "__privateWrapper", "resolve", "reject", "operation", "pTimeout", "result", "error", "TimeoutError", "functions", "limit", "now", "delay", "canInitializeInterval", "job", "signal", "_resolve", "event", "filter", "listener", "shallowClone", "partialTree", "item", "shallowClone_default", "recursivelyFetch", "queue", "poorTree", "poorFolder", "apiList", "validateSingleFile", "items", "currentPath", "response", "newFolders", "i", "newFiles", "folders", "folder", "files", "file", "restrictionError", "afterFill", "partialTree", "reportProgress", "PQueue", "shallowClone_default", "item", "nOfFilesChecked", "afterFill_default", "afterOpenFolder", "oldPartialTree", "discoveredItems", "clickedFolder", "currentPagePath", "validateSingleFile", "discoveredUniqueItems", "i", "f", "discoveredFolders", "discoveredFiles", "isParentFolderChecked", "folders", "folder", "files", "file", "restrictionError", "updatedClickedFolder", "afterOpenFolder_default", "afterScrollFolder", "oldPartialTree", "currentFolderId", "items", "nextPagePath", "validateSingleFile", "currentFolder", "i", "newFolders", "newFiles", "scrolledFolder", "partialTreeWithUpdatedScrolledFolder", "folder", "isParentFolderChecked", "folders", "files", "file", "restrictionError", "afterScrollFolder_default", "percolateDown", "tree", "id", "shouldMarkAsChecked", "item", "percolateUp", "folder", "validChildren", "areAllChildrenChecked", "areAllChildrenUnchecked", "afterToggleCheckbox", "oldTree", "checkedIds", "shallowClone_default", "newlyCheckedItems", "newStatus", "afterToggleCheckbox_default", "PartialTreeUtils_default", "afterOpenFolder_default", "afterScrollFolder_default", "afterToggleCheckbox_default", "afterFill_default", "shouldHandleScroll", "event", "scrollHeight", "scrollTop", "offsetHeight", "shouldHandleScroll_default", "import_classnames", "SearchResultItem", "i18n", "item", "toggleCheckbox", "openFolder", "isDisabled", "u", "classNames", "ItemIcon", "SearchResultItem_default", "GlobalSearchView", "searchResults", "toggleCheckbox", "openFolder", "i18n", "u", "item", "SearchResultItem_default", "GlobalSearchView_default", "import_classnames", "Breadcrumbs", "props", "openFolder", "title", "breadcrumbsIcon", "breadcrumbs", "i18n", "u", "folder", "index", "k", "User", "i18n", "logout", "username", "u", "k", "Header", "props", "u", "classNames", "Breadcrumbs", "User", "defaultPickerIcon", "u", "getDefaultState", "rootFolderId", "_a", "_searchDebounced", "_abortController", "_ProviderView_instances", "withAbort_fn", "search_fn", "renderSearchResults_fn", "_ProviderView", "plugin", "opts", "__privateAdd", "__publicField", "s", "__privateGet", "file", "companionFile", "remoteFileObjToLocal", "partialTree", "currentFolderId", "searchString", "inThisFolder", "item", "getBreadcrumbs_default", "getNumberOfSelectedFiles_default", "uppyFiles", "defaultOptions", "testWait", "wait", "debounceOpts", "__privateSet", "debounce", "__privateMethod", "loading", "newPartialTree", "folderId", "clickedFolder", "folder", "signal", "currentPagePath", "currentItems", "username", "nextPagePath", "items", "PartialTreeUtils_default", "handleError_default", "res", "message", "authFormData", "event", "currentFolder", "i", "shouldHandleScroll_default", "enrichedTree", "path", "n", "companionFiles", "getCheckedFilesWithPaths_default", "addFiles_default", "ourItem", "isShiftKeyPressed", "clickedRange", "getClickedRange_default", "state", "viewOptions", "didFirstRender", "i18n", "authenticated", "pluginIcon", "AuthView", "searchResults", "breadcrumbs", "classNames", "Header", "FilterInput_default", "Browser_default", "FooterActions", "op", "abortController", "cancelRequest", "scopePath", "segments", "parentId", "isParentFolderChecked", "segment", "index", "arr", "pathSegments", "encodedPath", "existingNode", "isLeafNode", "node", "status", "restrictionError", "ids", "itemsById", "id", "partialTreeItem", "GlobalSearchView_default", "package_default", "ProviderView", "e", "t", "s", "i", "n", "r", "a", "h", "f", "l", "o", "u", "d", "c", "_c", "p", "g", "m", "y", "b", "w", "k", "v", "O", "S", "A", "U", "x", "C", "B", "V", "I", "L", "T", "z", "P", "F", "j", "E", "M", "_", "D", "X", "N", "$", "R", "W", "K", "H", "Y", "G", "J", "q", "Q", "Z", "ee", "te", "se", "ie", "ne", "re", "ae", "he", "le", "ae", "de", "ae", "ce", "e", "t", "H", "s", "pe", "ge", "me", "ye", "be", "c", "we", "a", "r", "i", "ke", "Oe", "b", "A", "n", "package_default", "locale_default", "canvasToBlob", "canvas", "type", "quality", "err", "resolve", "blob", "dataURItoBlob_default", "rotateImage", "image", "translate", "w", "h", "context", "protect", "ratio", "maxSquare", "maxSize", "maxW", "maxH", "defaultOptions", "ThumbnailGenerator", "UIPlugin_default", "uppy", "opts", "__publicField", "file", "isPreviewSupported", "index", "isObjectURL", "fileIDs", "fileID", "emitPreprocessCompleteForAll", "locale_default", "targetWidth", "targetHeight", "originalUrl", "onload", "reject", "event", "orientationPromise", "ye", "orientation", "dimensions", "rotatedImage", "resizedImage", "img", "width", "height", "deg", "aspect", "steps", "sW", "sH", "x", "preview", "current", "package_default", "package_default", "import_classnames", "AddFiles", "x", "__publicField", "event", "isFolder", "refCallback", "u", "type", "nativeCameraFacingMode", "accept", "text", "onClickFn", "numberOfAcquirers", "browseFiles", "browseFolders", "lowerFMSelectionType", "camelFMSelectionType", "acquirer", "acquirers", "acquirersWithoutLastTwo", "lastTwoAcquirers", "k", "disableLocalFiles", "showNativePhotoCameraButton", "showNativeVideoCameraButton", "list", "myDeviceKey", "listWithoutLastTwo", "lastTwo", "key", "elements", "i18nArray", "uppyBranding", "linkText", "ref", "AddFiles_default", "import_classnames", "AddFilesPanel", "props", "u", "classNames", "AddFiles_default", "AddFilesPanel_default", "import_classnames", "EditorPanel", "props", "file", "handleCancel", "u", "classNames", "target", "EditorPanel_default", "import_classnames", "iconImage", "u", "iconAudio", "iconVideo", "iconPDF", "iconArchive", "iconFile", "iconText", "getIconByMime", "fileType", "defaultChoice", "fileTypeGeneral", "fileTypeSpecific", "ignoreEvent", "ev", "tagName", "ignoreEvent_default", "FilePreview", "props", "file", "u", "color", "icon", "getIconByMime", "RenderMetaFields", "props", "computedMetaFields", "requiredMetaFields", "updateMeta", "form", "formState", "fieldCSSClasses", "field", "id", "required", "u", "newVal", "_", "ev", "FileCard", "props", "files", "fileCardFor", "toggleFileCard", "saveFileCard", "metaFields", "requiredMetaFields", "openFileEditor", "i18n", "i18nArray", "className", "canEditFile", "getMetaFields", "file", "computedMetaFields", "showEditButton", "storedMetaData", "field", "formState", "setFormState", "d", "handleSave", "q", "ev", "updateMeta", "newVal", "name", "handleCancel", "form", "formEl", "nanoid", "domRef", "A", "y", "rootNode", "u", "classNames", "ignoreEvent_default", "getIconByMime", "FilePreview", "event", "RenderMetaFields", "import_classnames", "shallowEqualObjects", "objA", "objB", "aKeys", "Object", "keys", "bKeys", "len", "length", "i", "key", "prototype", "hasOwnProperty", "call", "copyToClipboard", "textToCopy", "fallbackString", "resolve", "textArea", "magicCopyFailed", "EditButton", "file", "uploadInProgressOrComplete", "metaFields", "canEditFile", "i18n", "onClick", "u", "RemoveButton", "CopyLinkButton", "uppy", "copyLinkToClipboard", "event", "copyToClipboard", "Buttons", "props", "showLinkToFileUploadResult", "showRemoveButton", "toggleFileCard", "openFileEditor", "import_prettier_bytes", "metaFieldIdToName", "metaFieldId", "metaFields", "f", "MetaErrorMessage", "props", "file", "toggleFileCard", "i18n", "missingRequiredMetaFields", "metaFieldsString", "missingMetaField", "u", "renderFileName", "props", "author", "name", "getMaxNameLength", "u", "truncateString", "renderAuthor", "providerName", "dot", "k", "renderFileSize", "prettierBytes", "ReSelectButton", "ErrorButton", "file", "onClick", "FileInfo", "i18n", "toggleFileCard", "metaFields", "toggleAddFilesPanel", "isSingleFile", "containerHeight", "containerWidth", "MetaErrorMessage", "FilePreviewAndLink", "props", "file", "i18n", "toggleFileCard", "metaFields", "showLinkToFileUploadResult", "previewBackgroundColor", "getIconByMime", "u", "FilePreview", "MetaErrorMessage", "onPauseResumeCancelRetry", "props", "progressIndicatorTitle", "ProgressIndicatorButton", "u", "ProgressCircleContainer", "children", "ProgressCircle", "progress", "circleLength", "FileProgress", "FileItem", "x", "file", "nextProps", "shallowEqualObjects", "isProcessing", "isUploaded", "uploadInProgressOrComplete", "uploadInProgress", "error", "isGhost", "showRemoveButton", "dashboardItemClass", "classNames", "u", "FilePreviewAndLink", "FileProgress", "FileInfo", "Buttons", "chunks", "list", "size", "chunked", "currentChunk", "item", "FileList", "id", "i18n", "uppy", "files", "resumableUploads", "hideRetryButton", "hidePauseResumeButton", "hideCancelButton", "showLinkToFileUploadResult", "showRemoveButtonAfterComplete", "metaFields", "isSingleFile", "toggleFileCard", "handleRequestThumbnail", "handleCancelThumbnail", "recoveredState", "individualCancellation", "itemsPerRow", "openFileEditor", "canEditFile", "toggleAddFilesPanel", "containerWidth", "containerHeight", "rowHeight", "rows", "T", "sortByGhostComesFirst", "file1", "file2", "fileIds", "renderRow", "row", "u", "fileID", "FileItem", "VirtualList", "TRANSITION_MS", "FadeIn", "x", "__publicField", "b", "callback", "children", "u", "assign", "obj", "props", "getKey", "vnode", "fallback", "linkRef", "component", "name", "cache", "c", "getChildMapping", "children", "out", "i", "key", "mergeChildMappings", "prev", "next", "getValueForKey", "nextKeysPending", "pendingKeys", "prevKey", "childMapping", "nextKey", "pendingNextKey", "identity", "TransitionGroup", "x", "context", "H", "initialChildMapping", "nextProps", "nextChildMapping", "prevChildMapping", "prevState", "hasPrev", "hasNext", "keysToEnter", "keysToLeave", "idx", "currentChildMapping", "childFactory", "transitionLeave", "transitionName", "transitionAppear", "transitionEnter", "transitionLeaveTimeout", "transitionEnterTimeout", "transitionAppearTimeout", "childrenToRender", "child", "ref", "K", "_", "TransitionGroup_default", "Informer", "x", "info", "u", "TransitionGroup_default", "FadeIn", "import_classnames", "PickerPanelContent", "activePickerPanel", "className", "hideAllPanels", "i18n", "state", "uppy", "ref", "A", "u", "classNames", "ignoreEvent_default", "PickerPanelContent_default", "uploadStates", "getUploadingState", "isAllErrored", "isAllComplete", "isAllPaused", "files", "state", "fileIDs", "i", "progress", "UploadStatus", "i18n", "inProgressNotPausedFiles", "newFiles", "processingFiles", "PanelTopBar", "props", "hideCancelButton", "maxNumberOfFiles", "toggleAddFilesPanel", "uppy", "allowNewUpload", "u", "PickerPanelTopBar_default", "import_classnames", "transitionName", "duration", "Slide", "children", "cachedChildren", "setCachedChildren", "d", "className", "setClassName", "enterTimeoutRef", "A", "leaveTimeoutRef", "animationFrameRef", "handleEnterTransition", "q", "handleLeaveTransition", "y", "child", "H", "K", "classNames", "Slide_default", "StatusBarStates_default", "import_classnames", "import_prettier_bytes", "import_classnames", "DOT", "renderDot", "UploadBtn", "props", "newFiles", "isUploadStarted", "recoveredState", "i18n", "uploadState", "isSomeGhost", "startUpload", "uploadBtnClassNames", "classNames", "StatusBarStates_default", "uploadBtnText", "u", "RetryBtn", "uppy", "CancelBtn", "PauseResumeButton", "isAllPaused", "isAllComplete", "resumableUploads", "title", "togglePauseResume", "DoneBtn", "doneButtonHandler", "LoadingSpinner", "ProgressBarProcessing", "progress", "value", "mode", "message", "ProgressDetails", "numUploads", "complete", "totalUploadedSize", "totalSize", "totalETA", "ifShowFilesUploadedOfTotal", "totalUploadedSizeStr", "prettierBytes", "prettyETA", "FileUploadCount", "UploadNewlyAddedFiles", "ProgressBarUploading", "supportsUploadProgress", "totalProgress", "hideProgressDetails", "showUploadNewlyAddedFiles", "renderProgressDetails", "ProgressBarComplete", "ProgressBarError", "error", "displayErrorAlert", "errorMessage", "calculateProcessingProgress", "files", "values", "mode", "message", "progress", "preprocess", "postprocess", "value", "total", "progressValue", "STATE_ERROR", "STATE_WAITING", "STATE_PREPROCESSING", "STATE_UPLOADING", "STATE_POSTPROCESSING", "STATE_COMPLETE", "StatusBarStates_default", "StatusBarUI", "newFiles", "allowNewUpload", "isUploadInProgress", "isAllPaused", "resumableUploads", "error", "hideUploadButton", "hidePauseResumeButton", "hideCancelButton", "hideRetryButton", "recoveredState", "uploadState", "totalProgress", "files", "supportsUploadProgress", "hideAfterFinish", "isSomeGhost", "doneButtonHandler", "isUploadStarted", "i18n", "startUpload", "uppy", "isAllComplete", "hideProgressDetails", "numUploads", "complete", "totalSize", "totalETA", "totalUploadedSize", "getProgressValue", "progress", "calculateProcessingProgress", "getIsIndeterminate", "mode", "progressValue", "width", "showUploadBtn", "showCancelBtn", "showPauseResumeBtn", "showRetryBtn", "showDoneBtn", "progressClassNames", "classNames", "statusBarClassNames", "progressBarStateEl", "u", "ProgressBarProcessing", "ProgressBarComplete", "ProgressBarError", "ProgressBarUploading", "UploadBtn", "RetryBtn", "PauseResumeButton", "CancelBtn", "DoneBtn", "speedFilterHalfLife", "ETAFilterHalfLife", "getUploadingState", "error", "isAllComplete", "recoveredState", "files", "StatusBarStates_default", "state", "fileIDs", "i", "progress", "_lastUpdateTime", "_previousUploadedBytes", "_previousSpeed", "_previousETA", "_onUploadStart", "_StatusBar_instances", "computeSmoothETA_fn", "StatusBar", "x", "__privateAdd", "__privateSet", "pv", "__publicField", "file", "__privateGet", "capabilities", "allowNewUpload", "totalProgress", "newFiles", "startedFiles", "completeFiles", "isUploadStarted", "isAllPaused", "isUploadInProgress", "isSomeGhost", "newFilesOrRecovered", "resumableUploads", "supportsUploadProgress", "totalSize", "totalUploadedSize", "f", "totalETA", "__privateMethod", "u", "StatusBarUI", "totalBytes", "remaining", "dt", "uploadedBytesSinceLastTick", "currentSpeed", "filteredSpeed", "emaFilter", "instantETA", "updatedPreviousETA", "filteredETA", "WIDTH_XL", "WIDTH_LG", "WIDTH_MD", "HEIGHT_MD", "Dashboard", "props", "isNoFiles", "isSingleFile", "isSizeMD", "isSizeHeightMD", "dashboardClassName", "classNames", "itemsPerRow", "showFileList", "numberOfFilesForRecovery", "numberOfGhosts", "fileID", "renderRestoredText", "u", "isDragDropSupported", "PickerPanelTopBar_default", "FileList", "AddFiles_default", "Slide_default", "AddFilesPanel_default", "FileCard", "PickerPanelContent_default", "EditorPanel_default", "Informer", "StatusBar", "target", "locale_default", "import_debounce", "getActiveOverlayEl", "dashboardEl", "activeOverlayType", "overlayEl", "createSuperFocus", "lastFocusWasOnSuperFocusableEl", "debounce", "dashboardEl", "activeOverlayType", "overlayEl", "getActiveOverlayEl", "isFocusInOverlay", "superFocusableEl", "FOCUSABLE_ELEMENTS_default", "focusOnFirstNode", "event", "nodes", "node", "focusOnLastNode", "isFocusInOverlay", "activeOverlayEl", "trapFocus", "activeOverlayType", "dashboardEl", "getActiveOverlayEl", "focusableNodes", "toArray_default", "FOCUSABLE_ELEMENTS_default", "focusedItemIndex", "forInline", "event", "activeOverlayType", "dashboardEl", "trapFocus", "TAB_KEY", "ESC_KEY", "createPromise", "o", "resolve", "reject", "defaultOptions", "defaultPickerIcon", "_disabledNodes", "_generateLargeThumbnailIfSingleFile", "_openFileEditorWhenFilesAdded", "_attachRenderFunctionToTarget", "_isTargetSupported", "_getAcquirers", "_getProgressIndicators", "_getEditors", "_addSpecifiedPluginsFromOptions", "_autoDiscoverPlugins", "_addSupportedPluginIfNoTarget", "_Dashboard_instances", "getThumbnailGeneratorOpts_fn", "getThumbnailGeneratorId_fn", "Dashboard", "UIPlugin_default", "uppy", "opts", "_a", "autoOpen", "__privateAdd", "__publicField", "nanoid", "createSuperFocus", "plugin", "newTargets", "target", "callerPluginId", "callerPluginName", "callerPluginType", "state", "update", "id", "targets", "activePickerPanel", "file", "__privateGet", "editors", "editor", "metaFields", "promise", "handler", "manualClose", "isHidden", "isClosing", "isDarkModeOn", "capabilities", "event", "isDarkModeOnNow", "show", "fileID", "files", "descriptors", "err", "entries", "uppyDashboardInnerEl", "width", "height", "pluginState", "isModalAndClosed", "disable", "NODES_TO_DISABLE", "nodesToDisable", "toArray_default", "node", "__privateSet", "trapFocus", "canSomePluginHandleRootDrop", "somePluginCanHandleRootDrop", "doesEventHaveFiles", "types", "type", "hasFiles", "executedDropErrorOnce", "logDropError", "error", "getDroppedFiles", "forInline", "failed", "LARGE_THUMBNAIL", "thumbnailGenerator", "fileForThumbnail", "firstFile", "isMetaEditorEnabled", "isImageEditorEnabled", "showModalTrigger", "findAllDOMElements_default", "trigger", "isFocusInUppy", "isFocusNowhere", "isInformerHidden", "isModal", "meta", "allowNewUpload", "newFiles", "uploadStartedFiles", "completeFiles", "erroredFiles", "inProgressFiles", "inProgressNotPausedFiles", "processingFiles", "isUploadStarted", "isAllComplete", "isAllPaused", "acquirers", "progressindicators", "theme", "plugins", "pluginID", "typesAllowed", "installedPlugin", "inline", "closeAfterFinish", "allowMultipleUploads", "allowMultipleUploadBatches", "ThumbnailGenerator", "__privateMethod", "isDarkModeOnFromTheStart", "thumbnail", "locale_default", "thumbnailWidth", "thumbnailHeight", "thumbnailType", "waitForThumbnailsBeforeUpload", "package_default", "import_is_mobile", "package_default", "CameraIcon", "u", "DiscardButton", "onDiscard", "i18n", "u", "DiscardButton_default", "RecordButton", "recording", "onStartRecording", "onStopRecording", "i18n", "u", "formatSeconds", "seconds", "RecordingLength", "recordingLengthSeconds", "formattedRecordingLengthSeconds", "formatSeconds", "u", "SnapshotButton", "onSnapshot", "i18n", "u", "CameraIcon", "SubmitButton", "onSubmit", "i18n", "u", "SubmitButton_default", "VideoSourceSelect", "currentDeviceId", "videoSources", "onChangeVideoSource", "u", "event", "videoSource", "isModeAvailable", "modes", "mode", "CameraScreen", "x", "__publicField", "onFocus", "onStop", "src", "recordedVideo", "capturedSnapshot", "recording", "supportsRecording", "videoSources", "showVideoSourceDropdown", "showRecordingLength", "onSubmit", "i18n", "mirror", "onSnapshot", "onStartRecording", "onStopRecording", "onDiscardRecordedMedia", "recordingLengthSeconds", "hasRecordedVideo", "hasCapturedSnapshot", "hasRecordedMedia", "shouldShowRecordButton", "shouldShowSnapshotButton", "shouldShowRecordingLength", "shouldShowVideoSourceDropdown", "videoProps", "u", "videoElement", "VideoSourceSelect", "SnapshotButton", "RecordButton", "SubmitButton_default", "DiscardButton_default", "RecordingLength", "CameraScreen_default", "locale_default", "PermissionsScreen", "icon", "i18n", "hasCamera", "u", "supportsMediaRecorder", "toMimeType", "fileType", "mimeTypes_default", "isVideoMimeType", "mimeType", "isImageMimeType", "getMediaDevices", "isModeAvailable", "modes", "mode", "defaultOptions", "_enableMirror", "Webcam", "UIPlugin_default", "uppy", "opts", "__privateAdd", "__publicField", "u", "locale_default", "__privateSet", "recordedVideo", "capturedSnapshot", "isRecording", "cameraReady", "cameraError", "newOpts", "devices", "device", "deviceId", "acceptsAudio", "acceptsVideo", "videoConstraints", "options", "constraints", "hasCamera", "stream", "currentDeviceId", "tracks", "track", "err", "restrictions", "preferredVideoMimeTypes", "filterSupportedTypes", "candidateType", "getFileTypeExtension", "acceptableMimeTypes", "stoppingBecauseOfMaxSize", "event", "totalSize", "acc", "chunk", "expectedEndChunkSize", "maxSize", "currentRecordingLength", "resolve", "file", "error", "audioTracks", "videoTracks", "reject", "count", "countDown", "message", "capturedSnapshotUrl", "video", "width", "height", "canvas", "preferredImageMimeTypes", "ext", "name", "canvasToBlob", "blob", "fileExtension", "webcamState", "PermissionsScreen", "CameraIcon", "CameraScreen_default", "supportsMediaRecorder", "__privateGet", "mobileNativeCamera", "target", "restartStream", "videoSources", "videoSource", "package_default", "package_default", "locale_default", "buildResponseError", "xhr", "err", "error", "isNetworkError_default", "NetworkError_default", "setTypeInBlob", "file", "defaultOptions", "_getFetcher", "_XHRUpload_instances", "uploadLocalFile_fn", "uploadBundle_fn", "getCompanionClientArgs_fn", "uploadFiles_fn", "_handleUpload", "XHRUpload", "BasePlugin", "uppy", "opts", "__privateAdd", "__publicField", "fileIDs", "internalRateLimitedQueue", "files", "filesFiltered", "filterFilesToUpload", "filesToEmit", "filterFilesToEmitUploadStarted", "__privateMethod", "locale_default", "RateLimitedQueue", "__privateSet", "url", "options", "res", "fetcher", "retryCount", "timeout", "seconds", "event", "id", "body", "cause", "uploadURL", "request", "overrides", "headers", "formData", "meta", "getAllowedMetaFields", "item", "value", "subItem", "formPost", "dataWithUpdatedType", "capabilities", "__privateGet", "events", "EventManager", "controller", "uppyFetch", "fetch", "endpoint", "optsFromState", "abort", "allowedMetaFields", "name", "getQueue", "removedHandler", "removedFile", "uploadPromise", "package_default", "package_default", "import_cropperjs", "getCanvasDataThatFitsPerfectlyIntoContainer", "containerData", "canvasData", "widthRatio", "heightRatio", "scaleFactor", "newWidth", "newHeight", "newLeft", "newTop", "getCanvasDataThatFitsPerfectlyIntoContainer_default", "toRadians", "angle", "getScaleFactorThatRemovesDarkCorners", "w", "h", "granularAngle", "\u03B1", "getScaleFactorThatRemovesDarkCorners_default", "limitCropboxMovementOnMove", "canvas", "cropbox", "prevCropbox", "limitCropboxMovementOnMove_default", "limitCropboxMovementOnResize", "canvas", "cropboxData", "prevCropbox", "limitCropboxMovementOnResize_default", "Editor", "x", "props", "__publicField", "angle90Deg", "newAngle", "canvasData", "containerData", "newCanvasData", "getCanvasDataThatFitsPerfectlyIntoContainer_default", "ev", "newGranularAngle", "image", "scaleFactor", "getScaleFactorThatRemovesDarkCorners_default", "scaleFactorX", "opts", "storeCropperInstance", "Cropper", "event", "cropboxData", "prevCropboxData", "newCropboxData", "limitCropboxMovementOnMove_default", "limitCropboxMovementOnResize_default", "i18n", "angleGranular", "u", "currentImage", "actions", "imageURL", "ref", "locale_default", "defaultCropperOptions", "defaultActions", "defaultOptions", "ImageEditor", "UIPlugin_default", "uppy", "opts", "__publicField", "saveBlobCallback", "blob", "currentImage", "updatedFile", "croppedCanvas", "cropper", "file", "locale_default", "fileTypeSpecific", "target", "u", "Editor", "package_default", "de_DE", "count", "de_DE_default", "ChunkUploader", "uppy", "opts", "fileIDs", "promises", "id", "fileID", "file", "chunkSize", "totalSize", "totalChunks", "fileId", "chunkIndex", "start", "end", "chunk", "result", "currentFile", "emitError", "error", "formData", "url", "response", "text", "resolve", "reject", "xhr", "e", "totalUploaded", "err", "data", "de_DE_default", "UppyCustomWidget", "inputElement", "options", "globalConfig", "name", "addBtn", "files", "emptyState", "filename", "fileId", "li", "index", "isImage", "thumbUrl", "previewHtml", "btn", "e", "action", "f", "direction", "newIndex", "config", "Uppy_default", "Dashboard", "ImageEditor", "Webcam", "tokenParam", "signatureParams", "signature", "allowedTypes", "maxFilesize", "ChunkUploader", "XHRUpload", "responseText", "response", "file", "responseData", "data", "fileID", "error", "metadata", "formData", "fields", "existingModal", "backdrop", "modal", "header", "body", "form", "titleGroup", "field", "group", "label", "values", "raw", "parsed", "item", "firstLang", "firstVal", "firstInputName", "firstInputHtml", "collapseBtn", "collapseContent", "lang", "val", "inputName", "langLabel", "inputHtml", "wrapper", "value", "opt", "footer", "close", "newMetadata", "titleInput", "inputs", "langData", "input", "clangId", "customWidgets"]
}
