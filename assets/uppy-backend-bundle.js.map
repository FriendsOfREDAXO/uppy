{
  "version": 3,
  "sources": ["../node_modules/@transloadit/prettier-bytes/src/prettierBytes.ts", "../node_modules/wildcard/index.js", "../node_modules/mime-match/index.js", "../node_modules/lodash/isObject.js", "../node_modules/lodash/_freeGlobal.js", "../node_modules/lodash/_root.js", "../node_modules/lodash/now.js", "../node_modules/lodash/_trimmedEndIndex.js", "../node_modules/lodash/_baseTrim.js", "../node_modules/lodash/_Symbol.js", "../node_modules/lodash/_getRawTag.js", "../node_modules/lodash/_objectToString.js", "../node_modules/lodash/_baseGetTag.js", "../node_modules/lodash/isObjectLike.js", "../node_modules/lodash/isSymbol.js", "../node_modules/lodash/toNumber.js", "../node_modules/lodash/debounce.js", "../node_modules/lodash/throttle.js", "../node_modules/namespace-emitter/index.js", "../node_modules/classnames/index.js", "../node_modules/eventemitter3/index.js", "../node_modules/is-mobile/index.js", "../node_modules/cropperjs/dist/cropper.js", "../node_modules/@uppy/utils/lib/canvasToBlob.js", "../node_modules/@uppy/utils/lib/dataURItoBlob.js", "../node_modules/@uppy/utils/lib/emaFilter.js", "../node_modules/@uppy/utils/lib/FOCUSABLE_ELEMENTS.js", "../node_modules/@uppy/utils/lib/NetworkError.js", "../node_modules/@uppy/utils/lib/ProgressTimeout.js", "../node_modules/@uppy/utils/lib/fetcher.js", "../node_modules/@uppy/utils/lib/fileFilters.js", "../node_modules/@uppy/utils/lib/isDOMElement.js", "../node_modules/@uppy/utils/lib/findAllDOMElements.js", "../node_modules/@uppy/utils/lib/findDOMElement.js", "../node_modules/@uppy/utils/lib/getFileNameAndExtension.js", "../node_modules/@uppy/utils/lib/mimeTypes.js", "../node_modules/@uppy/utils/lib/getFileType.js", "../node_modules/@uppy/utils/lib/generateFileID.js", "../node_modules/@uppy/utils/lib/getAllowedMetaFields.js", "../node_modules/@uppy/utils/lib/toArray.js", "../node_modules/@uppy/utils/lib/getDroppedFiles/utils/fallbackApi.js", "../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/getFilesAndDirectoriesFromDirectory.js", "../node_modules/@uppy/utils/lib/getDroppedFiles/utils/webkitGetAsEntryApi/index.js", "../node_modules/@uppy/utils/lib/getDroppedFiles/index.js", "../node_modules/@uppy/utils/lib/getFileTypeExtension.js", "../node_modules/@uppy/utils/lib/getTextDirection.js", "../node_modules/@uppy/utils/lib/getTimeStamp.js", "../node_modules/@uppy/utils/lib/isDragDropSupported.js", "../node_modules/@uppy/utils/lib/isNetworkError.js", "../node_modules/@uppy/utils/lib/isObjectURL.js", "../node_modules/@uppy/utils/lib/isPreviewSupported.js", "../node_modules/@uppy/utils/lib/secondsToTime.js", "../node_modules/@uppy/utils/lib/prettyETA.js", "../node_modules/@uppy/utils/lib/RateLimitedQueue.js", "../node_modules/@uppy/utils/lib/remoteFileObjToLocal.js", "../node_modules/@uppy/utils/lib/Translator.js", "../node_modules/@uppy/utils/lib/truncateString.js", "../node_modules/preact/src/constants.js", "../node_modules/preact/src/util.js", "../node_modules/preact/src/options.js", "../node_modules/preact/src/create-element.js", "../node_modules/preact/src/component.js", "../node_modules/preact/src/diff/props.js", "../node_modules/preact/src/create-context.js", "../node_modules/preact/src/diff/children.js", "../node_modules/preact/src/diff/index.js", "../node_modules/preact/src/render.js", "../node_modules/preact/src/clone-element.js", "../node_modules/preact/src/diff/catch-error.js", "../node_modules/preact/jsx-runtime/src/utils.js", "../node_modules/preact/src/constants.js", "../node_modules/preact/jsx-runtime/src/index.js", "../node_modules/preact/hooks/src/index.js", "../node_modules/@uppy/utils/lib/VirtualList.js", "../node_modules/@uppy/core/lib/BasePlugin.js", "../node_modules/@uppy/core/lib/EventManager.js", "../node_modules/@uppy/core/lib/loggers.js", "../node_modules/@uppy/core/lib/Restricter.js", "../node_modules/@uppy/core/lib/UIPlugin.js", "../node_modules/@uppy/store-default/package.json", "../node_modules/@uppy/store-default/lib/index.js", "../node_modules/@uppy/core/lib/Uppy.js", "../node_modules/nanoid/non-secure/index.js", "../node_modules/@uppy/core/package.json", "../node_modules/@uppy/core/lib/getFileName.js", "../node_modules/@uppy/core/lib/locale.js", "../node_modules/@uppy/core/lib/supportsUploadProgress.js", "../node_modules/@uppy/provider-views/lib/useSearchForm.js", "../node_modules/@uppy/provider-views/lib/FilterInput.js", "../node_modules/@uppy/provider-views/lib/ProviderView/AuthView.js", "../node_modules/@uppy/provider-views/lib/ProviderView/ProviderView.js", "../node_modules/@uppy/provider-views/package.json", "../node_modules/@uppy/provider-views/lib/Item/index.js", "../node_modules/@uppy/provider-views/lib/Item/components/ItemIcon.js", "../node_modules/@uppy/provider-views/lib/Item/components/GridItem.js", "../node_modules/@uppy/provider-views/lib/Item/components/ListItem.js", "../node_modules/@uppy/provider-views/lib/Browser.js", "../node_modules/@uppy/provider-views/lib/FooterActions.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getNumberOfSelectedFiles.js", "../node_modules/@uppy/provider-views/lib/utils/companionFileToUppyFile.js", "../node_modules/@uppy/provider-views/lib/utils/addFiles.js", "../node_modules/@uppy/provider-views/lib/utils/getClickedRange.js", "../node_modules/@uppy/provider-views/lib/utils/handleError.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getBreadcrumbs.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/getCheckedFilesWithPaths.js", "../node_modules/eventemitter3/index.mjs", "../node_modules/p-timeout/index.js", "../node_modules/p-queue/dist/lower-bound.js", "../node_modules/p-queue/dist/priority-queue.js", "../node_modules/p-queue/dist/index.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/shallowClone.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterFill.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterOpenFolder.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterScrollFolder.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/afterToggleCheckbox.js", "../node_modules/@uppy/provider-views/lib/utils/PartialTreeUtils/index.js", "../node_modules/@uppy/provider-views/lib/utils/shouldHandleScroll.js", "../node_modules/@uppy/provider-views/lib/Item/components/SearchResultItem.js", "../node_modules/@uppy/provider-views/lib/ProviderView/GlobalSearchView.js", "../node_modules/@uppy/provider-views/lib/ProviderView/Header.js", "../node_modules/@uppy/provider-views/lib/Breadcrumbs.js", "../node_modules/@uppy/provider-views/lib/ProviderView/User.js", "../node_modules/exifr/dist/mini.esm.mjs", "../node_modules/@uppy/thumbnail-generator/package.json", "../node_modules/@uppy/thumbnail-generator/lib/locale.js", "../node_modules/@uppy/thumbnail-generator/lib/index.js", "../node_modules/@uppy/dashboard/package.json", "../node_modules/@uppy/dashboard/lib/components/Dashboard.js", "../node_modules/@uppy/dashboard/lib/components/AddFiles.js", "../node_modules/@uppy/dashboard/lib/components/AddFilesPanel.js", "../node_modules/@uppy/dashboard/lib/components/EditorPanel.js", "../node_modules/@uppy/dashboard/lib/components/FileCard/index.js", "../node_modules/@uppy/dashboard/lib/utils/getFileTypeIcon.js", "../node_modules/@uppy/dashboard/lib/utils/ignoreEvent.js", "../node_modules/@uppy/dashboard/lib/components/FilePreview.js", "../node_modules/@uppy/dashboard/lib/components/FileCard/RenderMetaFields.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/index.js", "../node_modules/shallow-equal/src/arrays.ts", "../node_modules/shallow-equal/src/objects.ts", "../node_modules/shallow-equal/src/index.ts", "../node_modules/@uppy/dashboard/lib/utils/copyToClipboard.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/Buttons/index.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/FileInfo/index.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/MetaErrorMessage.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/FilePreviewAndLink/index.js", "../node_modules/@uppy/dashboard/lib/components/FileItem/FileProgress/index.js", "../node_modules/@uppy/dashboard/lib/components/FileList.js", "../node_modules/@uppy/dashboard/lib/components/Informer/FadeIn.js", "../node_modules/@uppy/dashboard/lib/components/Informer/TransitionGroup.js", "../node_modules/@uppy/dashboard/lib/components/Informer/Informer.js", "../node_modules/@uppy/dashboard/lib/components/PickerPanelContent.js", "../node_modules/@uppy/dashboard/lib/components/PickerPanelTopBar.js", "../node_modules/@uppy/dashboard/lib/components/Slide.js", "../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBarStates.js", "../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBarUI.js", "../node_modules/@uppy/dashboard/lib/components/StatusBar/Components.js", "../node_modules/@uppy/dashboard/lib/components/StatusBar/calculateProcessingProgress.js", "../node_modules/@uppy/dashboard/lib/components/StatusBar/StatusBar.js", "../node_modules/@uppy/dashboard/lib/locale.js", "../node_modules/@uppy/dashboard/lib/utils/createSuperFocus.js", "../node_modules/@uppy/dashboard/lib/utils/getActiveOverlayEl.js", "../node_modules/@uppy/dashboard/lib/utils/trapFocus.js", "../node_modules/@uppy/dashboard/lib/Dashboard.js", "../node_modules/@uppy/webcam/lib/Webcam.js", "../node_modules/@uppy/webcam/package.json", "../node_modules/@uppy/webcam/lib/CameraIcon.js", "../node_modules/@uppy/webcam/lib/DiscardButton.js", "../node_modules/@uppy/webcam/lib/RecordButton.js", "../node_modules/@uppy/webcam/lib/formatSeconds.js", "../node_modules/@uppy/webcam/lib/RecordingLength.js", "../node_modules/@uppy/webcam/lib/SnapshotButton.js", "../node_modules/@uppy/webcam/lib/SubmitButton.js", "../node_modules/@uppy/webcam/lib/VideoSourceSelect.js", "../node_modules/@uppy/webcam/lib/CameraScreen.js", "../node_modules/@uppy/webcam/lib/locale.js", "../node_modules/@uppy/webcam/lib/PermissionsScreen.js", "../node_modules/@uppy/webcam/lib/supportsMediaRecorder.js", "../node_modules/@uppy/xhr-upload/package.json", "../node_modules/@uppy/xhr-upload/lib/locale.js", "../node_modules/@uppy/xhr-upload/lib/index.js", "../node_modules/@uppy/image-editor/package.json", "../node_modules/@uppy/image-editor/lib/Editor.js", "../node_modules/@uppy/image-editor/lib/utils/getCanvasDataThatFitsPerfectlyIntoContainer.js", "../node_modules/@uppy/image-editor/lib/utils/getScaleFactorThatRemovesDarkCorners.js", "../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnMove.js", "../node_modules/@uppy/image-editor/lib/utils/limitCropboxMovementOnResize.js", "../node_modules/@uppy/image-editor/lib/locale.js", "../node_modules/@uppy/image-editor/lib/ImageEditor.js", "../node_modules/@uppy/locales/lib/de_DE.js", "../src/uppy-backend.js"],
  "sourcesContent": ["// Adapted from https://github.com/Flet/prettier-bytes/\n// Changing 1000 bytes to 1024, so we can keep uppercase KB vs kB\n// ISC License (c) Dan Flettre https://github.com/Flet/prettier-bytes/blob/master/LICENSE\nexport = function prettierBytes(input: number): string {\n  if (typeof input !== 'number' || Number.isNaN(input)) {\n    throw new TypeError(`Expected a number, got ${typeof input}`)\n  }\n\n  const neg = input < 0\n  let num = Math.abs(input)\n\n  if (neg) {\n    num = -num\n  }\n\n  if (num === 0) {\n    return '0 B'\n  }\n\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB']\n  const exponent = Math.min(Math.floor(Math.log(num) / Math.log(1024)), units.length - 1)\n  const value = Number(num / 1024 ** exponent)\n  const unit = units[exponent]\n\n  return `${value >= 10 || value % 1 === 0 ? Math.round(value) : value.toFixed(1)} ${unit}`\n}\n", "/* jshint node: true */\n'use strict';\n\n/**\n  # wildcard\n\n  Very simple wildcard matching, which is designed to provide the same\n  functionality that is found in the\n  [eve](https://github.com/adobe-webplatform/eve) eventing library.\n\n  ## Usage\n\n  It works with strings:\n\n  <<< examples/strings.js\n\n  Arrays:\n\n  <<< examples/arrays.js\n\n  Objects (matching against keys):\n\n  <<< examples/objects.js\n\n  While the library works in Node, if you are are looking for file-based\n  wildcard matching then you should have a look at:\n\n  <https://github.com/isaacs/node-glob>\n**/\n\nfunction WildcardMatcher(text, separator) {\n  this.text = text = text || '';\n  this.hasWild = ~text.indexOf('*');\n  this.separator = separator;\n  this.parts = text.split(separator);\n}\n\nWildcardMatcher.prototype.match = function(input) {\n  var matches = true;\n  var parts = this.parts;\n  var ii;\n  var partsCount = parts.length;\n  var testParts;\n\n  if (typeof input == 'string' || input instanceof String) {\n    if (!this.hasWild && this.text != input) {\n      matches = false;\n    } else {\n      testParts = (input || '').split(this.separator);\n      for (ii = 0; matches && ii < partsCount; ii++) {\n        if (parts[ii] === '*')  {\n          continue;\n        } else if (ii < testParts.length) {\n          matches = parts[ii] === testParts[ii];\n        } else {\n          matches = false;\n        }\n      }\n\n      // If matches, then return the component parts\n      matches = matches && testParts;\n    }\n  }\n  else if (typeof input.splice == 'function') {\n    matches = [];\n\n    for (ii = input.length; ii--; ) {\n      if (this.match(input[ii])) {\n        matches[matches.length] = input[ii];\n      }\n    }\n  }\n  else if (typeof input == 'object') {\n    matches = {};\n\n    for (var key in input) {\n      if (this.match(key)) {\n        matches[key] = input[key];\n      }\n    }\n  }\n\n  return matches;\n};\n\nmodule.exports = function(text, test, separator) {\n  var matcher = new WildcardMatcher(text, separator || /[\\/\\.]/);\n  if (typeof test != 'undefined') {\n    return matcher.match(test);\n  }\n\n  return matcher;\n};\n", "var wildcard = require('wildcard');\nvar reMimePartSplit = /[\\/\\+\\.]/;\n\n/**\n  # mime-match\n\n  A simple function to checker whether a target mime type matches a mime-type\n  pattern (e.g. image/jpeg matches image/jpeg OR image/*).\n\n  ## Example Usage\n\n  <<< example.js\n\n**/\nmodule.exports = function(target, pattern) {\n  function test(pattern) {\n    var result = wildcard(pattern, target, reMimePartSplit);\n\n    // ensure that we have a valid mime type (should have two parts)\n    return result && result.length >= 2;\n  }\n\n  return pattern ? test(pattern.split(';')[0]) : test;\n};\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n", "var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n", "var root = require('./_root');\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nmodule.exports = now;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nmodule.exports = trimmedEndIndex;\n", "var trimmedEndIndex = require('./_trimmedEndIndex');\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nmodule.exports = baseTrim;\n", "var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n", "var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n", "var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n", "var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n", "var baseTrim = require('./_baseTrim'),\n    isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n", "var isObject = require('./isObject'),\n    now = require('./now'),\n    toNumber = require('./toNumber');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nmodule.exports = debounce;\n", "var debounce = require('./debounce'),\n    isObject = require('./isObject');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\nmodule.exports = throttle;\n", "/**\n* Create an event emitter with namespaces\n* @name createNamespaceEmitter\n* @example\n* var emitter = require('./index')()\n*\n* emitter.on('*', function () {\n*   console.log('all events emitted', this.event)\n* })\n*\n* emitter.on('example', function () {\n*   console.log('example event emitted')\n* })\n*/\nmodule.exports = function createNamespaceEmitter () {\n  var emitter = {}\n  var _fns = emitter._fns = {}\n\n  /**\n  * Emit an event. Optionally namespace the event. Handlers are fired in the order in which they were added with exact matches taking precedence. Separate the namespace and event with a `:`\n  * @name emit\n  * @param {String} event \u2013 the name of the event, with optional namespace\n  * @param {...*} data \u2013 up to 6 arguments that are passed to the event listener\n  * @example\n  * emitter.emit('example')\n  * emitter.emit('demo:test')\n  * emitter.emit('data', { example: true}, 'a string', 1)\n  */\n  emitter.emit = function emit (event, arg1, arg2, arg3, arg4, arg5, arg6) {\n    var toEmit = getListeners(event)\n\n    if (toEmit.length) {\n      emitAll(event, toEmit, [arg1, arg2, arg3, arg4, arg5, arg6])\n    }\n  }\n\n  /**\n  * Create en event listener.\n  * @name on\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.on('example', function () {})\n  * emitter.on('demo', function () {})\n  */\n  emitter.on = function on (event, fn) {\n    if (!_fns[event]) {\n      _fns[event] = []\n    }\n\n    _fns[event].push(fn)\n  }\n\n  /**\n  * Create en event listener that fires once.\n  * @name once\n  * @param {String} event\n  * @param {Function} fn\n  * @example\n  * emitter.once('example', function () {})\n  * emitter.once('demo', function () {})\n  */\n  emitter.once = function once (event, fn) {\n    function one () {\n      fn.apply(this, arguments)\n      emitter.off(event, one)\n    }\n    this.on(event, one)\n  }\n\n  /**\n  * Stop listening to an event. Stop all listeners on an event by only passing the event name. Stop a single listener by passing that event handler as a callback.\n  * You must be explicit about what will be unsubscribed: `emitter.off('demo')` will unsubscribe an `emitter.on('demo')` listener,\n  * `emitter.off('demo:example')` will unsubscribe an `emitter.on('demo:example')` listener\n  * @name off\n  * @param {String} event\n  * @param {Function} [fn] \u2013 the specific handler\n  * @example\n  * emitter.off('example')\n  * emitter.off('demo', function () {})\n  */\n  emitter.off = function off (event, fn) {\n    var keep = []\n\n    if (event && fn) {\n      var fns = this._fns[event]\n      var i = 0\n      var l = fns ? fns.length : 0\n\n      for (i; i < l; i++) {\n        if (fns[i] !== fn) {\n          keep.push(fns[i])\n        }\n      }\n    }\n\n    keep.length ? this._fns[event] = keep : delete this._fns[event]\n  }\n\n  function getListeners (e) {\n    var out = _fns[e] ? _fns[e] : []\n    var idx = e.indexOf(':')\n    var args = (idx === -1) ? [e] : [e.substring(0, idx), e.substring(idx + 1)]\n\n    var keys = Object.keys(_fns)\n    var i = 0\n    var l = keys.length\n\n    for (i; i < l; i++) {\n      var key = keys[i]\n      if (key === '*') {\n        out = out.concat(_fns[key])\n      }\n\n      if (args.length === 2 && args[0] === key) {\n        out = out.concat(_fns[key])\n        break\n      }\n    }\n\n    return out\n  }\n\n  function emitAll (e, fns, args) {\n    var i = 0\n    var l = fns.length\n\n    for (i; i < l; i++) {\n      if (!fns[i]) break\n      fns[i].event = e\n      fns[i].apply(fns[i], args)\n    }\n  }\n\n  return emitter\n}\n", "/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = '';\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (arg) {\n\t\t\t\tclasses = appendClass(classes, parseValue(arg));\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction parseValue (arg) {\n\t\tif (typeof arg === 'string' || typeof arg === 'number') {\n\t\t\treturn arg;\n\t\t}\n\n\t\tif (typeof arg !== 'object') {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn classNames.apply(null, arg);\n\t\t}\n\n\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\treturn arg.toString();\n\t\t}\n\n\t\tvar classes = '';\n\n\t\tfor (var key in arg) {\n\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\tclasses = appendClass(classes, key);\n\t\t\t}\n\t\t}\n\n\t\treturn classes;\n\t}\n\n\tfunction appendClass (value, newClass) {\n\t\tif (!newClass) {\n\t\t\treturn value;\n\t\t}\n\t\n\t\tif (value) {\n\t\t\treturn value + ' ' + newClass;\n\t\t}\n\t\n\t\treturn value + newClass;\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n", "'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n", "'use strict'\n\nmodule.exports = isMobile\nmodule.exports.isMobile = isMobile\nmodule.exports.default = isMobile\n\nconst mobileRE = /(android|bb\\d+|meego).+mobile|armv7l|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series[46]0|samsungbrowser.*mobile|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i\nconst notMobileRE = /CrOS/\n\nconst tabletRE = /android|ipad|playbook|silk/i\n\nfunction isMobile (opts) {\n  if (!opts) opts = {}\n  let ua = opts.ua\n  if (!ua && typeof navigator !== 'undefined') ua = navigator.userAgent\n  if (ua && ua.headers && typeof ua.headers['user-agent'] === 'string') {\n    ua = ua.headers['user-agent']\n  }\n  if (typeof ua !== 'string') return false\n\n  let result =\n    (mobileRE.test(ua) && !notMobileRE.test(ua)) ||\n    (!!opts.tablet && tabletRE.test(ua))\n\n  if (\n    !result &&\n    opts.tablet &&\n    opts.featureDetect &&\n    navigator &&\n    navigator.maxTouchPoints > 1 &&\n    ua.indexOf('Macintosh') !== -1 &&\n    ua.indexOf('Safari') !== -1\n  ) {\n    result = true\n  }\n\n  return result\n}\n", "/*!\n * Cropper.js v1.6.2\n * https://fengyuanchen.github.io/cropperjs\n *\n * Copyright 2015-present Chen Fengyuan\n * Released under the MIT license\n *\n * Date: 2024-04-21T07:43:05.335Z\n */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.Cropper = factory());\n})(this, (function () { 'use strict';\n\n  function ownKeys(e, r) {\n    var t = Object.keys(e);\n    if (Object.getOwnPropertySymbols) {\n      var o = Object.getOwnPropertySymbols(e);\n      r && (o = o.filter(function (r) {\n        return Object.getOwnPropertyDescriptor(e, r).enumerable;\n      })), t.push.apply(t, o);\n    }\n    return t;\n  }\n  function _objectSpread2(e) {\n    for (var r = 1; r < arguments.length; r++) {\n      var t = null != arguments[r] ? arguments[r] : {};\n      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {\n        _defineProperty(e, r, t[r]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {\n        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));\n      });\n    }\n    return e;\n  }\n  function _toPrimitive(t, r) {\n    if (\"object\" != typeof t || !t) return t;\n    var e = t[Symbol.toPrimitive];\n    if (void 0 !== e) {\n      var i = e.call(t, r || \"default\");\n      if (\"object\" != typeof i) return i;\n      throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n    }\n    return (\"string\" === r ? String : Number)(t);\n  }\n  function _toPropertyKey(t) {\n    var i = _toPrimitive(t, \"string\");\n    return \"symbol\" == typeof i ? i : i + \"\";\n  }\n  function _typeof(o) {\n    \"@babel/helpers - typeof\";\n\n    return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n      return typeof o;\n    } : function (o) {\n      return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n    }, _typeof(o);\n  }\n  function _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n      throw new TypeError(\"Cannot call a class as a function\");\n    }\n  }\n  function _defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n    }\n  }\n  function _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    Object.defineProperty(Constructor, \"prototype\", {\n      writable: false\n    });\n    return Constructor;\n  }\n  function _defineProperty(obj, key, value) {\n    key = _toPropertyKey(key);\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n    return obj;\n  }\n  function _toConsumableArray(arr) {\n    return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n  }\n  function _arrayWithoutHoles(arr) {\n    if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n  }\n  function _iterableToArray(iter) {\n    if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n  }\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n    return arr2;\n  }\n  function _nonIterableSpread() {\n    throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  var WINDOW = IS_BROWSER ? window : {};\n  var IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\n  var HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\n  var NAMESPACE = 'cropper';\n\n  // Actions\n  var ACTION_ALL = 'all';\n  var ACTION_CROP = 'crop';\n  var ACTION_MOVE = 'move';\n  var ACTION_ZOOM = 'zoom';\n  var ACTION_EAST = 'e';\n  var ACTION_WEST = 'w';\n  var ACTION_SOUTH = 's';\n  var ACTION_NORTH = 'n';\n  var ACTION_NORTH_EAST = 'ne';\n  var ACTION_NORTH_WEST = 'nw';\n  var ACTION_SOUTH_EAST = 'se';\n  var ACTION_SOUTH_WEST = 'sw';\n\n  // Classes\n  var CLASS_CROP = \"\".concat(NAMESPACE, \"-crop\");\n  var CLASS_DISABLED = \"\".concat(NAMESPACE, \"-disabled\");\n  var CLASS_HIDDEN = \"\".concat(NAMESPACE, \"-hidden\");\n  var CLASS_HIDE = \"\".concat(NAMESPACE, \"-hide\");\n  var CLASS_INVISIBLE = \"\".concat(NAMESPACE, \"-invisible\");\n  var CLASS_MODAL = \"\".concat(NAMESPACE, \"-modal\");\n  var CLASS_MOVE = \"\".concat(NAMESPACE, \"-move\");\n\n  // Data keys\n  var DATA_ACTION = \"\".concat(NAMESPACE, \"Action\");\n  var DATA_PREVIEW = \"\".concat(NAMESPACE, \"Preview\");\n\n  // Drag modes\n  var DRAG_MODE_CROP = 'crop';\n  var DRAG_MODE_MOVE = 'move';\n  var DRAG_MODE_NONE = 'none';\n\n  // Events\n  var EVENT_CROP = 'crop';\n  var EVENT_CROP_END = 'cropend';\n  var EVENT_CROP_MOVE = 'cropmove';\n  var EVENT_CROP_START = 'cropstart';\n  var EVENT_DBLCLICK = 'dblclick';\n  var EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\n  var EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\n  var EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\n  var EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\n  var EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\n  var EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\n  var EVENT_READY = 'ready';\n  var EVENT_RESIZE = 'resize';\n  var EVENT_WHEEL = 'wheel';\n  var EVENT_ZOOM = 'zoom';\n\n  // Mime types\n  var MIME_TYPE_JPEG = 'image/jpeg';\n\n  // RegExps\n  var REGEXP_ACTIONS = /^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/;\n  var REGEXP_DATA_URL = /^data:/;\n  var REGEXP_DATA_URL_JPEG = /^data:image\\/jpeg;base64,/;\n  var REGEXP_TAG_NAME = /^img|canvas$/i;\n\n  // Misc\n  // Inspired by the default width and height of a canvas element.\n  var MIN_CONTAINER_WIDTH = 200;\n  var MIN_CONTAINER_HEIGHT = 100;\n\n  var DEFAULTS = {\n    // Define the view mode of the cropper\n    viewMode: 0,\n    // 0, 1, 2, 3\n\n    // Define the dragging mode of the cropper\n    dragMode: DRAG_MODE_CROP,\n    // 'crop', 'move' or 'none'\n\n    // Define the initial aspect ratio of the crop box\n    initialAspectRatio: NaN,\n    // Define the aspect ratio of the crop box\n    aspectRatio: NaN,\n    // An object with the previous cropping result data\n    data: null,\n    // A selector for adding extra containers to preview\n    preview: '',\n    // Re-render the cropper when resize the window\n    responsive: true,\n    // Restore the cropped area after resize the window\n    restore: true,\n    // Check if the current image is a cross-origin image\n    checkCrossOrigin: true,\n    // Check the current image's Exif Orientation information\n    checkOrientation: true,\n    // Show the black modal\n    modal: true,\n    // Show the dashed lines for guiding\n    guides: true,\n    // Show the center indicator for guiding\n    center: true,\n    // Show the white modal to highlight the crop box\n    highlight: true,\n    // Show the grid background\n    background: true,\n    // Enable to crop the image automatically when initialize\n    autoCrop: true,\n    // Define the percentage of automatic cropping area when initializes\n    autoCropArea: 0.8,\n    // Enable to move the image\n    movable: true,\n    // Enable to rotate the image\n    rotatable: true,\n    // Enable to scale the image\n    scalable: true,\n    // Enable to zoom the image\n    zoomable: true,\n    // Enable to zoom the image by dragging touch\n    zoomOnTouch: true,\n    // Enable to zoom the image by wheeling mouse\n    zoomOnWheel: true,\n    // Define zoom ratio when zoom the image by wheeling mouse\n    wheelZoomRatio: 0.1,\n    // Enable to move the crop box\n    cropBoxMovable: true,\n    // Enable to resize the crop box\n    cropBoxResizable: true,\n    // Toggle drag mode between \"crop\" and \"move\" when click twice on the cropper\n    toggleDragModeOnDblclick: true,\n    // Size limitation\n    minCanvasWidth: 0,\n    minCanvasHeight: 0,\n    minCropBoxWidth: 0,\n    minCropBoxHeight: 0,\n    minContainerWidth: MIN_CONTAINER_WIDTH,\n    minContainerHeight: MIN_CONTAINER_HEIGHT,\n    // Shortcuts of events\n    ready: null,\n    cropstart: null,\n    cropmove: null,\n    cropend: null,\n    crop: null,\n    zoom: null\n  };\n\n  var TEMPLATE = '<div class=\"cropper-container\" touch-action=\"none\">' + '<div class=\"cropper-wrap-box\">' + '<div class=\"cropper-canvas\"></div>' + '</div>' + '<div class=\"cropper-drag-box\"></div>' + '<div class=\"cropper-crop-box\">' + '<span class=\"cropper-view-box\"></span>' + '<span class=\"cropper-dashed dashed-h\"></span>' + '<span class=\"cropper-dashed dashed-v\"></span>' + '<span class=\"cropper-center\"></span>' + '<span class=\"cropper-face\"></span>' + '<span class=\"cropper-line line-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-line line-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-line line-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-line line-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-e\" data-cropper-action=\"e\"></span>' + '<span class=\"cropper-point point-n\" data-cropper-action=\"n\"></span>' + '<span class=\"cropper-point point-w\" data-cropper-action=\"w\"></span>' + '<span class=\"cropper-point point-s\" data-cropper-action=\"s\"></span>' + '<span class=\"cropper-point point-ne\" data-cropper-action=\"ne\"></span>' + '<span class=\"cropper-point point-nw\" data-cropper-action=\"nw\"></span>' + '<span class=\"cropper-point point-sw\" data-cropper-action=\"sw\"></span>' + '<span class=\"cropper-point point-se\" data-cropper-action=\"se\"></span>' + '</div>' + '</div>';\n\n  /**\n   * Check if the given value is not a number.\n   */\n  var isNaN = Number.isNaN || WINDOW.isNaN;\n\n  /**\n   * Check if the given value is a number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n   */\n  function isNumber(value) {\n    return typeof value === 'number' && !isNaN(value);\n  }\n\n  /**\n   * Check if the given value is a positive number.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a positive number, else `false`.\n   */\n  var isPositiveNumber = function isPositiveNumber(value) {\n    return value > 0 && value < Infinity;\n  };\n\n  /**\n   * Check if the given value is undefined.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n   */\n  function isUndefined(value) {\n    return typeof value === 'undefined';\n  }\n\n  /**\n   * Check if the given value is an object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n   */\n  function isObject(value) {\n    return _typeof(value) === 'object' && value !== null;\n  }\n  var hasOwnProperty = Object.prototype.hasOwnProperty;\n\n  /**\n   * Check if the given value is a plain object.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n   */\n  function isPlainObject(value) {\n    if (!isObject(value)) {\n      return false;\n    }\n    try {\n      var _constructor = value.constructor;\n      var prototype = _constructor.prototype;\n      return _constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n    } catch (error) {\n      return false;\n    }\n  }\n\n  /**\n   * Check if the given value is a function.\n   * @param {*} value - The value to check.\n   * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n   */\n  function isFunction(value) {\n    return typeof value === 'function';\n  }\n  var slice = Array.prototype.slice;\n\n  /**\n   * Convert array-like or iterable object to an array.\n   * @param {*} value - The value to convert.\n   * @returns {Array} Returns a new array.\n   */\n  function toArray(value) {\n    return Array.from ? Array.from(value) : slice.call(value);\n  }\n\n  /**\n   * Iterate the given data.\n   * @param {*} data - The data to iterate.\n   * @param {Function} callback - The process function for each element.\n   * @returns {*} The original data.\n   */\n  function forEach(data, callback) {\n    if (data && isFunction(callback)) {\n      if (Array.isArray(data) || isNumber(data.length) /* array-like */) {\n        toArray(data).forEach(function (value, key) {\n          callback.call(data, value, key, data);\n        });\n      } else if (isObject(data)) {\n        Object.keys(data).forEach(function (key) {\n          callback.call(data, data[key], key, data);\n        });\n      }\n    }\n    return data;\n  }\n\n  /**\n   * Extend the given object.\n   * @param {*} target - The target object to extend.\n   * @param {*} args - The rest objects for merging to the target object.\n   * @returns {Object} The extended object.\n   */\n  var assign = Object.assign || function assign(target) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    if (isObject(target) && args.length > 0) {\n      args.forEach(function (arg) {\n        if (isObject(arg)) {\n          Object.keys(arg).forEach(function (key) {\n            target[key] = arg[key];\n          });\n        }\n      });\n    }\n    return target;\n  };\n  var REGEXP_DECIMALS = /\\.\\d*(?:0|9){12}\\d*$/;\n\n  /**\n   * Normalize decimal number.\n   * Check out {@link https://0.30000000000000004.com/}\n   * @param {number} value - The value to normalize.\n   * @param {number} [times=100000000000] - The times for normalizing.\n   * @returns {number} Returns the normalized number.\n   */\n  function normalizeDecimalNumber(value) {\n    var times = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 100000000000;\n    return REGEXP_DECIMALS.test(value) ? Math.round(value * times) / times : value;\n  }\n  var REGEXP_SUFFIX = /^width|height|left|top|marginLeft|marginTop$/;\n\n  /**\n   * Apply styles to the given element.\n   * @param {Element} element - The target element.\n   * @param {Object} styles - The styles for applying.\n   */\n  function setStyle(element, styles) {\n    var style = element.style;\n    forEach(styles, function (value, property) {\n      if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n        value = \"\".concat(value, \"px\");\n      }\n      style[property] = value;\n    });\n  }\n\n  /**\n   * Check if the given element has a special class.\n   * @param {Element} element - The element to check.\n   * @param {string} value - The class to search.\n   * @returns {boolean} Returns `true` if the special class was found.\n   */\n  function hasClass(element, value) {\n    return element.classList ? element.classList.contains(value) : element.className.indexOf(value) > -1;\n  }\n\n  /**\n   * Add classes to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be added.\n   */\n  function addClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        addClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.add(value);\n      return;\n    }\n    var className = element.className.trim();\n    if (!className) {\n      element.className = value;\n    } else if (className.indexOf(value) < 0) {\n      element.className = \"\".concat(className, \" \").concat(value);\n    }\n  }\n\n  /**\n   * Remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be removed.\n   */\n  function removeClass(element, value) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        removeClass(elem, value);\n      });\n      return;\n    }\n    if (element.classList) {\n      element.classList.remove(value);\n      return;\n    }\n    if (element.className.indexOf(value) >= 0) {\n      element.className = element.className.replace(value, '');\n    }\n  }\n\n  /**\n   * Add or remove classes from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} value - The classes to be toggled.\n   * @param {boolean} added - Add only.\n   */\n  function toggleClass(element, value, added) {\n    if (!value) {\n      return;\n    }\n    if (isNumber(element.length)) {\n      forEach(element, function (elem) {\n        toggleClass(elem, value, added);\n      });\n      return;\n    }\n\n    // IE10-11 doesn't support the second parameter of `classList.toggle`\n    if (added) {\n      addClass(element, value);\n    } else {\n      removeClass(element, value);\n    }\n  }\n  var REGEXP_CAMEL_CASE = /([a-z\\d])([A-Z])/g;\n\n  /**\n   * Transform the given string from camelCase to kebab-case\n   * @param {string} value - The value to transform.\n   * @returns {string} The transformed value.\n   */\n  function toParamCase(value) {\n    return value.replace(REGEXP_CAMEL_CASE, '$1-$2').toLowerCase();\n  }\n\n  /**\n   * Get data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to get.\n   * @returns {string} The data value.\n   */\n  function getData(element, name) {\n    if (isObject(element[name])) {\n      return element[name];\n    }\n    if (element.dataset) {\n      return element.dataset[name];\n    }\n    return element.getAttribute(\"data-\".concat(toParamCase(name)));\n  }\n\n  /**\n   * Set data to the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to set.\n   * @param {string} data - The data value.\n   */\n  function setData(element, name, data) {\n    if (isObject(data)) {\n      element[name] = data;\n    } else if (element.dataset) {\n      element.dataset[name] = data;\n    } else {\n      element.setAttribute(\"data-\".concat(toParamCase(name)), data);\n    }\n  }\n\n  /**\n   * Remove data from the given element.\n   * @param {Element} element - The target element.\n   * @param {string} name - The data key to remove.\n   */\n  function removeData(element, name) {\n    if (isObject(element[name])) {\n      try {\n        delete element[name];\n      } catch (error) {\n        element[name] = undefined;\n      }\n    } else if (element.dataset) {\n      // #128 Safari not allows to delete dataset property\n      try {\n        delete element.dataset[name];\n      } catch (error) {\n        element.dataset[name] = undefined;\n      }\n    } else {\n      element.removeAttribute(\"data-\".concat(toParamCase(name)));\n    }\n  }\n  var REGEXP_SPACES = /\\s\\s*/;\n  var onceSupported = function () {\n    var supported = false;\n    if (IS_BROWSER) {\n      var once = false;\n      var listener = function listener() {};\n      var options = Object.defineProperty({}, 'once', {\n        get: function get() {\n          supported = true;\n          return once;\n        },\n        /**\n         * This setter can fix a `TypeError` in strict mode\n         * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n         * @param {boolean} value - The value to set\n         */\n        set: function set(value) {\n          once = value;\n        }\n      });\n      WINDOW.addEventListener('test', listener, options);\n      WINDOW.removeEventListener('test', listener, options);\n    }\n    return supported;\n  }();\n\n  /**\n   * Remove event listener from the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function removeListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (!onceSupported) {\n        var listeners = element.listeners;\n        if (listeners && listeners[event] && listeners[event][listener]) {\n          handler = listeners[event][listener];\n          delete listeners[event][listener];\n          if (Object.keys(listeners[event]).length === 0) {\n            delete listeners[event];\n          }\n          if (Object.keys(listeners).length === 0) {\n            delete element.listeners;\n          }\n        }\n      }\n      element.removeEventListener(event, handler, options);\n    });\n  }\n\n  /**\n   * Add event listener to the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Function} listener - The event listener.\n   * @param {Object} options - The event options.\n   */\n  function addListener(element, type, listener) {\n    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n    var _handler = listener;\n    type.trim().split(REGEXP_SPACES).forEach(function (event) {\n      if (options.once && !onceSupported) {\n        var _element$listeners = element.listeners,\n          listeners = _element$listeners === void 0 ? {} : _element$listeners;\n        _handler = function handler() {\n          delete listeners[event][listener];\n          element.removeEventListener(event, _handler, options);\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          listener.apply(element, args);\n        };\n        if (!listeners[event]) {\n          listeners[event] = {};\n        }\n        if (listeners[event][listener]) {\n          element.removeEventListener(event, listeners[event][listener], options);\n        }\n        listeners[event][listener] = _handler;\n        element.listeners = listeners;\n      }\n      element.addEventListener(event, _handler, options);\n    });\n  }\n\n  /**\n   * Dispatch event on the target element.\n   * @param {Element} element - The event target.\n   * @param {string} type - The event type(s).\n   * @param {Object} data - The additional event data.\n   * @returns {boolean} Indicate if the event is default prevented or not.\n   */\n  function dispatchEvent(element, type, data) {\n    var event;\n\n    // Event and CustomEvent on IE9-11 are global objects, not constructors\n    if (isFunction(Event) && isFunction(CustomEvent)) {\n      event = new CustomEvent(type, {\n        detail: data,\n        bubbles: true,\n        cancelable: true\n      });\n    } else {\n      event = document.createEvent('CustomEvent');\n      event.initCustomEvent(type, true, true, data);\n    }\n    return element.dispatchEvent(event);\n  }\n\n  /**\n   * Get the offset base on the document.\n   * @param {Element} element - The target element.\n   * @returns {Object} The offset data.\n   */\n  function getOffset(element) {\n    var box = element.getBoundingClientRect();\n    return {\n      left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n      top: box.top + (window.pageYOffset - document.documentElement.clientTop)\n    };\n  }\n  var location = WINDOW.location;\n  var REGEXP_ORIGINS = /^(\\w+:)\\/\\/([^:/?#]*):?(\\d*)/i;\n\n  /**\n   * Check if the given URL is a cross origin URL.\n   * @param {string} url - The target URL.\n   * @returns {boolean} Returns `true` if the given URL is a cross origin URL, else `false`.\n   */\n  function isCrossOriginURL(url) {\n    var parts = url.match(REGEXP_ORIGINS);\n    return parts !== null && (parts[1] !== location.protocol || parts[2] !== location.hostname || parts[3] !== location.port);\n  }\n\n  /**\n   * Add timestamp to the given URL.\n   * @param {string} url - The target URL.\n   * @returns {string} The result URL.\n   */\n  function addTimestamp(url) {\n    var timestamp = \"timestamp=\".concat(new Date().getTime());\n    return url + (url.indexOf('?') === -1 ? '?' : '&') + timestamp;\n  }\n\n  /**\n   * Get transforms base on the given object.\n   * @param {Object} obj - The target object.\n   * @returns {string} A string contains transform values.\n   */\n  function getTransforms(_ref) {\n    var rotate = _ref.rotate,\n      scaleX = _ref.scaleX,\n      scaleY = _ref.scaleY,\n      translateX = _ref.translateX,\n      translateY = _ref.translateY;\n    var values = [];\n    if (isNumber(translateX) && translateX !== 0) {\n      values.push(\"translateX(\".concat(translateX, \"px)\"));\n    }\n    if (isNumber(translateY) && translateY !== 0) {\n      values.push(\"translateY(\".concat(translateY, \"px)\"));\n    }\n\n    // Rotate should come first before scale to match orientation transform\n    if (isNumber(rotate) && rotate !== 0) {\n      values.push(\"rotate(\".concat(rotate, \"deg)\"));\n    }\n    if (isNumber(scaleX) && scaleX !== 1) {\n      values.push(\"scaleX(\".concat(scaleX, \")\"));\n    }\n    if (isNumber(scaleY) && scaleY !== 1) {\n      values.push(\"scaleY(\".concat(scaleY, \")\"));\n    }\n    var transform = values.length ? values.join(' ') : 'none';\n    return {\n      WebkitTransform: transform,\n      msTransform: transform,\n      transform: transform\n    };\n  }\n\n  /**\n   * Get the max ratio of a group of pointers.\n   * @param {string} pointers - The target pointers.\n   * @returns {number} The result ratio.\n   */\n  function getMaxZoomRatio(pointers) {\n    var pointers2 = _objectSpread2({}, pointers);\n    var maxRatio = 0;\n    forEach(pointers, function (pointer, pointerId) {\n      delete pointers2[pointerId];\n      forEach(pointers2, function (pointer2) {\n        var x1 = Math.abs(pointer.startX - pointer2.startX);\n        var y1 = Math.abs(pointer.startY - pointer2.startY);\n        var x2 = Math.abs(pointer.endX - pointer2.endX);\n        var y2 = Math.abs(pointer.endY - pointer2.endY);\n        var z1 = Math.sqrt(x1 * x1 + y1 * y1);\n        var z2 = Math.sqrt(x2 * x2 + y2 * y2);\n        var ratio = (z2 - z1) / z1;\n        if (Math.abs(ratio) > Math.abs(maxRatio)) {\n          maxRatio = ratio;\n        }\n      });\n    });\n    return maxRatio;\n  }\n\n  /**\n   * Get a pointer from an event object.\n   * @param {Object} event - The target event object.\n   * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n   * @returns {Object} The result pointer contains start and/or end point coordinates.\n   */\n  function getPointer(_ref2, endOnly) {\n    var pageX = _ref2.pageX,\n      pageY = _ref2.pageY;\n    var end = {\n      endX: pageX,\n      endY: pageY\n    };\n    return endOnly ? end : _objectSpread2({\n      startX: pageX,\n      startY: pageY\n    }, end);\n  }\n\n  /**\n   * Get the center point coordinate of a group of pointers.\n   * @param {Object} pointers - The target pointers.\n   * @returns {Object} The center point coordinate.\n   */\n  function getPointersCenter(pointers) {\n    var pageX = 0;\n    var pageY = 0;\n    var count = 0;\n    forEach(pointers, function (_ref3) {\n      var startX = _ref3.startX,\n        startY = _ref3.startY;\n      pageX += startX;\n      pageY += startY;\n      count += 1;\n    });\n    pageX /= count;\n    pageY /= count;\n    return {\n      pageX: pageX,\n      pageY: pageY\n    };\n  }\n\n  /**\n   * Get the max sizes in a rectangle under the given aspect ratio.\n   * @param {Object} data - The original sizes.\n   * @param {string} [type='contain'] - The adjust type.\n   * @returns {Object} The result sizes.\n   */\n  function getAdjustedSizes(_ref4) {\n    var aspectRatio = _ref4.aspectRatio,\n      height = _ref4.height,\n      width = _ref4.width;\n    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'contain';\n    var isValidWidth = isPositiveNumber(width);\n    var isValidHeight = isPositiveNumber(height);\n    if (isValidWidth && isValidHeight) {\n      var adjustedWidth = height * aspectRatio;\n      if (type === 'contain' && adjustedWidth > width || type === 'cover' && adjustedWidth < width) {\n        height = width / aspectRatio;\n      } else {\n        width = height * aspectRatio;\n      }\n    } else if (isValidWidth) {\n      height = width / aspectRatio;\n    } else if (isValidHeight) {\n      width = height * aspectRatio;\n    }\n    return {\n      width: width,\n      height: height\n    };\n  }\n\n  /**\n   * Get the new sizes of a rectangle after rotated.\n   * @param {Object} data - The original sizes.\n   * @returns {Object} The result sizes.\n   */\n  function getRotatedSizes(_ref5) {\n    var width = _ref5.width,\n      height = _ref5.height,\n      degree = _ref5.degree;\n    degree = Math.abs(degree) % 180;\n    if (degree === 90) {\n      return {\n        width: height,\n        height: width\n      };\n    }\n    var arc = degree % 90 * Math.PI / 180;\n    var sinArc = Math.sin(arc);\n    var cosArc = Math.cos(arc);\n    var newWidth = width * cosArc + height * sinArc;\n    var newHeight = width * sinArc + height * cosArc;\n    return degree > 90 ? {\n      width: newHeight,\n      height: newWidth\n    } : {\n      width: newWidth,\n      height: newHeight\n    };\n  }\n\n  /**\n   * Get a canvas which drew the given image.\n   * @param {HTMLImageElement} image - The image for drawing.\n   * @param {Object} imageData - The image data.\n   * @param {Object} canvasData - The canvas data.\n   * @param {Object} options - The options.\n   * @returns {HTMLCanvasElement} The result canvas.\n   */\n  function getSourceCanvas(image, _ref6, _ref7, _ref8) {\n    var imageAspectRatio = _ref6.aspectRatio,\n      imageNaturalWidth = _ref6.naturalWidth,\n      imageNaturalHeight = _ref6.naturalHeight,\n      _ref6$rotate = _ref6.rotate,\n      rotate = _ref6$rotate === void 0 ? 0 : _ref6$rotate,\n      _ref6$scaleX = _ref6.scaleX,\n      scaleX = _ref6$scaleX === void 0 ? 1 : _ref6$scaleX,\n      _ref6$scaleY = _ref6.scaleY,\n      scaleY = _ref6$scaleY === void 0 ? 1 : _ref6$scaleY;\n    var aspectRatio = _ref7.aspectRatio,\n      naturalWidth = _ref7.naturalWidth,\n      naturalHeight = _ref7.naturalHeight;\n    var _ref8$fillColor = _ref8.fillColor,\n      fillColor = _ref8$fillColor === void 0 ? 'transparent' : _ref8$fillColor,\n      _ref8$imageSmoothingE = _ref8.imageSmoothingEnabled,\n      imageSmoothingEnabled = _ref8$imageSmoothingE === void 0 ? true : _ref8$imageSmoothingE,\n      _ref8$imageSmoothingQ = _ref8.imageSmoothingQuality,\n      imageSmoothingQuality = _ref8$imageSmoothingQ === void 0 ? 'low' : _ref8$imageSmoothingQ,\n      _ref8$maxWidth = _ref8.maxWidth,\n      maxWidth = _ref8$maxWidth === void 0 ? Infinity : _ref8$maxWidth,\n      _ref8$maxHeight = _ref8.maxHeight,\n      maxHeight = _ref8$maxHeight === void 0 ? Infinity : _ref8$maxHeight,\n      _ref8$minWidth = _ref8.minWidth,\n      minWidth = _ref8$minWidth === void 0 ? 0 : _ref8$minWidth,\n      _ref8$minHeight = _ref8.minHeight,\n      minHeight = _ref8$minHeight === void 0 ? 0 : _ref8$minHeight;\n    var canvas = document.createElement('canvas');\n    var context = canvas.getContext('2d');\n    var maxSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var minSizes = getAdjustedSizes({\n      aspectRatio: aspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var width = Math.min(maxSizes.width, Math.max(minSizes.width, naturalWidth));\n    var height = Math.min(maxSizes.height, Math.max(minSizes.height, naturalHeight));\n\n    // Note: should always use image's natural sizes for drawing as\n    // imageData.naturalWidth === canvasData.naturalHeight when rotate % 180 === 90\n    var destMaxSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: maxWidth,\n      height: maxHeight\n    });\n    var destMinSizes = getAdjustedSizes({\n      aspectRatio: imageAspectRatio,\n      width: minWidth,\n      height: minHeight\n    }, 'cover');\n    var destWidth = Math.min(destMaxSizes.width, Math.max(destMinSizes.width, imageNaturalWidth));\n    var destHeight = Math.min(destMaxSizes.height, Math.max(destMinSizes.height, imageNaturalHeight));\n    var params = [-destWidth / 2, -destHeight / 2, destWidth, destHeight];\n    canvas.width = normalizeDecimalNumber(width);\n    canvas.height = normalizeDecimalNumber(height);\n    context.fillStyle = fillColor;\n    context.fillRect(0, 0, width, height);\n    context.save();\n    context.translate(width / 2, height / 2);\n    context.rotate(rotate * Math.PI / 180);\n    context.scale(scaleX, scaleY);\n    context.imageSmoothingEnabled = imageSmoothingEnabled;\n    context.imageSmoothingQuality = imageSmoothingQuality;\n    context.drawImage.apply(context, [image].concat(_toConsumableArray(params.map(function (param) {\n      return Math.floor(normalizeDecimalNumber(param));\n    }))));\n    context.restore();\n    return canvas;\n  }\n  var fromCharCode = String.fromCharCode;\n\n  /**\n   * Get string from char code in data view.\n   * @param {DataView} dataView - The data view for read.\n   * @param {number} start - The start index.\n   * @param {number} length - The read length.\n   * @returns {string} The read result.\n   */\n  function getStringFromCharCode(dataView, start, length) {\n    var str = '';\n    length += start;\n    for (var i = start; i < length; i += 1) {\n      str += fromCharCode(dataView.getUint8(i));\n    }\n    return str;\n  }\n  var REGEXP_DATA_URL_HEAD = /^data:.*,/;\n\n  /**\n   * Transform Data URL to array buffer.\n   * @param {string} dataURL - The Data URL to transform.\n   * @returns {ArrayBuffer} The result array buffer.\n   */\n  function dataURLToArrayBuffer(dataURL) {\n    var base64 = dataURL.replace(REGEXP_DATA_URL_HEAD, '');\n    var binary = atob(base64);\n    var arrayBuffer = new ArrayBuffer(binary.length);\n    var uint8 = new Uint8Array(arrayBuffer);\n    forEach(uint8, function (value, i) {\n      uint8[i] = binary.charCodeAt(i);\n    });\n    return arrayBuffer;\n  }\n\n  /**\n   * Transform array buffer to Data URL.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to transform.\n   * @param {string} mimeType - The mime type of the Data URL.\n   * @returns {string} The result Data URL.\n   */\n  function arrayBufferToDataURL(arrayBuffer, mimeType) {\n    var chunks = [];\n\n    // Chunk Typed Array for better performance (#435)\n    var chunkSize = 8192;\n    var uint8 = new Uint8Array(arrayBuffer);\n    while (uint8.length > 0) {\n      // XXX: Babel's `toConsumableArray` helper will throw error in IE or Safari 9\n      // eslint-disable-next-line prefer-spread\n      chunks.push(fromCharCode.apply(null, toArray(uint8.subarray(0, chunkSize))));\n      uint8 = uint8.subarray(chunkSize);\n    }\n    return \"data:\".concat(mimeType, \";base64,\").concat(btoa(chunks.join('')));\n  }\n\n  /**\n   * Get orientation value from given array buffer.\n   * @param {ArrayBuffer} arrayBuffer - The array buffer to read.\n   * @returns {number} The read orientation value.\n   */\n  function resetAndGetOrientation(arrayBuffer) {\n    var dataView = new DataView(arrayBuffer);\n    var orientation;\n\n    // Ignores range error when the image does not have correct Exif information\n    try {\n      var littleEndian;\n      var app1Start;\n      var ifdStart;\n\n      // Only handle JPEG image (start by 0xFFD8)\n      if (dataView.getUint8(0) === 0xFF && dataView.getUint8(1) === 0xD8) {\n        var length = dataView.byteLength;\n        var offset = 2;\n        while (offset + 1 < length) {\n          if (dataView.getUint8(offset) === 0xFF && dataView.getUint8(offset + 1) === 0xE1) {\n            app1Start = offset;\n            break;\n          }\n          offset += 1;\n        }\n      }\n      if (app1Start) {\n        var exifIDCode = app1Start + 4;\n        var tiffOffset = app1Start + 10;\n        if (getStringFromCharCode(dataView, exifIDCode, 4) === 'Exif') {\n          var endianness = dataView.getUint16(tiffOffset);\n          littleEndian = endianness === 0x4949;\n          if (littleEndian || endianness === 0x4D4D /* bigEndian */) {\n            if (dataView.getUint16(tiffOffset + 2, littleEndian) === 0x002A) {\n              var firstIFDOffset = dataView.getUint32(tiffOffset + 4, littleEndian);\n              if (firstIFDOffset >= 0x00000008) {\n                ifdStart = tiffOffset + firstIFDOffset;\n              }\n            }\n          }\n        }\n      }\n      if (ifdStart) {\n        var _length = dataView.getUint16(ifdStart, littleEndian);\n        var _offset;\n        var i;\n        for (i = 0; i < _length; i += 1) {\n          _offset = ifdStart + i * 12 + 2;\n          if (dataView.getUint16(_offset, littleEndian) === 0x0112 /* Orientation */) {\n            // 8 is the offset of the current tag's value\n            _offset += 8;\n\n            // Get the original orientation value\n            orientation = dataView.getUint16(_offset, littleEndian);\n\n            // Override the orientation with its default value\n            dataView.setUint16(_offset, 1, littleEndian);\n            break;\n          }\n        }\n      }\n    } catch (error) {\n      orientation = 1;\n    }\n    return orientation;\n  }\n\n  /**\n   * Parse Exif Orientation value.\n   * @param {number} orientation - The orientation to parse.\n   * @returns {Object} The parsed result.\n   */\n  function parseOrientation(orientation) {\n    var rotate = 0;\n    var scaleX = 1;\n    var scaleY = 1;\n    switch (orientation) {\n      // Flip horizontal\n      case 2:\n        scaleX = -1;\n        break;\n\n      // Rotate left 180\u00B0\n      case 3:\n        rotate = -180;\n        break;\n\n      // Flip vertical\n      case 4:\n        scaleY = -1;\n        break;\n\n      // Flip vertical and rotate right 90\u00B0\n      case 5:\n        rotate = 90;\n        scaleY = -1;\n        break;\n\n      // Rotate right 90\u00B0\n      case 6:\n        rotate = 90;\n        break;\n\n      // Flip horizontal and rotate right 90\u00B0\n      case 7:\n        rotate = 90;\n        scaleX = -1;\n        break;\n\n      // Rotate left 90\u00B0\n      case 8:\n        rotate = -90;\n        break;\n    }\n    return {\n      rotate: rotate,\n      scaleX: scaleX,\n      scaleY: scaleY\n    };\n  }\n\n  var render = {\n    render: function render() {\n      this.initContainer();\n      this.initCanvas();\n      this.initCropBox();\n      this.renderCanvas();\n      if (this.cropped) {\n        this.renderCropBox();\n      }\n    },\n    initContainer: function initContainer() {\n      var element = this.element,\n        options = this.options,\n        container = this.container,\n        cropper = this.cropper;\n      var minWidth = Number(options.minContainerWidth);\n      var minHeight = Number(options.minContainerHeight);\n      addClass(cropper, CLASS_HIDDEN);\n      removeClass(element, CLASS_HIDDEN);\n      var containerData = {\n        width: Math.max(container.offsetWidth, minWidth >= 0 ? minWidth : MIN_CONTAINER_WIDTH),\n        height: Math.max(container.offsetHeight, minHeight >= 0 ? minHeight : MIN_CONTAINER_HEIGHT)\n      };\n      this.containerData = containerData;\n      setStyle(cropper, {\n        width: containerData.width,\n        height: containerData.height\n      });\n      addClass(element, CLASS_HIDDEN);\n      removeClass(cropper, CLASS_HIDDEN);\n    },\n    // Canvas (image wrapper)\n    initCanvas: function initCanvas() {\n      var containerData = this.containerData,\n        imageData = this.imageData;\n      var viewMode = this.options.viewMode;\n      var rotated = Math.abs(imageData.rotate) % 180 === 90;\n      var naturalWidth = rotated ? imageData.naturalHeight : imageData.naturalWidth;\n      var naturalHeight = rotated ? imageData.naturalWidth : imageData.naturalHeight;\n      var aspectRatio = naturalWidth / naturalHeight;\n      var canvasWidth = containerData.width;\n      var canvasHeight = containerData.height;\n      if (containerData.height * aspectRatio > containerData.width) {\n        if (viewMode === 3) {\n          canvasWidth = containerData.height * aspectRatio;\n        } else {\n          canvasHeight = containerData.width / aspectRatio;\n        }\n      } else if (viewMode === 3) {\n        canvasHeight = containerData.width / aspectRatio;\n      } else {\n        canvasWidth = containerData.height * aspectRatio;\n      }\n      var canvasData = {\n        aspectRatio: aspectRatio,\n        naturalWidth: naturalWidth,\n        naturalHeight: naturalHeight,\n        width: canvasWidth,\n        height: canvasHeight\n      };\n      this.canvasData = canvasData;\n      this.limited = viewMode === 1 || viewMode === 2;\n      this.limitCanvas(true, true);\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      canvasData.left = (containerData.width - canvasData.width) / 2;\n      canvasData.top = (containerData.height - canvasData.height) / 2;\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      this.initialCanvasData = assign({}, canvasData);\n    },\n    limitCanvas: function limitCanvas(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var viewMode = options.viewMode;\n      var aspectRatio = canvasData.aspectRatio;\n      var cropped = this.cropped && cropBoxData;\n      if (sizeLimited) {\n        var minCanvasWidth = Number(options.minCanvasWidth) || 0;\n        var minCanvasHeight = Number(options.minCanvasHeight) || 0;\n        if (viewMode > 1) {\n          minCanvasWidth = Math.max(minCanvasWidth, containerData.width);\n          minCanvasHeight = Math.max(minCanvasHeight, containerData.height);\n          if (viewMode === 3) {\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        } else if (viewMode > 0) {\n          if (minCanvasWidth) {\n            minCanvasWidth = Math.max(minCanvasWidth, cropped ? cropBoxData.width : 0);\n          } else if (minCanvasHeight) {\n            minCanvasHeight = Math.max(minCanvasHeight, cropped ? cropBoxData.height : 0);\n          } else if (cropped) {\n            minCanvasWidth = cropBoxData.width;\n            minCanvasHeight = cropBoxData.height;\n            if (minCanvasHeight * aspectRatio > minCanvasWidth) {\n              minCanvasWidth = minCanvasHeight * aspectRatio;\n            } else {\n              minCanvasHeight = minCanvasWidth / aspectRatio;\n            }\n          }\n        }\n        var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: minCanvasWidth,\n          height: minCanvasHeight\n        });\n        minCanvasWidth = _getAdjustedSizes.width;\n        minCanvasHeight = _getAdjustedSizes.height;\n        canvasData.minWidth = minCanvasWidth;\n        canvasData.minHeight = minCanvasHeight;\n        canvasData.maxWidth = Infinity;\n        canvasData.maxHeight = Infinity;\n      }\n      if (positionLimited) {\n        if (viewMode > (cropped ? 0 : 1)) {\n          var newCanvasLeft = containerData.width - canvasData.width;\n          var newCanvasTop = containerData.height - canvasData.height;\n          canvasData.minLeft = Math.min(0, newCanvasLeft);\n          canvasData.minTop = Math.min(0, newCanvasTop);\n          canvasData.maxLeft = Math.max(0, newCanvasLeft);\n          canvasData.maxTop = Math.max(0, newCanvasTop);\n          if (cropped && this.limited) {\n            canvasData.minLeft = Math.min(cropBoxData.left, cropBoxData.left + (cropBoxData.width - canvasData.width));\n            canvasData.minTop = Math.min(cropBoxData.top, cropBoxData.top + (cropBoxData.height - canvasData.height));\n            canvasData.maxLeft = cropBoxData.left;\n            canvasData.maxTop = cropBoxData.top;\n            if (viewMode === 2) {\n              if (canvasData.width >= containerData.width) {\n                canvasData.minLeft = Math.min(0, newCanvasLeft);\n                canvasData.maxLeft = Math.max(0, newCanvasLeft);\n              }\n              if (canvasData.height >= containerData.height) {\n                canvasData.minTop = Math.min(0, newCanvasTop);\n                canvasData.maxTop = Math.max(0, newCanvasTop);\n              }\n            }\n          }\n        } else {\n          canvasData.minLeft = -canvasData.width;\n          canvasData.minTop = -canvasData.height;\n          canvasData.maxLeft = containerData.width;\n          canvasData.maxTop = containerData.height;\n        }\n      }\n    },\n    renderCanvas: function renderCanvas(changed, transformed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      if (transformed) {\n        var _getRotatedSizes = getRotatedSizes({\n            width: imageData.naturalWidth * Math.abs(imageData.scaleX || 1),\n            height: imageData.naturalHeight * Math.abs(imageData.scaleY || 1),\n            degree: imageData.rotate || 0\n          }),\n          naturalWidth = _getRotatedSizes.width,\n          naturalHeight = _getRotatedSizes.height;\n        var width = canvasData.width * (naturalWidth / canvasData.naturalWidth);\n        var height = canvasData.height * (naturalHeight / canvasData.naturalHeight);\n        canvasData.left -= (width - canvasData.width) / 2;\n        canvasData.top -= (height - canvasData.height) / 2;\n        canvasData.width = width;\n        canvasData.height = height;\n        canvasData.aspectRatio = naturalWidth / naturalHeight;\n        canvasData.naturalWidth = naturalWidth;\n        canvasData.naturalHeight = naturalHeight;\n        this.limitCanvas(true, false);\n      }\n      if (canvasData.width > canvasData.maxWidth || canvasData.width < canvasData.minWidth) {\n        canvasData.left = canvasData.oldLeft;\n      }\n      if (canvasData.height > canvasData.maxHeight || canvasData.height < canvasData.minHeight) {\n        canvasData.top = canvasData.oldTop;\n      }\n      canvasData.width = Math.min(Math.max(canvasData.width, canvasData.minWidth), canvasData.maxWidth);\n      canvasData.height = Math.min(Math.max(canvasData.height, canvasData.minHeight), canvasData.maxHeight);\n      this.limitCanvas(false, true);\n      canvasData.left = Math.min(Math.max(canvasData.left, canvasData.minLeft), canvasData.maxLeft);\n      canvasData.top = Math.min(Math.max(canvasData.top, canvasData.minTop), canvasData.maxTop);\n      canvasData.oldLeft = canvasData.left;\n      canvasData.oldTop = canvasData.top;\n      setStyle(this.canvas, assign({\n        width: canvasData.width,\n        height: canvasData.height\n      }, getTransforms({\n        translateX: canvasData.left,\n        translateY: canvasData.top\n      })));\n      this.renderImage(changed);\n      if (this.cropped && this.limited) {\n        this.limitCropBox(true, true);\n      }\n    },\n    renderImage: function renderImage(changed) {\n      var canvasData = this.canvasData,\n        imageData = this.imageData;\n      var width = imageData.naturalWidth * (canvasData.width / canvasData.naturalWidth);\n      var height = imageData.naturalHeight * (canvasData.height / canvasData.naturalHeight);\n      assign(imageData, {\n        width: width,\n        height: height,\n        left: (canvasData.width - width) / 2,\n        top: (canvasData.height - height) / 2\n      });\n      setStyle(this.image, assign({\n        width: imageData.width,\n        height: imageData.height\n      }, getTransforms(assign({\n        translateX: imageData.left,\n        translateY: imageData.top\n      }, imageData))));\n      if (changed) {\n        this.output();\n      }\n    },\n    initCropBox: function initCropBox() {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var aspectRatio = options.aspectRatio || options.initialAspectRatio;\n      var autoCropArea = Number(options.autoCropArea) || 0.8;\n      var cropBoxData = {\n        width: canvasData.width,\n        height: canvasData.height\n      };\n      if (aspectRatio) {\n        if (canvasData.height * aspectRatio > canvasData.width) {\n          cropBoxData.height = cropBoxData.width / aspectRatio;\n        } else {\n          cropBoxData.width = cropBoxData.height * aspectRatio;\n        }\n      }\n      this.cropBoxData = cropBoxData;\n      this.limitCropBox(true, true);\n\n      // Initialize auto crop area\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n\n      // The width/height of auto crop area must large than \"minWidth/Height\"\n      cropBoxData.width = Math.max(cropBoxData.minWidth, cropBoxData.width * autoCropArea);\n      cropBoxData.height = Math.max(cropBoxData.minHeight, cropBoxData.height * autoCropArea);\n      cropBoxData.left = canvasData.left + (canvasData.width - cropBoxData.width) / 2;\n      cropBoxData.top = canvasData.top + (canvasData.height - cropBoxData.height) / 2;\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      this.initialCropBoxData = assign({}, cropBoxData);\n    },\n    limitCropBox: function limitCropBox(sizeLimited, positionLimited) {\n      var options = this.options,\n        containerData = this.containerData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData,\n        limited = this.limited;\n      var aspectRatio = options.aspectRatio;\n      if (sizeLimited) {\n        var minCropBoxWidth = Number(options.minCropBoxWidth) || 0;\n        var minCropBoxHeight = Number(options.minCropBoxHeight) || 0;\n        var maxCropBoxWidth = limited ? Math.min(containerData.width, canvasData.width, canvasData.width + canvasData.left, containerData.width - canvasData.left) : containerData.width;\n        var maxCropBoxHeight = limited ? Math.min(containerData.height, canvasData.height, canvasData.height + canvasData.top, containerData.height - canvasData.top) : containerData.height;\n\n        // The min/maxCropBoxWidth/Height must be less than container's width/height\n        minCropBoxWidth = Math.min(minCropBoxWidth, containerData.width);\n        minCropBoxHeight = Math.min(minCropBoxHeight, containerData.height);\n        if (aspectRatio) {\n          if (minCropBoxWidth && minCropBoxHeight) {\n            if (minCropBoxHeight * aspectRatio > minCropBoxWidth) {\n              minCropBoxHeight = minCropBoxWidth / aspectRatio;\n            } else {\n              minCropBoxWidth = minCropBoxHeight * aspectRatio;\n            }\n          } else if (minCropBoxWidth) {\n            minCropBoxHeight = minCropBoxWidth / aspectRatio;\n          } else if (minCropBoxHeight) {\n            minCropBoxWidth = minCropBoxHeight * aspectRatio;\n          }\n          if (maxCropBoxHeight * aspectRatio > maxCropBoxWidth) {\n            maxCropBoxHeight = maxCropBoxWidth / aspectRatio;\n          } else {\n            maxCropBoxWidth = maxCropBoxHeight * aspectRatio;\n          }\n        }\n\n        // The minWidth/Height must be less than maxWidth/Height\n        cropBoxData.minWidth = Math.min(minCropBoxWidth, maxCropBoxWidth);\n        cropBoxData.minHeight = Math.min(minCropBoxHeight, maxCropBoxHeight);\n        cropBoxData.maxWidth = maxCropBoxWidth;\n        cropBoxData.maxHeight = maxCropBoxHeight;\n      }\n      if (positionLimited) {\n        if (limited) {\n          cropBoxData.minLeft = Math.max(0, canvasData.left);\n          cropBoxData.minTop = Math.max(0, canvasData.top);\n          cropBoxData.maxLeft = Math.min(containerData.width, canvasData.left + canvasData.width) - cropBoxData.width;\n          cropBoxData.maxTop = Math.min(containerData.height, canvasData.top + canvasData.height) - cropBoxData.height;\n        } else {\n          cropBoxData.minLeft = 0;\n          cropBoxData.minTop = 0;\n          cropBoxData.maxLeft = containerData.width - cropBoxData.width;\n          cropBoxData.maxTop = containerData.height - cropBoxData.height;\n        }\n      }\n    },\n    renderCropBox: function renderCropBox() {\n      var options = this.options,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData;\n      if (cropBoxData.width > cropBoxData.maxWidth || cropBoxData.width < cropBoxData.minWidth) {\n        cropBoxData.left = cropBoxData.oldLeft;\n      }\n      if (cropBoxData.height > cropBoxData.maxHeight || cropBoxData.height < cropBoxData.minHeight) {\n        cropBoxData.top = cropBoxData.oldTop;\n      }\n      cropBoxData.width = Math.min(Math.max(cropBoxData.width, cropBoxData.minWidth), cropBoxData.maxWidth);\n      cropBoxData.height = Math.min(Math.max(cropBoxData.height, cropBoxData.minHeight), cropBoxData.maxHeight);\n      this.limitCropBox(false, true);\n      cropBoxData.left = Math.min(Math.max(cropBoxData.left, cropBoxData.minLeft), cropBoxData.maxLeft);\n      cropBoxData.top = Math.min(Math.max(cropBoxData.top, cropBoxData.minTop), cropBoxData.maxTop);\n      cropBoxData.oldLeft = cropBoxData.left;\n      cropBoxData.oldTop = cropBoxData.top;\n      if (options.movable && options.cropBoxMovable) {\n        // Turn to move the canvas when the crop box is equal to the container\n        setData(this.face, DATA_ACTION, cropBoxData.width >= containerData.width && cropBoxData.height >= containerData.height ? ACTION_MOVE : ACTION_ALL);\n      }\n      setStyle(this.cropBox, assign({\n        width: cropBoxData.width,\n        height: cropBoxData.height\n      }, getTransforms({\n        translateX: cropBoxData.left,\n        translateY: cropBoxData.top\n      })));\n      if (this.cropped && this.limited) {\n        this.limitCanvas(true, true);\n      }\n      if (!this.disabled) {\n        this.output();\n      }\n    },\n    output: function output() {\n      this.preview();\n      dispatchEvent(this.element, EVENT_CROP, this.getData());\n    }\n  };\n\n  var preview = {\n    initPreview: function initPreview() {\n      var element = this.element,\n        crossOrigin = this.crossOrigin;\n      var preview = this.options.preview;\n      var url = crossOrigin ? this.crossOriginUrl : this.url;\n      var alt = element.alt || 'The image to preview';\n      var image = document.createElement('img');\n      if (crossOrigin) {\n        image.crossOrigin = crossOrigin;\n      }\n      image.src = url;\n      image.alt = alt;\n      this.viewBox.appendChild(image);\n      this.viewBoxImage = image;\n      if (!preview) {\n        return;\n      }\n      var previews = preview;\n      if (typeof preview === 'string') {\n        previews = element.ownerDocument.querySelectorAll(preview);\n      } else if (preview.querySelector) {\n        previews = [preview];\n      }\n      this.previews = previews;\n      forEach(previews, function (el) {\n        var img = document.createElement('img');\n\n        // Save the original size for recover\n        setData(el, DATA_PREVIEW, {\n          width: el.offsetWidth,\n          height: el.offsetHeight,\n          html: el.innerHTML\n        });\n        if (crossOrigin) {\n          img.crossOrigin = crossOrigin;\n        }\n        img.src = url;\n        img.alt = alt;\n\n        /**\n         * Override img element styles\n         * Add `display:block` to avoid margin top issue\n         * Add `height:auto` to override `height` attribute on IE8\n         * (Occur only when margin-top <= -height)\n         */\n        img.style.cssText = 'display:block;' + 'width:100%;' + 'height:auto;' + 'min-width:0!important;' + 'min-height:0!important;' + 'max-width:none!important;' + 'max-height:none!important;' + 'image-orientation:0deg!important;\"';\n        el.innerHTML = '';\n        el.appendChild(img);\n      });\n    },\n    resetPreview: function resetPreview() {\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        setStyle(element, {\n          width: data.width,\n          height: data.height\n        });\n        element.innerHTML = data.html;\n        removeData(element, DATA_PREVIEW);\n      });\n    },\n    preview: function preview() {\n      var imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var cropBoxWidth = cropBoxData.width,\n        cropBoxHeight = cropBoxData.height;\n      var width = imageData.width,\n        height = imageData.height;\n      var left = cropBoxData.left - canvasData.left - imageData.left;\n      var top = cropBoxData.top - canvasData.top - imageData.top;\n      if (!this.cropped || this.disabled) {\n        return;\n      }\n      setStyle(this.viewBoxImage, assign({\n        width: width,\n        height: height\n      }, getTransforms(assign({\n        translateX: -left,\n        translateY: -top\n      }, imageData))));\n      forEach(this.previews, function (element) {\n        var data = getData(element, DATA_PREVIEW);\n        var originalWidth = data.width;\n        var originalHeight = data.height;\n        var newWidth = originalWidth;\n        var newHeight = originalHeight;\n        var ratio = 1;\n        if (cropBoxWidth) {\n          ratio = originalWidth / cropBoxWidth;\n          newHeight = cropBoxHeight * ratio;\n        }\n        if (cropBoxHeight && newHeight > originalHeight) {\n          ratio = originalHeight / cropBoxHeight;\n          newWidth = cropBoxWidth * ratio;\n          newHeight = originalHeight;\n        }\n        setStyle(element, {\n          width: newWidth,\n          height: newHeight\n        });\n        setStyle(element.getElementsByTagName('img')[0], assign({\n          width: width * ratio,\n          height: height * ratio\n        }, getTransforms(assign({\n          translateX: -left * ratio,\n          translateY: -top * ratio\n        }, imageData))));\n      });\n    }\n  };\n\n  var events = {\n    bind: function bind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        addListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        addListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        addListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        addListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom);\n      }\n      addListener(cropper, EVENT_POINTER_DOWN, this.onCropStart = this.cropStart.bind(this));\n      if (options.zoomable && options.zoomOnWheel) {\n        addListener(cropper, EVENT_WHEEL, this.onWheel = this.wheel.bind(this), {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        addListener(cropper, EVENT_DBLCLICK, this.onDblclick = this.dblclick.bind(this));\n      }\n      addListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove = this.cropMove.bind(this));\n      addListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd = this.cropEnd.bind(this));\n      if (options.responsive) {\n        addListener(window, EVENT_RESIZE, this.onResize = this.resize.bind(this));\n      }\n    },\n    unbind: function unbind() {\n      var element = this.element,\n        options = this.options,\n        cropper = this.cropper;\n      if (isFunction(options.cropstart)) {\n        removeListener(element, EVENT_CROP_START, options.cropstart);\n      }\n      if (isFunction(options.cropmove)) {\n        removeListener(element, EVENT_CROP_MOVE, options.cropmove);\n      }\n      if (isFunction(options.cropend)) {\n        removeListener(element, EVENT_CROP_END, options.cropend);\n      }\n      if (isFunction(options.crop)) {\n        removeListener(element, EVENT_CROP, options.crop);\n      }\n      if (isFunction(options.zoom)) {\n        removeListener(element, EVENT_ZOOM, options.zoom);\n      }\n      removeListener(cropper, EVENT_POINTER_DOWN, this.onCropStart);\n      if (options.zoomable && options.zoomOnWheel) {\n        removeListener(cropper, EVENT_WHEEL, this.onWheel, {\n          passive: false,\n          capture: true\n        });\n      }\n      if (options.toggleDragModeOnDblclick) {\n        removeListener(cropper, EVENT_DBLCLICK, this.onDblclick);\n      }\n      removeListener(element.ownerDocument, EVENT_POINTER_MOVE, this.onCropMove);\n      removeListener(element.ownerDocument, EVENT_POINTER_UP, this.onCropEnd);\n      if (options.responsive) {\n        removeListener(window, EVENT_RESIZE, this.onResize);\n      }\n    }\n  };\n\n  var handlers = {\n    resize: function resize() {\n      if (this.disabled) {\n        return;\n      }\n      var options = this.options,\n        container = this.container,\n        containerData = this.containerData;\n      var ratioX = container.offsetWidth / containerData.width;\n      var ratioY = container.offsetHeight / containerData.height;\n      var ratio = Math.abs(ratioX - 1) > Math.abs(ratioY - 1) ? ratioX : ratioY;\n\n      // Resize when width changed or height changed\n      if (ratio !== 1) {\n        var canvasData;\n        var cropBoxData;\n        if (options.restore) {\n          canvasData = this.getCanvasData();\n          cropBoxData = this.getCropBoxData();\n        }\n        this.render();\n        if (options.restore) {\n          this.setCanvasData(forEach(canvasData, function (n, i) {\n            canvasData[i] = n * ratio;\n          }));\n          this.setCropBoxData(forEach(cropBoxData, function (n, i) {\n            cropBoxData[i] = n * ratio;\n          }));\n        }\n      }\n    },\n    dblclick: function dblclick() {\n      if (this.disabled || this.options.dragMode === DRAG_MODE_NONE) {\n        return;\n      }\n      this.setDragMode(hasClass(this.dragBox, CLASS_CROP) ? DRAG_MODE_MOVE : DRAG_MODE_CROP);\n    },\n    wheel: function wheel(event) {\n      var _this = this;\n      var ratio = Number(this.options.wheelZoomRatio) || 0.1;\n      var delta = 1;\n      if (this.disabled) {\n        return;\n      }\n      event.preventDefault();\n\n      // Limit wheel speed to prevent zoom too fast (#21)\n      if (this.wheeling) {\n        return;\n      }\n      this.wheeling = true;\n      setTimeout(function () {\n        _this.wheeling = false;\n      }, 50);\n      if (event.deltaY) {\n        delta = event.deltaY > 0 ? 1 : -1;\n      } else if (event.wheelDelta) {\n        delta = -event.wheelDelta / 120;\n      } else if (event.detail) {\n        delta = event.detail > 0 ? 1 : -1;\n      }\n      this.zoom(-delta * ratio, event);\n    },\n    cropStart: function cropStart(event) {\n      var buttons = event.buttons,\n        button = event.button;\n      if (this.disabled\n\n      // Handle mouse event and pointer event and ignore touch event\n      || (event.type === 'mousedown' || event.type === 'pointerdown' && event.pointerType === 'mouse') && (\n      // No primary button (Usually the left button)\n      isNumber(buttons) && buttons !== 1 || isNumber(button) && button !== 0\n\n      // Open context menu\n      || event.ctrlKey)) {\n        return;\n      }\n      var options = this.options,\n        pointers = this.pointers;\n      var action;\n      if (event.changedTouches) {\n        // Handle touch event\n        forEach(event.changedTouches, function (touch) {\n          pointers[touch.identifier] = getPointer(touch);\n        });\n      } else {\n        // Handle mouse event and pointer event\n        pointers[event.pointerId || 0] = getPointer(event);\n      }\n      if (Object.keys(pointers).length > 1 && options.zoomable && options.zoomOnTouch) {\n        action = ACTION_ZOOM;\n      } else {\n        action = getData(event.target, DATA_ACTION);\n      }\n      if (!REGEXP_ACTIONS.test(action)) {\n        return;\n      }\n      if (dispatchEvent(this.element, EVENT_CROP_START, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n\n      // This line is required for preventing page zooming in iOS browsers\n      event.preventDefault();\n      this.action = action;\n      this.cropping = false;\n      if (action === ACTION_CROP) {\n        this.cropping = true;\n        addClass(this.dragBox, CLASS_MODAL);\n      }\n    },\n    cropMove: function cropMove(event) {\n      var action = this.action;\n      if (this.disabled || !action) {\n        return;\n      }\n      var pointers = this.pointers;\n      event.preventDefault();\n      if (dispatchEvent(this.element, EVENT_CROP_MOVE, {\n        originalEvent: event,\n        action: action\n      }) === false) {\n        return;\n      }\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          // The first parameter should not be undefined (#432)\n          assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n        });\n      } else {\n        assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n      }\n      this.change(event);\n    },\n    cropEnd: function cropEnd(event) {\n      if (this.disabled) {\n        return;\n      }\n      var action = this.action,\n        pointers = this.pointers;\n      if (event.changedTouches) {\n        forEach(event.changedTouches, function (touch) {\n          delete pointers[touch.identifier];\n        });\n      } else {\n        delete pointers[event.pointerId || 0];\n      }\n      if (!action) {\n        return;\n      }\n      event.preventDefault();\n      if (!Object.keys(pointers).length) {\n        this.action = '';\n      }\n      if (this.cropping) {\n        this.cropping = false;\n        toggleClass(this.dragBox, CLASS_MODAL, this.cropped && this.options.modal);\n      }\n      dispatchEvent(this.element, EVENT_CROP_END, {\n        originalEvent: event,\n        action: action\n      });\n    }\n  };\n\n  var change = {\n    change: function change(event) {\n      var options = this.options,\n        canvasData = this.canvasData,\n        containerData = this.containerData,\n        cropBoxData = this.cropBoxData,\n        pointers = this.pointers;\n      var action = this.action;\n      var aspectRatio = options.aspectRatio;\n      var left = cropBoxData.left,\n        top = cropBoxData.top,\n        width = cropBoxData.width,\n        height = cropBoxData.height;\n      var right = left + width;\n      var bottom = top + height;\n      var minLeft = 0;\n      var minTop = 0;\n      var maxWidth = containerData.width;\n      var maxHeight = containerData.height;\n      var renderable = true;\n      var offset;\n\n      // Locking aspect ratio in \"free mode\" by holding shift key\n      if (!aspectRatio && event.shiftKey) {\n        aspectRatio = width && height ? width / height : 1;\n      }\n      if (this.limited) {\n        minLeft = cropBoxData.minLeft;\n        minTop = cropBoxData.minTop;\n        maxWidth = minLeft + Math.min(containerData.width, canvasData.width, canvasData.left + canvasData.width);\n        maxHeight = minTop + Math.min(containerData.height, canvasData.height, canvasData.top + canvasData.height);\n      }\n      var pointer = pointers[Object.keys(pointers)[0]];\n      var range = {\n        x: pointer.endX - pointer.startX,\n        y: pointer.endY - pointer.startY\n      };\n      var check = function check(side) {\n        switch (side) {\n          case ACTION_EAST:\n            if (right + range.x > maxWidth) {\n              range.x = maxWidth - right;\n            }\n            break;\n          case ACTION_WEST:\n            if (left + range.x < minLeft) {\n              range.x = minLeft - left;\n            }\n            break;\n          case ACTION_NORTH:\n            if (top + range.y < minTop) {\n              range.y = minTop - top;\n            }\n            break;\n          case ACTION_SOUTH:\n            if (bottom + range.y > maxHeight) {\n              range.y = maxHeight - bottom;\n            }\n            break;\n        }\n      };\n      switch (action) {\n        // Move crop box\n        case ACTION_ALL:\n          left += range.x;\n          top += range.y;\n          break;\n\n        // Resize crop box\n        case ACTION_EAST:\n          if (range.x >= 0 && (right >= maxWidth || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_EAST);\n          width += range.x;\n          if (width < 0) {\n            action = ACTION_WEST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_NORTH:\n          if (range.y <= 0 && (top <= minTop || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_NORTH);\n          height -= range.y;\n          top += range.y;\n          if (height < 0) {\n            action = ACTION_SOUTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_WEST:\n          if (range.x <= 0 && (left <= minLeft || aspectRatio && (top <= minTop || bottom >= maxHeight))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_WEST);\n          width -= range.x;\n          left += range.x;\n          if (width < 0) {\n            action = ACTION_EAST;\n            width = -width;\n            left -= width;\n          }\n          if (aspectRatio) {\n            height = width / aspectRatio;\n            top += (cropBoxData.height - height) / 2;\n          }\n          break;\n        case ACTION_SOUTH:\n          if (range.y >= 0 && (bottom >= maxHeight || aspectRatio && (left <= minLeft || right >= maxWidth))) {\n            renderable = false;\n            break;\n          }\n          check(ACTION_SOUTH);\n          height += range.y;\n          if (height < 0) {\n            action = ACTION_NORTH;\n            height = -height;\n            top -= height;\n          }\n          if (aspectRatio) {\n            width = height * aspectRatio;\n            left += (cropBoxData.width - width) / 2;\n          }\n          break;\n        case ACTION_NORTH_EAST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || right >= maxWidth)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_NORTH_WEST:\n          if (aspectRatio) {\n            if (range.y <= 0 && (top <= minTop || left <= minLeft)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_NORTH);\n            height -= range.y;\n            top += range.y;\n            width = height * aspectRatio;\n            left += cropBoxData.width - width;\n          } else {\n            check(ACTION_NORTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y <= 0 && top <= minTop) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y <= 0) {\n              if (top > minTop) {\n                height -= range.y;\n                top += range.y;\n              }\n            } else {\n              height -= range.y;\n              top += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_SOUTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_NORTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_SOUTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_WEST:\n          if (aspectRatio) {\n            if (range.x <= 0 && (left <= minLeft || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_WEST);\n            width -= range.x;\n            left += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_WEST);\n            if (range.x <= 0) {\n              if (left > minLeft) {\n                width -= range.x;\n                left += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width -= range.x;\n              left += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_EAST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            top -= height;\n          }\n          break;\n        case ACTION_SOUTH_EAST:\n          if (aspectRatio) {\n            if (range.x >= 0 && (right >= maxWidth || bottom >= maxHeight)) {\n              renderable = false;\n              break;\n            }\n            check(ACTION_EAST);\n            width += range.x;\n            height = width / aspectRatio;\n          } else {\n            check(ACTION_SOUTH);\n            check(ACTION_EAST);\n            if (range.x >= 0) {\n              if (right < maxWidth) {\n                width += range.x;\n              } else if (range.y >= 0 && bottom >= maxHeight) {\n                renderable = false;\n              }\n            } else {\n              width += range.x;\n            }\n            if (range.y >= 0) {\n              if (bottom < maxHeight) {\n                height += range.y;\n              }\n            } else {\n              height += range.y;\n            }\n          }\n          if (width < 0 && height < 0) {\n            action = ACTION_NORTH_WEST;\n            height = -height;\n            width = -width;\n            top -= height;\n            left -= width;\n          } else if (width < 0) {\n            action = ACTION_SOUTH_WEST;\n            width = -width;\n            left -= width;\n          } else if (height < 0) {\n            action = ACTION_NORTH_EAST;\n            height = -height;\n            top -= height;\n          }\n          break;\n\n        // Move canvas\n        case ACTION_MOVE:\n          this.move(range.x, range.y);\n          renderable = false;\n          break;\n\n        // Zoom canvas\n        case ACTION_ZOOM:\n          this.zoom(getMaxZoomRatio(pointers), event);\n          renderable = false;\n          break;\n\n        // Create crop box\n        case ACTION_CROP:\n          if (!range.x || !range.y) {\n            renderable = false;\n            break;\n          }\n          offset = getOffset(this.cropper);\n          left = pointer.startX - offset.left;\n          top = pointer.startY - offset.top;\n          width = cropBoxData.minWidth;\n          height = cropBoxData.minHeight;\n          if (range.x > 0) {\n            action = range.y > 0 ? ACTION_SOUTH_EAST : ACTION_NORTH_EAST;\n          } else if (range.x < 0) {\n            left -= width;\n            action = range.y > 0 ? ACTION_SOUTH_WEST : ACTION_NORTH_WEST;\n          }\n          if (range.y < 0) {\n            top -= height;\n          }\n\n          // Show the crop box if is hidden\n          if (!this.cropped) {\n            removeClass(this.cropBox, CLASS_HIDDEN);\n            this.cropped = true;\n            if (this.limited) {\n              this.limitCropBox(true, true);\n            }\n          }\n          break;\n      }\n      if (renderable) {\n        cropBoxData.width = width;\n        cropBoxData.height = height;\n        cropBoxData.left = left;\n        cropBoxData.top = top;\n        this.action = action;\n        this.renderCropBox();\n      }\n\n      // Override\n      forEach(pointers, function (p) {\n        p.startX = p.endX;\n        p.startY = p.endY;\n      });\n    }\n  };\n\n  var methods = {\n    // Show the crop box manually\n    crop: function crop() {\n      if (this.ready && !this.cropped && !this.disabled) {\n        this.cropped = true;\n        this.limitCropBox(true, true);\n        if (this.options.modal) {\n          addClass(this.dragBox, CLASS_MODAL);\n        }\n        removeClass(this.cropBox, CLASS_HIDDEN);\n        this.setCropBoxData(this.initialCropBoxData);\n      }\n      return this;\n    },\n    // Reset the image and crop box to their initial states\n    reset: function reset() {\n      if (this.ready && !this.disabled) {\n        this.imageData = assign({}, this.initialImageData);\n        this.canvasData = assign({}, this.initialCanvasData);\n        this.cropBoxData = assign({}, this.initialCropBoxData);\n        this.renderCanvas();\n        if (this.cropped) {\n          this.renderCropBox();\n        }\n      }\n      return this;\n    },\n    // Clear the crop box\n    clear: function clear() {\n      if (this.cropped && !this.disabled) {\n        assign(this.cropBoxData, {\n          left: 0,\n          top: 0,\n          width: 0,\n          height: 0\n        });\n        this.cropped = false;\n        this.renderCropBox();\n        this.limitCanvas(true, true);\n\n        // Render canvas after crop box rendered\n        this.renderCanvas();\n        removeClass(this.dragBox, CLASS_MODAL);\n        addClass(this.cropBox, CLASS_HIDDEN);\n      }\n      return this;\n    },\n    /**\n     * Replace the image's src and rebuild the cropper\n     * @param {string} url - The new URL.\n     * @param {boolean} [hasSameSize] - Indicate if the new image has the same size as the old one.\n     * @returns {Cropper} this\n     */\n    replace: function replace(url) {\n      var hasSameSize = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n      if (!this.disabled && url) {\n        if (this.isImg) {\n          this.element.src = url;\n        }\n        if (hasSameSize) {\n          this.url = url;\n          this.image.src = url;\n          if (this.ready) {\n            this.viewBoxImage.src = url;\n            forEach(this.previews, function (element) {\n              element.getElementsByTagName('img')[0].src = url;\n            });\n          }\n        } else {\n          if (this.isImg) {\n            this.replaced = true;\n          }\n          this.options.data = null;\n          this.uncreate();\n          this.load(url);\n        }\n      }\n      return this;\n    },\n    // Enable (unfreeze) the cropper\n    enable: function enable() {\n      if (this.ready && this.disabled) {\n        this.disabled = false;\n        removeClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    // Disable (freeze) the cropper\n    disable: function disable() {\n      if (this.ready && !this.disabled) {\n        this.disabled = true;\n        addClass(this.cropper, CLASS_DISABLED);\n      }\n      return this;\n    },\n    /**\n     * Destroy the cropper and remove the instance from the image\n     * @returns {Cropper} this\n     */\n    destroy: function destroy() {\n      var element = this.element;\n      if (!element[NAMESPACE]) {\n        return this;\n      }\n      element[NAMESPACE] = undefined;\n      if (this.isImg && this.replaced) {\n        element.src = this.originalUrl;\n      }\n      this.uncreate();\n      return this;\n    },\n    /**\n     * Move the canvas with relative offsets\n     * @param {number} offsetX - The relative offset distance on the x-axis.\n     * @param {number} [offsetY=offsetX] - The relative offset distance on the y-axis.\n     * @returns {Cropper} this\n     */\n    move: function move(offsetX) {\n      var offsetY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : offsetX;\n      var _this$canvasData = this.canvasData,\n        left = _this$canvasData.left,\n        top = _this$canvasData.top;\n      return this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));\n    },\n    /**\n     * Move the canvas to an absolute point\n     * @param {number} x - The x-axis coordinate.\n     * @param {number} [y=x] - The y-axis coordinate.\n     * @returns {Cropper} this\n     */\n    moveTo: function moveTo(x) {\n      var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;\n      var canvasData = this.canvasData;\n      var changed = false;\n      x = Number(x);\n      y = Number(y);\n      if (this.ready && !this.disabled && this.options.movable) {\n        if (isNumber(x)) {\n          canvasData.left = x;\n          changed = true;\n        }\n        if (isNumber(y)) {\n          canvasData.top = y;\n          changed = true;\n        }\n        if (changed) {\n          this.renderCanvas(true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Zoom the canvas with a relative ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoom: function zoom(ratio, _originalEvent) {\n      var canvasData = this.canvasData;\n      ratio = Number(ratio);\n      if (ratio < 0) {\n        ratio = 1 / (1 - ratio);\n      } else {\n        ratio = 1 + ratio;\n      }\n      return this.zoomTo(canvasData.width * ratio / canvasData.naturalWidth, null, _originalEvent);\n    },\n    /**\n     * Zoom the canvas to an absolute ratio\n     * @param {number} ratio - The target ratio.\n     * @param {Object} pivot - The zoom pivot point coordinate.\n     * @param {Event} _originalEvent - The original event if any.\n     * @returns {Cropper} this\n     */\n    zoomTo: function zoomTo(ratio, pivot, _originalEvent) {\n      var options = this.options,\n        canvasData = this.canvasData;\n      var width = canvasData.width,\n        height = canvasData.height,\n        naturalWidth = canvasData.naturalWidth,\n        naturalHeight = canvasData.naturalHeight;\n      ratio = Number(ratio);\n      if (ratio >= 0 && this.ready && !this.disabled && options.zoomable) {\n        var newWidth = naturalWidth * ratio;\n        var newHeight = naturalHeight * ratio;\n        if (dispatchEvent(this.element, EVENT_ZOOM, {\n          ratio: ratio,\n          oldRatio: width / naturalWidth,\n          originalEvent: _originalEvent\n        }) === false) {\n          return this;\n        }\n        if (_originalEvent) {\n          var pointers = this.pointers;\n          var offset = getOffset(this.cropper);\n          var center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n            pageX: _originalEvent.pageX,\n            pageY: _originalEvent.pageY\n          };\n\n          // Zoom from the triggering point of the event\n          canvasData.left -= (newWidth - width) * ((center.pageX - offset.left - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((center.pageY - offset.top - canvasData.top) / height);\n        } else if (isPlainObject(pivot) && isNumber(pivot.x) && isNumber(pivot.y)) {\n          canvasData.left -= (newWidth - width) * ((pivot.x - canvasData.left) / width);\n          canvasData.top -= (newHeight - height) * ((pivot.y - canvasData.top) / height);\n        } else {\n          // Zoom from the center of the canvas\n          canvasData.left -= (newWidth - width) / 2;\n          canvasData.top -= (newHeight - height) / 2;\n        }\n        canvasData.width = newWidth;\n        canvasData.height = newHeight;\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Rotate the canvas with a relative degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotate: function rotate(degree) {\n      return this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n    },\n    /**\n     * Rotate the canvas to an absolute degree\n     * @param {number} degree - The rotate degree.\n     * @returns {Cropper} this\n     */\n    rotateTo: function rotateTo(degree) {\n      degree = Number(degree);\n      if (isNumber(degree) && this.ready && !this.disabled && this.options.rotatable) {\n        this.imageData.rotate = degree % 360;\n        this.renderCanvas(true, true);\n      }\n      return this;\n    },\n    /**\n     * Scale the image on the x-axis.\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @returns {Cropper} this\n     */\n    scaleX: function scaleX(_scaleX) {\n      var scaleY = this.imageData.scaleY;\n      return this.scale(_scaleX, isNumber(scaleY) ? scaleY : 1);\n    },\n    /**\n     * Scale the image on the y-axis.\n     * @param {number} scaleY - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scaleY: function scaleY(_scaleY) {\n      var scaleX = this.imageData.scaleX;\n      return this.scale(isNumber(scaleX) ? scaleX : 1, _scaleY);\n    },\n    /**\n     * Scale the image\n     * @param {number} scaleX - The scale ratio on the x-axis.\n     * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n     * @returns {Cropper} this\n     */\n    scale: function scale(scaleX) {\n      var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;\n      var imageData = this.imageData;\n      var transformed = false;\n      scaleX = Number(scaleX);\n      scaleY = Number(scaleY);\n      if (this.ready && !this.disabled && this.options.scalable) {\n        if (isNumber(scaleX)) {\n          imageData.scaleX = scaleX;\n          transformed = true;\n        }\n        if (isNumber(scaleY)) {\n          imageData.scaleY = scaleY;\n          transformed = true;\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n      }\n      return this;\n    },\n    /**\n     * Get the cropped area position and size data (base on the original image)\n     * @param {boolean} [rounded=false] - Indicate if round the data values or not.\n     * @returns {Object} The result cropped data.\n     */\n    getData: function getData() {\n      var rounded = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData,\n        cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          x: cropBoxData.left - canvasData.left,\n          y: cropBoxData.top - canvasData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n        var ratio = imageData.width / imageData.naturalWidth;\n        forEach(data, function (n, i) {\n          data[i] = n / ratio;\n        });\n        if (rounded) {\n          // In case rounding off leads to extra 1px in right or bottom border\n          // we should round the top-left corner and the dimension (#343).\n          var bottom = Math.round(data.y + data.height);\n          var right = Math.round(data.x + data.width);\n          data.x = Math.round(data.x);\n          data.y = Math.round(data.y);\n          data.width = right - data.x;\n          data.height = bottom - data.y;\n        }\n      } else {\n        data = {\n          x: 0,\n          y: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      if (options.rotatable) {\n        data.rotate = imageData.rotate || 0;\n      }\n      if (options.scalable) {\n        data.scaleX = imageData.scaleX || 1;\n        data.scaleY = imageData.scaleY || 1;\n      }\n      return data;\n    },\n    /**\n     * Set the cropped area position and size with new data\n     * @param {Object} data - The new data.\n     * @returns {Cropper} this\n     */\n    setData: function setData(data) {\n      var options = this.options,\n        imageData = this.imageData,\n        canvasData = this.canvasData;\n      var cropBoxData = {};\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        var transformed = false;\n        if (options.rotatable) {\n          if (isNumber(data.rotate) && data.rotate !== imageData.rotate) {\n            imageData.rotate = data.rotate;\n            transformed = true;\n          }\n        }\n        if (options.scalable) {\n          if (isNumber(data.scaleX) && data.scaleX !== imageData.scaleX) {\n            imageData.scaleX = data.scaleX;\n            transformed = true;\n          }\n          if (isNumber(data.scaleY) && data.scaleY !== imageData.scaleY) {\n            imageData.scaleY = data.scaleY;\n            transformed = true;\n          }\n        }\n        if (transformed) {\n          this.renderCanvas(true, true);\n        }\n        var ratio = imageData.width / imageData.naturalWidth;\n        if (isNumber(data.x)) {\n          cropBoxData.left = data.x * ratio + canvasData.left;\n        }\n        if (isNumber(data.y)) {\n          cropBoxData.top = data.y * ratio + canvasData.top;\n        }\n        if (isNumber(data.width)) {\n          cropBoxData.width = data.width * ratio;\n        }\n        if (isNumber(data.height)) {\n          cropBoxData.height = data.height * ratio;\n        }\n        this.setCropBoxData(cropBoxData);\n      }\n      return this;\n    },\n    /**\n     * Get the container size data.\n     * @returns {Object} The result container data.\n     */\n    getContainerData: function getContainerData() {\n      return this.ready ? assign({}, this.containerData) : {};\n    },\n    /**\n     * Get the image position and size data.\n     * @returns {Object} The result image data.\n     */\n    getImageData: function getImageData() {\n      return this.sized ? assign({}, this.imageData) : {};\n    },\n    /**\n     * Get the canvas position and size data.\n     * @returns {Object} The result canvas data.\n     */\n    getCanvasData: function getCanvasData() {\n      var canvasData = this.canvasData;\n      var data = {};\n      if (this.ready) {\n        forEach(['left', 'top', 'width', 'height', 'naturalWidth', 'naturalHeight'], function (n) {\n          data[n] = canvasData[n];\n        });\n      }\n      return data;\n    },\n    /**\n     * Set the canvas position and size with new data.\n     * @param {Object} data - The new canvas data.\n     * @returns {Cropper} this\n     */\n    setCanvasData: function setCanvasData(data) {\n      var canvasData = this.canvasData;\n      var aspectRatio = canvasData.aspectRatio;\n      if (this.ready && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          canvasData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          canvasData.top = data.top;\n        }\n        if (isNumber(data.width)) {\n          canvasData.width = data.width;\n          canvasData.height = data.width / aspectRatio;\n        } else if (isNumber(data.height)) {\n          canvasData.height = data.height;\n          canvasData.width = data.height * aspectRatio;\n        }\n        this.renderCanvas(true);\n      }\n      return this;\n    },\n    /**\n     * Get the crop box position and size data.\n     * @returns {Object} The result crop box data.\n     */\n    getCropBoxData: function getCropBoxData() {\n      var cropBoxData = this.cropBoxData;\n      var data;\n      if (this.ready && this.cropped) {\n        data = {\n          left: cropBoxData.left,\n          top: cropBoxData.top,\n          width: cropBoxData.width,\n          height: cropBoxData.height\n        };\n      }\n      return data || {};\n    },\n    /**\n     * Set the crop box position and size with new data.\n     * @param {Object} data - The new crop box data.\n     * @returns {Cropper} this\n     */\n    setCropBoxData: function setCropBoxData(data) {\n      var cropBoxData = this.cropBoxData;\n      var aspectRatio = this.options.aspectRatio;\n      var widthChanged;\n      var heightChanged;\n      if (this.ready && this.cropped && !this.disabled && isPlainObject(data)) {\n        if (isNumber(data.left)) {\n          cropBoxData.left = data.left;\n        }\n        if (isNumber(data.top)) {\n          cropBoxData.top = data.top;\n        }\n        if (isNumber(data.width) && data.width !== cropBoxData.width) {\n          widthChanged = true;\n          cropBoxData.width = data.width;\n        }\n        if (isNumber(data.height) && data.height !== cropBoxData.height) {\n          heightChanged = true;\n          cropBoxData.height = data.height;\n        }\n        if (aspectRatio) {\n          if (widthChanged) {\n            cropBoxData.height = cropBoxData.width / aspectRatio;\n          } else if (heightChanged) {\n            cropBoxData.width = cropBoxData.height * aspectRatio;\n          }\n        }\n        this.renderCropBox();\n      }\n      return this;\n    },\n    /**\n     * Get a canvas drawn the cropped image.\n     * @param {Object} [options={}] - The config options.\n     * @returns {HTMLCanvasElement} - The result canvas.\n     */\n    getCroppedCanvas: function getCroppedCanvas() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      if (!this.ready || !window.HTMLCanvasElement) {\n        return null;\n      }\n      var canvasData = this.canvasData;\n      var source = getSourceCanvas(this.image, this.imageData, canvasData, options);\n\n      // Returns the source canvas if it is not cropped.\n      if (!this.cropped) {\n        return source;\n      }\n      var _this$getData = this.getData(options.rounded),\n        initialX = _this$getData.x,\n        initialY = _this$getData.y,\n        initialWidth = _this$getData.width,\n        initialHeight = _this$getData.height;\n      var ratio = source.width / Math.floor(canvasData.naturalWidth);\n      if (ratio !== 1) {\n        initialX *= ratio;\n        initialY *= ratio;\n        initialWidth *= ratio;\n        initialHeight *= ratio;\n      }\n      var aspectRatio = initialWidth / initialHeight;\n      var maxSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.maxWidth || Infinity,\n        height: options.maxHeight || Infinity\n      });\n      var minSizes = getAdjustedSizes({\n        aspectRatio: aspectRatio,\n        width: options.minWidth || 0,\n        height: options.minHeight || 0\n      }, 'cover');\n      var _getAdjustedSizes = getAdjustedSizes({\n          aspectRatio: aspectRatio,\n          width: options.width || (ratio !== 1 ? source.width : initialWidth),\n          height: options.height || (ratio !== 1 ? source.height : initialHeight)\n        }),\n        width = _getAdjustedSizes.width,\n        height = _getAdjustedSizes.height;\n      width = Math.min(maxSizes.width, Math.max(minSizes.width, width));\n      height = Math.min(maxSizes.height, Math.max(minSizes.height, height));\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      canvas.width = normalizeDecimalNumber(width);\n      canvas.height = normalizeDecimalNumber(height);\n      context.fillStyle = options.fillColor || 'transparent';\n      context.fillRect(0, 0, width, height);\n      var _options$imageSmoothi = options.imageSmoothingEnabled,\n        imageSmoothingEnabled = _options$imageSmoothi === void 0 ? true : _options$imageSmoothi,\n        imageSmoothingQuality = options.imageSmoothingQuality;\n      context.imageSmoothingEnabled = imageSmoothingEnabled;\n      if (imageSmoothingQuality) {\n        context.imageSmoothingQuality = imageSmoothingQuality;\n      }\n\n      // https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D.drawImage\n      var sourceWidth = source.width;\n      var sourceHeight = source.height;\n\n      // Source canvas parameters\n      var srcX = initialX;\n      var srcY = initialY;\n      var srcWidth;\n      var srcHeight;\n\n      // Destination canvas parameters\n      var dstX;\n      var dstY;\n      var dstWidth;\n      var dstHeight;\n      if (srcX <= -initialWidth || srcX > sourceWidth) {\n        srcX = 0;\n        srcWidth = 0;\n        dstX = 0;\n        dstWidth = 0;\n      } else if (srcX <= 0) {\n        dstX = -srcX;\n        srcX = 0;\n        srcWidth = Math.min(sourceWidth, initialWidth + srcX);\n        dstWidth = srcWidth;\n      } else if (srcX <= sourceWidth) {\n        dstX = 0;\n        srcWidth = Math.min(initialWidth, sourceWidth - srcX);\n        dstWidth = srcWidth;\n      }\n      if (srcWidth <= 0 || srcY <= -initialHeight || srcY > sourceHeight) {\n        srcY = 0;\n        srcHeight = 0;\n        dstY = 0;\n        dstHeight = 0;\n      } else if (srcY <= 0) {\n        dstY = -srcY;\n        srcY = 0;\n        srcHeight = Math.min(sourceHeight, initialHeight + srcY);\n        dstHeight = srcHeight;\n      } else if (srcY <= sourceHeight) {\n        dstY = 0;\n        srcHeight = Math.min(initialHeight, sourceHeight - srcY);\n        dstHeight = srcHeight;\n      }\n      var params = [srcX, srcY, srcWidth, srcHeight];\n\n      // Avoid \"IndexSizeError\"\n      if (dstWidth > 0 && dstHeight > 0) {\n        var scale = width / initialWidth;\n        params.push(dstX * scale, dstY * scale, dstWidth * scale, dstHeight * scale);\n      }\n\n      // All the numerical parameters should be integer for `drawImage`\n      // https://github.com/fengyuanchen/cropper/issues/476\n      context.drawImage.apply(context, [source].concat(_toConsumableArray(params.map(function (param) {\n        return Math.floor(normalizeDecimalNumber(param));\n      }))));\n      return canvas;\n    },\n    /**\n     * Change the aspect ratio of the crop box.\n     * @param {number} aspectRatio - The new aspect ratio.\n     * @returns {Cropper} this\n     */\n    setAspectRatio: function setAspectRatio(aspectRatio) {\n      var options = this.options;\n      if (!this.disabled && !isUndefined(aspectRatio)) {\n        // 0 -> NaN\n        options.aspectRatio = Math.max(0, aspectRatio) || NaN;\n        if (this.ready) {\n          this.initCropBox();\n          if (this.cropped) {\n            this.renderCropBox();\n          }\n        }\n      }\n      return this;\n    },\n    /**\n     * Change the drag mode.\n     * @param {string} mode - The new drag mode.\n     * @returns {Cropper} this\n     */\n    setDragMode: function setDragMode(mode) {\n      var options = this.options,\n        dragBox = this.dragBox,\n        face = this.face;\n      if (this.ready && !this.disabled) {\n        var croppable = mode === DRAG_MODE_CROP;\n        var movable = options.movable && mode === DRAG_MODE_MOVE;\n        mode = croppable || movable ? mode : DRAG_MODE_NONE;\n        options.dragMode = mode;\n        setData(dragBox, DATA_ACTION, mode);\n        toggleClass(dragBox, CLASS_CROP, croppable);\n        toggleClass(dragBox, CLASS_MOVE, movable);\n        if (!options.cropBoxMovable) {\n          // Sync drag mode to crop box when it is not movable\n          setData(face, DATA_ACTION, mode);\n          toggleClass(face, CLASS_CROP, croppable);\n          toggleClass(face, CLASS_MOVE, movable);\n        }\n      }\n      return this;\n    }\n  };\n\n  var AnotherCropper = WINDOW.Cropper;\n  var Cropper = /*#__PURE__*/function () {\n    /**\n     * Create a new Cropper.\n     * @param {Element} element - The target element for cropping.\n     * @param {Object} [options={}] - The configuration options.\n     */\n    function Cropper(element) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      _classCallCheck(this, Cropper);\n      if (!element || !REGEXP_TAG_NAME.test(element.tagName)) {\n        throw new Error('The first argument is required and must be an <img> or <canvas> element.');\n      }\n      this.element = element;\n      this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n      this.cropped = false;\n      this.disabled = false;\n      this.pointers = {};\n      this.ready = false;\n      this.reloading = false;\n      this.replaced = false;\n      this.sized = false;\n      this.sizing = false;\n      this.init();\n    }\n    return _createClass(Cropper, [{\n      key: \"init\",\n      value: function init() {\n        var element = this.element;\n        var tagName = element.tagName.toLowerCase();\n        var url;\n        if (element[NAMESPACE]) {\n          return;\n        }\n        element[NAMESPACE] = this;\n        if (tagName === 'img') {\n          this.isImg = true;\n\n          // e.g.: \"img/picture.jpg\"\n          url = element.getAttribute('src') || '';\n          this.originalUrl = url;\n\n          // Stop when it's a blank image\n          if (!url) {\n            return;\n          }\n\n          // e.g.: \"https://example.com/img/picture.jpg\"\n          url = element.src;\n        } else if (tagName === 'canvas' && window.HTMLCanvasElement) {\n          url = element.toDataURL();\n        }\n        this.load(url);\n      }\n    }, {\n      key: \"load\",\n      value: function load(url) {\n        var _this = this;\n        if (!url) {\n          return;\n        }\n        this.url = url;\n        this.imageData = {};\n        var element = this.element,\n          options = this.options;\n        if (!options.rotatable && !options.scalable) {\n          options.checkOrientation = false;\n        }\n\n        // Only IE10+ supports Typed Arrays\n        if (!options.checkOrientation || !window.ArrayBuffer) {\n          this.clone();\n          return;\n        }\n\n        // Detect the mime type of the image directly if it is a Data URL\n        if (REGEXP_DATA_URL.test(url)) {\n          // Read ArrayBuffer from Data URL of JPEG images directly for better performance\n          if (REGEXP_DATA_URL_JPEG.test(url)) {\n            this.read(dataURLToArrayBuffer(url));\n          } else {\n            // Only a JPEG image may contains Exif Orientation information,\n            // the rest types of Data URLs are not necessary to check orientation at all.\n            this.clone();\n          }\n          return;\n        }\n\n        // 1. Detect the mime type of the image by a XMLHttpRequest.\n        // 2. Load the image as ArrayBuffer for reading orientation if its a JPEG image.\n        var xhr = new XMLHttpRequest();\n        var clone = this.clone.bind(this);\n        this.reloading = true;\n        this.xhr = xhr;\n\n        // 1. Cross origin requests are only supported for protocol schemes:\n        // http, https, data, chrome, chrome-extension.\n        // 2. Access to XMLHttpRequest from a Data URL will be blocked by CORS policy\n        // in some browsers as IE11 and Safari.\n        xhr.onabort = clone;\n        xhr.onerror = clone;\n        xhr.ontimeout = clone;\n        xhr.onprogress = function () {\n          // Abort the request directly if it not a JPEG image for better performance\n          if (xhr.getResponseHeader('content-type') !== MIME_TYPE_JPEG) {\n            xhr.abort();\n          }\n        };\n        xhr.onload = function () {\n          _this.read(xhr.response);\n        };\n        xhr.onloadend = function () {\n          _this.reloading = false;\n          _this.xhr = null;\n        };\n\n        // Bust cache when there is a \"crossOrigin\" property to avoid browser cache error\n        if (options.checkCrossOrigin && isCrossOriginURL(url) && element.crossOrigin) {\n          url = addTimestamp(url);\n        }\n\n        // The third parameter is required for avoiding side-effect (#682)\n        xhr.open('GET', url, true);\n        xhr.responseType = 'arraybuffer';\n        xhr.withCredentials = element.crossOrigin === 'use-credentials';\n        xhr.send();\n      }\n    }, {\n      key: \"read\",\n      value: function read(arrayBuffer) {\n        var options = this.options,\n          imageData = this.imageData;\n\n        // Reset the orientation value to its default value 1\n        // as some iOS browsers will render image with its orientation\n        var orientation = resetAndGetOrientation(arrayBuffer);\n        var rotate = 0;\n        var scaleX = 1;\n        var scaleY = 1;\n        if (orientation > 1) {\n          // Generate a new URL which has the default orientation value\n          this.url = arrayBufferToDataURL(arrayBuffer, MIME_TYPE_JPEG);\n          var _parseOrientation = parseOrientation(orientation);\n          rotate = _parseOrientation.rotate;\n          scaleX = _parseOrientation.scaleX;\n          scaleY = _parseOrientation.scaleY;\n        }\n        if (options.rotatable) {\n          imageData.rotate = rotate;\n        }\n        if (options.scalable) {\n          imageData.scaleX = scaleX;\n          imageData.scaleY = scaleY;\n        }\n        this.clone();\n      }\n    }, {\n      key: \"clone\",\n      value: function clone() {\n        var element = this.element,\n          url = this.url;\n        var crossOrigin = element.crossOrigin;\n        var crossOriginUrl = url;\n        if (this.options.checkCrossOrigin && isCrossOriginURL(url)) {\n          if (!crossOrigin) {\n            crossOrigin = 'anonymous';\n          }\n\n          // Bust cache when there is not a \"crossOrigin\" property (#519)\n          crossOriginUrl = addTimestamp(url);\n        }\n        this.crossOrigin = crossOrigin;\n        this.crossOriginUrl = crossOriginUrl;\n        var image = document.createElement('img');\n        if (crossOrigin) {\n          image.crossOrigin = crossOrigin;\n        }\n        image.src = crossOriginUrl || url;\n        image.alt = element.alt || 'The image to crop';\n        this.image = image;\n        image.onload = this.start.bind(this);\n        image.onerror = this.stop.bind(this);\n        addClass(image, CLASS_HIDE);\n        element.parentNode.insertBefore(image, element.nextSibling);\n      }\n    }, {\n      key: \"start\",\n      value: function start() {\n        var _this2 = this;\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        this.sizing = true;\n\n        // Match all browsers that use WebKit as the layout engine in iOS devices,\n        // such as Safari for iOS, Chrome for iOS, and in-app browsers.\n        var isIOSWebKit = WINDOW.navigator && /(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(WINDOW.navigator.userAgent);\n        var done = function done(naturalWidth, naturalHeight) {\n          assign(_this2.imageData, {\n            naturalWidth: naturalWidth,\n            naturalHeight: naturalHeight,\n            aspectRatio: naturalWidth / naturalHeight\n          });\n          _this2.initialImageData = assign({}, _this2.imageData);\n          _this2.sizing = false;\n          _this2.sized = true;\n          _this2.build();\n        };\n\n        // Most modern browsers (excepts iOS WebKit)\n        if (image.naturalWidth && !isIOSWebKit) {\n          done(image.naturalWidth, image.naturalHeight);\n          return;\n        }\n        var sizingImage = document.createElement('img');\n        var body = document.body || document.documentElement;\n        this.sizingImage = sizingImage;\n        sizingImage.onload = function () {\n          done(sizingImage.width, sizingImage.height);\n          if (!isIOSWebKit) {\n            body.removeChild(sizingImage);\n          }\n        };\n        sizingImage.src = image.src;\n\n        // iOS WebKit will convert the image automatically\n        // with its orientation once append it into DOM (#279)\n        if (!isIOSWebKit) {\n          sizingImage.style.cssText = 'left:0;' + 'max-height:none!important;' + 'max-width:none!important;' + 'min-height:0!important;' + 'min-width:0!important;' + 'opacity:0;' + 'position:absolute;' + 'top:0;' + 'z-index:-1;';\n          body.appendChild(sizingImage);\n        }\n      }\n    }, {\n      key: \"stop\",\n      value: function stop() {\n        var image = this.image;\n        image.onload = null;\n        image.onerror = null;\n        image.parentNode.removeChild(image);\n        this.image = null;\n      }\n    }, {\n      key: \"build\",\n      value: function build() {\n        if (!this.sized || this.ready) {\n          return;\n        }\n        var element = this.element,\n          options = this.options,\n          image = this.image;\n\n        // Create cropper elements\n        var container = element.parentNode;\n        var template = document.createElement('div');\n        template.innerHTML = TEMPLATE;\n        var cropper = template.querySelector(\".\".concat(NAMESPACE, \"-container\"));\n        var canvas = cropper.querySelector(\".\".concat(NAMESPACE, \"-canvas\"));\n        var dragBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-drag-box\"));\n        var cropBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-crop-box\"));\n        var face = cropBox.querySelector(\".\".concat(NAMESPACE, \"-face\"));\n        this.container = container;\n        this.cropper = cropper;\n        this.canvas = canvas;\n        this.dragBox = dragBox;\n        this.cropBox = cropBox;\n        this.viewBox = cropper.querySelector(\".\".concat(NAMESPACE, \"-view-box\"));\n        this.face = face;\n        canvas.appendChild(image);\n\n        // Hide the original image\n        addClass(element, CLASS_HIDDEN);\n\n        // Inserts the cropper after to the current image\n        container.insertBefore(cropper, element.nextSibling);\n\n        // Show the hidden image\n        removeClass(image, CLASS_HIDE);\n        this.initPreview();\n        this.bind();\n        options.initialAspectRatio = Math.max(0, options.initialAspectRatio) || NaN;\n        options.aspectRatio = Math.max(0, options.aspectRatio) || NaN;\n        options.viewMode = Math.max(0, Math.min(3, Math.round(options.viewMode))) || 0;\n        addClass(cropBox, CLASS_HIDDEN);\n        if (!options.guides) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-dashed\")), CLASS_HIDDEN);\n        }\n        if (!options.center) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-center\")), CLASS_HIDDEN);\n        }\n        if (options.background) {\n          addClass(cropper, \"\".concat(NAMESPACE, \"-bg\"));\n        }\n        if (!options.highlight) {\n          addClass(face, CLASS_INVISIBLE);\n        }\n        if (options.cropBoxMovable) {\n          addClass(face, CLASS_MOVE);\n          setData(face, DATA_ACTION, ACTION_ALL);\n        }\n        if (!options.cropBoxResizable) {\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-line\")), CLASS_HIDDEN);\n          addClass(cropBox.getElementsByClassName(\"\".concat(NAMESPACE, \"-point\")), CLASS_HIDDEN);\n        }\n        this.render();\n        this.ready = true;\n        this.setDragMode(options.dragMode);\n        if (options.autoCrop) {\n          this.crop();\n        }\n        this.setData(options.data);\n        if (isFunction(options.ready)) {\n          addListener(element, EVENT_READY, options.ready, {\n            once: true\n          });\n        }\n        dispatchEvent(element, EVENT_READY);\n      }\n    }, {\n      key: \"unbuild\",\n      value: function unbuild() {\n        if (!this.ready) {\n          return;\n        }\n        this.ready = false;\n        this.unbind();\n        this.resetPreview();\n        var parentNode = this.cropper.parentNode;\n        if (parentNode) {\n          parentNode.removeChild(this.cropper);\n        }\n        removeClass(this.element, CLASS_HIDDEN);\n      }\n    }, {\n      key: \"uncreate\",\n      value: function uncreate() {\n        if (this.ready) {\n          this.unbuild();\n          this.ready = false;\n          this.cropped = false;\n        } else if (this.sizing) {\n          this.sizingImage.onload = null;\n          this.sizing = false;\n          this.sized = false;\n        } else if (this.reloading) {\n          this.xhr.onabort = null;\n          this.xhr.abort();\n        } else if (this.image) {\n          this.stop();\n        }\n      }\n\n      /**\n       * Get the no conflict cropper class.\n       * @returns {Cropper} The cropper class.\n       */\n    }], [{\n      key: \"noConflict\",\n      value: function noConflict() {\n        window.Cropper = AnotherCropper;\n        return Cropper;\n      }\n\n      /**\n       * Change the default options.\n       * @param {Object} options - The new default options.\n       */\n    }, {\n      key: \"setDefaults\",\n      value: function setDefaults(options) {\n        assign(DEFAULTS, isPlainObject(options) && options);\n      }\n    }]);\n  }();\n  assign(Cropper.prototype, render, preview, events, handlers, change, methods);\n\n  return Cropper;\n\n}));\n", "/**\n * Save a <canvas> element's content to a Blob object.\n *\n * @param {HTMLCanvasElement} canvas\n * @returns {Promise}\n */\nexport default function canvasToBlob(canvas, type, quality) {\n    return new Promise((resolve) => {\n        canvas.toBlob(resolve, type, quality);\n    });\n}\n", "const DATA_URL_PATTERN = /^data:([^/]+\\/[^,;]+(?:[^,]*?))(;base64)?,([\\s\\S]*)$/;\nfunction dataURItoBlob(dataURI, opts, toFile) {\n    // get the base64 data\n    const dataURIData = DATA_URL_PATTERN.exec(dataURI);\n    // user may provide mime type, if not get it from data URI\n    const mimeType = opts.mimeType ?? dataURIData?.[1] ?? 'plain/text';\n    let data; // We add `!` to tell TS we're OK with `data` being not defined when the dataURI is invalid.\n    if (dataURIData?.[2] != null) {\n        const binary = atob(decodeURIComponent(dataURIData[3]));\n        const bytes = new Uint8Array(binary.length);\n        for (let i = 0; i < binary.length; i++) {\n            bytes[i] = binary.charCodeAt(i);\n        }\n        data = [bytes];\n    }\n    else if (dataURIData?.[3] != null) {\n        data = [decodeURIComponent(dataURIData[3])];\n    }\n    // Convert to a File?\n    if (toFile) {\n        return new File(data, opts.name || '', { type: mimeType });\n    }\n    return new Blob(data, { type: mimeType });\n}\nexport default dataURItoBlob;\n", "/**\n * Low-pass filter using Exponential Moving Averages (aka exponential smoothing)\n * Filters a sequence of values by updating the mixing the previous output value\n * with the new input using the exponential window function\n *\n * @param newValue the n-th value of the sequence\n * @param previousSmoothedValue the exponential average of the first n-1 values\n * @param halfLife value of `dt` to move the smoothed value halfway between `previousFilteredValue` and `newValue`\n * @param dt time elapsed between adding the (n-1)th and the n-th values\n * @returns the exponential average of the first n values\n */\nexport default function emaFilter(newValue, previousSmoothedValue, halfLife, dt) {\n    if (halfLife === 0 || newValue === previousSmoothedValue)\n        return newValue;\n    if (dt === 0)\n        return previousSmoothedValue;\n    return newValue + (previousSmoothedValue - newValue) * 2 ** (-dt / halfLife);\n}\n", "export default [\n    'a[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'area[href]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'input:not([disabled]):not([inert]):not([aria-hidden])',\n    'select:not([disabled]):not([inert]):not([aria-hidden])',\n    'textarea:not([disabled]):not([inert]):not([aria-hidden])',\n    'button:not([disabled]):not([inert]):not([aria-hidden])',\n    'iframe:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'object:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    'embed:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[contenteditable]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n    '[tabindex]:not([tabindex^=\"-\"]):not([inert]):not([aria-hidden])',\n];\n", "class NetworkError extends Error {\n    cause;\n    isNetworkError;\n    request;\n    constructor(error, xhr = null) {\n        super(`This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.`);\n        this.cause = error;\n        this.isNetworkError = true;\n        this.request = xhr;\n    }\n}\nexport default NetworkError;\n", "/**\n * Helper to abort upload requests if there has not been any progress for `timeout` ms.\n * Create an instance using `timer = new ProgressTimeout(10000, onTimeout)`\n * Call `timer.progress()` to signal that there has been progress of any kind.\n * Call `timer.done()` when the upload has completed.\n */\nclass ProgressTimeout {\n    #aliveTimer;\n    #isDone = false;\n    #onTimedOut;\n    #timeout;\n    constructor(timeout, timeoutHandler) {\n        this.#timeout = timeout;\n        this.#onTimedOut = () => timeoutHandler(timeout);\n    }\n    progress() {\n        // Some browsers fire another progress event when the upload is\n        // cancelled, so we have to ignore progress after the timer was\n        // told to stop.\n        if (this.#isDone)\n            return;\n        if (this.#timeout > 0) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = setTimeout(this.#onTimedOut, this.#timeout);\n        }\n    }\n    done() {\n        if (!this.#isDone) {\n            clearTimeout(this.#aliveTimer);\n            this.#aliveTimer = undefined;\n            this.#isDone = true;\n        }\n    }\n}\nexport default ProgressTimeout;\n", "import NetworkError from './NetworkError.js';\nimport ProgressTimeout from './ProgressTimeout.js';\nconst noop = () => { };\n/**\n * Fetches data from a specified URL using XMLHttpRequest, with optional retry functionality and progress tracking.\n *\n * @param url The URL to send the request to.\n * @param options Optional settings for the fetch operation.\n */\nexport function fetcher(url, options = {}) {\n    const { body = null, headers = {}, method = 'GET', onBeforeRequest = noop, onUploadProgress = noop, shouldRetry = () => true, onAfterResponse = noop, onTimeout = noop, responseType, retries = 3, signal = null, timeout = 30_000, withCredentials = false, } = options;\n    // 300 ms, 600 ms, 1200 ms, 2400 ms, 4800 ms\n    const delay = (attempt) => 0.3 * 2 ** (attempt - 1) * 1000;\n    const timer = new ProgressTimeout(timeout, onTimeout);\n    function requestWithRetry(retryCount = 0) {\n        // biome-ignore lint/suspicious/noAsyncPromiseExecutor: it's fine\n        return new Promise(async (resolve, reject) => {\n            const xhr = new XMLHttpRequest();\n            const onError = (error) => {\n                if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(error);\n                }\n            };\n            xhr.open(method, url, true);\n            xhr.withCredentials = withCredentials;\n            if (responseType) {\n                xhr.responseType = responseType;\n            }\n            xhr.onload = async () => {\n                try {\n                    await onAfterResponse(xhr, retryCount);\n                }\n                catch (err) {\n                    // This is important as we need to emit the xhr\n                    // over the upload-error event.\n                    err.request = xhr;\n                    onError(err);\n                    return;\n                }\n                if (xhr.status >= 200 && xhr.status < 300) {\n                    timer.done();\n                    resolve(xhr);\n                }\n                else if (shouldRetry(xhr) && retryCount < retries) {\n                    setTimeout(() => {\n                        requestWithRetry(retryCount + 1).then(resolve, reject);\n                    }, delay(retryCount));\n                }\n                else {\n                    timer.done();\n                    reject(new NetworkError(xhr.statusText, xhr));\n                }\n            };\n            xhr.onerror = () => onError(new NetworkError(xhr.statusText, xhr));\n            xhr.upload.onprogress = (event) => {\n                timer.progress();\n                onUploadProgress(event);\n            };\n            if (headers) {\n                Object.keys(headers).forEach((key) => {\n                    xhr.setRequestHeader(key, headers[key]);\n                });\n            }\n            function abort() {\n                xhr.abort();\n                // Using DOMException for abort errors aligns with\n                // the convention established by the Fetch API.\n                reject(new DOMException('Aborted', 'AbortError'));\n            }\n            signal?.addEventListener('abort', abort);\n            if (signal?.aborted) {\n                // in case the signal was already aborted\n                abort();\n                return;\n            }\n            await onBeforeRequest(xhr, retryCount);\n            xhr.send(body);\n        });\n    }\n    return requestWithRetry();\n}\n", "const hasError = (file) => 'error' in file && !!file.error;\n// We don't need to re-upload already successfully uploaded files\n// so let's exclude them here:\n// https://github.com/transloadit/uppy/issues/5930\n// This happens for example when restoring a partially finished session (e.g. using golden retriever).\nconst isCompleted = (file) => file.progress.uploadComplete;\nexport function filterFilesToUpload(files) {\n    return files.filter((file) => !hasError(file) && !isCompleted(file));\n}\n// Don't double-emit upload-started for Golden Retriever-restored files that were already started\nexport function filterFilesToEmitUploadStarted(files) {\n    return files.filter((file) => !file.progress?.uploadStarted || !file.isRestored);\n}\n", "/**\n * Check if an object is a DOM element. Duck-typing based on `nodeType`.\n */\nexport default function isDOMElement(obj) {\n    if (typeof obj !== 'object' || obj === null)\n        return false;\n    if (!('nodeType' in obj))\n        return false;\n    return obj.nodeType === Node.ELEMENT_NODE;\n}\n", "import isDOMElement from './isDOMElement.js';\n/**\n * Find one or more DOM elements.\n */\nfunction findAllDOMElements(element) {\n    if (typeof element === 'string') {\n        const elements = document.querySelectorAll(element);\n        return elements.length === 0 ? null : Array.from(elements);\n    }\n    if (typeof element === 'object' && isDOMElement(element)) {\n        return [element];\n    }\n    return null;\n}\nexport default findAllDOMElements;\n", "import isDOMElement from './isDOMElement.js';\nfunction findDOMElement(element, context = document) {\n    if (typeof element === 'string') {\n        return context.querySelector(element);\n    }\n    if (isDOMElement(element)) {\n        return element;\n    }\n    return null;\n}\nexport default findDOMElement;\n", "/**\n * Takes a full filename string and returns an object {name, extension}\n */\nexport default function getFileNameAndExtension(fullFileName) {\n    const lastDot = fullFileName.lastIndexOf('.');\n    // these count as no extension: \"no-dot\", \"trailing-dot.\"\n    if (lastDot === -1 || lastDot === fullFileName.length - 1) {\n        return {\n            name: fullFileName,\n            extension: undefined,\n        };\n    }\n    return {\n        name: fullFileName.slice(0, lastDot),\n        extension: fullFileName.slice(lastDot + 1),\n    };\n}\n", "// ___Why not add the mime-types package?\n//    It's 19.7kB gzipped, and we only need mime types for well-known extensions (for file previews).\n// ___Where to take new extensions from?\n//    https://github.com/jshttp/mime-db/blob/master/db.json\nexport default {\n    __proto__: null,\n    md: 'text/markdown',\n    markdown: 'text/markdown',\n    mp4: 'video/mp4',\n    mp3: 'audio/mp3',\n    svg: 'image/svg+xml',\n    jpg: 'image/jpeg',\n    png: 'image/png',\n    webp: 'image/webp',\n    gif: 'image/gif',\n    heic: 'image/heic',\n    heif: 'image/heif',\n    yaml: 'text/yaml',\n    yml: 'text/yaml',\n    csv: 'text/csv',\n    tsv: 'text/tab-separated-values',\n    tab: 'text/tab-separated-values',\n    avi: 'video/x-msvideo',\n    mks: 'video/x-matroska',\n    mkv: 'video/x-matroska',\n    mov: 'video/quicktime',\n    dicom: 'application/dicom',\n    doc: 'application/msword',\n    msg: 'application/vnd.ms-outlook',\n    docm: 'application/vnd.ms-word.document.macroenabled.12',\n    docx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    dot: 'application/msword',\n    dotm: 'application/vnd.ms-word.template.macroenabled.12',\n    dotx: 'application/vnd.openxmlformats-officedocument.wordprocessingml.template',\n    xla: 'application/vnd.ms-excel',\n    xlam: 'application/vnd.ms-excel.addin.macroenabled.12',\n    xlc: 'application/vnd.ms-excel',\n    xlf: 'application/x-xliff+xml',\n    xlm: 'application/vnd.ms-excel',\n    xls: 'application/vnd.ms-excel',\n    xlsb: 'application/vnd.ms-excel.sheet.binary.macroenabled.12',\n    xlsm: 'application/vnd.ms-excel.sheet.macroenabled.12',\n    xlsx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    xlt: 'application/vnd.ms-excel',\n    xltm: 'application/vnd.ms-excel.template.macroenabled.12',\n    xltx: 'application/vnd.openxmlformats-officedocument.spreadsheetml.template',\n    xlw: 'application/vnd.ms-excel',\n    txt: 'text/plain',\n    text: 'text/plain',\n    conf: 'text/plain',\n    log: 'text/plain',\n    pdf: 'application/pdf',\n    zip: 'application/zip',\n    '7z': 'application/x-7z-compressed',\n    rar: 'application/x-rar-compressed',\n    tar: 'application/x-tar',\n    gz: 'application/gzip',\n    dmg: 'application/x-apple-diskimage',\n};\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nimport mimeTypes from './mimeTypes.js';\nexport default function getFileType(file) {\n    if (file.type)\n        return file.type;\n    const fileExtension = file.name\n        ? getFileNameAndExtension(file.name).extension?.toLowerCase()\n        : null;\n    if (fileExtension && fileExtension in mimeTypes) {\n        // else, see if we can map extension to a mime type\n        return mimeTypes[fileExtension];\n    }\n    // if all fails, fall back to a generic byte stream type\n    return 'application/octet-stream';\n}\n", "import getFileType from './getFileType.js';\nfunction encodeCharacter(character) {\n    return character.charCodeAt(0).toString(32);\n}\nfunction encodeFilename(name) {\n    let suffix = '';\n    return (name.replace(/[^A-Z0-9]/gi, (character) => {\n        suffix += `-${encodeCharacter(character)}`;\n        return '/';\n    }) + suffix);\n}\n/**\n * Takes a file object and turns it into fileID, by converting file.name to lowercase,\n * removing extra characters and adding type, size and lastModified\n */\nexport default function generateFileID(file, instanceId) {\n    // It's tempting to do `[items].filter(Boolean).join('-')` here, but that\n    // is slower! simple string concatenation is fast\n    let id = instanceId || 'uppy';\n    if (typeof file.name === 'string') {\n        id += `-${encodeFilename(file.name.toLowerCase())}`;\n    }\n    if (file.type !== undefined) {\n        id += `-${file.type}`;\n    }\n    if (file.meta && typeof file.meta.relativePath === 'string') {\n        id += `-${encodeFilename(file.meta.relativePath.toLowerCase())}`;\n    }\n    if (file.data?.size !== undefined) {\n        id += `-${file.data.size}`;\n    }\n    if (file.data.lastModified !== undefined) {\n        id += `-${file.data.lastModified}`;\n    }\n    return id;\n}\n// If the provider has a stable, unique ID, then we can use that to identify the file.\n// Then we don't have to generate our own ID, and we can add the same file many times if needed (different path)\nfunction hasFileStableId(file) {\n    if (!file.isRemote || !file.remote)\n        return false;\n    // These are the providers that it seems like have stable IDs for their files. The other's I haven't checked yet.\n    const stableIdProviders = new Set([\n        'box',\n        'dropbox',\n        'drive',\n        'facebook',\n        'unsplash',\n    ]);\n    return stableIdProviders.has(file.remote.provider);\n}\nexport function getSafeFileId(file, instanceId) {\n    if (hasFileStableId(file))\n        return file.id;\n    const fileType = getFileType(file);\n    return generateFileID({\n        ...file,\n        type: fileType,\n    }, instanceId);\n}\n", "export default function getAllowedMetaFields(fields, meta) {\n    if (fields === true) {\n        return Object.keys(meta);\n    }\n    if (Array.isArray(fields)) {\n        return fields;\n    }\n    return [];\n}\n", "/**\n * Converts list into array\n */\nexport default Array.from;\n", "import toArray from '../../toArray.js';\n// .files fallback, should be implemented in any browser\nexport default function fallbackApi(dataTransfer) {\n    const files = toArray(dataTransfer.files);\n    return Promise.resolve(files);\n}\n", "/**\n * Recursive function, calls the original callback() when the directory is entirely parsed.\n */\nexport default function getFilesAndDirectoriesFromDirectory(directoryReader, oldEntries, logDropError, { onSuccess }) {\n    directoryReader.readEntries((entries) => {\n        const newEntries = [...oldEntries, ...entries];\n        // According to the FileSystem API spec, getFilesAndDirectoriesFromDirectory()\n        // must be called until it calls the onSuccess with an empty array.\n        if (entries.length) {\n            queueMicrotask(() => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, newEntries, logDropError, { onSuccess });\n            });\n            // Done iterating this particular directory\n        }\n        else {\n            onSuccess(newEntries);\n        }\n    }, \n    // Make sure we resolve on error anyway, it's fine if only one directory couldn't be parsed!\n    (error) => {\n        logDropError(error);\n        onSuccess(oldEntries);\n    });\n}\n", "import getFilesAndDirectoriesFromDirectory from './getFilesAndDirectoriesFromDirectory.js';\n/**\n * Polyfill for the new (experimental) getAsFileSystemHandle API (using the popular webkitGetAsEntry behind the scenes)\n * so that we can switch to the getAsFileSystemHandle API once it (hopefully) becomes standard\n */\nfunction getAsFileSystemHandleFromEntry(entry, logDropError) {\n    if (entry == null)\n        return entry;\n    return {\n        kind: entry.isFile\n            ? 'file'\n            : entry.isDirectory\n                ? 'directory'\n                : undefined,\n        name: entry.name,\n        getFile() {\n            return new Promise((resolve, reject) => entry.file(resolve, reject));\n        },\n        async *values() {\n            // If the file is a directory.\n            const directoryReader = entry.createReader();\n            const entries = await new Promise((resolve) => {\n                getFilesAndDirectoriesFromDirectory(directoryReader, [], logDropError, {\n                    onSuccess: (dirEntries) => resolve(dirEntries.map((file) => getAsFileSystemHandleFromEntry(file, logDropError))),\n                });\n            });\n            yield* entries;\n        },\n        isSameEntry: undefined,\n    };\n}\nasync function* createPromiseToAddFileOrParseDirectory(entry, relativePath, lastResortFile = undefined) {\n    const getNextRelativePath = () => `${relativePath}/${entry.name}`;\n    // For each dropped item, - make sure it's a file/directory, and start deepening in!\n    if (entry.kind === 'file') {\n        const file = await entry.getFile();\n        if (file != null) {\n            ;\n            file.relativePath = relativePath ? getNextRelativePath() : null;\n            yield file;\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n    else if (entry.kind === 'directory') {\n        for await (const handle of entry.values()) {\n            // Recurse on the directory, appending the dir name to the relative path\n            yield* createPromiseToAddFileOrParseDirectory(handle, relativePath ? getNextRelativePath() : entry.name);\n        }\n    }\n    else if (lastResortFile != null)\n        yield lastResortFile;\n}\n/**\n * Load all files from data transfer, and recursively read any directories.\n * Note that IE is not supported for drag-drop, because IE doesn't support Data Transfers\n *\n * @param {DataTransfer} dataTransfer\n * @param {*} logDropError on error\n */\nexport default async function* getFilesFromDataTransfer(dataTransfer, logDropError) {\n    // Retrieving the dropped items must happen synchronously\n    // otherwise only the first item gets treated and the other ones are garbage collected.\n    // https://github.com/transloadit/uppy/pull/3998\n    const fileSystemHandles = await Promise.all(Array.from(dataTransfer.items, async (item) => {\n        // biome-ignore lint/style/useConst: ...\n        let fileSystemHandle;\n        // TODO enable getAsFileSystemHandle API once we can get it working with subdirectories\n        // IMPORTANT: Need to check isSecureContext *before* calling getAsFileSystemHandle\n        // or else Chrome will crash when running in HTTP: https://github.com/transloadit/uppy/issues/4133\n        // if (window.isSecureContext && item.getAsFileSystemHandle != null)\n        // fileSystemHandle = await item.getAsFileSystemHandle()\n        // `webkitGetAsEntry` exists in all popular browsers (including non-WebKit browsers),\n        // however it may be renamed to getAsEntry() in the future, so you should code defensively, looking for both.\n        // from https://developer.mozilla.org/en-US/docs/Web/API/DataTransferItem/webkitGetAsEntry\n        const getAsEntry = () => typeof item.getAsEntry === 'function'\n            ? item.getAsEntry()\n            : item.webkitGetAsEntry();\n        fileSystemHandle ??= getAsFileSystemHandleFromEntry(getAsEntry(), logDropError);\n        return {\n            fileSystemHandle,\n            lastResortFile: item.getAsFile(), // can be used as a fallback in case other methods fail\n        };\n    }));\n    for (const { lastResortFile, fileSystemHandle } of fileSystemHandles) {\n        // fileSystemHandle and lastResortFile can be null when we drop an url.\n        if (fileSystemHandle != null) {\n            try {\n                yield* createPromiseToAddFileOrParseDirectory(fileSystemHandle, '', lastResortFile);\n            }\n            catch (err) {\n                // Example: If dropping a symbolic link, Chromium will throw:\n                // \"DOMException: A requested file or directory could not be found at the time an operation was processed.\",\n                // So we will use lastResortFile instead. See https://github.com/transloadit/uppy/issues/3505.\n                if (lastResortFile != null) {\n                    yield lastResortFile;\n                }\n                else {\n                    logDropError(err);\n                }\n            }\n        }\n        else if (lastResortFile != null)\n            yield lastResortFile;\n    }\n}\n", "import fallbackApi from './utils/fallbackApi.js';\nimport webkitGetAsEntryApi from './utils/webkitGetAsEntryApi/index.js';\n/**\n * Returns a promise that resolves to the array of dropped files (if a folder is\n * dropped, and browser supports folder parsing - promise resolves to the flat\n * array of all files in all directories).\n * Each file has .relativePath prop appended to it (e.g. \"/docs/Prague/ticket_from_prague_to_ufa.pdf\")\n * if browser supports it. Otherwise it's undefined.\n *\n * @param dataTransfer\n * @param options\n * @param options.logDropError - a function that's called every time some\n * folder or some file error out (e.g. because of the folder name being too long\n * on Windows). Notice that resulting promise will always be resolved anyway.\n *\n * @returns {Promise} - Array<File>\n */\nexport default async function getDroppedFiles(dataTransfer, options) {\n    // Get all files from all subdirs. Works (at least) in Chrome, Mozilla, and Safari\n    const logDropError = options?.logDropError ?? Function.prototype;\n    try {\n        const accumulator = [];\n        for await (const file of webkitGetAsEntryApi(dataTransfer, logDropError)) {\n            accumulator.push(file);\n        }\n        return accumulator;\n        // Otherwise just return all first-order files\n    }\n    catch {\n        return fallbackApi(dataTransfer);\n    }\n}\n", "const mimeToExtensions = {\n    __proto__: null,\n    'audio/mp3': 'mp3',\n    'audio/mp4': 'mp4',\n    'audio/ogg': 'ogg',\n    'audio/webm': 'webm',\n    'image/gif': 'gif',\n    'image/heic': 'heic',\n    'image/heif': 'heif',\n    'image/jpeg': 'jpg',\n    'image/webp': 'webp',\n    'image/png': 'png',\n    'image/svg+xml': 'svg',\n    'video/mp4': 'mp4',\n    'video/ogg': 'ogv',\n    'video/quicktime': 'mov',\n    'video/webm': 'webm',\n    'video/x-matroska': 'mkv',\n    'video/x-msvideo': 'avi',\n};\nexport default function getFileTypeExtension(mimeType) {\n    // Remove the ; bit in 'video/x-matroska;codecs=avc1'\n    ;\n    [mimeType] = mimeType.split(';', 1);\n    return mimeToExtensions[mimeType] || null;\n}\n", "/**\n * Get the declared text direction for an element.\n */\nfunction getTextDirection(element) {\n    // There is another way to determine text direction using getComputedStyle(), as done here:\n    // https://github.com/pencil-js/text-direction/blob/2a235ce95089b3185acec3b51313cbba921b3811/text-direction.js\n    //\n    // We do not use that approach because we are interested specifically in the _declared_ text direction.\n    // If no text direction is declared, we have to provide our own explicit text direction so our\n    // bidirectional CSS style sheets work.\n    while (element && !element.dir) {\n        element = element.parentNode;\n    }\n    return element?.dir;\n}\nexport default getTextDirection;\n", "/**\n * Adds zero to strings shorter than two characters.\n */\nfunction pad(number) {\n    return number < 10 ? `0${number}` : number.toString();\n}\n/**\n * Returns a timestamp in the format of `hours:minutes:seconds`\n */\nexport default function getTimeStamp() {\n    const date = new Date();\n    const hours = pad(date.getHours());\n    const minutes = pad(date.getMinutes());\n    const seconds = pad(date.getSeconds());\n    return `${hours}:${minutes}:${seconds}`;\n}\n", "/**\n * Checks if the browser supports Drag & Drop (not supported on mobile devices, for example).\n */\nexport default function isDragDropSupported() {\n    if (typeof window === 'undefined') {\n        return false;\n    }\n    const body = document.body;\n    // sometimes happens in the wild: https://github.com/transloadit/uppy/issues/5953\n    if (body == null || window == null) {\n        return false;\n    }\n    if (!('draggable' in body) ||\n        !('ondragstart' in body) ||\n        !('ondrop' in body)) {\n        return false;\n    }\n    if (!('FormData' in window)) {\n        return false;\n    }\n    if (!('FileReader' in window)) {\n        return false;\n    }\n    return true;\n}\n", "function isNetworkError(xhr) {\n    if (!xhr)\n        return false;\n    // finished but status is 0 \u2014 usually indicates a network/CORS/file error\n    return xhr.readyState === 4 && xhr.status === 0;\n}\nexport default isNetworkError;\n", "/**\n * Check if a URL string is an object URL from `URL.createObjectURL`.\n */\nexport default function isObjectURL(url) {\n    return url.startsWith('blob:');\n}\n", "export default function isPreviewSupported(fileType) {\n    if (!fileType)\n        return false;\n    // list of images that browsers can preview\n    return /^[^/]+\\/(jpe?g|gif|png|svg|svg\\+xml|bmp|webp|avif)$/.test(fileType);\n}\n", "export default function secondsToTime(rawSeconds) {\n    const hours = Math.floor(rawSeconds / 3600) % 24;\n    const minutes = Math.floor(rawSeconds / 60) % 60;\n    const seconds = Math.floor(rawSeconds % 60);\n    return { hours, minutes, seconds };\n}\n", "import secondsToTime from './secondsToTime.js';\nexport default function prettyETA(seconds) {\n    const time = secondsToTime(seconds);\n    // Only display hours and minutes if they are greater than 0 but always\n    // display minutes if hours is being displayed\n    // Display a leading zero if the there is a preceding unit: 1m 05s, but 5s\n    const hoursStr = time.hours === 0 ? '' : `${time.hours}h`;\n    const minutesStr = time.minutes === 0\n        ? ''\n        : `${time.hours === 0\n            ? time.minutes\n            : ` ${time.minutes.toString(10).padStart(2, '0')}`}m`;\n    const secondsStr = time.hours !== 0\n        ? ''\n        : `${time.minutes === 0\n            ? time.seconds\n            : ` ${time.seconds.toString(10).padStart(2, '0')}`}s`;\n    return `${hoursStr}${minutesStr}${secondsStr}`;\n}\n", "function createCancelError(cause) {\n    return new Error('Cancelled', { cause });\n}\nfunction abortOn(signal) {\n    if (signal != null) {\n        const abortPromise = () => this.abort(signal.reason);\n        signal.addEventListener('abort', abortPromise, { once: true });\n        const removeAbortListener = () => {\n            signal.removeEventListener('abort', abortPromise);\n        };\n        this.then?.(removeAbortListener, removeAbortListener);\n    }\n    return this;\n}\nexport class RateLimitedQueue {\n    #activeRequests = 0;\n    #queuedHandlers = [];\n    #paused = false;\n    #pauseTimer;\n    #downLimit = 1;\n    #upperLimit;\n    #rateLimitingTimer;\n    limit;\n    constructor(limit) {\n        if (typeof limit !== 'number' || limit === 0) {\n            this.limit = Infinity;\n        }\n        else {\n            this.limit = limit;\n        }\n    }\n    #call(fn) {\n        this.#activeRequests += 1;\n        let done = false;\n        let cancelActive;\n        try {\n            cancelActive = fn();\n        }\n        catch (err) {\n            this.#activeRequests -= 1;\n            throw err;\n        }\n        return {\n            abort: (cause) => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                cancelActive?.(cause);\n                this.#queueNext();\n            },\n            done: () => {\n                if (done)\n                    return;\n                done = true;\n                this.#activeRequests -= 1;\n                this.#queueNext();\n            },\n        };\n    }\n    #queueNext() {\n        // Do it soon but not immediately, this allows clearing out the entire queue synchronously\n        // one by one without continuously _advancing_ it (and starting new tasks before immediately\n        // aborting them)\n        queueMicrotask(() => this.#next());\n    }\n    #next() {\n        if (this.#paused || this.#activeRequests >= this.limit) {\n            return;\n        }\n        if (this.#queuedHandlers.length === 0) {\n            return;\n        }\n        // Dispatch the next request, and update the abort/done handlers\n        // so that cancelling it does the Right Thing (and doesn't just try\n        // to dequeue an already-running request).\n        const next = this.#queuedHandlers.shift();\n        if (next == null) {\n            throw new Error('Invariant violation: next is null');\n        }\n        const handler = this.#call(next.fn);\n        next.abort = handler.abort;\n        next.done = handler.done;\n    }\n    #queue(fn, options) {\n        const handler = {\n            fn,\n            priority: options?.priority || 0,\n            abort: () => {\n                this.#dequeue(handler);\n            },\n            done: () => {\n                throw new Error('Cannot mark a queued request as done: this indicates a bug');\n            },\n        };\n        const index = this.#queuedHandlers.findIndex((other) => {\n            return handler.priority > other.priority;\n        });\n        if (index === -1) {\n            this.#queuedHandlers.push(handler);\n        }\n        else {\n            this.#queuedHandlers.splice(index, 0, handler);\n        }\n        return handler;\n    }\n    #dequeue(handler) {\n        const index = this.#queuedHandlers.indexOf(handler);\n        if (index !== -1) {\n            this.#queuedHandlers.splice(index, 1);\n        }\n    }\n    run(fn, queueOptions) {\n        if (!this.#paused && this.#activeRequests < this.limit) {\n            return this.#call(fn);\n        }\n        return this.#queue(fn, queueOptions);\n    }\n    wrapSyncFunction(fn, queueOptions) {\n        return (...args) => {\n            const queuedRequest = this.run(() => {\n                fn(...args);\n                queueMicrotask(() => queuedRequest.done());\n                return () => { };\n            }, queueOptions);\n            return {\n                abortOn,\n                abort() {\n                    queuedRequest.abort();\n                },\n            };\n        };\n    }\n    wrapPromiseFunction(fn, queueOptions) {\n        return (...args) => {\n            let queuedRequest;\n            const outerPromise = new Promise((resolve, reject) => {\n                queuedRequest = this.run(() => {\n                    let cancelError;\n                    let innerPromise;\n                    try {\n                        innerPromise = Promise.resolve(fn(...args));\n                    }\n                    catch (err) {\n                        innerPromise = Promise.reject(err);\n                    }\n                    innerPromise.then((result) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            resolve(result);\n                        }\n                    }, (err) => {\n                        if (cancelError) {\n                            reject(cancelError);\n                        }\n                        else {\n                            queuedRequest.done();\n                            reject(err);\n                        }\n                    });\n                    return (cause) => {\n                        cancelError = createCancelError(cause);\n                    };\n                }, queueOptions);\n            });\n            outerPromise.abort = (cause) => {\n                queuedRequest.abort(cause);\n            };\n            outerPromise.abortOn = abortOn;\n            return outerPromise;\n        };\n    }\n    resume() {\n        this.#paused = false;\n        clearTimeout(this.#pauseTimer);\n        for (let i = 0; i < this.limit; i++) {\n            this.#queueNext();\n        }\n    }\n    #resume = () => this.resume();\n    /**\n     * Freezes the queue for a while or indefinitely.\n     *\n     * @param {number | null } [duration] Duration for the pause to happen, in milliseconds.\n     *                                    If omitted, the queue won't resume automatically.\n     */\n    pause(duration = null) {\n        this.#paused = true;\n        clearTimeout(this.#pauseTimer);\n        if (duration != null) {\n            this.#pauseTimer = setTimeout(this.#resume, duration);\n        }\n    }\n    /**\n     * Pauses the queue for a duration, and lower the limit of concurrent requests\n     * when the queue resumes. When the queue resumes, it tries to progressively\n     * increase the limit in `this.#increaseLimit` until another call is made to\n     * `this.rateLimit`.\n     * Call this function when using the RateLimitedQueue for network requests and\n     * the remote server responds with 429 HTTP code.\n     *\n     * @param {number} duration in milliseconds.\n     */\n    rateLimit(duration) {\n        clearTimeout(this.#rateLimitingTimer);\n        this.pause(duration);\n        if (this.limit > 1 && Number.isFinite(this.limit)) {\n            this.#upperLimit = this.limit - 1;\n            this.limit = this.#downLimit;\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, duration);\n        }\n    }\n    #increaseLimit = () => {\n        if (this.#paused) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 0);\n            return;\n        }\n        this.#downLimit = this.limit;\n        this.limit = Math.ceil((this.#upperLimit + this.#downLimit) / 2);\n        for (let i = this.#downLimit; i <= this.limit; i++) {\n            this.#queueNext();\n        }\n        if (this.#upperLimit - this.#downLimit > 3) {\n            this.#rateLimitingTimer = setTimeout(this.#increaseLimit, 2000);\n        }\n        else {\n            this.#downLimit = Math.floor(this.#downLimit / 2);\n        }\n    };\n    get isPaused() {\n        return this.#paused;\n    }\n}\nexport const internalRateLimitedQueue = Symbol('__queue');\n", "import getFileNameAndExtension from './getFileNameAndExtension.js';\nexport default function remoteFileObjToLocal(file) {\n    return {\n        ...file,\n        type: file.mimeType,\n        extension: file.name ? getFileNameAndExtension(file.name).extension : null,\n    };\n}\n", "function insertReplacement(source, rx, replacement) {\n    const newParts = [];\n    source.forEach((chunk) => {\n        // When the source contains multiple placeholders for interpolation,\n        // we should ignore chunks that are not strings, because those\n        // can be JSX objects and will be otherwise incorrectly turned into strings.\n        // Without this condition we\u2019d get this: [object Object] hello [object Object] my <button>\n        if (typeof chunk !== 'string') {\n            return newParts.push(chunk);\n        }\n        return rx[Symbol.split](chunk).forEach((raw, i, list) => {\n            if (raw !== '') {\n                newParts.push(raw);\n            }\n            // Interlace with the `replacement` value\n            if (i < list.length - 1) {\n                newParts.push(replacement);\n            }\n        });\n    });\n    return newParts;\n}\n/**\n * Takes a string with placeholder variables like `%{smart_count} file selected`\n * and replaces it with values from options `{smart_count: 5}`\n *\n * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE\n * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299\n *\n * @param phrase that needs interpolation, with placeholders\n * @param options with values that will be used to replace placeholders\n */\nfunction interpolate(phrase, options) {\n    const dollarRegex = /\\$/g;\n    const dollarBillsYall = '$$$$';\n    let interpolated = [phrase];\n    if (options == null)\n        return interpolated;\n    for (const arg of Object.keys(options)) {\n        if (arg !== '_') {\n            // Ensure replacement value is escaped to prevent special $-prefixed\n            // regex replace tokens. the \"$$$$\" is needed because each \"$\" needs to\n            // be escaped with \"$\" itself, and we need two in the resulting output.\n            let replacement = options[arg];\n            if (typeof replacement === 'string') {\n                replacement = dollarRegex[Symbol.replace](replacement, dollarBillsYall);\n            }\n            // We create a new `RegExp` each time instead of using a more-efficient\n            // string replace so that the same argument can be replaced multiple times\n            // in the same phrase.\n            interpolated = insertReplacement(interpolated, new RegExp(`%\\\\{${arg}\\\\}`, 'g'), replacement);\n        }\n    }\n    return interpolated;\n}\nconst defaultOnMissingKey = (key) => {\n    throw new Error(`missing string: ${key}`);\n};\n/**\n * Translates strings with interpolation & pluralization support.\n * Extensible with custom dictionaries and pluralization functions.\n *\n * Borrows heavily from and inspired by Polyglot https://github.com/airbnb/polyglot.js,\n * basically a stripped-down version of it. Differences: pluralization functions are not hardcoded\n * and can be easily added among with dictionaries, nested objects are used for pluralization\n * as opposed to `||||` delimeter\n *\n * Usage example: `translator.translate('files_chosen', {smart_count: 3})`\n */\nexport default class Translator {\n    locale;\n    constructor(locales, { onMissingKey = defaultOnMissingKey } = {}) {\n        this.locale = {\n            strings: {},\n            pluralize(n) {\n                if (n === 1) {\n                    return 0;\n                }\n                return 1;\n            },\n        };\n        if (Array.isArray(locales)) {\n            locales.forEach(this.#apply, this);\n        }\n        else {\n            this.#apply(locales);\n        }\n        this.#onMissingKey = onMissingKey;\n    }\n    #onMissingKey;\n    #apply(locale) {\n        if (!locale?.strings) {\n            return;\n        }\n        const prevLocale = this.locale;\n        Object.assign(this.locale, {\n            strings: { ...prevLocale.strings, ...locale.strings },\n            pluralize: locale.pluralize || prevLocale.pluralize,\n        });\n    }\n    /**\n     * Public translate method\n     *\n     * @param key\n     * @param options with values that will be used later to replace placeholders in string\n     * @returns string translated (and interpolated)\n     */\n    translate(key, options) {\n        return this.translateArray(key, options).join('');\n    }\n    /**\n     * Get a translation and return the translated and interpolated parts as an array.\n     *\n     * @returns The translated and interpolated parts, in order.\n     */\n    translateArray(key, options) {\n        let string = this.locale.strings[key];\n        if (string == null) {\n            this.#onMissingKey(key);\n            string = key;\n        }\n        const hasPluralForms = typeof string === 'object';\n        if (hasPluralForms) {\n            if (options && typeof options.smart_count !== 'undefined') {\n                const plural = this.locale.pluralize(options.smart_count);\n                return interpolate(string[plural], options);\n            }\n            throw new Error('Attempted to use a string with plural forms, but no value was given for %{smart_count}');\n        }\n        if (typeof string !== 'string') {\n            throw new Error(`string was not a string`);\n        }\n        return interpolate(string, options);\n    }\n}\n", "/**\n * Truncates a string to the given number of chars (maxLength) by inserting '...' in the middle of that string.\n * Partially taken from https://stackoverflow.com/a/5723274/3192470.\n */\nconst separator = '...';\nexport default function truncateString(string, maxLength) {\n    // Return the empty string if maxLength is zero\n    if (maxLength === 0)\n        return '';\n    // Return original string if it's already shorter than maxLength\n    if (string.length <= maxLength)\n        return string;\n    // Return truncated substring appended of the ellipsis char if string can't be meaningfully truncated\n    if (maxLength <= separator.length + 1)\n        return `${string.slice(0, maxLength - 1)}\u2026`;\n    const charsToShow = maxLength - separator.length;\n    const frontChars = Math.ceil(charsToShow / 2);\n    const backChars = Math.floor(charsToShow / 2);\n    return string.slice(0, frontChars) + separator + string.slice(-backChars);\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { EMPTY_ARR } from './constants';\n\nexport const isArray = Array.isArray;\n\n/**\n * Assign properties from `props` to `obj`\n * @template O, P The obj and props types\n * @param {O} obj The object to copy properties to\n * @param {P} props The object to copy properties from\n * @returns {O & P}\n */\nexport function assign(obj, props) {\n\t// @ts-expect-error We change the type of `obj` to be `O & P`\n\tfor (let i in props) obj[i] = props[i];\n\treturn /** @type {O & P} */ (obj);\n}\n\n/**\n * Remove a child node from its parent if attached. This is a workaround for\n * IE11 which doesn't support `Element.prototype.remove()`. Using this function\n * is smaller than including a dedicated polyfill.\n * @param {import('./index').ContainerNode} node The node to remove\n */\nexport function removeNode(node) {\n\tif (node && node.parentNode) node.parentNode.removeChild(node);\n}\n\nexport const slice = EMPTY_ARR.slice;\n", "import { _catchError } from './diff/catch-error';\n\n/**\n * The `option` object can potentially contain callback functions\n * that are called during various stages of our renderer. This is the\n * foundation on which all our addons like `preact/debug`, `preact/compat`,\n * and `preact/hooks` are based on. See the `Options` type in `internal.d.ts`\n * for a full list of available option hooks (most editors/IDEs allow you to\n * ctrl+click or cmd+click on mac the type definition below).\n * @type {import('./internal').Options}\n */\nconst options = {\n\t_catchError\n};\n\nexport default options;\n", "import { slice } from './util';\nimport options from './options';\nimport { NULL, UNDEFINED } from './constants';\n\nlet vnodeId = 0;\n\n/**\n * Create an virtual node (used for JSX)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component constructor for this\n * virtual node\n * @param {object | null | undefined} [props] The properties of the virtual node\n * @param {Array<import('.').ComponentChildren>} [children] The children of the\n * virtual node\n * @returns {import('./internal').VNode}\n */\nexport function createElement(type, props, children) {\n\tlet normalizedProps = {},\n\t\tkey,\n\t\tref,\n\t\ti;\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse normalizedProps[i] = props[i];\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\t// If a Component VNode, check for and apply defaultProps\n\t// Note: type may be undefined in development, must never error here.\n\tif (typeof type == 'function' && type.defaultProps != NULL) {\n\t\tfor (i in type.defaultProps) {\n\t\t\tif (normalizedProps[i] === UNDEFINED) {\n\t\t\t\tnormalizedProps[i] = type.defaultProps[i];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn createVNode(type, normalizedProps, key, ref, NULL);\n}\n\n/**\n * Create a VNode (used internally by Preact)\n * @param {import('./internal').VNode[\"type\"]} type The node name or Component\n * Constructor for this virtual node\n * @param {object | string | number | null} props The properties of this virtual node.\n * If this virtual node represents a text node, this is the text of the node (string or number).\n * @param {string | number | null} key The key for this virtual node, used when\n * diffing it against its children\n * @param {import('./internal').VNode[\"ref\"]} ref The ref property that will\n * receive a reference to its created child\n * @returns {import('./internal').VNode}\n */\nexport function createVNode(type, props, key, ref, original) {\n\t// V8 seems to be better at detecting type shapes if the object is allocated from the same call site\n\t// Do not inline into createElement and coerceToVNode!\n\t/** @type {import('./internal').VNode} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops,\n\t\tkey,\n\t\tref,\n\t\t_children: NULL,\n\t\t_parent: NULL,\n\t\t_depth: 0,\n\t\t_dom: NULL,\n\t\t_component: NULL,\n\t\tconstructor: UNDEFINED,\n\t\t_original: original == NULL ? ++vnodeId : original,\n\t\t_index: -1,\n\t\t_flags: 0\n\t};\n\n\t// Only invoke the vnode hook if this was *not* a direct copy:\n\tif (original == NULL && options.vnode != NULL) options.vnode(vnode);\n\n\treturn vnode;\n}\n\nexport function createRef() {\n\treturn { current: NULL };\n}\n\nexport function Fragment(props) {\n\treturn props.children;\n}\n\n/**\n * Check if a the argument is a valid Preact VNode.\n * @param {*} vnode\n * @returns {vnode is VNode}\n */\nexport const isValidElement = vnode =>\n\tvnode != NULL && vnode.constructor == UNDEFINED;\n", "import { assign } from './util';\nimport { diff, commitRoot } from './diff/index';\nimport options from './options';\nimport { Fragment } from './create-element';\nimport { MODE_HYDRATE, NULL } from './constants';\n\n/**\n * Base Component class. Provides `setState()` and `forceUpdate()`, which\n * trigger rendering\n * @param {object} props The initial component props\n * @param {object} context The initial context from parent components'\n * getChildContext\n */\nexport function BaseComponent(props, context) {\n\tthis.props = props;\n\tthis.context = context;\n}\n\n/**\n * Update component state and schedule a re-render.\n * @this {import('./internal').Component}\n * @param {object | ((s: object, p: object) => object)} update A hash of state\n * properties to update with new values or a function that given the current\n * state and props returns a new partial state\n * @param {() => void} [callback] A function to be called once component state is\n * updated\n */\nBaseComponent.prototype.setState = function (update, callback) {\n\t// only clone state when copying to nextState the first time.\n\tlet s;\n\tif (this._nextState != NULL && this._nextState != this.state) {\n\t\ts = this._nextState;\n\t} else {\n\t\ts = this._nextState = assign({}, this.state);\n\t}\n\n\tif (typeof update == 'function') {\n\t\t// Some libraries like `immer` mark the current state as readonly,\n\t\t// preventing us from mutating it, so we need to clone it. See #2716\n\t\tupdate = update(assign({}, s), this.props);\n\t}\n\n\tif (update) {\n\t\tassign(s, update);\n\t}\n\n\t// Skip update if updater function returned null\n\tif (update == NULL) return;\n\n\tif (this._vnode) {\n\t\tif (callback) {\n\t\t\tthis._stateCallbacks.push(callback);\n\t\t}\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Immediately perform a synchronous re-render of the component\n * @this {import('./internal').Component}\n * @param {() => void} [callback] A function to be called after component is\n * re-rendered\n */\nBaseComponent.prototype.forceUpdate = function (callback) {\n\tif (this._vnode) {\n\t\t// Set render mode so that we can differentiate where the render request\n\t\t// is coming from. We need this because forceUpdate should never call\n\t\t// shouldComponentUpdate\n\t\tthis._force = true;\n\t\tif (callback) this._renderCallbacks.push(callback);\n\t\tenqueueRender(this);\n\t}\n};\n\n/**\n * Accepts `props` and `state`, and returns a new Virtual DOM tree to build.\n * Virtual DOM is generally constructed via [JSX](https://jasonformat.com/wtf-is-jsx).\n * @param {object} props Props (eg: JSX attributes) received from parent\n * element/component\n * @param {object} state The component's current state\n * @param {object} context Context object, as returned by the nearest\n * ancestor's `getChildContext()`\n * @returns {ComponentChildren | void}\n */\nBaseComponent.prototype.render = Fragment;\n\n/**\n * @param {import('./internal').VNode} vnode\n * @param {number | null} [childIndex]\n */\nexport function getDomSibling(vnode, childIndex) {\n\tif (childIndex == NULL) {\n\t\t// Use childIndex==null as a signal to resume the search from the vnode's sibling\n\t\treturn vnode._parent\n\t\t\t? getDomSibling(vnode._parent, vnode._index + 1)\n\t\t\t: NULL;\n\t}\n\n\tlet sibling;\n\tfor (; childIndex < vnode._children.length; childIndex++) {\n\t\tsibling = vnode._children[childIndex];\n\n\t\tif (sibling != NULL && sibling._dom != NULL) {\n\t\t\t// Since updateParentDomPointers keeps _dom pointer correct,\n\t\t\t// we can rely on _dom to tell us if this subtree contains a\n\t\t\t// rendered DOM node, and what the first rendered DOM node is\n\t\t\treturn sibling._dom;\n\t\t}\n\t}\n\n\t// If we get here, we have not found a DOM node in this vnode's children.\n\t// We must resume from this vnode's sibling (in it's parent _children array)\n\t// Only climb up and search the parent if we aren't searching through a DOM\n\t// VNode (meaning we reached the DOM parent of the original vnode that began\n\t// the search)\n\treturn typeof vnode.type == 'function' ? getDomSibling(vnode) : NULL;\n}\n\n/**\n * Trigger in-place re-rendering of a component.\n * @param {import('./internal').Component} component The component to rerender\n */\nfunction renderComponent(component) {\n\tlet oldVNode = component._vnode,\n\t\toldDom = oldVNode._dom,\n\t\tcommitQueue = [],\n\t\trefQueue = [];\n\n\tif (component._parentDom) {\n\t\tconst newVNode = assign({}, oldVNode);\n\t\tnewVNode._original = oldVNode._original + 1;\n\t\tif (options.vnode) options.vnode(newVNode);\n\n\t\tdiff(\n\t\t\tcomponent._parentDom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tcomponent._globalContext,\n\t\t\tcomponent._parentDom.namespaceURI,\n\t\t\toldVNode._flags & MODE_HYDRATE ? [oldDom] : NULL,\n\t\t\tcommitQueue,\n\t\t\toldDom == NULL ? getDomSibling(oldVNode) : oldDom,\n\t\t\t!!(oldVNode._flags & MODE_HYDRATE),\n\t\t\trefQueue\n\t\t);\n\n\t\tnewVNode._original = oldVNode._original;\n\t\tnewVNode._parent._children[newVNode._index] = newVNode;\n\t\tcommitRoot(commitQueue, newVNode, refQueue);\n\t\toldVNode._dom = oldVNode._parent = null;\n\n\t\tif (newVNode._dom != oldDom) {\n\t\t\tupdateParentDomPointers(newVNode);\n\t\t}\n\t}\n}\n\n/**\n * @param {import('./internal').VNode} vnode\n */\nfunction updateParentDomPointers(vnode) {\n\tif ((vnode = vnode._parent) != NULL && vnode._component != NULL) {\n\t\tvnode._dom = vnode._component.base = NULL;\n\t\tfor (let i = 0; i < vnode._children.length; i++) {\n\t\t\tlet child = vnode._children[i];\n\t\t\tif (child != NULL && child._dom != NULL) {\n\t\t\t\tvnode._dom = vnode._component.base = child._dom;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn updateParentDomPointers(vnode);\n\t}\n}\n\n/**\n * The render queue\n * @type {Array<import('./internal').Component>}\n */\nlet rerenderQueue = [];\n\n/*\n * The value of `Component.debounce` must asynchronously invoke the passed in callback. It is\n * important that contributors to Preact can consistently reason about what calls to `setState`, etc.\n * do, and when their effects will be applied. See the links below for some further reading on designing\n * asynchronous APIs.\n * * [Designing APIs for Asynchrony](https://blog.izs.me/2013/08/designing-apis-for-asynchrony)\n * * [Callbacks synchronous and asynchronous](https://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/)\n */\n\nlet prevDebounce;\n\nconst defer =\n\ttypeof Promise == 'function'\n\t\t? Promise.prototype.then.bind(Promise.resolve())\n\t\t: setTimeout;\n\n/**\n * Enqueue a rerender of a component\n * @param {import('./internal').Component} c The component to rerender\n */\nexport function enqueueRender(c) {\n\tif (\n\t\t(!c._dirty &&\n\t\t\t(c._dirty = true) &&\n\t\t\trerenderQueue.push(c) &&\n\t\t\t!process._rerenderCount++) ||\n\t\tprevDebounce != options.debounceRendering\n\t) {\n\t\tprevDebounce = options.debounceRendering;\n\t\t(prevDebounce || defer)(process);\n\t}\n}\n\n/**\n * @param {import('./internal').Component} a\n * @param {import('./internal').Component} b\n */\nconst depthSort = (a, b) => a._vnode._depth - b._vnode._depth;\n\n/** Flush the render queue by rerendering all queued components */\nfunction process() {\n\tlet c,\n\t\tl = 1;\n\n\t// Don't update `renderCount` yet. Keep its value non-zero to prevent unnecessary\n\t// process() calls from getting scheduled while `queue` is still being consumed.\n\twhile (rerenderQueue.length) {\n\t\t// Keep the rerender queue sorted by (depth, insertion order). The queue\n\t\t// will initially be sorted on the first iteration only if it has more than 1 item.\n\t\t//\n\t\t// New items can be added to the queue e.g. when rerendering a provider, so we want to\n\t\t// keep the order from top to bottom with those new items so we can handle them in a\n\t\t// single pass\n\t\tif (rerenderQueue.length > l) {\n\t\t\trerenderQueue.sort(depthSort);\n\t\t}\n\n\t\tc = rerenderQueue.shift();\n\t\tl = rerenderQueue.length;\n\n\t\tif (c._dirty) {\n\t\t\trenderComponent(c);\n\t\t}\n\t}\n\tprocess._rerenderCount = 0;\n}\n\nprocess._rerenderCount = 0;\n", "import { IS_NON_DIMENSIONAL, NULL, SVG_NAMESPACE } from '../constants';\nimport options from '../options';\n\nfunction setStyle(style, key, value) {\n\tif (key[0] == '-') {\n\t\tstyle.setProperty(key, value == NULL ? '' : value);\n\t} else if (value == NULL) {\n\t\tstyle[key] = '';\n\t} else if (typeof value != 'number' || IS_NON_DIMENSIONAL.test(key)) {\n\t\tstyle[key] = value;\n\t} else {\n\t\tstyle[key] = value + 'px';\n\t}\n}\n\nconst CAPTURE_REGEX = /(PointerCapture)$|Capture$/i;\n\n// A logical clock to solve issues like https://github.com/preactjs/preact/issues/3927.\n// When the DOM performs an event it leaves micro-ticks in between bubbling up which means that\n// an event can trigger on a newly reated DOM-node while the event bubbles up.\n//\n// Originally inspired by Vue\n// (https://github.com/vuejs/core/blob/caeb8a68811a1b0f79/packages/runtime-dom/src/modules/events.ts#L90-L101),\n// but modified to use a logical clock instead of Date.now() in case event handlers get attached\n// and events get dispatched during the same millisecond.\n//\n// The clock is incremented after each new event dispatch. This allows 1 000 000 new events\n// per second for over 280 years before the value reaches Number.MAX_SAFE_INTEGER (2**53 - 1).\nlet eventClock = 0;\n\n/**\n * Set a property value on a DOM node\n * @param {import('../internal').PreactElement} dom The DOM node to modify\n * @param {string} name The name of the property to set\n * @param {*} value The value to set the property to\n * @param {*} oldValue The old value the property had\n * @param {string} namespace Whether or not this DOM node is an SVG node or not\n */\nexport function setProperty(dom, name, value, oldValue, namespace) {\n\tlet useCapture;\n\n\to: if (name == 'style') {\n\t\tif (typeof value == 'string') {\n\t\t\tdom.style.cssText = value;\n\t\t} else {\n\t\t\tif (typeof oldValue == 'string') {\n\t\t\t\tdom.style.cssText = oldValue = '';\n\t\t\t}\n\n\t\t\tif (oldValue) {\n\t\t\t\tfor (name in oldValue) {\n\t\t\t\t\tif (!(value && name in value)) {\n\t\t\t\t\t\tsetStyle(dom.style, name, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (value) {\n\t\t\t\tfor (name in value) {\n\t\t\t\t\tif (!oldValue || value[name] != oldValue[name]) {\n\t\t\t\t\t\tsetStyle(dom.style, name, value[name]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t// Benchmark for comparison: https://esbench.com/bench/574c954bdb965b9a00965ac6\n\telse if (name[0] == 'o' && name[1] == 'n') {\n\t\tuseCapture = name != (name = name.replace(CAPTURE_REGEX, '$1'));\n\t\tconst lowerCaseName = name.toLowerCase();\n\n\t\t// Infer correct casing for DOM built-in events:\n\t\tif (lowerCaseName in dom || name == 'onFocusOut' || name == 'onFocusIn')\n\t\t\tname = lowerCaseName.slice(2);\n\t\telse name = name.slice(2);\n\n\t\tif (!dom._listeners) dom._listeners = {};\n\t\tdom._listeners[name + useCapture] = value;\n\n\t\tif (value) {\n\t\t\tif (!oldValue) {\n\t\t\t\tvalue._attached = eventClock;\n\t\t\t\tdom.addEventListener(\n\t\t\t\t\tname,\n\t\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\t\tuseCapture\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tvalue._attached = oldValue._attached;\n\t\t\t}\n\t\t} else {\n\t\t\tdom.removeEventListener(\n\t\t\t\tname,\n\t\t\t\tuseCapture ? eventProxyCapture : eventProxy,\n\t\t\t\tuseCapture\n\t\t\t);\n\t\t}\n\t} else {\n\t\tif (namespace == SVG_NAMESPACE) {\n\t\t\t// Normalize incorrect prop usage for SVG:\n\t\t\t// - xlink:href / xlinkHref --> href (xlink:href was removed from SVG and isn't needed)\n\t\t\t// - className --> class\n\t\t\tname = name.replace(/xlink(H|:h)/, 'h').replace(/sName$/, 's');\n\t\t} else if (\n\t\t\tname != 'width' &&\n\t\t\tname != 'height' &&\n\t\t\tname != 'href' &&\n\t\t\tname != 'list' &&\n\t\t\tname != 'form' &&\n\t\t\t// Default value in browsers is `-1` and an empty string is\n\t\t\t// cast to `0` instead\n\t\t\tname != 'tabIndex' &&\n\t\t\tname != 'download' &&\n\t\t\tname != 'rowSpan' &&\n\t\t\tname != 'colSpan' &&\n\t\t\tname != 'role' &&\n\t\t\tname != 'popover' &&\n\t\t\tname in dom\n\t\t) {\n\t\t\ttry {\n\t\t\t\tdom[name] = value == NULL ? '' : value;\n\t\t\t\t// labelled break is 1b smaller here than a return statement (sorry)\n\t\t\t\tbreak o;\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\t// aria- and data- attributes have no boolean representation.\n\t\t// A `false` value is different from the attribute not being\n\t\t// present, so we can't remove it. For non-boolean aria\n\t\t// attributes we could treat false as a removal, but the\n\t\t// amount of exceptions would cost too many bytes. On top of\n\t\t// that other frameworks generally stringify `false`.\n\n\t\tif (typeof value == 'function') {\n\t\t\t// never serialize functions as attribute values\n\t\t} else if (value != NULL && (value !== false || name[4] == '-')) {\n\t\t\tdom.setAttribute(name, name == 'popover' && value == true ? '' : value);\n\t\t} else {\n\t\t\tdom.removeAttribute(name);\n\t\t}\n\t}\n}\n\n/**\n * Create an event proxy function.\n * @param {boolean} useCapture Is the event handler for the capture phase.\n * @private\n */\nfunction createEventProxy(useCapture) {\n\t/**\n\t * Proxy an event to hooked event handlers\n\t * @param {import('../internal').PreactEvent} e The event object from the browser\n\t * @private\n\t */\n\treturn function (e) {\n\t\tif (this._listeners) {\n\t\t\tconst eventHandler = this._listeners[e.type + useCapture];\n\t\t\tif (e._dispatched == NULL) {\n\t\t\t\te._dispatched = eventClock++;\n\n\t\t\t\t// When `e._dispatched` is smaller than the time when the targeted event\n\t\t\t\t// handler was attached we know we have bubbled up to an element that was added\n\t\t\t\t// during patching the DOM.\n\t\t\t} else if (e._dispatched < eventHandler._attached) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn eventHandler(options.event ? options.event(e) : e);\n\t\t}\n\t};\n}\n\nconst eventProxy = createEventProxy(false);\nconst eventProxyCapture = createEventProxy(true);\n", "import { enqueueRender } from './component';\nimport { NULL } from './constants';\n\nexport let i = 0;\n\nexport function createContext(defaultValue) {\n\tfunction Context(props) {\n\t\tif (!this.getChildContext) {\n\t\t\t/** @type {Set<import('./internal').Component> | null} */\n\t\t\tlet subs = new Set();\n\t\t\tlet ctx = {};\n\t\t\tctx[Context._id] = this;\n\n\t\t\tthis.getChildContext = () => ctx;\n\n\t\t\tthis.componentWillUnmount = () => {\n\t\t\t\tsubs = NULL;\n\t\t\t};\n\n\t\t\tthis.shouldComponentUpdate = function (_props) {\n\t\t\t\t// @ts-expect-error even\n\t\t\t\tif (this.props.value != _props.value) {\n\t\t\t\t\tsubs.forEach(c => {\n\t\t\t\t\t\tc._force = true;\n\t\t\t\t\t\tenqueueRender(c);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.sub = c => {\n\t\t\t\tsubs.add(c);\n\t\t\t\tlet old = c.componentWillUnmount;\n\t\t\t\tc.componentWillUnmount = () => {\n\t\t\t\t\tif (subs) {\n\t\t\t\t\t\tsubs.delete(c);\n\t\t\t\t\t}\n\t\t\t\t\tif (old) old.call(c);\n\t\t\t\t};\n\t\t\t};\n\t\t}\n\n\t\treturn props.children;\n\t}\n\n\tContext._id = '__cC' + i++;\n\tContext._defaultValue = defaultValue;\n\n\t/** @type {import('./internal').FunctionComponent} */\n\tContext.Consumer = (props, contextValue) => {\n\t\treturn props.children(contextValue);\n\t};\n\n\t// we could also get rid of _contextRef entirely\n\tContext.Provider =\n\t\tContext._contextRef =\n\t\tContext.Consumer.contextType =\n\t\t\tContext;\n\n\treturn Context;\n}\n", "import { diff, unmount, applyRef } from './index';\nimport { createVNode, Fragment } from '../create-element';\nimport {\n\tEMPTY_OBJ,\n\tEMPTY_ARR,\n\tINSERT_VNODE,\n\tMATCHED,\n\tUNDEFINED,\n\tNULL\n} from '../constants';\nimport { isArray } from '../util';\nimport { getDomSibling } from '../component';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * Diff the children of a virtual node\n * @param {PreactElement} parentDom The DOM element whose children are being\n * diffed\n * @param {ComponentChildren[]} renderResult\n * @param {VNode} newParentVNode The new virtual node whose children should be\n * diff'ed against oldParentVNode\n * @param {VNode} oldParentVNode The old virtual node whose children should be\n * diff'ed against newParentVNode\n * @param {object} globalContext The current context object - modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diffChildren(\n\tparentDom,\n\trenderResult,\n\tnewParentVNode,\n\toldParentVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\tlet i,\n\t\t/** @type {VNode} */\n\t\toldVNode,\n\t\t/** @type {VNode} */\n\t\tchildVNode,\n\t\t/** @type {PreactElement} */\n\t\tnewDom,\n\t\t/** @type {PreactElement} */\n\t\tfirstChildDom;\n\n\t// This is a compression of oldParentVNode!=null && oldParentVNode != EMPTY_OBJ && oldParentVNode._children || EMPTY_ARR\n\t// as EMPTY_OBJ._children should be `undefined`.\n\t/** @type {VNode[]} */\n\tlet oldChildren = (oldParentVNode && oldParentVNode._children) || EMPTY_ARR;\n\n\tlet newChildrenLength = renderResult.length;\n\n\toldDom = constructNewChildrenArray(\n\t\tnewParentVNode,\n\t\trenderResult,\n\t\toldChildren,\n\t\toldDom,\n\t\tnewChildrenLength\n\t);\n\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\tchildVNode = newParentVNode._children[i];\n\t\tif (childVNode == NULL) continue;\n\n\t\t// At this point, constructNewChildrenArray has assigned _index to be the\n\t\t// matchingIndex for this VNode's oldVNode (or -1 if there is no oldVNode).\n\t\tif (childVNode._index == -1) {\n\t\t\toldVNode = EMPTY_OBJ;\n\t\t} else {\n\t\t\toldVNode = oldChildren[childVNode._index] || EMPTY_OBJ;\n\t\t}\n\n\t\t// Update childVNode._index to its final index\n\t\tchildVNode._index = i;\n\n\t\t// Morph the old element into the new one, but don't append it to the dom yet\n\t\tlet result = diff(\n\t\t\tparentDom,\n\t\t\tchildVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\toldDom,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\n\t\t// Adjust DOM nodes\n\t\tnewDom = childVNode._dom;\n\t\tif (childVNode.ref && oldVNode.ref != childVNode.ref) {\n\t\t\tif (oldVNode.ref) {\n\t\t\t\tapplyRef(oldVNode.ref, NULL, childVNode);\n\t\t\t}\n\t\t\trefQueue.push(\n\t\t\t\tchildVNode.ref,\n\t\t\t\tchildVNode._component || newDom,\n\t\t\t\tchildVNode\n\t\t\t);\n\t\t}\n\n\t\tif (firstChildDom == NULL && newDom != NULL) {\n\t\t\tfirstChildDom = newDom;\n\t\t}\n\n\t\tlet shouldPlace = !!(childVNode._flags & INSERT_VNODE);\n\t\tif (shouldPlace || oldVNode._children === childVNode._children) {\n\t\t\toldDom = insert(childVNode, oldDom, parentDom, shouldPlace);\n\t\t} else if (typeof childVNode.type == 'function' && result !== UNDEFINED) {\n\t\t\toldDom = result;\n\t\t} else if (newDom) {\n\t\t\toldDom = newDom.nextSibling;\n\t\t}\n\n\t\t// Unset diffing flags\n\t\tchildVNode._flags &= ~(INSERT_VNODE | MATCHED);\n\t}\n\n\tnewParentVNode._dom = firstChildDom;\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} newParentVNode\n * @param {ComponentChildren[]} renderResult\n * @param {VNode[]} oldChildren\n */\nfunction constructNewChildrenArray(\n\tnewParentVNode,\n\trenderResult,\n\toldChildren,\n\toldDom,\n\tnewChildrenLength\n) {\n\t/** @type {number} */\n\tlet i;\n\t/** @type {VNode} */\n\tlet childVNode;\n\t/** @type {VNode} */\n\tlet oldVNode;\n\n\tlet oldChildrenLength = oldChildren.length,\n\t\tremainingOldChildren = oldChildrenLength;\n\n\tlet skew = 0;\n\n\tnewParentVNode._children = new Array(newChildrenLength);\n\tfor (i = 0; i < newChildrenLength; i++) {\n\t\t// @ts-expect-error We are reusing the childVNode variable to hold both the\n\t\t// pre and post normalized childVNode\n\t\tchildVNode = renderResult[i];\n\n\t\tif (\n\t\t\tchildVNode == NULL ||\n\t\t\ttypeof childVNode == 'boolean' ||\n\t\t\ttypeof childVNode == 'function'\n\t\t) {\n\t\t\tnewParentVNode._children[i] = NULL;\n\t\t\tcontinue;\n\t\t}\n\t\t// If this newVNode is being reused (e.g. <div>{reuse}{reuse}</div>) in the same diff,\n\t\t// or we are rendering a component (e.g. setState) copy the oldVNodes so it can have\n\t\t// it's own DOM & etc. pointers\n\t\telse if (\n\t\t\ttypeof childVNode == 'string' ||\n\t\t\ttypeof childVNode == 'number' ||\n\t\t\t// eslint-disable-next-line valid-typeof\n\t\t\ttypeof childVNode == 'bigint' ||\n\t\t\tchildVNode.constructor == String\n\t\t) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tNULL,\n\t\t\t\tchildVNode,\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (isArray(childVNode)) {\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tFragment,\n\t\t\t\t{ children: childVNode },\n\t\t\t\tNULL,\n\t\t\t\tNULL,\n\t\t\t\tNULL\n\t\t\t);\n\t\t} else if (childVNode.constructor == UNDEFINED && childVNode._depth > 0) {\n\t\t\t// VNode is already in use, clone it. This can happen in the following\n\t\t\t// scenario:\n\t\t\t//   const reuse = <div />\n\t\t\t//   <div>{reuse}<span />{reuse}</div>\n\t\t\tchildVNode = newParentVNode._children[i] = createVNode(\n\t\t\t\tchildVNode.type,\n\t\t\t\tchildVNode.props,\n\t\t\t\tchildVNode.key,\n\t\t\t\tchildVNode.ref ? childVNode.ref : NULL,\n\t\t\t\tchildVNode._original\n\t\t\t);\n\t\t} else {\n\t\t\tnewParentVNode._children[i] = childVNode;\n\t\t}\n\n\t\tconst skewedIndex = i + skew;\n\t\tchildVNode._parent = newParentVNode;\n\t\tchildVNode._depth = newParentVNode._depth + 1;\n\n\t\t// Temporarily store the matchingIndex on the _index property so we can pull\n\t\t// out the oldVNode in diffChildren. We'll override this to the VNode's\n\t\t// final index after using this property to get the oldVNode\n\t\tconst matchingIndex = (childVNode._index = findMatchingIndex(\n\t\t\tchildVNode,\n\t\t\toldChildren,\n\t\t\tskewedIndex,\n\t\t\tremainingOldChildren\n\t\t));\n\n\t\tif (matchingIndex != -1) {\n\t\t\toldVNode = oldChildren[matchingIndex];\n\t\t\tremainingOldChildren--;\n\t\t\tif (oldVNode) {\n\t\t\t\toldVNode._flags |= MATCHED;\n\t\t\t}\n\t\t}\n\n\t\t// Here, we define isMounting for the purposes of the skew diffing\n\t\t// algorithm. Nodes that are unsuspending are considered mounting and we detect\n\t\t// this by checking if oldVNode._original == null\n\t\tconst isMounting = oldVNode == NULL || oldVNode._original == NULL;\n\n\t\tif (isMounting) {\n\t\t\tif (matchingIndex == -1) {\n\t\t\t\t// When the array of children is growing we need to decrease the skew\n\t\t\t\t// as we are adding a new element to the array.\n\t\t\t\t// Example:\n\t\t\t\t// [1, 2, 3] --> [0, 1, 2, 3]\n\t\t\t\t// oldChildren   newChildren\n\t\t\t\t//\n\t\t\t\t// The new element is at index 0, so our skew is 0,\n\t\t\t\t// we need to decrease the skew as we are adding a new element.\n\t\t\t\t// The decrease will cause us to compare the element at position 1\n\t\t\t\t// with value 1 with the element at position 0 with value 0.\n\t\t\t\t//\n\t\t\t\t// A linear concept is applied when the array is shrinking,\n\t\t\t\t// if the length is unchanged we can assume that no skew\n\t\t\t\t// changes are needed.\n\t\t\t\tif (newChildrenLength > oldChildrenLength) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else if (newChildrenLength < oldChildrenLength) {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// If we are mounting a DOM VNode, mark it for insertion\n\t\t\tif (typeof childVNode.type != 'function') {\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t} else if (matchingIndex != skewedIndex) {\n\t\t\t// When we move elements around i.e. [0, 1, 2] --> [1, 0, 2]\n\t\t\t// --> we diff 1, we find it at position 1 while our skewed index is 0 and our skew is 0\n\t\t\t//     we set the skew to 1 as we found an offset.\n\t\t\t// --> we diff 0, we find it at position 0 while our skewed index is at 2 and our skew is 1\n\t\t\t//     this makes us increase the skew again.\n\t\t\t// --> we diff 2, we find it at position 2 while our skewed index is at 4 and our skew is 2\n\t\t\t//\n\t\t\t// this becomes an optimization question where currently we see a 1 element offset as an insertion\n\t\t\t// or deletion i.e. we optimize for [0, 1, 2] --> [9, 0, 1, 2]\n\t\t\t// while a more than 1 offset we see as a swap.\n\t\t\t// We could probably build heuristics for having an optimized course of action here as well, but\n\t\t\t// might go at the cost of some bytes.\n\t\t\t//\n\t\t\t// If we wanted to optimize for i.e. only swaps we'd just do the last two code-branches and have\n\t\t\t// only the first item be a re-scouting and all the others fall in their skewed counter-part.\n\t\t\t// We could also further optimize for swaps\n\t\t\tif (matchingIndex == skewedIndex - 1) {\n\t\t\t\tskew--;\n\t\t\t} else if (matchingIndex == skewedIndex + 1) {\n\t\t\t\tskew++;\n\t\t\t} else {\n\t\t\t\tif (matchingIndex > skewedIndex) {\n\t\t\t\t\tskew--;\n\t\t\t\t} else {\n\t\t\t\t\tskew++;\n\t\t\t\t}\n\n\t\t\t\t// Move this VNode's DOM if the original index (matchingIndex) doesn't\n\t\t\t\t// match the new skew index (i + new skew)\n\t\t\t\t// In the former two branches we know that it matches after skewing\n\t\t\t\tchildVNode._flags |= INSERT_VNODE;\n\t\t\t}\n\t\t}\n\t}\n\n\t// Remove remaining oldChildren if there are any. Loop forwards so that as we\n\t// unmount DOM from the beginning of the oldChildren, we can adjust oldDom to\n\t// point to the next child, which needs to be the first DOM node that won't be\n\t// unmounted.\n\tif (remainingOldChildren) {\n\t\tfor (i = 0; i < oldChildrenLength; i++) {\n\t\t\toldVNode = oldChildren[i];\n\t\t\tif (oldVNode != NULL && (oldVNode._flags & MATCHED) == 0) {\n\t\t\t\tif (oldVNode._dom == oldDom) {\n\t\t\t\t\toldDom = getDomSibling(oldVNode);\n\t\t\t\t}\n\n\t\t\t\tunmount(oldVNode, oldVNode);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn oldDom;\n}\n\n/**\n * @param {VNode} parentVNode\n * @param {PreactElement} oldDom\n * @param {PreactElement} parentDom\n * @param {boolean} shouldPlace\n * @returns {PreactElement}\n */\nfunction insert(parentVNode, oldDom, parentDom, shouldPlace) {\n\t// Note: VNodes in nested suspended trees may be missing _children.\n\n\tif (typeof parentVNode.type == 'function') {\n\t\tlet children = parentVNode._children;\n\t\tfor (let i = 0; children && i < children.length; i++) {\n\t\t\tif (children[i]) {\n\t\t\t\t// If we enter this code path on sCU bailout, where we copy\n\t\t\t\t// oldVNode._children to newVNode._children, we need to update the old\n\t\t\t\t// children's _parent pointer to point to the newVNode (parentVNode\n\t\t\t\t// here).\n\t\t\t\tchildren[i]._parent = parentVNode;\n\t\t\t\toldDom = insert(children[i], oldDom, parentDom, shouldPlace);\n\t\t\t}\n\t\t}\n\n\t\treturn oldDom;\n\t} else if (parentVNode._dom != oldDom) {\n\t\tif (shouldPlace) {\n\t\t\tif (oldDom && parentVNode.type && !oldDom.parentNode) {\n\t\t\t\toldDom = getDomSibling(parentVNode);\n\t\t\t}\n\t\t\tparentDom.insertBefore(parentVNode._dom, oldDom || NULL);\n\t\t}\n\t\toldDom = parentVNode._dom;\n\t}\n\n\tdo {\n\t\toldDom = oldDom && oldDom.nextSibling;\n\t} while (oldDom != NULL && oldDom.nodeType == 8);\n\n\treturn oldDom;\n}\n\n/**\n * Flatten and loop through the children of a virtual node\n * @param {ComponentChildren} children The unflattened children of a virtual\n * node\n * @returns {VNode[]}\n */\nexport function toChildArray(children, out) {\n\tout = out || [];\n\tif (children == NULL || typeof children == 'boolean') {\n\t} else if (isArray(children)) {\n\t\tchildren.some(child => {\n\t\t\ttoChildArray(child, out);\n\t\t});\n\t} else {\n\t\tout.push(children);\n\t}\n\treturn out;\n}\n\n/**\n * @param {VNode} childVNode\n * @param {VNode[]} oldChildren\n * @param {number} skewedIndex\n * @param {number} remainingOldChildren\n * @returns {number}\n */\nfunction findMatchingIndex(\n\tchildVNode,\n\toldChildren,\n\tskewedIndex,\n\tremainingOldChildren\n) {\n\tconst key = childVNode.key;\n\tconst type = childVNode.type;\n\tlet oldVNode = oldChildren[skewedIndex];\n\tconst matched = oldVNode != NULL && (oldVNode._flags & MATCHED) == 0;\n\n\t// We only need to perform a search if there are more children\n\t// (remainingOldChildren) to search. However, if the oldVNode we just looked\n\t// at skewedIndex was not already used in this diff, then there must be at\n\t// least 1 other (so greater than 1) remainingOldChildren to attempt to match\n\t// against. So the following condition checks that ensuring\n\t// remainingOldChildren > 1 if the oldVNode is not already used/matched. Else\n\t// if the oldVNode was null or matched, then there could needs to be at least\n\t// 1 (aka `remainingOldChildren > 0`) children to find and compare against.\n\t//\n\t// If there is an unkeyed functional VNode, that isn't a built-in like our Fragment,\n\t// we should not search as we risk re-using state of an unrelated VNode. (reverted for now)\n\tlet shouldSearch =\n\t\t// (typeof type != 'function' || type === Fragment || key) &&\n\t\tremainingOldChildren > (matched ? 1 : 0);\n\n\tif (\n\t\t(oldVNode === NULL && key == null) ||\n\t\t(matched && key == oldVNode.key && type == oldVNode.type)\n\t) {\n\t\treturn skewedIndex;\n\t} else if (shouldSearch) {\n\t\tlet x = skewedIndex - 1;\n\t\tlet y = skewedIndex + 1;\n\t\twhile (x >= 0 || y < oldChildren.length) {\n\t\t\tconst childIndex = x >= 0 ? x-- : y++;\n\t\t\toldVNode = oldChildren[childIndex];\n\t\t\tif (\n\t\t\t\toldVNode != NULL &&\n\t\t\t\t(oldVNode._flags & MATCHED) == 0 &&\n\t\t\t\tkey == oldVNode.key &&\n\t\t\t\ttype == oldVNode.type\n\t\t\t) {\n\t\t\t\treturn childIndex;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn -1;\n}\n", "import {\n\tEMPTY_OBJ,\n\tMATH_NAMESPACE,\n\tMODE_HYDRATE,\n\tMODE_SUSPENDED,\n\tNULL,\n\tRESET_MODE,\n\tSVG_NAMESPACE,\n\tUNDEFINED,\n\tXHTML_NAMESPACE\n} from '../constants';\nimport { BaseComponent, getDomSibling } from '../component';\nimport { Fragment } from '../create-element';\nimport { diffChildren } from './children';\nimport { setProperty } from './props';\nimport { assign, isArray, removeNode, slice } from '../util';\nimport options from '../options';\n\n/**\n * @typedef {import('../internal').ComponentChildren} ComponentChildren\n * @typedef {import('../internal').Component} Component\n * @typedef {import('../internal').PreactElement} PreactElement\n * @typedef {import('../internal').VNode} VNode\n */\n\n/**\n * @template {any} T\n * @typedef {import('../internal').Ref<T>} Ref<T>\n */\n\n/**\n * Diff two virtual nodes and apply proper changes to the DOM\n * @param {PreactElement} parentDom The parent of the DOM element\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object. Modified by\n * getChildContext\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {PreactElement} oldDom The current attached DOM element any new dom\n * elements should be placed around. Likely `null` on first render (except when\n * hydrating). Can be a sibling DOM element when diffing Fragments that have\n * siblings. In most cases, it starts out as `oldChildren[0]._dom`.\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n */\nexport function diff(\n\tparentDom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\toldDom,\n\tisHydrating,\n\trefQueue\n) {\n\t/** @type {any} */\n\tlet tmp,\n\t\tnewType = newVNode.type;\n\n\t// When passing through createElement it assigns the object\n\t// constructor as undefined. This to prevent JSON-injection.\n\tif (newVNode.constructor != UNDEFINED) return NULL;\n\n\t// If the previous diff bailed out, resume creating/hydrating.\n\tif (oldVNode._flags & MODE_SUSPENDED) {\n\t\tisHydrating = !!(oldVNode._flags & MODE_HYDRATE);\n\t\toldDom = newVNode._dom = oldVNode._dom;\n\t\texcessDomChildren = [oldDom];\n\t}\n\n\tif ((tmp = options._diff)) tmp(newVNode);\n\n\touter: if (typeof newType == 'function') {\n\t\ttry {\n\t\t\tlet c, isNew, oldProps, oldState, snapshot, clearProcessingException;\n\t\t\tlet newProps = newVNode.props;\n\t\t\tconst isClassComponent =\n\t\t\t\t'prototype' in newType && newType.prototype.render;\n\n\t\t\t// Necessary for createContext api. Setting this property will pass\n\t\t\t// the context value as `this.context` just for this component.\n\t\t\ttmp = newType.contextType;\n\t\t\tlet provider = tmp && globalContext[tmp._id];\n\t\t\tlet componentContext = tmp\n\t\t\t\t? provider\n\t\t\t\t\t? provider.props.value\n\t\t\t\t\t: tmp._defaultValue\n\t\t\t\t: globalContext;\n\n\t\t\t// Get component and set it to `c`\n\t\t\tif (oldVNode._component) {\n\t\t\t\tc = newVNode._component = oldVNode._component;\n\t\t\t\tclearProcessingException = c._processingException = c._pendingError;\n\t\t\t} else {\n\t\t\t\t// Instantiate the new component\n\t\t\t\tif (isClassComponent) {\n\t\t\t\t\t// @ts-expect-error The check above verifies that newType is suppose to be constructed\n\t\t\t\t\tnewVNode._component = c = new newType(newProps, componentContext); // eslint-disable-line new-cap\n\t\t\t\t} else {\n\t\t\t\t\t// @ts-expect-error Trust me, Component implements the interface we want\n\t\t\t\t\tnewVNode._component = c = new BaseComponent(\n\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t);\n\t\t\t\t\tc.constructor = newType;\n\t\t\t\t\tc.render = doRender;\n\t\t\t\t}\n\t\t\t\tif (provider) provider.sub(c);\n\n\t\t\t\tif (!c.state) c.state = {};\n\t\t\t\tc._globalContext = globalContext;\n\t\t\t\tisNew = c._dirty = true;\n\t\t\t\tc._renderCallbacks = [];\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t}\n\n\t\t\t// Invoke getDerivedStateFromProps\n\t\t\tif (isClassComponent && c._nextState == NULL) {\n\t\t\t\tc._nextState = c.state;\n\t\t\t}\n\n\t\t\tif (isClassComponent && newType.getDerivedStateFromProps != NULL) {\n\t\t\t\tif (c._nextState == c.state) {\n\t\t\t\t\tc._nextState = assign({}, c._nextState);\n\t\t\t\t}\n\n\t\t\t\tassign(\n\t\t\t\t\tc._nextState,\n\t\t\t\t\tnewType.getDerivedStateFromProps(newProps, c._nextState)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\toldProps = c.props;\n\t\t\toldState = c.state;\n\t\t\tc._vnode = newVNode;\n\n\t\t\t// Invoke pre-render lifecycle methods\n\t\t\tif (isNew) {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tc.componentWillMount != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillMount();\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidMount != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(c.componentDidMount);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (\n\t\t\t\t\tisClassComponent &&\n\t\t\t\t\tnewType.getDerivedStateFromProps == NULL &&\n\t\t\t\t\tnewProps !== oldProps &&\n\t\t\t\t\tc.componentWillReceiveProps != NULL\n\t\t\t\t) {\n\t\t\t\t\tc.componentWillReceiveProps(newProps, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnewVNode._original == oldVNode._original ||\n\t\t\t\t\t(!c._force &&\n\t\t\t\t\t\tc.shouldComponentUpdate != NULL &&\n\t\t\t\t\t\tc.shouldComponentUpdate(\n\t\t\t\t\t\t\tnewProps,\n\t\t\t\t\t\t\tc._nextState,\n\t\t\t\t\t\t\tcomponentContext\n\t\t\t\t\t\t) === false)\n\t\t\t\t) {\n\t\t\t\t\t// More info about this here: https://gist.github.com/JoviDeCroock/bec5f2ce93544d2e6070ef8e0036e4e8\n\t\t\t\t\tif (newVNode._original != oldVNode._original) {\n\t\t\t\t\t\t// When we are dealing with a bail because of sCU we have to update\n\t\t\t\t\t\t// the props, state and dirty-state.\n\t\t\t\t\t\t// when we are dealing with strict-equality we don't as the child could still\n\t\t\t\t\t\t// be dirtied see #3883\n\t\t\t\t\t\tc.props = newProps;\n\t\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t\t\tc._dirty = false;\n\t\t\t\t\t}\n\n\t\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\t\tnewVNode._children.some(vnode => {\n\t\t\t\t\t\tif (vnode) vnode._parent = newVNode;\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t\t}\n\t\t\t\t\tc._stateCallbacks = [];\n\n\t\t\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\t\t\tcommitQueue.push(c);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\n\t\t\t\tif (c.componentWillUpdate != NULL) {\n\t\t\t\t\tc.componentWillUpdate(newProps, c._nextState, componentContext);\n\t\t\t\t}\n\n\t\t\t\tif (isClassComponent && c.componentDidUpdate != NULL) {\n\t\t\t\t\tc._renderCallbacks.push(() => {\n\t\t\t\t\t\tc.componentDidUpdate(oldProps, oldState, snapshot);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tc.context = componentContext;\n\t\t\tc.props = newProps;\n\t\t\tc._parentDom = parentDom;\n\t\t\tc._force = false;\n\n\t\t\tlet renderHook = options._render,\n\t\t\t\tcount = 0;\n\t\t\tif (isClassComponent) {\n\t\t\t\tc.state = c._nextState;\n\t\t\t\tc._dirty = false;\n\n\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\tfor (let i = 0; i < c._stateCallbacks.length; i++) {\n\t\t\t\t\tc._renderCallbacks.push(c._stateCallbacks[i]);\n\t\t\t\t}\n\t\t\t\tc._stateCallbacks = [];\n\t\t\t} else {\n\t\t\t\tdo {\n\t\t\t\t\tc._dirty = false;\n\t\t\t\t\tif (renderHook) renderHook(newVNode);\n\n\t\t\t\t\ttmp = c.render(c.props, c.state, c.context);\n\n\t\t\t\t\t// Handle setState called in render, see #2553\n\t\t\t\t\tc.state = c._nextState;\n\t\t\t\t} while (c._dirty && ++count < 25);\n\t\t\t}\n\n\t\t\t// Handle setState called in render, see #2553\n\t\t\tc.state = c._nextState;\n\n\t\t\tif (c.getChildContext != NULL) {\n\t\t\t\tglobalContext = assign(assign({}, globalContext), c.getChildContext());\n\t\t\t}\n\n\t\t\tif (isClassComponent && !isNew && c.getSnapshotBeforeUpdate != NULL) {\n\t\t\t\tsnapshot = c.getSnapshotBeforeUpdate(oldProps, oldState);\n\t\t\t}\n\n\t\t\tlet isTopLevelFragment =\n\t\t\t\ttmp != NULL && tmp.type === Fragment && tmp.key == NULL;\n\t\t\tlet renderResult = tmp;\n\n\t\t\tif (isTopLevelFragment) {\n\t\t\t\trenderResult = cloneNode(tmp.props.children);\n\t\t\t}\n\n\t\t\toldDom = diffChildren(\n\t\t\t\tparentDom,\n\t\t\t\tisArray(renderResult) ? renderResult : [renderResult],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnamespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\toldDom,\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\tc.base = newVNode._dom;\n\n\t\t\t// We successfully rendered this VNode, unset any stored hydration/bailout state:\n\t\t\tnewVNode._flags &= RESET_MODE;\n\n\t\t\tif (c._renderCallbacks.length) {\n\t\t\t\tcommitQueue.push(c);\n\t\t\t}\n\n\t\t\tif (clearProcessingException) {\n\t\t\t\tc._pendingError = c._processingException = NULL;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tnewVNode._original = NULL;\n\t\t\t// if hydrating or creating initial tree, bailout preserves DOM:\n\t\t\tif (isHydrating || excessDomChildren != NULL) {\n\t\t\t\tif (e.then) {\n\t\t\t\t\tnewVNode._flags |= isHydrating\n\t\t\t\t\t\t? MODE_HYDRATE | MODE_SUSPENDED\n\t\t\t\t\t\t: MODE_SUSPENDED;\n\n\t\t\t\t\twhile (oldDom && oldDom.nodeType == 8 && oldDom.nextSibling) {\n\t\t\t\t\t\toldDom = oldDom.nextSibling;\n\t\t\t\t\t}\n\n\t\t\t\t\texcessDomChildren[excessDomChildren.indexOf(oldDom)] = NULL;\n\t\t\t\t\tnewVNode._dom = oldDom;\n\t\t\t\t} else {\n\t\t\t\t\tfor (let i = excessDomChildren.length; i--; ) {\n\t\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t\t}\n\t\t\t\t\tmarkAsForce(newVNode);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewVNode._dom = oldVNode._dom;\n\t\t\t\tnewVNode._children = oldVNode._children;\n\t\t\t\tif (!e.then) markAsForce(newVNode);\n\t\t\t}\n\t\t\toptions._catchError(e, newVNode, oldVNode);\n\t\t}\n\t} else if (\n\t\texcessDomChildren == NULL &&\n\t\tnewVNode._original == oldVNode._original\n\t) {\n\t\tnewVNode._children = oldVNode._children;\n\t\tnewVNode._dom = oldVNode._dom;\n\t} else {\n\t\toldDom = newVNode._dom = diffElementNodes(\n\t\t\toldVNode._dom,\n\t\t\tnewVNode,\n\t\t\toldVNode,\n\t\t\tglobalContext,\n\t\t\tnamespace,\n\t\t\texcessDomChildren,\n\t\t\tcommitQueue,\n\t\t\tisHydrating,\n\t\t\trefQueue\n\t\t);\n\t}\n\n\tif ((tmp = options.diffed)) tmp(newVNode);\n\n\treturn newVNode._flags & MODE_SUSPENDED ? undefined : oldDom;\n}\n\nfunction markAsForce(vnode) {\n\tif (vnode && vnode._component) vnode._component._force = true;\n\tif (vnode && vnode._children) vnode._children.forEach(markAsForce);\n}\n\n/**\n * @param {Array<Component>} commitQueue List of components\n * which have callbacks to invoke in commitRoot\n * @param {VNode} root\n */\nexport function commitRoot(commitQueue, root, refQueue) {\n\tfor (let i = 0; i < refQueue.length; i++) {\n\t\tapplyRef(refQueue[i], refQueue[++i], refQueue[++i]);\n\t}\n\n\tif (options._commit) options._commit(root, commitQueue);\n\n\tcommitQueue.some(c => {\n\t\ttry {\n\t\t\t// @ts-expect-error Reuse the commitQueue variable here so the type changes\n\t\t\tcommitQueue = c._renderCallbacks;\n\t\t\tc._renderCallbacks = [];\n\t\t\tcommitQueue.some(cb => {\n\t\t\t\t// @ts-expect-error See above comment on commitQueue\n\t\t\t\tcb.call(c);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\toptions._catchError(e, c._vnode);\n\t\t}\n\t});\n}\n\nfunction cloneNode(node) {\n\tif (\n\t\ttypeof node != 'object' ||\n\t\tnode == NULL ||\n\t\t(node._depth && node._depth > 0)\n\t) {\n\t\treturn node;\n\t}\n\n\tif (isArray(node)) {\n\t\treturn node.map(cloneNode);\n\t}\n\n\treturn assign({}, node);\n}\n\n/**\n * Diff two virtual nodes representing DOM element\n * @param {PreactElement} dom The DOM element representing the virtual nodes\n * being diffed\n * @param {VNode} newVNode The new virtual node\n * @param {VNode} oldVNode The old virtual node\n * @param {object} globalContext The current context object\n * @param {string} namespace Current namespace of the DOM node (HTML, SVG, or MathML)\n * @param {Array<PreactElement>} excessDomChildren\n * @param {Array<Component>} commitQueue List of components which have callbacks\n * to invoke in commitRoot\n * @param {boolean} isHydrating Whether or not we are in hydration\n * @param {any[]} refQueue an array of elements needed to invoke refs\n * @returns {PreactElement}\n */\nfunction diffElementNodes(\n\tdom,\n\tnewVNode,\n\toldVNode,\n\tglobalContext,\n\tnamespace,\n\texcessDomChildren,\n\tcommitQueue,\n\tisHydrating,\n\trefQueue\n) {\n\tlet oldProps = oldVNode.props || EMPTY_OBJ;\n\tlet newProps = newVNode.props;\n\tlet nodeType = /** @type {string} */ (newVNode.type);\n\t/** @type {any} */\n\tlet i;\n\t/** @type {{ __html?: string }} */\n\tlet newHtml;\n\t/** @type {{ __html?: string }} */\n\tlet oldHtml;\n\t/** @type {ComponentChildren} */\n\tlet newChildren;\n\tlet value;\n\tlet inputValue;\n\tlet checked;\n\n\t// Tracks entering and exiting namespaces when descending through the tree.\n\tif (nodeType == 'svg') namespace = SVG_NAMESPACE;\n\telse if (nodeType == 'math') namespace = MATH_NAMESPACE;\n\telse if (!namespace) namespace = XHTML_NAMESPACE;\n\n\tif (excessDomChildren != NULL) {\n\t\tfor (i = 0; i < excessDomChildren.length; i++) {\n\t\t\tvalue = excessDomChildren[i];\n\n\t\t\t// if newVNode matches an element in excessDomChildren or the `dom`\n\t\t\t// argument matches an element in excessDomChildren, remove it from\n\t\t\t// excessDomChildren so it isn't later removed in diffChildren\n\t\t\tif (\n\t\t\t\tvalue &&\n\t\t\t\t'setAttribute' in value == !!nodeType &&\n\t\t\t\t(nodeType ? value.localName == nodeType : value.nodeType == 3)\n\t\t\t) {\n\t\t\t\tdom = value;\n\t\t\t\texcessDomChildren[i] = NULL;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (dom == NULL) {\n\t\tif (nodeType == NULL) {\n\t\t\treturn document.createTextNode(newProps);\n\t\t}\n\n\t\tdom = document.createElementNS(\n\t\t\tnamespace,\n\t\t\tnodeType,\n\t\t\tnewProps.is && newProps\n\t\t);\n\n\t\t// we are creating a new node, so we can assume this is a new subtree (in\n\t\t// case we are hydrating), this deopts the hydrate\n\t\tif (isHydrating) {\n\t\t\tif (options._hydrationMismatch)\n\t\t\t\toptions._hydrationMismatch(newVNode, excessDomChildren);\n\t\t\tisHydrating = false;\n\t\t}\n\t\t// we created a new parent, so none of the previously attached children can be reused:\n\t\texcessDomChildren = NULL;\n\t}\n\n\tif (nodeType == NULL) {\n\t\t// During hydration, we still have to split merged text from SSR'd HTML.\n\t\tif (oldProps !== newProps && (!isHydrating || dom.data != newProps)) {\n\t\t\tdom.data = newProps;\n\t\t}\n\t} else {\n\t\t// If excessDomChildren was not null, repopulate it with the current element's children:\n\t\texcessDomChildren = excessDomChildren && slice.call(dom.childNodes);\n\n\t\t// If we are in a situation where we are not hydrating but are using\n\t\t// existing DOM (e.g. replaceNode) we should read the existing DOM\n\t\t// attributes to diff them\n\t\tif (!isHydrating && excessDomChildren != NULL) {\n\t\t\toldProps = {};\n\t\t\tfor (i = 0; i < dom.attributes.length; i++) {\n\t\t\t\tvalue = dom.attributes[i];\n\t\t\t\toldProps[value.name] = value.value;\n\t\t\t}\n\t\t}\n\n\t\tfor (i in oldProps) {\n\t\t\tvalue = oldProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\toldHtml = value;\n\t\t\t} else if (!(i in newProps)) {\n\t\t\t\tif (\n\t\t\t\t\t(i == 'value' && 'defaultValue' in newProps) ||\n\t\t\t\t\t(i == 'checked' && 'defaultChecked' in newProps)\n\t\t\t\t) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tsetProperty(dom, i, NULL, value, namespace);\n\t\t\t}\n\t\t}\n\n\t\t// During hydration, props are not diffed at all (including dangerouslySetInnerHTML)\n\t\t// @TODO we should warn in debug mode when props don't match here.\n\t\tfor (i in newProps) {\n\t\t\tvalue = newProps[i];\n\t\t\tif (i == 'children') {\n\t\t\t\tnewChildren = value;\n\t\t\t} else if (i == 'dangerouslySetInnerHTML') {\n\t\t\t\tnewHtml = value;\n\t\t\t} else if (i == 'value') {\n\t\t\t\tinputValue = value;\n\t\t\t} else if (i == 'checked') {\n\t\t\t\tchecked = value;\n\t\t\t} else if (\n\t\t\t\t(!isHydrating || typeof value == 'function') &&\n\t\t\t\toldProps[i] !== value\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, value, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\n\t\t// If the new vnode didn't have dangerouslySetInnerHTML, diff its children\n\t\tif (newHtml) {\n\t\t\t// Avoid re-applying the same '__html' if it did not changed between re-render\n\t\t\tif (\n\t\t\t\t!isHydrating &&\n\t\t\t\t(!oldHtml ||\n\t\t\t\t\t(newHtml.__html != oldHtml.__html && newHtml.__html != dom.innerHTML))\n\t\t\t) {\n\t\t\t\tdom.innerHTML = newHtml.__html;\n\t\t\t}\n\n\t\t\tnewVNode._children = [];\n\t\t} else {\n\t\t\tif (oldHtml) dom.innerHTML = '';\n\n\t\t\tdiffChildren(\n\t\t\t\t// @ts-expect-error\n\t\t\t\tnewVNode.type == 'template' ? dom.content : dom,\n\t\t\t\tisArray(newChildren) ? newChildren : [newChildren],\n\t\t\t\tnewVNode,\n\t\t\t\toldVNode,\n\t\t\t\tglobalContext,\n\t\t\t\tnodeType == 'foreignObject' ? XHTML_NAMESPACE : namespace,\n\t\t\t\texcessDomChildren,\n\t\t\t\tcommitQueue,\n\t\t\t\texcessDomChildren\n\t\t\t\t\t? excessDomChildren[0]\n\t\t\t\t\t: oldVNode._children && getDomSibling(oldVNode, 0),\n\t\t\t\tisHydrating,\n\t\t\t\trefQueue\n\t\t\t);\n\n\t\t\t// Remove children that are not part of any vnode.\n\t\t\tif (excessDomChildren != NULL) {\n\t\t\t\tfor (i = excessDomChildren.length; i--; ) {\n\t\t\t\t\tremoveNode(excessDomChildren[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// As above, don't diff props during hydration\n\t\tif (!isHydrating) {\n\t\t\ti = 'value';\n\t\t\tif (nodeType == 'progress' && inputValue == NULL) {\n\t\t\t\tdom.removeAttribute('value');\n\t\t\t} else if (\n\t\t\t\tinputValue != UNDEFINED &&\n\t\t\t\t// #2756 For the <progress>-element the initial value is 0,\n\t\t\t\t// despite the attribute not being present. When the attribute\n\t\t\t\t// is missing the progress bar is treated as indeterminate.\n\t\t\t\t// To fix that we'll always update it when it is 0 for progress elements\n\t\t\t\t(inputValue !== dom[i] ||\n\t\t\t\t\t(nodeType == 'progress' && !inputValue) ||\n\t\t\t\t\t// This is only for IE 11 to fix <select> value not being updated.\n\t\t\t\t\t// To avoid a stale select value we need to set the option.value\n\t\t\t\t\t// again, which triggers IE11 to re-evaluate the select value\n\t\t\t\t\t(nodeType == 'option' && inputValue != oldProps[i]))\n\t\t\t) {\n\t\t\t\tsetProperty(dom, i, inputValue, oldProps[i], namespace);\n\t\t\t}\n\n\t\t\ti = 'checked';\n\t\t\tif (checked != UNDEFINED && checked != dom[i]) {\n\t\t\t\tsetProperty(dom, i, checked, oldProps[i], namespace);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn dom;\n}\n\n/**\n * Invoke or update a ref, depending on whether it is a function or object ref.\n * @param {Ref<any> & { _unmount?: unknown }} ref\n * @param {any} value\n * @param {VNode} vnode\n */\nexport function applyRef(ref, value, vnode) {\n\ttry {\n\t\tif (typeof ref == 'function') {\n\t\t\tlet hasRefUnmount = typeof ref._unmount == 'function';\n\t\t\tif (hasRefUnmount) {\n\t\t\t\t// @ts-ignore TS doesn't like moving narrowing checks into variables\n\t\t\t\tref._unmount();\n\t\t\t}\n\n\t\t\tif (!hasRefUnmount || value != NULL) {\n\t\t\t\t// Store the cleanup function on the function\n\t\t\t\t// instance object itself to avoid shape\n\t\t\t\t// transitioning vnode\n\t\t\t\tref._unmount = ref(value);\n\t\t\t}\n\t\t} else ref.current = value;\n\t} catch (e) {\n\t\toptions._catchError(e, vnode);\n\t}\n}\n\n/**\n * Unmount a virtual node from the tree and apply DOM changes\n * @param {VNode} vnode The virtual node to unmount\n * @param {VNode} parentVNode The parent of the VNode that initiated the unmount\n * @param {boolean} [skipRemove] Flag that indicates that a parent node of the\n * current element is already detached from the DOM.\n */\nexport function unmount(vnode, parentVNode, skipRemove) {\n\tlet r;\n\tif (options.unmount) options.unmount(vnode);\n\n\tif ((r = vnode.ref)) {\n\t\tif (!r.current || r.current == vnode._dom) {\n\t\t\tapplyRef(r, NULL, parentVNode);\n\t\t}\n\t}\n\n\tif ((r = vnode._component) != NULL) {\n\t\tif (r.componentWillUnmount) {\n\t\t\ttry {\n\t\t\t\tr.componentWillUnmount();\n\t\t\t} catch (e) {\n\t\t\t\toptions._catchError(e, parentVNode);\n\t\t\t}\n\t\t}\n\n\t\tr.base = r._parentDom = NULL;\n\t}\n\n\tif ((r = vnode._children)) {\n\t\tfor (let i = 0; i < r.length; i++) {\n\t\t\tif (r[i]) {\n\t\t\t\tunmount(\n\t\t\t\t\tr[i],\n\t\t\t\t\tparentVNode,\n\t\t\t\t\tskipRemove || typeof vnode.type != 'function'\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (!skipRemove) {\n\t\tremoveNode(vnode._dom);\n\t}\n\n\tvnode._component = vnode._parent = vnode._dom = UNDEFINED;\n}\n\n/** The `.render()` method for a PFC backing instance. */\nfunction doRender(props, state, context) {\n\treturn this.constructor(props, context);\n}\n", "import { EMPTY_OBJ, NULL } from './constants';\nimport { commitRoot, diff } from './diff/index';\nimport { createElement, Fragment } from './create-element';\nimport options from './options';\nimport { slice } from './util';\n\n/**\n * Render a Preact virtual node into a DOM element\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to render into\n * @param {import('./internal').PreactElement | object} [replaceNode] Optional: Attempt to re-use an\n * existing DOM tree rooted at `replaceNode`\n */\nexport function render(vnode, parentDom, replaceNode) {\n\t// https://github.com/preactjs/preact/issues/3794\n\tif (parentDom == document) {\n\t\tparentDom = document.documentElement;\n\t}\n\n\tif (options._root) options._root(vnode, parentDom);\n\n\t// We abuse the `replaceNode` parameter in `hydrate()` to signal if we are in\n\t// hydration mode or not by passing the `hydrate` function instead of a DOM\n\t// element..\n\tlet isHydrating = typeof replaceNode == 'function';\n\n\t// To be able to support calling `render()` multiple times on the same\n\t// DOM node, we need to obtain a reference to the previous tree. We do\n\t// this by assigning a new `_children` property to DOM nodes which points\n\t// to the last rendered tree. By default this property is not present, which\n\t// means that we are mounting a new tree for the first time.\n\tlet oldVNode = isHydrating\n\t\t? NULL\n\t\t: (replaceNode && replaceNode._children) || parentDom._children;\n\n\tvnode = ((!isHydrating && replaceNode) || parentDom)._children =\n\t\tcreateElement(Fragment, NULL, [vnode]);\n\n\t// List of effects that need to be called after diffing.\n\tlet commitQueue = [],\n\t\trefQueue = [];\n\tdiff(\n\t\tparentDom,\n\t\t// Determine the new vnode tree and store it on the DOM element on\n\t\t// our custom `_children` property.\n\t\tvnode,\n\t\toldVNode || EMPTY_OBJ,\n\t\tEMPTY_OBJ,\n\t\tparentDom.namespaceURI,\n\t\t!isHydrating && replaceNode\n\t\t\t? [replaceNode]\n\t\t\t: oldVNode\n\t\t\t\t? NULL\n\t\t\t\t: parentDom.firstChild\n\t\t\t\t\t? slice.call(parentDom.childNodes)\n\t\t\t\t\t: NULL,\n\t\tcommitQueue,\n\t\t!isHydrating && replaceNode\n\t\t\t? replaceNode\n\t\t\t: oldVNode\n\t\t\t\t? oldVNode._dom\n\t\t\t\t: parentDom.firstChild,\n\t\tisHydrating,\n\t\trefQueue\n\t);\n\n\t// Flush all queued effects\n\tcommitRoot(commitQueue, vnode, refQueue);\n}\n\n/**\n * Update an existing DOM element with data from a Preact virtual node\n * @param {import('./internal').ComponentChild} vnode The virtual node to render\n * @param {import('./internal').PreactElement} parentDom The DOM element to update\n */\nexport function hydrate(vnode, parentDom) {\n\trender(vnode, parentDom, hydrate);\n}\n", "import { assign, slice } from './util';\nimport { createVNode } from './create-element';\nimport { NULL, UNDEFINED } from './constants';\n\n/**\n * Clones the given VNode, optionally adding attributes/props and replacing its\n * children.\n * @param {import('./internal').VNode} vnode The virtual DOM element to clone\n * @param {object} props Attributes/props to add when cloning\n * @param {Array<import('./internal').ComponentChildren>} rest Any additional arguments will be used\n * as replacement children.\n * @returns {import('./internal').VNode}\n */\nexport function cloneElement(vnode, props, children) {\n\tlet normalizedProps = assign({}, vnode.props),\n\t\tkey,\n\t\tref,\n\t\ti;\n\n\tlet defaultProps;\n\n\tif (vnode.type && vnode.type.defaultProps) {\n\t\tdefaultProps = vnode.type.defaultProps;\n\t}\n\n\tfor (i in props) {\n\t\tif (i == 'key') key = props[i];\n\t\telse if (i == 'ref') ref = props[i];\n\t\telse if (props[i] === UNDEFINED && defaultProps != UNDEFINED) {\n\t\t\tnormalizedProps[i] = defaultProps[i];\n\t\t} else {\n\t\t\tnormalizedProps[i] = props[i];\n\t\t}\n\t}\n\n\tif (arguments.length > 2) {\n\t\tnormalizedProps.children =\n\t\t\targuments.length > 3 ? slice.call(arguments, 2) : children;\n\t}\n\n\treturn createVNode(\n\t\tvnode.type,\n\t\tnormalizedProps,\n\t\tkey || vnode.key,\n\t\tref || vnode.ref,\n\t\tNULL\n\t);\n}\n", "import { NULL } from '../constants';\n\n/**\n * Find the closest error boundary to a thrown error and call it\n * @param {object} error The thrown value\n * @param {import('../internal').VNode} vnode The vnode that threw the error that was caught (except\n * for unmounting when this parameter is the highest parent that was being\n * unmounted)\n * @param {import('../internal').VNode} [oldVNode]\n * @param {import('../internal').ErrorInfo} [errorInfo]\n */\nexport function _catchError(error, vnode, oldVNode, errorInfo) {\n\t/** @type {import('../internal').Component} */\n\tlet component,\n\t\t/** @type {import('../internal').ComponentType} */\n\t\tctor,\n\t\t/** @type {boolean} */\n\t\thandled;\n\n\tfor (; (vnode = vnode._parent); ) {\n\t\tif ((component = vnode._component) && !component._processingException) {\n\t\t\ttry {\n\t\t\t\tctor = component.constructor;\n\n\t\t\t\tif (ctor && ctor.getDerivedStateFromError != NULL) {\n\t\t\t\t\tcomponent.setState(ctor.getDerivedStateFromError(error));\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\tif (component.componentDidCatch != NULL) {\n\t\t\t\t\tcomponent.componentDidCatch(error, errorInfo || {});\n\t\t\t\t\thandled = component._dirty;\n\t\t\t\t}\n\n\t\t\t\t// This is an error boundary. Mark it as having bailed out, and whether it was mid-hydration.\n\t\t\t\tif (handled) {\n\t\t\t\t\treturn (component._pendingError = component);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\terror = e;\n\t\t\t}\n\t\t}\n\t}\n\n\tthrow error;\n}\n", "const ENCODED_ENTITIES = /[\"&<]/;\n\n/** @param {string} str */\nexport function encodeEntities(str) {\n\t// Skip all work for strings with no entities needing encoding:\n\tif (str.length === 0 || ENCODED_ENTITIES.test(str) === false) return str;\n\n\tlet last = 0,\n\t\ti = 0,\n\t\tout = '',\n\t\tch = '';\n\n\t// Seek forward in str until the next entity char:\n\tfor (; i < str.length; i++) {\n\t\tswitch (str.charCodeAt(i)) {\n\t\t\tcase 34:\n\t\t\t\tch = '&quot;';\n\t\t\t\tbreak;\n\t\t\tcase 38:\n\t\t\t\tch = '&amp;';\n\t\t\t\tbreak;\n\t\t\tcase 60:\n\t\t\t\tch = '&lt;';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tcontinue;\n\t\t}\n\t\t// Append skipped/buffered characters and the encoded entity:\n\t\tif (i !== last) out += str.slice(last, i);\n\t\tout += ch;\n\t\t// Start the next seek/buffer after the entity's offset:\n\t\tlast = i + 1;\n\t}\n\tif (i !== last) out += str.slice(last, i);\n\treturn out;\n}\n", "/** Normal hydration that attaches to a DOM tree but does not diff it. */\nexport const MODE_HYDRATE = 1 << 5;\n/** Signifies this VNode suspended on the previous render */\nexport const MODE_SUSPENDED = 1 << 7;\n/** Indicates that this node needs to be inserted while patching children */\nexport const INSERT_VNODE = 1 << 2;\n/** Indicates a VNode has been matched with another VNode in the diff */\nexport const MATCHED = 1 << 1;\n\n/** Reset all mode flags */\nexport const RESET_MODE = ~(MODE_HYDRATE | MODE_SUSPENDED);\n\nexport const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\nexport const XHTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\nexport const MATH_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n\nexport const NULL = null;\nexport const UNDEFINED = undefined;\nexport const EMPTY_OBJ = /** @type {any} */ ({});\nexport const EMPTY_ARR = [];\nexport const IS_NON_DIMENSIONAL =\n\t/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;\n", "import { options, Fragment } from 'preact';\nimport { encodeEntities } from './utils';\nimport { IS_NON_DIMENSIONAL } from '../../src/constants';\n\nlet vnodeId = 0;\n\nconst isArray = Array.isArray;\n\n/**\n * @fileoverview\n * This file exports various methods that implement Babel's \"automatic\" JSX runtime API:\n * - jsx(type, props, key)\n * - jsxs(type, props, key)\n * - jsxDEV(type, props, key, __source, __self)\n *\n * The implementation of createVNode here is optimized for performance.\n * Benchmarks: https://esbench.com/bench/5f6b54a0b4632100a7dcd2b3\n */\n\n/**\n * JSX.Element factory used by Babel's {runtime:\"automatic\"} JSX transform\n * @param {VNode['type']} type\n * @param {VNode['props']} props\n * @param {VNode['key']} [key]\n * @param {unknown} [isStaticChildren]\n * @param {unknown} [__source]\n * @param {unknown} [__self]\n */\nfunction createVNode(type, props, key, isStaticChildren, __source, __self) {\n\tif (!props) props = {};\n\t// We'll want to preserve `ref` in props to get rid of the need for\n\t// forwardRef components in the future, but that should happen via\n\t// a separate PR.\n\tlet normalizedProps = props,\n\t\tref,\n\t\ti;\n\n\tif ('ref' in normalizedProps) {\n\t\tnormalizedProps = {};\n\t\tfor (i in props) {\n\t\t\tif (i == 'ref') {\n\t\t\t\tref = props[i];\n\t\t\t} else {\n\t\t\t\tnormalizedProps[i] = props[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/** @type {VNode & { __source: any; __self: any }} */\n\tconst vnode = {\n\t\ttype,\n\t\tprops: normalizedProps,\n\t\tkey,\n\t\tref,\n\t\t_children: null,\n\t\t_parent: null,\n\t\t_depth: 0,\n\t\t_dom: null,\n\t\t_component: null,\n\t\tconstructor: undefined,\n\t\t_original: --vnodeId,\n\t\t_index: -1,\n\t\t_flags: 0,\n\t\t__source,\n\t\t__self\n\t};\n\n\t// If a Component VNode, check for and apply defaultProps.\n\t// Note: `type` is often a String, and can be `undefined` in development.\n\tif (typeof type === 'function' && (ref = type.defaultProps)) {\n\t\tfor (i in ref)\n\t\t\tif (normalizedProps[i] === undefined) {\n\t\t\t\tnormalizedProps[i] = ref[i];\n\t\t\t}\n\t}\n\n\tif (options.vnode) options.vnode(vnode);\n\treturn vnode;\n}\n\n/**\n * Create a template vnode. This function is not expected to be\n * used directly, but rather through a precompile JSX transform\n * @param {string[]} templates\n * @param  {Array<string | null | VNode>} exprs\n * @returns {VNode}\n */\nfunction jsxTemplate(templates, ...exprs) {\n\tconst vnode = createVNode(Fragment, { tpl: templates, exprs });\n\t// Bypass render to string top level Fragment optimization\n\tvnode.key = vnode._vnode;\n\treturn vnode;\n}\n\nconst JS_TO_CSS = {};\nconst CSS_REGEX = /[A-Z]/g;\n\n/**\n * Unwrap potential signals.\n * @param {*} value\n * @returns {*}\n */\nfunction normalizeAttrValue(value) {\n\treturn value !== null &&\n\t\ttypeof value === 'object' &&\n\t\ttypeof value.valueOf === 'function'\n\t\t? value.valueOf()\n\t\t: value;\n}\n\n/**\n * Serialize an HTML attribute to a string. This function is not\n * expected to be used directly, but rather through a precompile\n * JSX transform\n * @param {string} name The attribute name\n * @param {*} value The attribute value\n * @returns {string}\n */\nfunction jsxAttr(name, value) {\n\tif (options.attr) {\n\t\tconst result = options.attr(name, value);\n\t\tif (typeof result === 'string') return result;\n\t}\n\n\tvalue = normalizeAttrValue(value);\n\n\tif (name === 'ref' || name === 'key') return '';\n\tif (name === 'style' && typeof value === 'object') {\n\t\tlet str = '';\n\t\tfor (let prop in value) {\n\t\t\tlet val = value[prop];\n\t\t\tif (val != null && val !== '') {\n\t\t\t\tconst name =\n\t\t\t\t\tprop[0] == '-'\n\t\t\t\t\t\t? prop\n\t\t\t\t\t\t: JS_TO_CSS[prop] ||\n\t\t\t\t\t\t\t(JS_TO_CSS[prop] = prop.replace(CSS_REGEX, '-$&').toLowerCase());\n\n\t\t\t\tlet suffix = ';';\n\t\t\t\tif (\n\t\t\t\t\ttypeof val === 'number' &&\n\t\t\t\t\t// Exclude custom-attributes\n\t\t\t\t\t!name.startsWith('--') &&\n\t\t\t\t\t!IS_NON_DIMENSIONAL.test(name)\n\t\t\t\t) {\n\t\t\t\t\tsuffix = 'px;';\n\t\t\t\t}\n\t\t\t\tstr = str + name + ':' + val + suffix;\n\t\t\t}\n\t\t}\n\t\treturn name + '=\"' + encodeEntities(str) + '\"';\n\t}\n\n\tif (\n\t\tvalue == null ||\n\t\tvalue === false ||\n\t\ttypeof value === 'function' ||\n\t\ttypeof value === 'object'\n\t) {\n\t\treturn '';\n\t} else if (value === true) return name;\n\n\treturn name + '=\"' + encodeEntities('' + value) + '\"';\n}\n\n/**\n * Escape a dynamic child passed to `jsxTemplate`. This function\n * is not expected to be used directly, but rather through a\n * precompile JSX transform\n * @param {*} value\n * @returns {string | null | VNode | Array<string | null | VNode>}\n */\nfunction jsxEscape(value) {\n\tif (\n\t\tvalue == null ||\n\t\ttypeof value === 'boolean' ||\n\t\ttypeof value === 'function'\n\t) {\n\t\treturn null;\n\t}\n\n\tif (typeof value === 'object') {\n\t\t// Check for VNode\n\t\tif (value.constructor === undefined) return value;\n\n\t\tif (isArray(value)) {\n\t\t\tfor (let i = 0; i < value.length; i++) {\n\t\t\t\tvalue[i] = jsxEscape(value[i]);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\t}\n\n\treturn encodeEntities('' + value);\n}\n\nexport {\n\tcreateVNode as jsx,\n\tcreateVNode as jsxs,\n\tcreateVNode as jsxDEV,\n\tFragment,\n\t// precompiled JSX transform\n\tjsxTemplate,\n\tjsxAttr,\n\tjsxEscape\n};\n", "import { options as _options } from 'preact';\n\n/** @type {number} */\nlet currentIndex;\n\n/** @type {import('./internal').Component} */\nlet currentComponent;\n\n/** @type {import('./internal').Component} */\nlet previousComponent;\n\n/** @type {number} */\nlet currentHook = 0;\n\n/** @type {Array<import('./internal').Component>} */\nlet afterPaintEffects = [];\n\n// Cast to use internal Options type\nconst options = /** @type {import('./internal').Options} */ (_options);\n\nlet oldBeforeDiff = options._diff;\nlet oldBeforeRender = options._render;\nlet oldAfterDiff = options.diffed;\nlet oldCommit = options._commit;\nlet oldBeforeUnmount = options.unmount;\nlet oldRoot = options._root;\n\n// We take the minimum timeout for requestAnimationFrame to ensure that\n// the callback is invoked after the next frame. 35ms is based on a 30hz\n// refresh rate, which is the minimum rate for a smooth user experience.\nconst RAF_TIMEOUT = 35;\nlet prevRaf;\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._diff = vnode => {\n\tcurrentComponent = null;\n\tif (oldBeforeDiff) oldBeforeDiff(vnode);\n};\n\noptions._root = (vnode, parentDom) => {\n\tif (vnode && parentDom._children && parentDom._children._mask) {\n\t\tvnode._mask = parentDom._children._mask;\n\t}\n\n\tif (oldRoot) oldRoot(vnode, parentDom);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions._render = vnode => {\n\tif (oldBeforeRender) oldBeforeRender(vnode);\n\n\tcurrentComponent = vnode._component;\n\tcurrentIndex = 0;\n\n\tconst hooks = currentComponent.__hooks;\n\tif (hooks) {\n\t\tif (previousComponent === currentComponent) {\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentComponent._renderCallbacks = [];\n\t\t\thooks._list.forEach(hookItem => {\n\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t}\n\t\t\t\thookItem._pendingArgs = hookItem._nextValue = undefined;\n\t\t\t});\n\t\t} else {\n\t\t\thooks._pendingEffects.forEach(invokeCleanup);\n\t\t\thooks._pendingEffects.forEach(invokeEffect);\n\t\t\thooks._pendingEffects = [];\n\t\t\tcurrentIndex = 0;\n\t\t}\n\t}\n\tpreviousComponent = currentComponent;\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.diffed = vnode => {\n\tif (oldAfterDiff) oldAfterDiff(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tif (c.__hooks._pendingEffects.length) afterPaint(afterPaintEffects.push(c));\n\t\tc.__hooks._list.forEach(hookItem => {\n\t\t\tif (hookItem._pendingArgs) {\n\t\t\t\thookItem._args = hookItem._pendingArgs;\n\t\t\t}\n\t\t\thookItem._pendingArgs = undefined;\n\t\t});\n\t}\n\tpreviousComponent = currentComponent = null;\n};\n\n// TODO: Improve typing of commitQueue parameter\n/** @type {(vnode: import('./internal').VNode, commitQueue: any) => void} */\noptions._commit = (vnode, commitQueue) => {\n\tcommitQueue.some(component => {\n\t\ttry {\n\t\t\tcomponent._renderCallbacks.forEach(invokeCleanup);\n\t\t\tcomponent._renderCallbacks = component._renderCallbacks.filter(cb =>\n\t\t\t\tcb._value ? invokeEffect(cb) : true\n\t\t\t);\n\t\t} catch (e) {\n\t\t\tcommitQueue.some(c => {\n\t\t\t\tif (c._renderCallbacks) c._renderCallbacks = [];\n\t\t\t});\n\t\t\tcommitQueue = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t});\n\n\tif (oldCommit) oldCommit(vnode, commitQueue);\n};\n\n/** @type {(vnode: import('./internal').VNode) => void} */\noptions.unmount = vnode => {\n\tif (oldBeforeUnmount) oldBeforeUnmount(vnode);\n\n\tconst c = vnode._component;\n\tif (c && c.__hooks) {\n\t\tlet hasErrored;\n\t\tc.__hooks._list.forEach(s => {\n\t\t\ttry {\n\t\t\t\tinvokeCleanup(s);\n\t\t\t} catch (e) {\n\t\t\t\thasErrored = e;\n\t\t\t}\n\t\t});\n\t\tc.__hooks = undefined;\n\t\tif (hasErrored) options._catchError(hasErrored, c._vnode);\n\t}\n};\n\n/**\n * Get a hook's state from the currentComponent\n * @param {number} index The index of the hook to get\n * @param {number} type The index of the hook to get\n * @returns {any}\n */\nfunction getHookState(index, type) {\n\tif (options._hook) {\n\t\toptions._hook(currentComponent, index, currentHook || type);\n\t}\n\tcurrentHook = 0;\n\n\t// Largely inspired by:\n\t// * https://github.com/michael-klein/funcy.js/blob/f6be73468e6ec46b0ff5aa3cc4c9baf72a29025a/src/hooks/core_hooks.mjs\n\t// * https://github.com/michael-klein/funcy.js/blob/650beaa58c43c33a74820a3c98b3c7079cf2e333/src/renderer.mjs\n\t// Other implementations to look at:\n\t// * https://codesandbox.io/s/mnox05qp8\n\tconst hooks =\n\t\tcurrentComponent.__hooks ||\n\t\t(currentComponent.__hooks = {\n\t\t\t_list: [],\n\t\t\t_pendingEffects: []\n\t\t});\n\n\tif (index >= hooks._list.length) {\n\t\thooks._list.push({});\n\t}\n\n\treturn hooks._list[index];\n}\n\n/**\n * @template {unknown} S\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} [initialState]\n * @returns {[S, (state: S) => void]}\n */\nexport function useState(initialState) {\n\tcurrentHook = 1;\n\treturn useReducer(invokeOrReturn, initialState);\n}\n\n/**\n * @template {unknown} S\n * @template {unknown} A\n * @param {import('./index').Reducer<S, A>} reducer\n * @param {import('./index').Dispatch<import('./index').StateUpdater<S>>} initialState\n * @param {(initialState: any) => void} [init]\n * @returns {[ S, (state: S) => void ]}\n */\nexport function useReducer(reducer, initialState, init) {\n\t/** @type {import('./internal').ReducerHookState} */\n\tconst hookState = getHookState(currentIndex++, 2);\n\thookState._reducer = reducer;\n\tif (!hookState._component) {\n\t\thookState._value = [\n\t\t\t!init ? invokeOrReturn(undefined, initialState) : init(initialState),\n\n\t\t\taction => {\n\t\t\t\tconst currentValue = hookState._nextValue\n\t\t\t\t\t? hookState._nextValue[0]\n\t\t\t\t\t: hookState._value[0];\n\t\t\t\tconst nextValue = hookState._reducer(currentValue, action);\n\n\t\t\t\tif (currentValue !== nextValue) {\n\t\t\t\t\thookState._nextValue = [nextValue, hookState._value[1]];\n\t\t\t\t\thookState._component.setState({});\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\n\t\thookState._component = currentComponent;\n\n\t\tif (!currentComponent._hasScuFromHooks) {\n\t\t\tcurrentComponent._hasScuFromHooks = true;\n\t\t\tlet prevScu = currentComponent.shouldComponentUpdate;\n\t\t\tconst prevCWU = currentComponent.componentWillUpdate;\n\n\t\t\t// If we're dealing with a forced update `shouldComponentUpdate` will\n\t\t\t// not be called. But we use that to update the hook values, so we\n\t\t\t// need to call it.\n\t\t\tcurrentComponent.componentWillUpdate = function (p, s, c) {\n\t\t\t\tif (this._force) {\n\t\t\t\t\tlet tmp = prevScu;\n\t\t\t\t\t// Clear to avoid other sCU hooks from being called\n\t\t\t\t\tprevScu = undefined;\n\t\t\t\t\tupdateHookState(p, s, c);\n\t\t\t\t\tprevScu = tmp;\n\t\t\t\t}\n\n\t\t\t\tif (prevCWU) prevCWU.call(this, p, s, c);\n\t\t\t};\n\n\t\t\t// This SCU has the purpose of bailing out after repeated updates\n\t\t\t// to stateful hooks.\n\t\t\t// we store the next value in _nextValue[0] and keep doing that for all\n\t\t\t// state setters, if we have next states and\n\t\t\t// all next states within a component end up being equal to their original state\n\t\t\t// we are safe to bail out for this specific component.\n\t\t\t/**\n\t\t\t *\n\t\t\t * @type {import('./internal').Component[\"shouldComponentUpdate\"]}\n\t\t\t */\n\t\t\t// @ts-ignore - We don't use TS to downtranspile\n\t\t\t// eslint-disable-next-line no-inner-declarations\n\t\t\tfunction updateHookState(p, s, c) {\n\t\t\t\tif (!hookState._component.__hooks) return true;\n\n\t\t\t\t/** @type {(x: import('./internal').HookState) => x is import('./internal').ReducerHookState} */\n\t\t\t\tconst isStateHook = x => !!x._component;\n\t\t\t\tconst stateHooks =\n\t\t\t\t\thookState._component.__hooks._list.filter(isStateHook);\n\n\t\t\t\tconst allHooksEmpty = stateHooks.every(x => !x._nextValue);\n\t\t\t\t// When we have no updated hooks in the component we invoke the previous SCU or\n\t\t\t\t// traverse the VDOM tree further.\n\t\t\t\tif (allHooksEmpty) {\n\t\t\t\t\treturn prevScu ? prevScu.call(this, p, s, c) : true;\n\t\t\t\t}\n\n\t\t\t\t// We check whether we have components with a nextValue set that\n\t\t\t\t// have values that aren't equal to one another this pushes\n\t\t\t\t// us to update further down the tree\n\t\t\t\tlet shouldUpdate = hookState._component.props !== p;\n\t\t\t\tstateHooks.forEach(hookItem => {\n\t\t\t\t\tif (hookItem._nextValue) {\n\t\t\t\t\t\tconst currentValue = hookItem._value[0];\n\t\t\t\t\t\thookItem._value = hookItem._nextValue;\n\t\t\t\t\t\thookItem._nextValue = undefined;\n\t\t\t\t\t\tif (currentValue !== hookItem._value[0]) shouldUpdate = true;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\treturn prevScu\n\t\t\t\t\t? prevScu.call(this, p, s, c) || shouldUpdate\n\t\t\t\t\t: shouldUpdate;\n\t\t\t}\n\n\t\t\tcurrentComponent.shouldComponentUpdate = updateHookState;\n\t\t}\n\t}\n\n\treturn hookState._nextValue || hookState._value;\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 3);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent.__hooks._pendingEffects.push(state);\n\t}\n}\n\n/**\n * @param {import('./internal').Effect} callback\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useLayoutEffect(callback, args) {\n\t/** @type {import('./internal').EffectHookState} */\n\tconst state = getHookState(currentIndex++, 4);\n\tif (!options._skipEffects && argsChanged(state._args, args)) {\n\t\tstate._value = callback;\n\t\tstate._pendingArgs = args;\n\n\t\tcurrentComponent._renderCallbacks.push(state);\n\t}\n}\n\n/** @type {(initialValue: unknown) => unknown} */\nexport function useRef(initialValue) {\n\tcurrentHook = 5;\n\treturn useMemo(() => ({ current: initialValue }), []);\n}\n\n/**\n * @param {object} ref\n * @param {() => object} createHandle\n * @param {unknown[]} args\n * @returns {void}\n */\nexport function useImperativeHandle(ref, createHandle, args) {\n\tcurrentHook = 6;\n\tuseLayoutEffect(\n\t\t() => {\n\t\t\tif (typeof ref == 'function') {\n\t\t\t\tconst result = ref(createHandle());\n\t\t\t\treturn () => {\n\t\t\t\t\tref(null);\n\t\t\t\t\tif (result && typeof result == 'function') result();\n\t\t\t\t};\n\t\t\t} else if (ref) {\n\t\t\t\tref.current = createHandle();\n\t\t\t\treturn () => (ref.current = null);\n\t\t\t}\n\t\t},\n\t\targs == null ? args : args.concat(ref)\n\t);\n}\n\n/**\n * @template {unknown} T\n * @param {() => T} factory\n * @param {unknown[]} args\n * @returns {T}\n */\nexport function useMemo(factory, args) {\n\t/** @type {import('./internal').MemoHookState<T>} */\n\tconst state = getHookState(currentIndex++, 7);\n\tif (argsChanged(state._args, args)) {\n\t\tstate._value = factory();\n\t\tstate._args = args;\n\t\tstate._factory = factory;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * @param {() => void} callback\n * @param {unknown[]} args\n * @returns {() => void}\n */\nexport function useCallback(callback, args) {\n\tcurrentHook = 8;\n\treturn useMemo(() => callback, args);\n}\n\n/**\n * @param {import('./internal').PreactContext} context\n */\nexport function useContext(context) {\n\tconst provider = currentComponent.context[context._id];\n\t// We could skip this call here, but than we'd not call\n\t// `options._hook`. We need to do that in order to make\n\t// the devtools aware of this hook.\n\t/** @type {import('./internal').ContextHookState} */\n\tconst state = getHookState(currentIndex++, 9);\n\t// The devtools needs access to the context object to\n\t// be able to pull of the default value when no provider\n\t// is present in the tree.\n\tstate._context = context;\n\tif (!provider) return context._defaultValue;\n\t// This is probably not safe to convert to \"!\"\n\tif (state._value == null) {\n\t\tstate._value = true;\n\t\tprovider.sub(currentComponent);\n\t}\n\treturn provider.props.value;\n}\n\n/**\n * Display a custom label for a custom hook for the devtools panel\n * @type {<T>(value: T, cb?: (value: T) => string | number) => void}\n */\nexport function useDebugValue(value, formatter) {\n\tif (options.useDebugValue) {\n\t\toptions.useDebugValue(\n\t\t\tformatter ? formatter(value) : /** @type {any}*/ (value)\n\t\t);\n\t}\n}\n\n/**\n * @param {(error: unknown, errorInfo: import('preact').ErrorInfo) => void} cb\n * @returns {[unknown, () => void]}\n */\nexport function useErrorBoundary(cb) {\n\t/** @type {import('./internal').ErrorBoundaryHookState} */\n\tconst state = getHookState(currentIndex++, 10);\n\tconst errState = useState();\n\tstate._value = cb;\n\tif (!currentComponent.componentDidCatch) {\n\t\tcurrentComponent.componentDidCatch = (err, errorInfo) => {\n\t\t\tif (state._value) state._value(err, errorInfo);\n\t\t\terrState[1](err);\n\t\t};\n\t}\n\treturn [\n\t\terrState[0],\n\t\t() => {\n\t\t\terrState[1](undefined);\n\t\t}\n\t];\n}\n\n/** @type {() => string} */\nexport function useId() {\n\t/** @type {import('./internal').IdHookState} */\n\tconst state = getHookState(currentIndex++, 11);\n\tif (!state._value) {\n\t\t// Grab either the root node or the nearest async boundary node.\n\t\t/** @type {import('./internal').VNode} */\n\t\tlet root = currentComponent._vnode;\n\t\twhile (root !== null && !root._mask && root._parent !== null) {\n\t\t\troot = root._parent;\n\t\t}\n\n\t\tlet mask = root._mask || (root._mask = [0, 0]);\n\t\tstate._value = 'P' + mask[0] + '-' + mask[1]++;\n\t}\n\n\treturn state._value;\n}\n\n/**\n * After paint effects consumer.\n */\nfunction flushAfterPaintEffects() {\n\tlet component;\n\twhile ((component = afterPaintEffects.shift())) {\n\t\tif (!component._parentDom || !component.__hooks) continue;\n\t\ttry {\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeCleanup);\n\t\t\tcomponent.__hooks._pendingEffects.forEach(invokeEffect);\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t} catch (e) {\n\t\t\tcomponent.__hooks._pendingEffects = [];\n\t\t\toptions._catchError(e, component._vnode);\n\t\t}\n\t}\n}\n\nlet HAS_RAF = typeof requestAnimationFrame == 'function';\n\n/**\n * Schedule a callback to be invoked after the browser has a chance to paint a new frame.\n * Do this by combining requestAnimationFrame (rAF) + setTimeout to invoke a callback after\n * the next browser frame.\n *\n * Also, schedule a timeout in parallel to the the rAF to ensure the callback is invoked\n * even if RAF doesn't fire (for example if the browser tab is not visible)\n *\n * @param {() => void} callback\n */\nfunction afterNextFrame(callback) {\n\tconst done = () => {\n\t\tclearTimeout(timeout);\n\t\tif (HAS_RAF) cancelAnimationFrame(raf);\n\t\tsetTimeout(callback);\n\t};\n\tconst timeout = setTimeout(done, RAF_TIMEOUT);\n\n\tlet raf;\n\tif (HAS_RAF) {\n\t\traf = requestAnimationFrame(done);\n\t}\n}\n\n// Note: if someone used options.debounceRendering = requestAnimationFrame,\n// then effects will ALWAYS run on the NEXT frame instead of the current one, incurring a ~16ms delay.\n// Perhaps this is not such a big deal.\n/**\n * Schedule afterPaintEffects flush after the browser paints\n * @param {number} newQueueLength\n * @returns {void}\n */\nfunction afterPaint(newQueueLength) {\n\tif (newQueueLength === 1 || prevRaf !== options.requestAnimationFrame) {\n\t\tprevRaf = options.requestAnimationFrame;\n\t\t(prevRaf || afterNextFrame)(flushAfterPaintEffects);\n\t}\n}\n\n/**\n * @param {import('./internal').HookState} hook\n * @returns {void}\n */\nfunction invokeCleanup(hook) {\n\t// A hook cleanup can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\tlet cleanup = hook._cleanup;\n\tif (typeof cleanup == 'function') {\n\t\thook._cleanup = undefined;\n\t\tcleanup();\n\t}\n\n\tcurrentComponent = comp;\n}\n\n/**\n * Invoke a Hook's effect\n * @param {import('./internal').EffectHookState} hook\n * @returns {void}\n */\nfunction invokeEffect(hook) {\n\t// A hook call can introduce a call to render which creates a new root, this will call options.vnode\n\t// and move the currentComponent away.\n\tconst comp = currentComponent;\n\thook._cleanup = hook._value();\n\tcurrentComponent = comp;\n}\n\n/**\n * @param {unknown[]} oldArgs\n * @param {unknown[]} newArgs\n * @returns {boolean}\n */\nfunction argsChanged(oldArgs, newArgs) {\n\treturn (\n\t\t!oldArgs ||\n\t\toldArgs.length !== newArgs.length ||\n\t\tnewArgs.some((arg, index) => arg !== oldArgs[index])\n\t);\n}\n\n/**\n * @template Arg\n * @param {Arg} arg\n * @param {(arg: Arg) => any} f\n * @returns {any}\n */\nfunction invokeOrReturn(arg, f) {\n\treturn typeof f == 'function' ? f(arg) : f;\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nconst STYLE_INNER = {\n    position: 'relative',\n    // Disabled for our use case: the wrapper elements around FileList already deal with overflow,\n    // and this additional property would hide things that we want to show.\n    //\n    // overflow: 'hidden',\n    width: '100%',\n    minHeight: '100%',\n};\nconst STYLE_CONTENT = {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    // Because the `top` value gets set to some offset, this `height` being 100% would make the scrollbar\n    // stretch far beyond the content. For our use case, the content div actually can get its height from\n    // the elements inside it, so we don't need to specify a `height` property at all.\n    //\n    // height: '100%',\n    width: '100%',\n    overflow: 'visible',\n};\nexport default function VirtualList({ data, rowHeight, renderRow, overscanCount = 10, padding = 4, ...props }) {\n    const scrollerRef = useRef(null);\n    const [offset, setOffset] = useState(0);\n    const [height, setHeight] = useState(0);\n    useEffect(() => {\n        function resize() {\n            if (scrollerRef.current != null &&\n                height !== scrollerRef.current.offsetHeight) {\n                setHeight(scrollerRef.current.offsetHeight);\n            }\n        }\n        resize();\n        window.addEventListener('resize', resize);\n        return () => {\n            window.removeEventListener('resize', resize);\n        };\n    }, [height]);\n    const handleScroll = useCallback(() => {\n        if (scrollerRef.current)\n            setOffset(scrollerRef.current.scrollTop);\n    }, []);\n    // first visible row index\n    let start = Math.floor(offset / rowHeight);\n    // actual number of visible rows (without overscan)\n    let visibleRowCount = Math.floor(height / rowHeight);\n    // Overscan: render blocks of rows modulo an overscan row count\n    // This dramatically reduces DOM writes during scrolling\n    if (overscanCount) {\n        start = Math.max(0, start - (start % overscanCount));\n        visibleRowCount += overscanCount;\n    }\n    const end = start + visibleRowCount + padding;\n    // data slice currently in viewport plus overscan items\n    const selection = data.slice(start, end);\n    const styleInner = { ...STYLE_INNER, height: data.length * rowHeight };\n    const styleContent = { ...STYLE_CONTENT, top: start * rowHeight };\n    // The `role=\"presentation\"` attributes ensure that these wrapper elements are not treated as list\n    // items by accessibility and outline tools.\n    return (_jsx(\"div\", { onScroll: handleScroll, ref: scrollerRef, ...props, children: _jsx(\"div\", { role: \"presentation\", style: styleInner, children: _jsx(\"div\", { role: \"presentation\", style: styleContent, children: selection.map(renderRow) }) }) }));\n}\n", "/**\n * Core plugin logic that all plugins share.\n *\n * BasePlugin does not contain DOM rendering so it can be used for plugins\n * without a user interface.\n *\n * See `Plugin` for the extended version with Preact rendering for interfaces.\n */\nimport { Translator } from '@uppy/utils';\nexport default class BasePlugin {\n    uppy;\n    opts;\n    id;\n    defaultLocale;\n    i18n;\n    i18nArray;\n    type;\n    VERSION;\n    constructor(uppy, opts) {\n        this.uppy = uppy;\n        this.opts = opts ?? {};\n    }\n    getPluginState() {\n        const { plugins } = this.uppy.getState();\n        return (plugins?.[this.id] || {});\n    }\n    setPluginState(update) {\n        const { plugins } = this.uppy.getState();\n        this.uppy.setState({\n            plugins: {\n                ...plugins,\n                [this.id]: {\n                    ...plugins[this.id],\n                    ...update,\n                },\n            },\n        });\n    }\n    setOptions(newOpts) {\n        this.opts = { ...this.opts, ...newOpts };\n        this.setPluginState(undefined); // so that UI re-renders with new options\n        this.i18nInit();\n    }\n    i18nInit() {\n        const translator = new Translator([\n            this.defaultLocale,\n            this.uppy.locale,\n            this.opts.locale,\n        ]);\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.setPluginState(undefined); // so that UI re-renders and we see the updated locale\n    }\n    /**\n     * Extendable methods\n     * ==================\n     * These methods are here to serve as an overview of the extendable methods as well as\n     * making them not conditional in use, such as `if (this.afterUpdate)`.\n     */\n    addTarget(plugin) {\n        throw new Error(\"Extend the addTarget method to add your plugin to another plugin's target\");\n    }\n    install() { }\n    uninstall() { }\n    update(state) { }\n    // Called after every state update, after everything's mounted. Debounced.\n    afterUpdate() { }\n}\n", "/**\n * Create a wrapper around an event emitter with a `remove` method to remove\n * all events that were added using the wrapped emitter.\n */\nexport default class EventManager {\n    #uppy;\n    #events = [];\n    constructor(uppy) {\n        this.#uppy = uppy;\n    }\n    on(event, fn) {\n        this.#events.push([event, fn]);\n        return this.#uppy.on(event, fn);\n    }\n    remove() {\n        for (const [event, fn] of this.#events.splice(0)) {\n            this.#uppy.off(event, fn);\n        }\n    }\n    onFilePause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                cb(isPaused);\n            }\n        });\n    }\n    onFileRemove(fileID, cb) {\n        this.on('file-removed', (file) => {\n            if (fileID === file.id)\n                cb(file.id);\n        });\n    }\n    onPause(fileID, cb) {\n        this.on('upload-pause', (file, isPaused) => {\n            if (fileID === file?.id) {\n                // const isPaused = this.#uppy.pauseResume(fileID)\n                cb(isPaused);\n            }\n        });\n    }\n    onRetry(fileID, cb) {\n        this.on('upload-retry', (file) => {\n            if (fileID === file?.id) {\n                cb();\n            }\n        });\n    }\n    onRetryAll(fileID, cb) {\n        this.on('retry-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onPauseAll(fileID, cb) {\n        this.on('pause-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n    onCancelAll(fileID, eventHandler) {\n        this.on('cancel-all', (...args) => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            eventHandler(...args);\n        });\n    }\n    onResumeAll(fileID, cb) {\n        this.on('resume-all', () => {\n            if (!this.#uppy.getFile(fileID))\n                return;\n            cb();\n        });\n    }\n}\n", "import { getTimeStamp } from '@uppy/utils';\n// Swallow all logs, except errors.\n// default if logger is not set or debug: false\nconst justErrorsLogger = {\n    debug: () => { },\n    warn: () => { },\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\n// Print logs to console with namespace + timestamp,\n// set by logger: Uppy.debugLogger or debug: true\nconst debugLogger = {\n    debug: (...args) => console.debug(`[Uppy] [${getTimeStamp()}]`, ...args),\n    warn: (...args) => console.warn(`[Uppy] [${getTimeStamp()}]`, ...args),\n    error: (...args) => console.error(`[Uppy] [${getTimeStamp()}]`, ...args),\n};\nexport { justErrorsLogger, debugLogger };\n", "import prettierBytes from '@transloadit/prettier-bytes';\n// @ts-ignore untyped\nimport match from 'mime-match';\nconst defaultOptions = {\n    maxFileSize: null,\n    minFileSize: null,\n    maxTotalFileSize: null,\n    maxNumberOfFiles: null,\n    minNumberOfFiles: null,\n    allowedFileTypes: null,\n    requiredMetaFields: [],\n};\nclass RestrictionError extends Error {\n    isUserFacing;\n    file;\n    constructor(message, opts) {\n        super(message);\n        this.isUserFacing = opts?.isUserFacing ?? true;\n        if (opts?.file) {\n            this.file = opts.file; // only some restriction errors are related to a particular file\n        }\n    }\n    isRestriction = true;\n}\nclass Restricter {\n    getI18n;\n    getOpts;\n    constructor(getOpts, getI18n) {\n        this.getI18n = getI18n;\n        this.getOpts = () => {\n            const opts = getOpts();\n            if (opts.restrictions?.allowedFileTypes != null &&\n                !Array.isArray(opts.restrictions.allowedFileTypes)) {\n                throw new TypeError('`restrictions.allowedFileTypes` must be an array');\n            }\n            return opts;\n        };\n    }\n    // Because these operations are slow, we cannot run them for every file (if we are adding multiple files)\n    validateAggregateRestrictions(existingFiles, addingFiles) {\n        const { maxTotalFileSize, maxNumberOfFiles } = this.getOpts().restrictions;\n        if (maxNumberOfFiles) {\n            const nonGhostFiles = existingFiles.filter((f) => !f.isGhost);\n            if (nonGhostFiles.length + addingFiles.length > maxNumberOfFiles) {\n                throw new RestrictionError(`${this.getI18n()('youCanOnlyUploadX', {\n                    smart_count: maxNumberOfFiles,\n                })}`);\n            }\n        }\n        if (maxTotalFileSize) {\n            const totalFilesSize = [...existingFiles, ...addingFiles].reduce((total, f) => total + (f.size ?? 0), 0);\n            if (totalFilesSize > maxTotalFileSize) {\n                throw new RestrictionError(this.getI18n()('aggregateExceedsSize', {\n                    sizeAllowed: prettierBytes(maxTotalFileSize),\n                    size: prettierBytes(totalFilesSize),\n                }));\n            }\n        }\n    }\n    validateSingleFile(file) {\n        const { maxFileSize, minFileSize, allowedFileTypes } = this.getOpts().restrictions;\n        if (allowedFileTypes) {\n            const isCorrectFileType = allowedFileTypes.some((type) => {\n                // check if this is a mime-type\n                if (type.includes('/')) {\n                    if (!file.type)\n                        return false;\n                    return match(file.type.replace(/;.*?$/, ''), type);\n                }\n                // otherwise this is likely an extension\n                if (type[0] === '.' && file.extension) {\n                    return file.extension.toLowerCase() === type.slice(1).toLowerCase();\n                }\n                return false;\n            });\n            if (!isCorrectFileType) {\n                const allowedFileTypesString = allowedFileTypes.join(', ');\n                throw new RestrictionError(this.getI18n()('youCanOnlyUploadFileTypes', {\n                    types: allowedFileTypesString,\n                }), { file });\n            }\n        }\n        // We can't check maxFileSize if the size is unknown.\n        if (maxFileSize && file.size != null && file.size > maxFileSize) {\n            throw new RestrictionError(this.getI18n()('exceedsSize', {\n                size: prettierBytes(maxFileSize),\n                file: file.name ?? this.getI18n()('unnamed'),\n            }), { file });\n        }\n        // We can't check minFileSize if the size is unknown.\n        if (minFileSize && file.size != null && file.size < minFileSize) {\n            throw new RestrictionError(this.getI18n()('inferiorSize', {\n                size: prettierBytes(minFileSize),\n            }), { file });\n        }\n    }\n    validate(existingFiles, addingFiles) {\n        addingFiles.forEach((addingFile) => {\n            this.validateSingleFile(addingFile);\n        });\n        this.validateAggregateRestrictions(existingFiles, addingFiles);\n    }\n    validateMinNumberOfFiles(files) {\n        const { minNumberOfFiles } = this.getOpts().restrictions;\n        if (minNumberOfFiles && Object.keys(files).length < minNumberOfFiles) {\n            throw new RestrictionError(this.getI18n()('youHaveToAtLeastSelectX', {\n                smart_count: minNumberOfFiles,\n            }));\n        }\n    }\n    getMissingRequiredMetaFields(file) {\n        const error = new RestrictionError(this.getI18n()('missingRequiredMetaFieldOnFile', {\n            fileName: file.name ?? this.getI18n()('unnamed'),\n        }));\n        const { requiredMetaFields } = this.getOpts().restrictions;\n        const missingFields = [];\n        for (const field of requiredMetaFields) {\n            if (!Object.hasOwn(file.meta, field) || file.meta[field] === '') {\n                missingFields.push(field);\n            }\n        }\n        return { missingFields, error };\n    }\n}\nexport { Restricter, defaultOptions, RestrictionError };\n", "import { findDOMElement, getTextDirection } from '@uppy/utils';\nimport { render } from 'preact';\nimport BasePlugin from './BasePlugin.js';\n/**\n * Defer a frequent call to the microtask queue.\n */\nfunction debounce(fn) {\n    let calling = null;\n    let latestArgs;\n    return (...args) => {\n        latestArgs = args;\n        if (!calling) {\n            calling = Promise.resolve().then(() => {\n                calling = null;\n                // At this point `args` may be different from the most\n                // recent state, if multiple calls happened since this task\n                // was queued. So we use the `latestArgs`, which definitely\n                // is the most recent call.\n                return fn(...latestArgs);\n            });\n        }\n        return calling;\n    };\n}\n/**\n * UIPlugin is the extended version of BasePlugin to incorporate rendering with Preact.\n * Use this for plugins that need a user interface.\n *\n * For plugins without an user interface, see BasePlugin.\n */\nclass UIPlugin extends BasePlugin {\n    #updateUI;\n    isTargetDOMEl;\n    el;\n    parent;\n    title;\n    getTargetPlugin(target) {\n        let targetPlugin;\n        if (typeof target?.addTarget === 'function') {\n            // Targeting a plugin *instance*\n            targetPlugin = target;\n            if (!(targetPlugin instanceof UIPlugin)) {\n                console.warn(new Error('The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.', { cause: { targetPlugin, UIPlugin } }));\n            }\n        }\n        else if (typeof target === 'function') {\n            // Targeting a plugin type\n            const Target = target;\n            // Find the target plugin instance.\n            this.uppy.iteratePlugins((p) => {\n                if (p instanceof Target) {\n                    targetPlugin = p;\n                }\n            });\n        }\n        return targetPlugin;\n    }\n    /**\n     * Check if supplied `target` is a DOM element or an `object`.\n     * If it\u2019s an object \u2014 target is a plugin, and we search `plugins`\n     * for a plugin with same name and return its target.\n     */\n    mount(target, plugin) {\n        const callerPluginName = plugin.id;\n        const targetElement = findDOMElement(target);\n        if (targetElement) {\n            this.isTargetDOMEl = true;\n            // When target is <body> with a single <div> element,\n            // Preact thinks it\u2019s the Uppy root element in there when doing a diff,\n            // and destroys it. So we are creating a fragment (could be empty div)\n            const uppyRootElement = document.createElement('div');\n            uppyRootElement.classList.add('uppy-Root');\n            // API for plugins that require a synchronous rerender.\n            this.#updateUI = debounce((state) => {\n                // plugin could be removed, but this.rerender is debounced below,\n                // so it could still be called even after uppy.removePlugin or uppy.destroy\n                // hence the check\n                if (!this.uppy.getPlugin(this.id))\n                    return;\n                render(this.render(state, uppyRootElement), uppyRootElement);\n                this.afterUpdate();\n            });\n            this.uppy.log(`Installing ${callerPluginName} to a DOM element '${target}'`);\n            if (this.opts.replaceTargetContent) {\n                // Doing render(h(null), targetElement), which should have been\n                // a better way, since because the component might need to do additional cleanup when it is removed,\n                // stopped working \u2014 Preact just adds null into target, not replacing\n                targetElement.innerHTML = '';\n            }\n            render(this.render(this.uppy.getState(), uppyRootElement), uppyRootElement);\n            this.el = uppyRootElement;\n            targetElement.appendChild(uppyRootElement);\n            // Set the text direction if the page has not defined one.\n            uppyRootElement.dir =\n                this.opts.direction || getTextDirection(uppyRootElement) || 'ltr';\n            this.onMount();\n            return this.el;\n        }\n        const targetPlugin = this.getTargetPlugin(target);\n        if (targetPlugin) {\n            this.uppy.log(`Installing ${callerPluginName} to ${targetPlugin.id}`);\n            this.parent = targetPlugin;\n            this.el = targetPlugin.addTarget(plugin);\n            this.onMount();\n            return this.el;\n        }\n        this.uppy.log(`Not installing ${callerPluginName}`);\n        let message = `Invalid target option given to ${callerPluginName}.`;\n        if (typeof target === 'function') {\n            message +=\n                ' The given target is not a Plugin class. ' +\n                    \"Please check that you're not specifying a React Component instead of a plugin. \" +\n                    'If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: ' +\n                    'run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.';\n        }\n        else {\n            message +=\n                'If you meant to target an HTML element, please make sure that the element exists. ' +\n                    'Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. ' +\n                    '(see https://github.com/transloadit/uppy/issues/1042)\\n\\n' +\n                    'If you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.';\n        }\n        throw new Error(message);\n    }\n    /**\n     * Called when plugin is mounted, whether in DOM or into another plugin.\n     * Needed because sometimes plugins are mounted separately/after `install`,\n     * so this.el and this.parent might not be available in `install`.\n     * This is the case with @uppy/react plugins, for example.\n     */\n    render(state, container) {\n        throw new Error('Extend the render method to add your plugin to a DOM element');\n    }\n    update(state) {\n        if (this.el != null) {\n            this.#updateUI?.(state);\n        }\n    }\n    unmount() {\n        if (this.isTargetDOMEl) {\n            this.el?.remove();\n        }\n        this.onUnmount();\n    }\n    onMount() { }\n    onUnmount() { }\n}\nexport default UIPlugin;\n", "{\n  \"name\": \"@uppy/store-default\",\n  \"description\": \"The default simple object-based store for Uppy.\",\n  \"version\": \"5.0.0\",\n  \"license\": \"MIT\",\n  \"main\": \"lib/index.js\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-store\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ]\n}", "import packageJson from '../package.json' with { type: 'json' };\n/**\n * Default store that keeps state in a simple object.\n */\nclass DefaultStore {\n    static VERSION = packageJson.version;\n    state = {};\n    #callbacks = new Set();\n    getState() {\n        return this.state;\n    }\n    setState(patch) {\n        const prevState = { ...this.state };\n        const nextState = { ...this.state, ...patch };\n        this.state = nextState;\n        this.#publish(prevState, nextState, patch);\n    }\n    subscribe(listener) {\n        this.#callbacks.add(listener);\n        return () => {\n            this.#callbacks.delete(listener);\n        };\n    }\n    #publish(...args) {\n        this.#callbacks.forEach((listener) => {\n            listener(...args);\n        });\n    }\n}\nexport default DefaultStore;\n", "/* global AggregateError */\nimport DefaultStore, {} from '@uppy/store-default';\nimport { getFileNameAndExtension, getFileType, getSafeFileId, Translator, } from '@uppy/utils';\nimport throttle from 'lodash/throttle.js';\n// @ts-ignore untyped\nimport ee from 'namespace-emitter';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport getFileName from './getFileName.js';\nimport locale from './locale.js';\nimport { debugLogger, justErrorsLogger } from './loggers.js';\nimport { defaultOptions as defaultRestrictionOptions, Restricter, RestrictionError, } from './Restricter.js';\nimport supportsUploadProgress from './supportsUploadProgress.js';\nconst defaultUploadState = {\n    totalProgress: 0,\n    allowNewUpload: true,\n    error: null,\n    recoveredState: null,\n};\n/**\n * Uppy Core module.\n * Manages plugins, state updates, acts as an event bus,\n * adds/removes files and metadata.\n */\nexport class Uppy {\n    static VERSION = packageJson.version;\n    #plugins = Object.create(null);\n    #restricter;\n    #storeUnsubscribe;\n    #emitter = ee();\n    #preProcessors = new Set();\n    #uploaders = new Set();\n    #postProcessors = new Set();\n    defaultLocale;\n    locale;\n    // The user optionally passes in options, but we set defaults for missing options.\n    // We consider all options present after the contructor has run.\n    opts;\n    store;\n    // Warning: do not use this from a plugin, as it will cause the plugins' translations to be missing\n    i18n;\n    i18nArray;\n    scheduledAutoProceed = null;\n    wasOffline = false;\n    /**\n     * Instantiate Uppy\n     */\n    constructor(opts) {\n        this.defaultLocale = locale;\n        const defaultOptions = {\n            id: 'uppy',\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            debug: false,\n            restrictions: defaultRestrictionOptions,\n            meta: {},\n            onBeforeFileAdded: (file, files) => !Object.hasOwn(files, file.id),\n            onBeforeUpload: (files) => files,\n            store: new DefaultStore(),\n            logger: justErrorsLogger,\n            infoTimeout: 5000,\n        };\n        const merged = { ...defaultOptions, ...opts };\n        // Merge default options with the ones set by user,\n        // making sure to merge restrictions too\n        this.opts = {\n            ...merged,\n            restrictions: {\n                ...defaultOptions.restrictions,\n                ...opts?.restrictions,\n            },\n        };\n        // Support debug: true for backwards-compatability, unless logger is set in opts\n        // opts instead of this.opts to avoid comparing objects \u2014 we set logger: justErrorsLogger in defaultOptions\n        if (opts?.logger && opts.debug) {\n            this.log('You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.', 'warning');\n        }\n        else if (opts?.debug) {\n            this.opts.logger = debugLogger;\n        }\n        this.log(`Using Core v${Uppy.VERSION}`);\n        this.i18nInit();\n        this.store = this.opts.store;\n        this.setState({\n            ...defaultUploadState,\n            plugins: {},\n            files: {},\n            currentUploads: {},\n            capabilities: {\n                uploadProgress: supportsUploadProgress(),\n                individualCancellation: true,\n                resumableUploads: false,\n            },\n            meta: { ...this.opts.meta },\n            info: [],\n        });\n        this.#restricter = new Restricter(() => this.opts, () => this.i18n);\n        this.#storeUnsubscribe = this.store.subscribe((prevState, nextState, patch) => {\n            this.emit('state-update', prevState, nextState, patch);\n            this.updateAll(nextState);\n        });\n        // Exposing uppy object on window for debugging and testing\n        if (this.opts.debug && typeof window !== 'undefined') {\n            // @ts-ignore Mutating the global object for debug purposes\n            window[this.opts.id] = this;\n        }\n        this.#addListeners();\n    }\n    emit(event, ...args) {\n        this.#emitter.emit(event, ...args);\n    }\n    on(event, callback) {\n        this.#emitter.on(event, callback);\n        return this;\n    }\n    once(event, callback) {\n        this.#emitter.once(event, callback);\n        return this;\n    }\n    off(event, callback) {\n        this.#emitter.off(event, callback);\n        return this;\n    }\n    /**\n     * Iterate on all plugins and run `update` on them.\n     * Called each time state changes.\n     *\n     */\n    updateAll(state) {\n        this.iteratePlugins((plugin) => {\n            plugin.update(state);\n        });\n    }\n    /**\n     * Updates state with a patch\n     */\n    setState(patch) {\n        this.store.setState(patch);\n    }\n    /**\n     * Returns current state.\n     */\n    getState() {\n        return this.store.getState();\n    }\n    patchFilesState(filesWithNewState) {\n        const existingFilesState = this.getState().files;\n        this.setState({\n            files: {\n                ...existingFilesState,\n                ...Object.fromEntries(Object.entries(filesWithNewState).map(([fileID, newFileState]) => [\n                    fileID,\n                    {\n                        ...existingFilesState[fileID],\n                        ...newFileState,\n                    },\n                ])),\n            },\n        });\n    }\n    /**\n     * Shorthand to set state for a specific file.\n     */\n    setFileState(fileID, state) {\n        if (!this.getState().files[fileID]) {\n            throw new Error(`Can\u2019t set state for ${fileID} (the file could have been removed)`);\n        }\n        this.patchFilesState({ [fileID]: state });\n    }\n    i18nInit() {\n        const onMissingKey = (key) => this.log(`Missing i18n string: ${key}`, 'error');\n        const translator = new Translator([this.defaultLocale, this.opts.locale], {\n            onMissingKey,\n        });\n        this.i18n = translator.translate.bind(translator);\n        this.i18nArray = translator.translateArray.bind(translator);\n        this.locale = translator.locale;\n    }\n    setOptions(newOpts) {\n        this.opts = {\n            ...this.opts,\n            ...newOpts,\n            restrictions: {\n                ...this.opts.restrictions,\n                ...newOpts?.restrictions,\n            },\n        };\n        if (newOpts.meta) {\n            this.setMeta(newOpts.meta);\n        }\n        this.i18nInit();\n        if (newOpts.locale) {\n            this.iteratePlugins((plugin) => {\n                plugin.setOptions(newOpts);\n            });\n        }\n        // Note: this is not the preact `setState`, it's an internal function that has the same name.\n        this.setState(undefined); // so that UI re-renders with new options\n    }\n    resetProgress() {\n        const defaultProgress = {\n            percentage: 0,\n            bytesUploaded: false,\n            uploadComplete: false,\n            uploadStarted: null,\n        };\n        const files = { ...this.getState().files };\n        const updatedFiles = Object.create(null);\n        Object.keys(files).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...files[fileID],\n                progress: {\n                    ...files[fileID].progress,\n                    ...defaultProgress,\n                },\n                // @ts-expect-error these typed are inserted\n                // into the namespace in their respective packages\n                // but core isn't ware of those\n                tus: undefined,\n                transloadit: undefined,\n            };\n        });\n        this.setState({ files: updatedFiles, ...defaultUploadState });\n    }\n    clear() {\n        const { capabilities, currentUploads } = this.getState();\n        if (Object.keys(currentUploads).length > 0 &&\n            !capabilities.individualCancellation) {\n            throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n        }\n        this.setState({ ...defaultUploadState, files: {} });\n    }\n    addPreProcessor(fn) {\n        this.#preProcessors.add(fn);\n    }\n    removePreProcessor(fn) {\n        return this.#preProcessors.delete(fn);\n    }\n    addPostProcessor(fn) {\n        this.#postProcessors.add(fn);\n    }\n    removePostProcessor(fn) {\n        return this.#postProcessors.delete(fn);\n    }\n    addUploader(fn) {\n        this.#uploaders.add(fn);\n    }\n    removeUploader(fn) {\n        return this.#uploaders.delete(fn);\n    }\n    setMeta(data) {\n        const updatedMeta = { ...this.getState().meta, ...data };\n        const updatedFiles = { ...this.getState().files };\n        Object.keys(updatedFiles).forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                meta: { ...updatedFiles[fileID].meta, ...data },\n            };\n        });\n        this.log('Adding metadata:');\n        this.log(data);\n        this.setState({\n            meta: updatedMeta,\n            files: updatedFiles,\n        });\n    }\n    setFileMeta(fileID, data) {\n        const updatedFiles = { ...this.getState().files };\n        if (!updatedFiles[fileID]) {\n            this.log(`Was trying to set metadata for a file that has been removed: ${fileID}`);\n            return;\n        }\n        const newMeta = { ...updatedFiles[fileID].meta, ...data };\n        updatedFiles[fileID] = { ...updatedFiles[fileID], meta: newMeta };\n        this.setState({ files: updatedFiles });\n    }\n    /**\n     * Get a file object.\n     */\n    getFile(fileID) {\n        return this.getState().files[fileID];\n    }\n    /**\n     * Get all files in an array.\n     */\n    getFiles() {\n        const { files } = this.getState();\n        return Object.values(files);\n    }\n    getFilesByIds(ids) {\n        return ids.map((id) => this.getFile(id));\n    }\n    getObjectOfFilesPerState() {\n        const { files: filesObject, totalProgress, error } = this.getState();\n        const files = Object.values(filesObject);\n        const inProgressFiles = [];\n        const newFiles = [];\n        const startedFiles = [];\n        const uploadStartedFiles = [];\n        const pausedFiles = [];\n        const completeFiles = [];\n        const erroredFiles = [];\n        const inProgressNotPausedFiles = [];\n        const processingFiles = [];\n        for (const file of files) {\n            const { progress } = file;\n            if (!progress.uploadComplete && progress.uploadStarted) {\n                inProgressFiles.push(file);\n                if (!file.isPaused) {\n                    inProgressNotPausedFiles.push(file);\n                }\n            }\n            if (!progress.uploadStarted) {\n                newFiles.push(file);\n            }\n            if (progress.uploadStarted ||\n                progress.preprocess ||\n                progress.postprocess) {\n                startedFiles.push(file);\n            }\n            if (progress.uploadStarted) {\n                uploadStartedFiles.push(file);\n            }\n            if (file.isPaused) {\n                pausedFiles.push(file);\n            }\n            if (progress.uploadComplete) {\n                completeFiles.push(file);\n            }\n            if (file.error) {\n                erroredFiles.push(file);\n            }\n            if (progress.preprocess || progress.postprocess) {\n                processingFiles.push(file);\n            }\n        }\n        return {\n            newFiles,\n            startedFiles,\n            uploadStartedFiles,\n            pausedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted: uploadStartedFiles.length > 0,\n            isAllComplete: totalProgress === 100 &&\n                completeFiles.length === files.length &&\n                processingFiles.length === 0,\n            isAllErrored: !!error && erroredFiles.length === files.length,\n            isAllPaused: inProgressFiles.length !== 0 &&\n                pausedFiles.length === inProgressFiles.length,\n            isUploadInProgress: inProgressFiles.length > 0,\n            isSomeGhost: files.some((file) => file.isGhost),\n        };\n    }\n    #informAndEmit(errors) {\n        for (const error of errors) {\n            if (error.isRestriction) {\n                this.emit('restriction-failed', error.file, error);\n            }\n            else {\n                this.emit('error', error, error.file);\n            }\n            this.log(error, 'warning');\n        }\n        const userFacingErrors = errors.filter((error) => error.isUserFacing);\n        // don't flood the user: only show the first 4 toasts\n        const maxNumToShow = 4;\n        const firstErrors = userFacingErrors.slice(0, maxNumToShow);\n        const additionalErrors = userFacingErrors.slice(maxNumToShow);\n        firstErrors.forEach(({ message, details = '' }) => {\n            this.info({ message, details }, 'error', this.opts.infoTimeout);\n        });\n        if (additionalErrors.length > 0) {\n            this.info({\n                message: this.i18n('additionalRestrictionsFailed', {\n                    count: additionalErrors.length,\n                }),\n            });\n        }\n    }\n    validateRestrictions(file, files = this.getFiles()) {\n        try {\n            this.#restricter.validate(files, [file]);\n        }\n        catch (err) {\n            return err;\n        }\n        return null;\n    }\n    validateSingleFile(file) {\n        try {\n            this.#restricter.validateSingleFile(file);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    validateAggregateRestrictions(files) {\n        const existingFiles = this.getFiles();\n        try {\n            this.#restricter.validateAggregateRestrictions(existingFiles, files);\n        }\n        catch (err) {\n            return err.message;\n        }\n        return null;\n    }\n    #checkRequiredMetaFieldsOnFile(file) {\n        const { missingFields, error } = this.#restricter.getMissingRequiredMetaFields(file);\n        if (missingFields.length > 0) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: missingFields,\n                error: error.message,\n            });\n            this.log(error.message);\n            this.emit('restriction-failed', file, error);\n            return false;\n        }\n        if (missingFields.length === 0 && file.missingRequiredMetaFields) {\n            this.setFileState(file.id, {\n                missingRequiredMetaFields: [],\n            });\n        }\n        return true;\n    }\n    #checkRequiredMetaFields(files) {\n        let success = true;\n        for (const file of Object.values(files)) {\n            if (!this.#checkRequiredMetaFieldsOnFile(file)) {\n                success = false;\n            }\n        }\n        return success;\n    }\n    #assertNewUploadAllowed(file) {\n        const { allowNewUpload } = this.getState();\n        if (allowNewUpload === false) {\n            const error = new RestrictionError(this.i18n('noMoreFilesAllowed'), {\n                file,\n            });\n            this.#informAndEmit([error]);\n            throw error;\n        }\n    }\n    checkIfFileAlreadyExists(fileID) {\n        const { files } = this.getState();\n        if (files[fileID] && !files[fileID].isGhost) {\n            return true;\n        }\n        return false;\n    }\n    /**\n     * Create a file state object based on user-provided `addFile()` options.\n     */\n    #transformFile(fileDescriptorOrFile) {\n        // Uppy expects files in { name, type, size, data } format.\n        // If the actual File object is passed from input[type=file] or drag-drop,\n        // we normalize it to match Uppy file object\n        const file = fileDescriptorOrFile instanceof File\n            ? {\n                name: fileDescriptorOrFile.name,\n                type: fileDescriptorOrFile.type,\n                size: fileDescriptorOrFile.size,\n                data: fileDescriptorOrFile,\n                meta: {},\n                isRemote: false,\n                source: undefined,\n                preview: undefined,\n            }\n            : fileDescriptorOrFile;\n        const fileType = getFileType(file);\n        const fileName = getFileName(fileType, file);\n        const fileExtension = getFileNameAndExtension(fileName).extension;\n        const id = getSafeFileId(file, this.getID());\n        const meta = {\n            ...file.meta,\n            name: fileName,\n            type: fileType,\n        };\n        // `null` means the size is unknown.\n        const size = Number.isFinite(file.data.size) ? file.data.size : null;\n        return {\n            source: file.source || '',\n            id,\n            name: fileName,\n            extension: fileExtension || '',\n            meta: {\n                ...this.getState().meta,\n                ...meta,\n            },\n            type: fileType,\n            progress: {\n                percentage: 0,\n                bytesUploaded: false,\n                bytesTotal: size,\n                uploadComplete: false,\n                uploadStarted: null,\n            },\n            size,\n            isGhost: false,\n            ...(file.isRemote\n                ? {\n                    isRemote: true,\n                    remote: file.remote,\n                    data: file.data,\n                }\n                : {\n                    isRemote: false,\n                    data: file.data,\n                }),\n            preview: file.preview,\n        };\n    }\n    // Schedule an upload if `autoProceed` is enabled.\n    #startIfAutoProceed() {\n        if (this.opts.autoProceed && !this.scheduledAutoProceed) {\n            this.scheduledAutoProceed = setTimeout(() => {\n                this.scheduledAutoProceed = null;\n                this.upload().catch((err) => {\n                    if (!err.isRestriction) {\n                        this.log(err.stack || err.message || err);\n                    }\n                });\n            }, 4);\n        }\n    }\n    #checkAndUpdateFileState(filesToAdd) {\n        let { files: existingFiles } = this.getState();\n        // create a copy of the files object only once\n        let nextFilesState = { ...existingFiles };\n        const validFilesToAdd = [];\n        const errors = [];\n        for (const fileToAdd of filesToAdd) {\n            try {\n                let newFile = this.#transformFile(fileToAdd);\n                this.#assertNewUploadAllowed(newFile);\n                // If a file has been recovered (Golden Retriever), but we were unable to recover its data (probably too large),\n                // users are asked to re-select these half-recovered files and then this method will be called again.\n                // In order to keep the progress, meta and everything else, we keep the existing file,\n                // but we replace `data`, and we remove `isGhost`, because the file is no longer a ghost now\n                const existingFile = existingFiles[newFile.id];\n                const isGhost = existingFile?.isGhost;\n                if (isGhost && !newFile.isRemote) {\n                    if (newFile.data == null)\n                        throw new Error('File data is missing');\n                    newFile = {\n                        ...existingFile,\n                        isGhost: false,\n                        data: newFile.data,\n                    };\n                    this.log(`Replaced the blob in the restored ghost file: ${newFile.name}, ${newFile.id}`);\n                }\n                const onBeforeFileAddedResult = this.opts.onBeforeFileAdded(newFile, nextFilesState);\n                // update state after onBeforeFileAdded\n                existingFiles = this.getState().files;\n                nextFilesState = { ...existingFiles, ...nextFilesState };\n                if (!onBeforeFileAddedResult &&\n                    this.checkIfFileAlreadyExists(newFile.id)) {\n                    throw new RestrictionError(this.i18n('noDuplicates', {\n                        fileName: newFile.name ?? this.i18n('unnamed'),\n                    }), { file: newFile });\n                }\n                // Pass through reselected files from Golden Retriever\n                if (onBeforeFileAddedResult === false && !isGhost) {\n                    // Don\u2019t show UI info for this error, as it should be done by the developer\n                    throw new RestrictionError('Cannot add the file because onBeforeFileAdded returned false.', { isUserFacing: false, file: newFile });\n                }\n                else if (typeof onBeforeFileAddedResult === 'object' &&\n                    onBeforeFileAddedResult !== null) {\n                    newFile = onBeforeFileAddedResult;\n                }\n                this.#restricter.validateSingleFile(newFile);\n                // need to add it to the new local state immediately, so we can use the state to validate the next files too\n                nextFilesState[newFile.id] = newFile;\n                validFilesToAdd.push(newFile);\n            }\n            catch (err) {\n                errors.push(err);\n            }\n        }\n        try {\n            // need to run this separately because it's much more slow, so if we run it inside the for-loop it will be very slow\n            // when many files are added\n            this.#restricter.validateAggregateRestrictions(Object.values(existingFiles), validFilesToAdd);\n        }\n        catch (err) {\n            errors.push(err);\n            // If we have any aggregate error, don't allow adding this batch\n            return {\n                nextFilesState: existingFiles,\n                validFilesToAdd: [],\n                errors,\n            };\n        }\n        return {\n            nextFilesState,\n            validFilesToAdd,\n            errors,\n        };\n    }\n    /**\n     * Add a new file to `state.files`. This will run `onBeforeFileAdded`,\n     * try to guess file type in a clever way, check file against restrictions,\n     * and start an upload if `autoProceed === true`.\n     */\n    addFile(file) {\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState([file]);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        if (errors.length > 0)\n            throw errors[0];\n        this.setState({ files: nextFilesState });\n        const [firstValidFileToAdd] = validFilesToAdd;\n        this.emit('file-added', firstValidFileToAdd);\n        this.emit('files-added', validFilesToAdd);\n        this.log(`Added file: ${firstValidFileToAdd.name}, ${firstValidFileToAdd.id}, mime type: ${firstValidFileToAdd.type}`);\n        this.#startIfAutoProceed();\n        return firstValidFileToAdd.id;\n    }\n    /**\n     * Add multiple files to `state.files`. See the `addFile()` documentation.\n     *\n     * If an error occurs while adding a file, it is logged and the user is notified.\n     * This is good for UI plugins, but not for programmatic use.\n     * Programmatic users should usually still use `addFile()` on individual files.\n     */\n    addFiles(fileDescriptors) {\n        const { nextFilesState, validFilesToAdd, errors } = this.#checkAndUpdateFileState(fileDescriptors);\n        const restrictionErrors = errors.filter((error) => error.isRestriction);\n        this.#informAndEmit(restrictionErrors);\n        const nonRestrictionErrors = errors.filter((error) => !error.isRestriction);\n        if (nonRestrictionErrors.length > 0) {\n            let message = 'Multiple errors occurred while adding files:\\n';\n            nonRestrictionErrors.forEach((subError) => {\n                message += `\\n * ${subError.message}`;\n            });\n            this.info({\n                message: this.i18n('addBulkFilesFailed', {\n                    smart_count: nonRestrictionErrors.length,\n                }),\n                details: message,\n            }, 'error', this.opts.infoTimeout);\n            if (typeof AggregateError === 'function') {\n                throw new AggregateError(nonRestrictionErrors, message);\n            }\n            else {\n                const err = new Error(message);\n                // @ts-expect-error fallback when AggregateError is not available\n                err.errors = nonRestrictionErrors;\n                throw err;\n            }\n        }\n        // OK, we haven't thrown an error, we can start updating state and emitting events now:\n        this.setState({ files: nextFilesState });\n        validFilesToAdd.forEach((file) => {\n            this.emit('file-added', file);\n        });\n        this.emit('files-added', validFilesToAdd);\n        if (validFilesToAdd.length > 5) {\n            this.log(`Added batch of ${validFilesToAdd.length} files`);\n        }\n        else {\n            Object.values(validFilesToAdd).forEach((file) => {\n                this.log(`Added file: ${file.name}\\n id: ${file.id}\\n type: ${file.type}`);\n            });\n        }\n        if (validFilesToAdd.length > 0) {\n            this.#startIfAutoProceed();\n        }\n    }\n    removeFiles(fileIDs) {\n        const { files, currentUploads } = this.getState();\n        const updatedFiles = { ...files };\n        const updatedUploads = { ...currentUploads };\n        const removedFiles = Object.create(null);\n        fileIDs.forEach((fileID) => {\n            if (files[fileID]) {\n                removedFiles[fileID] = files[fileID];\n                delete updatedFiles[fileID];\n            }\n        });\n        // Remove files from the `fileIDs` list in each upload.\n        function fileIsNotRemoved(uploadFileID) {\n            return removedFiles[uploadFileID] === undefined;\n        }\n        Object.keys(updatedUploads).forEach((uploadID) => {\n            const newFileIDs = currentUploads[uploadID].fileIDs.filter(fileIsNotRemoved);\n            // Remove the upload if no files are associated with it anymore.\n            if (newFileIDs.length === 0) {\n                delete updatedUploads[uploadID];\n                return;\n            }\n            const { capabilities } = this.getState();\n            if (newFileIDs.length !== currentUploads[uploadID].fileIDs.length &&\n                !capabilities.individualCancellation) {\n                throw new Error('The installed uploader plugin does not allow removing files during an upload.');\n            }\n            updatedUploads[uploadID] = {\n                ...currentUploads[uploadID],\n                fileIDs: newFileIDs,\n            };\n        });\n        const stateUpdate = {\n            currentUploads: updatedUploads,\n            files: updatedFiles,\n        };\n        // If all files were removed - allow new uploads,\n        // and clear recoveredState\n        if (Object.keys(updatedFiles).length === 0) {\n            stateUpdate.allowNewUpload = true;\n            stateUpdate.error = null;\n            stateUpdate.recoveredState = null;\n        }\n        this.setState(stateUpdate);\n        this.#updateTotalProgressThrottled();\n        const removedFileIDs = Object.keys(removedFiles);\n        removedFileIDs.forEach((fileID) => {\n            this.emit('file-removed', removedFiles[fileID]);\n        });\n        if (removedFileIDs.length > 5) {\n            this.log(`Removed ${removedFileIDs.length} files`);\n        }\n        else {\n            this.log(`Removed files: ${removedFileIDs.join(', ')}`);\n        }\n    }\n    removeFile(fileID) {\n        this.removeFiles([fileID]);\n    }\n    pauseResume(fileID) {\n        if (!this.getState().capabilities.resumableUploads ||\n            this.getFile(fileID).progress.uploadComplete) {\n            return undefined;\n        }\n        const file = this.getFile(fileID);\n        const wasPaused = file.isPaused || false;\n        const isPaused = !wasPaused;\n        this.setFileState(fileID, {\n            isPaused,\n        });\n        this.emit('upload-pause', file, isPaused);\n        return isPaused;\n    }\n    pauseAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = { ...updatedFiles[file], isPaused: true };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('pause-all');\n    }\n    resumeAll() {\n        const updatedFiles = { ...this.getState().files };\n        const inProgressUpdatedFiles = Object.keys(updatedFiles).filter((file) => {\n            return (!updatedFiles[file].progress.uploadComplete &&\n                updatedFiles[file].progress.uploadStarted);\n        });\n        inProgressUpdatedFiles.forEach((file) => {\n            const updatedFile = {\n                ...updatedFiles[file],\n                isPaused: false,\n                error: null,\n            };\n            updatedFiles[file] = updatedFile;\n        });\n        this.setState({ files: updatedFiles });\n        this.emit('resume-all');\n    }\n    #getFilesToRetry() {\n        const { files } = this.getState();\n        return Object.keys(files).filter((fileId) => {\n            const file = files[fileId];\n            // Only retry files that have errors AND don't have missing required metadata\n            return (file.error &&\n                (!file.missingRequiredMetaFields ||\n                    file.missingRequiredMetaFields.length === 0));\n        });\n    }\n    async #doRetryAll() {\n        const filesToRetry = this.#getFilesToRetry();\n        const updatedFiles = { ...this.getState().files };\n        filesToRetry.forEach((fileID) => {\n            updatedFiles[fileID] = {\n                ...updatedFiles[fileID],\n                isPaused: false,\n                error: null,\n            };\n        });\n        this.setState({\n            files: updatedFiles,\n            error: null,\n        });\n        this.emit('retry-all', this.getFilesByIds(filesToRetry));\n        if (filesToRetry.length === 0) {\n            return {\n                successful: [],\n                failed: [],\n            };\n        }\n        const uploadID = this.#createUpload(filesToRetry, {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    async retryAll() {\n        const result = await this.#doRetryAll();\n        this.emit('complete', result);\n        return result;\n    }\n    cancelAll() {\n        this.emit('cancel-all');\n        const { files } = this.getState();\n        const fileIDs = Object.keys(files);\n        if (fileIDs.length) {\n            this.removeFiles(fileIDs);\n        }\n        this.setState(defaultUploadState);\n    }\n    /**\n     * Retry a specific file that has errored.\n     */\n    retryUpload(fileID) {\n        this.setFileState(fileID, {\n            error: null,\n            isPaused: false,\n        });\n        this.emit('upload-retry', this.getFile(fileID));\n        const uploadID = this.#createUpload([fileID], {\n            forceAllowNewUpload: true, // create new upload even if allowNewUpload: false\n        });\n        return this.#runUpload(uploadID);\n    }\n    logout() {\n        this.iteratePlugins((plugin) => {\n            ;\n            plugin.provider?.logout?.();\n        });\n    }\n    #handleUploadProgress = (file, progress) => {\n        const fileInState = file ? this.getFile(file.id) : undefined;\n        if (file == null || !fileInState) {\n            this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n            return;\n        }\n        if (fileInState.progress.percentage === 100) {\n            this.log(`Not setting progress for a file that has been already uploaded: ${file.id}`);\n            return;\n        }\n        const newProgress = {\n            bytesTotal: progress.bytesTotal,\n            // bytesTotal may be null or zero; in that case we can't divide by it\n            percentage: progress.bytesTotal != null &&\n                Number.isFinite(progress.bytesTotal) &&\n                progress.bytesTotal > 0\n                ? Math.round((progress.bytesUploaded / progress.bytesTotal) * 100)\n                : undefined,\n        };\n        if (fileInState.progress.uploadStarted != null) {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                    bytesUploaded: progress.bytesUploaded,\n                },\n            });\n        }\n        else {\n            this.setFileState(file.id, {\n                progress: {\n                    ...fileInState.progress,\n                    ...newProgress,\n                },\n            });\n        }\n        this.#updateTotalProgressThrottled();\n    };\n    #updateTotalProgress() {\n        const totalProgress = this.#calculateTotalProgress();\n        let totalProgressPercent = null;\n        if (totalProgress != null) {\n            totalProgressPercent = Math.round(totalProgress * 100);\n            if (totalProgressPercent > 100)\n                totalProgressPercent = 100;\n            else if (totalProgressPercent < 0)\n                totalProgressPercent = 0;\n        }\n        this.emit('progress', totalProgressPercent ?? 0);\n        this.setState({\n            totalProgress: totalProgressPercent ?? 0,\n        });\n    }\n    // ___Why throttle at 500ms?\n    //    - We must throttle at >250ms for superfocus in Dashboard to work well\n    //    (because animation takes 0.25s, and we want to wait for all animations to be over before refocusing).\n    //    [Practical Check]: if thottle is at 100ms, then if you are uploading a file,\n    //    and click 'ADD MORE FILES', - focus won't activate in Firefox.\n    //    - We must throttle at around >500ms to avoid performance lags.\n    //    [Practical Check] Firefox, try to upload a big file for a prolonged period of time. Laptop will start to heat up.\n    #updateTotalProgressThrottled = throttle(() => this.#updateTotalProgress(), 500, { leading: true, trailing: true });\n    [Symbol.for('uppy test: updateTotalProgress')]() {\n        return this.#updateTotalProgress();\n    }\n    #calculateTotalProgress() {\n        // calculate total progress, using the number of files currently uploading,\n        // between 0 and 1 and sum of individual progress of each file\n        const files = this.getFiles();\n        // note: also includes files that have completed uploading:\n        const filesInProgress = files.filter((file) => {\n            return (file.progress.uploadStarted ||\n                file.progress.preprocess ||\n                file.progress.postprocess);\n        });\n        if (filesInProgress.length === 0) {\n            return 0;\n        }\n        if (filesInProgress.every((file) => file.progress.uploadComplete)) {\n            // If every uploading file is complete, and we're still getting progress, it probably means\n            // there's a bug somewhere in some progress reporting code (maybe not even our code)\n            // and we're still getting progress, so let's just assume it means a 100% progress\n            return 1;\n        }\n        const isSizedFile = (file) => file.progress.bytesTotal != null && file.progress.bytesTotal !== 0;\n        const sizedFilesInProgress = filesInProgress.filter(isSizedFile);\n        const unsizedFilesInProgress = filesInProgress.filter((file) => !isSizedFile(file));\n        if (sizedFilesInProgress.every((file) => file.progress.uploadComplete) &&\n            unsizedFilesInProgress.length > 0 &&\n            !unsizedFilesInProgress.every((file) => file.progress.uploadComplete)) {\n            // we are done with uploading all files of known size, however\n            // there is at least one file with unknown size still uploading,\n            // and we cannot say anything about their progress\n            // In any case, return null because it doesn't make any sense to show a progress\n            return null;\n        }\n        const totalFilesSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesTotal ?? 0), 0);\n        const totalUploadedSize = sizedFilesInProgress.reduce((acc, file) => acc + (file.progress.bytesUploaded || 0), 0);\n        return totalFilesSize === 0 ? 0 : totalUploadedSize / totalFilesSize;\n    }\n    /**\n     * Registers listeners for all global actions, like:\n     * `error`, `file-removed`, `upload-progress`\n     */\n    #addListeners() {\n        // Type inference only works for inline functions so we have to type it again\n        const errorHandler = (error, file, response) => {\n            let errorMsg = error.message || 'Unknown error';\n            if (error.details) {\n                errorMsg += ` ${error.details}`;\n            }\n            this.setState({ error: errorMsg });\n            if (file != null && file.id in this.getState().files) {\n                this.setFileState(file.id, {\n                    error: errorMsg,\n                    response,\n                });\n            }\n        };\n        this.on('error', errorHandler);\n        this.on('upload-error', (file, error, response) => {\n            errorHandler(error, file, response);\n            if (typeof error === 'object' && error.message) {\n                this.log(error.message, 'error');\n                const newError = new Error(this.i18n('failedToUpload', { file: file?.name ?? '' })); // we may want a new custom error here\n                newError.isUserFacing = true; // todo maybe don't do this with all errors?\n                newError.details = error.message;\n                if (error.details) {\n                    newError.details += ` ${error.details}`;\n                }\n                this.#informAndEmit([newError]);\n            }\n            else {\n                this.#informAndEmit([error]);\n            }\n        });\n        let uploadStalledWarningRecentlyEmitted = null;\n        this.on('upload-stalled', (error, files) => {\n            const { message } = error;\n            const details = files.map((file) => file.meta.name).join(', ');\n            if (!uploadStalledWarningRecentlyEmitted) {\n                this.info({ message, details }, 'warning', this.opts.infoTimeout);\n                uploadStalledWarningRecentlyEmitted = setTimeout(() => {\n                    uploadStalledWarningRecentlyEmitted = null;\n                }, this.opts.infoTimeout);\n            }\n            this.log(`${message} ${details}`.trim(), 'warning');\n        });\n        this.on('upload', () => {\n            this.setState({ error: null });\n        });\n        const onUploadStarted = (files) => {\n            const filesFiltered = files.filter((file) => {\n                const exists = file != null && this.getFile(file.id);\n                if (!exists)\n                    this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return exists;\n            });\n            const filesState = Object.fromEntries(filesFiltered.map((file) => [\n                file.id,\n                {\n                    progress: {\n                        uploadStarted: Date.now(),\n                        uploadComplete: false,\n                        bytesUploaded: 0,\n                        bytesTotal: file.size,\n                    },\n                },\n            ]));\n            this.patchFilesState(filesState);\n        };\n        this.on('upload-start', onUploadStarted);\n        this.on('upload-progress', this.#handleUploadProgress);\n        this.on('upload-success', (file, uploadResp) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const currentProgress = this.getFile(file.id).progress;\n            const needsPostProcessing = this.#postProcessors.size > 0;\n            this.setFileState(file.id, {\n                progress: {\n                    ...currentProgress,\n                    postprocess: needsPostProcessing\n                        ? {\n                            mode: 'indeterminate',\n                        }\n                        : undefined,\n                    uploadComplete: true,\n                    ...(!needsPostProcessing && { complete: true }),\n                    percentage: 100,\n                    bytesUploaded: currentProgress.bytesTotal,\n                },\n                response: uploadResp,\n                uploadURL: uploadResp.uploadURL,\n                isPaused: false,\n            });\n            // Remote providers sometimes don't tell us the file size,\n            // but we can know how many bytes we uploaded once the upload is complete.\n            if (file.size == null) {\n                this.setFileState(file.id, {\n                    size: uploadResp.bytesUploaded || currentProgress.bytesTotal,\n                });\n            }\n            this.#updateTotalProgressThrottled();\n        });\n        this.on('preprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: { ...this.getFile(file.id).progress, preprocess: progress },\n            });\n        });\n        this.on('preprocess-complete', (file) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            const files = { ...this.getState().files };\n            files[file.id] = {\n                ...files[file.id],\n                progress: { ...files[file.id].progress },\n            };\n            delete files[file.id].progress.preprocess;\n            this.setState({ files });\n        });\n        this.on('postprocess-progress', (file, progress) => {\n            if (file == null || !this.getFile(file.id)) {\n                this.log(`Not setting progress for a file that has been removed: ${file?.id}`);\n                return;\n            }\n            this.setFileState(file.id, {\n                progress: {\n                    ...this.getState().files[file.id].progress,\n                    postprocess: progress,\n                },\n            });\n        });\n        this.on('postprocess-complete', (fileIn) => {\n            const file = fileIn && this.getFile(fileIn.id);\n            if (file == null) {\n                this.log(`Not setting progress for a file that has been removed: ${fileIn?.id}`);\n                return;\n            }\n            const { postprocess: _deleted, ...newProgress } = file.progress;\n            this.patchFilesState({\n                [file.id]: {\n                    progress: {\n                        ...newProgress,\n                        complete: true,\n                    },\n                },\n            });\n        });\n        this.on('restored', () => {\n            // Files may have changed--ensure progress is still accurate.\n            this.#updateTotalProgressThrottled();\n        });\n        // @ts-expect-error should fix itself when dashboard it typed (also this doesn't belong here)\n        this.on('dashboard:file-edit-complete', (file) => {\n            if (file) {\n                this.#checkRequiredMetaFieldsOnFile(file);\n            }\n        });\n        // show informer if offline\n        if (typeof window !== 'undefined' && window.addEventListener) {\n            window.addEventListener('online', this.#updateOnlineStatus);\n            window.addEventListener('offline', this.#updateOnlineStatus);\n            setTimeout(this.#updateOnlineStatus, 3000);\n        }\n    }\n    updateOnlineStatus() {\n        const online = window.navigator.onLine ?? true;\n        if (!online) {\n            this.emit('is-offline');\n            this.info(this.i18n('noInternetConnection'), 'error', 0);\n            this.wasOffline = true;\n        }\n        else {\n            this.emit('is-online');\n            if (this.wasOffline) {\n                this.emit('back-online');\n                this.info(this.i18n('connectedToInternet'), 'success', 3000);\n                this.wasOffline = false;\n            }\n        }\n    }\n    #updateOnlineStatus = this.updateOnlineStatus.bind(this);\n    getID() {\n        return this.opts.id;\n    }\n    /**\n     * Registers a plugin with Core.\n     */\n    use(Plugin, \n    // We want to let the plugin decide whether `opts` is optional or not\n    // so we spread the argument rather than defining `opts:` ourselves.\n    ...args) {\n        if (typeof Plugin !== 'function') {\n            const msg = `Expected a plugin class, but got ${Plugin === null ? 'null' : typeof Plugin}.` +\n                ' Please verify that the plugin was imported and spelled correctly.';\n            throw new TypeError(msg);\n        }\n        // Instantiate\n        const plugin = new Plugin(this, ...args);\n        const pluginId = plugin.id;\n        if (!pluginId) {\n            throw new Error('Your plugin must have an id');\n        }\n        if (!plugin.type) {\n            throw new Error('Your plugin must have a type');\n        }\n        const existsPluginAlready = this.getPlugin(pluginId);\n        if (existsPluginAlready) {\n            const msg = `Already found a plugin named '${existsPluginAlready.id}'. ` +\n                `Tried to use: '${pluginId}'.\\n` +\n                'Uppy plugins must have unique `id` options.';\n            throw new Error(msg);\n        }\n        // @ts-expect-error does exist\n        if (Plugin.VERSION) {\n            // @ts-expect-error does exist\n            this.log(`Using ${pluginId} v${Plugin.VERSION}`);\n        }\n        if (plugin.type in this.#plugins) {\n            this.#plugins[plugin.type].push(plugin);\n        }\n        else {\n            this.#plugins[plugin.type] = [plugin];\n        }\n        plugin.install();\n        this.emit('plugin-added', plugin);\n        return this;\n    }\n    getPlugin(id) {\n        for (const plugins of Object.values(this.#plugins)) {\n            const foundPlugin = plugins.find((plugin) => plugin.id === id);\n            if (foundPlugin != null) {\n                return foundPlugin;\n            }\n        }\n        return undefined;\n    }\n    [Symbol.for('uppy test: getPlugins')](type) {\n        return this.#plugins[type];\n    }\n    /**\n     * Iterate through all `use`d plugins.\n     *\n     */\n    iteratePlugins(method) {\n        Object.values(this.#plugins).flat(1).forEach(method);\n    }\n    /**\n     * Uninstall and remove a plugin.\n     *\n     * @param {object} instance The plugin instance to remove.\n     */\n    removePlugin(instance) {\n        this.log(`Removing plugin ${instance.id}`);\n        this.emit('plugin-remove', instance);\n        if (instance.uninstall) {\n            instance.uninstall();\n        }\n        const list = this.#plugins[instance.type];\n        // list.indexOf failed here, because Vue3 converted the plugin instance\n        // to a Proxy object, which failed the strict comparison test:\n        // obj !== objProxy\n        const index = list.findIndex((item) => item.id === instance.id);\n        if (index !== -1) {\n            list.splice(index, 1);\n        }\n        const state = this.getState();\n        const updatedState = {\n            plugins: {\n                ...state.plugins,\n                [instance.id]: undefined,\n            },\n        };\n        this.setState(updatedState);\n    }\n    /**\n     * Uninstall all plugins and close down this Uppy instance.\n     */\n    destroy() {\n        this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`);\n        this.cancelAll();\n        this.#storeUnsubscribe();\n        this.iteratePlugins((plugin) => {\n            this.removePlugin(plugin);\n        });\n        if (typeof window !== 'undefined' && window.removeEventListener) {\n            window.removeEventListener('online', this.#updateOnlineStatus);\n            window.removeEventListener('offline', this.#updateOnlineStatus);\n        }\n    }\n    hideInfo() {\n        const { info } = this.getState();\n        this.setState({ info: info.slice(1) });\n        this.emit('info-hidden');\n    }\n    /**\n     * Set info message in `state.info`, so that UI plugins like `Informer`\n     * can display the message.\n     */\n    info(message, type = 'info', duration = 3000) {\n        const isComplexMessage = typeof message === 'object';\n        this.setState({\n            info: [\n                ...this.getState().info,\n                {\n                    type,\n                    message: isComplexMessage ? message.message : message,\n                    details: isComplexMessage ? message.details : null,\n                },\n            ],\n        });\n        setTimeout(() => this.hideInfo(), duration);\n        this.emit('info-visible');\n    }\n    /**\n     * Passes messages to a function, provided in `opts.logger`.\n     * If `opts.logger: Uppy.debugLogger` or `opts.debug: true`, logs to the browser console.\n     */\n    log(message, type) {\n        const { logger } = this.opts;\n        switch (type) {\n            case 'error':\n                logger.error(message);\n                break;\n            case 'warning':\n                logger.warn(message);\n                break;\n            default:\n                logger.debug(message);\n                break;\n        }\n    }\n    // We need to store request clients by a unique ID, so we can share RequestClient instances across files\n    // this allows us to do rate limiting and synchronous operations like refreshing provider tokens\n    // example: refreshing tokens: if each file has their own requestclient,\n    // we don't have any way to synchronize all requests in order to\n    // - block all requests\n    // - refresh the token\n    // - unblock all requests and allow them to run with a the new access token\n    // back when we had a requestclient per file, once an access token expired,\n    // all 6 files would go ahead and refresh the token at the same time\n    // (calling /refresh-token up to 6 times), which will probably fail for some providers\n    #requestClientById = new Map();\n    registerRequestClient(id, client) {\n        this.#requestClientById.set(id, client);\n    }\n    /** @protected */\n    getRequestClientForFile(file) {\n        if (!('remote' in file && file.remote))\n            throw new Error(`Tried to get RequestClient for a non-remote file ${file.id}`);\n        const requestClient = this.#requestClientById.get(file.remote.requestClientId);\n        if (requestClient == null)\n            throw new Error(`requestClientId \"${file.remote.requestClientId}\" not registered for file \"${file.id}\"`);\n        return requestClient;\n    }\n    /**\n     * Restore an upload by its ID.\n     */\n    async restore(uploadID) {\n        this.log(`Core: Running restored upload \"${uploadID}\"`);\n        const result = await this.#runUpload(uploadID);\n        this.emit('complete', result);\n        return result;\n    }\n    /**\n     * Create an upload for a bunch of files.\n     *\n     */\n    #createUpload(fileIDs, opts = {}) {\n        // uppy.retryAll sets this to true \u2014 when retrying we want to ignore `allowNewUpload: false`\n        const { forceAllowNewUpload = false } = opts;\n        const { allowNewUpload, currentUploads } = this.getState();\n        if (!allowNewUpload && !forceAllowNewUpload) {\n            throw new Error('Cannot create a new upload: already uploading.');\n        }\n        const uploadID = nanoid();\n        this.emit('upload', uploadID, this.getFilesByIds(fileIDs));\n        this.setState({\n            allowNewUpload: this.opts.allowMultipleUploadBatches !== false &&\n                this.opts.allowMultipleUploads !== false,\n            currentUploads: {\n                ...currentUploads,\n                [uploadID]: {\n                    fileIDs,\n                    step: 0,\n                    result: {},\n                },\n            },\n        });\n        return uploadID;\n    }\n    [Symbol.for('uppy test: createUpload')](...args) {\n        // @ts-expect-error https://github.com/microsoft/TypeScript/issues/47595\n        return this.#createUpload(...args);\n    }\n    #getUpload(uploadID) {\n        const { currentUploads } = this.getState();\n        return currentUploads[uploadID];\n    }\n    /**\n     * Add data to an upload's result object.\n     */\n    addResultData(uploadID, data) {\n        if (!this.#getUpload(uploadID)) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            return;\n        }\n        const { currentUploads } = this.getState();\n        const currentUpload = {\n            ...currentUploads[uploadID],\n            result: { ...currentUploads[uploadID].result, ...data },\n        };\n        this.setState({\n            currentUploads: { ...currentUploads, [uploadID]: currentUpload },\n        });\n    }\n    /**\n     * Remove an upload, eg. if it has been canceled or completed.\n     *\n     */\n    #removeUpload(uploadID) {\n        const { [uploadID]: _deleted, ...currentUploads } = this.getState().currentUploads;\n        this.setState({\n            currentUploads,\n        });\n    }\n    /**\n     * Run an upload. This picks up where it left off in case the upload is being restored.\n     */\n    async #runUpload(uploadID) {\n        const getCurrentUpload = () => {\n            const { currentUploads } = this.getState();\n            return currentUploads[uploadID];\n        };\n        let currentUpload = getCurrentUpload();\n        if (!currentUpload) {\n            throw new Error('Nonexistent upload');\n        }\n        const steps = [\n            ...this.#preProcessors,\n            ...this.#uploaders,\n            ...this.#postProcessors,\n        ];\n        try {\n            for (let step = currentUpload.step || 0; step < steps.length; step++) {\n                const fn = steps[step];\n                this.setState({\n                    currentUploads: {\n                        ...this.getState().currentUploads,\n                        [uploadID]: {\n                            ...currentUpload,\n                            step,\n                        },\n                    },\n                });\n                const { fileIDs } = currentUpload;\n                // TODO give this the `updatedUpload` object as its only parameter maybe?\n                // Otherwise when more metadata may be added to the upload this would keep getting more parameters\n                await fn(fileIDs, uploadID);\n                // Update currentUpload value in case it was modified asynchronously.\n                currentUpload = getCurrentUpload();\n                if (!currentUpload) {\n                    break;\n                }\n            }\n        }\n        catch (err) {\n            this.#removeUpload(uploadID);\n            throw err;\n        }\n        // Set result data.\n        if (currentUpload) {\n            // Mark postprocessing step as complete if necessary; this addresses a case where we might get\n            // stuck in the postprocessing UI while the upload is fully complete.\n            // If the postprocessing steps do not do any work, they may not emit postprocessing events at\n            // all, and never mark the postprocessing as complete. This is fine on its own but we\n            // introduced code in the @uppy/core upload-success handler to prepare postprocessing progress\n            // state if any postprocessors are registered. That is to avoid a \"flash of completed state\"\n            // before the postprocessing plugins can emit events.\n            //\n            // So, just in case an upload with postprocessing plugins *has* completed *without* emitting\n            // postprocessing completion, we do it instead.\n            currentUpload.fileIDs.forEach((fileID) => {\n                const file = this.getFile(fileID);\n                if (file?.progress.postprocess) {\n                    this.emit('postprocess-complete', file);\n                }\n            });\n            const files = currentUpload.fileIDs.map((fileID) => this.getFile(fileID));\n            const successful = files.filter((file) => !file.error);\n            const failed = files.filter((file) => file.error);\n            this.addResultData(uploadID, { successful, failed, uploadID });\n            // Update currentUpload value in case it was modified asynchronously.\n            currentUpload = getCurrentUpload();\n        }\n        // Emit completion events.\n        // This is in a separate function so that the `currentUploads` variable\n        // always refers to the latest state. In the handler right above it refers\n        // to an outdated object without the `.result` property.\n        let result;\n        if (currentUpload) {\n            result = currentUpload.result;\n            this.#removeUpload(uploadID);\n        }\n        if (result == null) {\n            this.log(`Not setting result for an upload that has been removed: ${uploadID}`);\n            result = {\n                successful: [],\n                failed: [],\n                uploadID,\n            };\n        }\n        return result;\n    }\n    /**\n     * Start an upload for all the files that are not currently being uploaded.\n     */\n    async upload() {\n        if (!this.#plugins.uploader?.length) {\n            this.log('No uploader type plugins are used', 'warning');\n        }\n        let { files } = this.getState();\n        // retry any failed files from a previous upload() call\n        const filesToRetry = this.#getFilesToRetry();\n        if (filesToRetry.length > 0) {\n            const retryResult = await this.#doRetryAll(); // we don't want the complete event to fire\n            const hasNewFiles = this.getFiles().filter((file) => file.progress.uploadStarted == null)\n                .length > 0;\n            // if no new files, make it idempotent and return\n            if (!hasNewFiles) {\n                this.emit('complete', retryResult);\n                return retryResult;\n            }\n            // reload files which might have  changed after retry\n            ;\n            ({ files } = this.getState());\n        }\n        // If no files to retry, proceed with original upload() behavior for new files\n        const onBeforeUploadResult = this.opts.onBeforeUpload(files);\n        if (onBeforeUploadResult === false) {\n            throw new Error('Not starting the upload because onBeforeUpload returned false');\n        }\n        if (onBeforeUploadResult && typeof onBeforeUploadResult === 'object') {\n            files = onBeforeUploadResult;\n            // Updating files in state, because uploader plugins receive file IDs,\n            // and then fetch the actual file object from state\n            this.setState({\n                files,\n            });\n        }\n        try {\n            this.#restricter.validateMinNumberOfFiles(files);\n            if (!this.#checkRequiredMetaFields(files)) {\n                throw new RestrictionError(this.i18n('missingRequiredMetaField'));\n            }\n            const { currentUploads } = this.getState();\n            // get a list of files that are currently assigned to uploads\n            const currentlyUploadingFiles = Object.values(currentUploads).flatMap((curr) => curr.fileIDs);\n            const waitingFileIDs = Object.keys(files).filter((fileID) => {\n                const file = this.getFile(fileID);\n                // if the file hasn't started uploading and hasn't already been assigned to an upload..\n                return (file &&\n                    !file.progress.uploadStarted &&\n                    !currentlyUploadingFiles.includes(fileID));\n            });\n            const uploadID = this.#createUpload(waitingFileIDs);\n            const result = await this.#runUpload(uploadID);\n            this.emit('complete', result);\n            return result;\n        }\n        catch (err) {\n            this.#informAndEmit([err]);\n            throw err;\n        }\n    }\n}\nexport default Uppy;\n", "/* @ts-self-types=\"./index.d.ts\" */\nlet urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\nexport let customAlphabet = (alphabet, defaultSize = 21) => {\n  return (size = defaultSize) => {\n    let id = ''\n    let i = size | 0\n    while (i--) {\n      id += alphabet[(Math.random() * alphabet.length) | 0]\n    }\n    return id\n  }\n}\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let i = size | 0\n  while (i--) {\n    id += urlAlphabet[(Math.random() * 64) | 0]\n  }\n  return id\n}\n", "{\n  \"name\": \"@uppy/core\",\n  \"description\": \"Core module for the extensible JavaScript file upload widget with support for drag&drop, resumable uploads, previews, restrictions, file processing/encoding, remote providers like Instagram, Dropbox, Google Drive, S3 and more :dog:\",\n  \"version\": \"5.2.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/store-default\": \"^5.0.0\",\n    \"@uppy/utils\": \"^7.1.4\",\n    \"lodash\": \"^4.17.21\",\n    \"mime-match\": \"^1.0.2\",\n    \"namespace-emitter\": \"^2.0.1\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/deep-freeze\": \"^0\",\n    \"cssnano\": \"^7.0.7\",\n    \"deep-freeze\": \"^0.0.1\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  }\n}", "export default function getFileName(fileType, fileDescriptor) {\n    if (fileDescriptor.name) {\n        return fileDescriptor.name;\n    }\n    if (fileType.split('/')[0] === 'image') {\n        return `${fileType.split('/')[0]}.${fileType.split('/')[1]}`;\n    }\n    return 'noname';\n}\n", "export default {\n    strings: {\n        addBulkFilesFailed: {\n            0: 'Failed to add %{smart_count} file due to an internal error',\n            1: 'Failed to add %{smart_count} files due to internal errors',\n        },\n        youCanOnlyUploadX: {\n            0: 'You can only upload %{smart_count} file',\n            1: 'You can only upload %{smart_count} files',\n        },\n        youHaveToAtLeastSelectX: {\n            0: 'You have to select at least %{smart_count} file',\n            1: 'You have to select at least %{smart_count} files',\n        },\n        aggregateExceedsSize: 'You selected %{size} of files, but maximum allowed size is %{sizeAllowed}',\n        exceedsSize: '%{file} exceeds maximum allowed size of %{size}',\n        missingRequiredMetaField: 'Missing required meta fields',\n        missingRequiredMetaFieldOnFile: 'Missing required meta fields in %{fileName}',\n        inferiorSize: 'This file is smaller than the allowed size of %{size}',\n        youCanOnlyUploadFileTypes: 'You can only upload: %{types}',\n        noMoreFilesAllowed: 'Cannot add more files',\n        noDuplicates: \"Cannot add the duplicate file '%{fileName}', it already exists\",\n        companionError: 'Connection with Companion failed',\n        authAborted: 'Authentication aborted',\n        companionUnauthorizeHint: 'To unauthorize to your %{provider} account, please go to %{url}',\n        failedToUpload: 'Failed to upload %{file}',\n        noInternetConnection: 'No Internet connection',\n        connectedToInternet: 'Connected to the Internet',\n        // Strings for remote providers\n        noFilesFound: 'You have no files or folders here',\n        noSearchResults: 'Unfortunately, there are no results for this search',\n        selectX: {\n            0: 'Select %{smart_count}',\n            1: 'Select %{smart_count}',\n        },\n        allFilesFromFolderNamed: 'All files from folder %{name}',\n        openFolderNamed: 'Open folder %{name}',\n        cancel: 'Cancel',\n        logOut: 'Log out',\n        logIn: 'Log in',\n        pickFiles: 'Pick files',\n        pickPhotos: 'Pick photos',\n        filter: 'Filter',\n        resetFilter: 'Reset filter',\n        loading: 'Loading...',\n        loadedXFiles: 'Loaded %{numFiles} files',\n        authenticateWithTitle: 'Please authenticate with %{pluginName} to select files',\n        authenticateWith: 'Connect to %{pluginName}',\n        signInWithGoogle: 'Sign in with Google',\n        searchImages: 'Search for images',\n        enterTextToSearch: 'Enter text to search for images',\n        search: 'Search',\n        resetSearch: 'Reset search',\n        emptyFolderAdded: 'No files were added from empty folder',\n        addedNumFiles: 'Added %{numFiles} file(s)',\n        folderAlreadyAdded: 'The folder \"%{folder}\" was already added',\n        folderAdded: {\n            0: 'Added %{smart_count} file from %{folder}',\n            1: 'Added %{smart_count} files from %{folder}',\n        },\n        additionalRestrictionsFailed: '%{count} additional restrictions were not fulfilled',\n        unnamed: 'Unnamed',\n        pleaseWait: 'Please wait',\n    },\n};\n", "// Edge 15.x does not fire 'progress' events on uploads.\n// See https://github.com/transloadit/uppy/issues/945\n// And https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/12224510/\nexport default function supportsUploadProgress(userAgent) {\n    // Allow passing in userAgent for tests\n    if (userAgent == null && typeof navigator !== 'undefined') {\n        userAgent = navigator.userAgent;\n    }\n    // Assume it works because basically everything supports progress events.\n    if (!userAgent)\n        return true;\n    const m = /Edge\\/(\\d+\\.\\d+)/.exec(userAgent);\n    if (!m)\n        return true;\n    const edgeVersion = m[1];\n    const version = edgeVersion.split('.', 2);\n    const major = parseInt(version[0], 10);\n    const minor = parseInt(version[1], 10);\n    // Worked before:\n    // Edge 40.15063.0.0\n    // Microsoft EdgeHTML 15.15063\n    if (major < 15 || (major === 15 && minor < 15063)) {\n        return true;\n    }\n    // Fixed in:\n    // Microsoft EdgeHTML 18.18218\n    if (major > 18 || (major === 18 && minor >= 18218)) {\n        return true;\n    }\n    // other versions don't work.\n    return false;\n}\n", "import { nanoid } from 'nanoid/non-secure';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\n/**\n * Hook to create a form element outside the component tree to avoid nested forms.\n * Returns a formId that can be used with the `form` attribute on inputs and buttons.\n *\n * This allows form submission (Enter key) to work properly even when the component\n * is rendered inside another form element.\n *\n * @param onSubmit - Callback to execute when the form is submitted\n * @returns Object containing the formId to use with form attribute\n */\nexport function useSearchForm(onSubmit) {\n    const submit = useCallback((ev) => {\n        ev.preventDefault();\n        onSubmit();\n    }, [onSubmit]);\n    // We create a form element and append it to document.body to avoid nested <form>s\n    // (See https://github.com/transloadit/uppy/pull/5050#discussion_r1640392516)\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    useEffect(() => {\n        document.body.appendChild(form);\n        form.addEventListener('submit', submit);\n        return () => {\n            form.removeEventListener('submit', submit);\n            document.body.removeChild(form);\n        };\n    }, [form, submit]);\n    return { formId: form.id };\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { useSearchForm } from './useSearchForm.js';\n/**\n * FilterInput component for client-side filtering with search icon and clear button.\n * Supports Enter key submission via form element.\n */\nfunction FilterInput({ value, onChange, onSubmit, inputLabel, i18n, }) {\n    const { formId } = useSearchForm(onSubmit);\n    return (_jsxs(\"section\", { className: \"uppy-ProviderBrowser-searchFilter\", children: [_jsx(\"input\", { className: \"uppy-u-reset uppy-ProviderBrowser-searchFilterInput\", type: \"search\", \"aria-label\": inputLabel, placeholder: inputLabel, value: value, onInput: (e) => onChange(e.target.value), form: formId, \"data-uppy-super-focusable\": true }), _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-ProviderBrowser-searchFilterIcon\", width: \"12\", height: \"12\", viewBox: \"0 0 12 12\", children: _jsx(\"path\", { d: \"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z\" }) }), value && (_jsx(\"button\", { className: \"uppy-u-reset uppy-ProviderBrowser-searchFilterReset\", type: \"button\", \"aria-label\": i18n('resetFilter'), onClick: () => onChange(''), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", viewBox: \"0 0 19 19\", children: _jsx(\"path\", { d: \"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z\" }) }) }))] }));\n}\nexport default FilterInput;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { useCallback } from 'preact/hooks';\nfunction GoogleIcon() {\n    return (_jsx(\"svg\", { width: \"26\", height: \"26\", viewBox: \"0 0 26 26\", xmlns: \"http://www.w3.org/2000/svg\", children: _jsxs(\"g\", { fill: \"none\", \"fill-rule\": \"evenodd\", children: [_jsx(\"circle\", { fill: \"#FFF\", cx: \"13\", cy: \"13\", r: \"13\" }), _jsx(\"path\", { d: \"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z\", fill: \"#4285F4\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z\", fill: \"#34A853\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z\", fill: \"#FBBC05\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z\", fill: \"#EA4335\", \"fill-rule\": \"nonzero\" }), _jsx(\"path\", { d: \"M4 4h18v18H4z\" })] }) }));\n}\nfunction DefaultForm({ pluginName, i18n, onAuth, }) {\n    // In order to comply with Google's brand we need to create a different button\n    // for the Google Drive plugin\n    const isGoogleDrive = pluginName === 'Google Drive';\n    const onSubmit = useCallback((e) => {\n        e.preventDefault();\n        onAuth();\n    }, [onAuth]);\n    return (_jsx(\"form\", { onSubmit: onSubmit, children: isGoogleDrive ? (_jsxs(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google\", \"data-uppy-super-focusable\": true, children: [_jsx(GoogleIcon, {}), i18n('signInWithGoogle')] })) : (_jsx(\"button\", { type: \"submit\", className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn\", \"data-uppy-super-focusable\": true, children: i18n('authenticateWith', { pluginName }) })) }));\n}\nconst defaultRenderForm = ({ pluginName, i18n, onAuth, }) => _jsx(DefaultForm, { pluginName: pluginName, i18n: i18n, onAuth: onAuth });\nexport default function AuthView({ loading, pluginName, pluginIcon, i18n, handleAuth, renderForm = defaultRenderForm, }) {\n    return (_jsxs(\"div\", { className: \"uppy-Provider-auth\", children: [_jsx(\"div\", { className: \"uppy-Provider-authIcon\", children: pluginIcon() }), _jsx(\"div\", { className: \"uppy-Provider-authTitle\", children: i18n('authenticateWithTitle', {\n                    pluginName,\n                }) }), renderForm({ pluginName, i18n, loading, onAuth: handleAuth })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { remoteFileObjToLocal } from '@uppy/utils';\nimport classNames from 'classnames';\nimport debounce from 'lodash/debounce.js';\nimport packageJson from '../../package.json' with { type: 'json' };\nimport Browser from '../Browser.js';\nimport FilterInput from '../FilterInput.js';\nimport FooterActions from '../FooterActions.js';\nimport addFiles from '../utils/addFiles.js';\nimport getClickedRange from '../utils/getClickedRange.js';\nimport handleError from '../utils/handleError.js';\nimport getBreadcrumbs from '../utils/PartialTreeUtils/getBreadcrumbs.js';\nimport getCheckedFilesWithPaths from '../utils/PartialTreeUtils/getCheckedFilesWithPaths.js';\nimport getNumberOfSelectedFiles from '../utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nimport PartialTreeUtils from '../utils/PartialTreeUtils/index.js';\nimport shouldHandleScroll from '../utils/shouldHandleScroll.js';\nimport AuthView from './AuthView.js';\nimport GlobalSearchView from './GlobalSearchView.js';\nimport Header from './Header.js';\nexport function defaultPickerIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"30\", height: \"30\", viewBox: \"0 0 30 30\", children: _jsx(\"path\", { d: \"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z\" }) }));\n}\nconst getDefaultState = (rootFolderId) => ({\n    authenticated: undefined, // we don't know yet\n    partialTree: [\n        {\n            type: 'root',\n            id: rootFolderId,\n            cached: false,\n            nextPagePath: null,\n        },\n    ],\n    currentFolderId: rootFolderId,\n    searchString: '',\n    didFirstRender: false,\n    username: null,\n    loading: false,\n});\n/**\n * Class to easily generate generic views for Provider plugins\n *\n * We have a *search view* and a *normal view*.\n * Search view is only used when the Provider supports server side search i.e. provider.search method is implemented for the provider.\n * The state is stored in searchResults.\n * Search view is implemented in components GlobalSearchView and SearchResultItem.\n * We conditionally switch between search view and normal in the render method when a server side search is initiated.\n * When users type their search query in search input box (SearchInput component), we debounce the input and call provider.search method to fetch results from the server.\n * when the user enters a folder in search results or clears the search input query we switch back to Normal View.\n */\nexport default class ProviderView {\n    static VERSION = packageJson.version;\n    // Test hook (mirrors GoldenRetriever pattern): allow tests to override debounce time\n    // @ts-expect-error test-only hook key\n    static [Symbol.for('uppy test: searchDebounceMs')];\n    plugin;\n    provider;\n    opts;\n    isHandlingScroll = false;\n    previousCheckbox = null;\n    #searchDebounced;\n    constructor(plugin, opts) {\n        this.plugin = plugin;\n        this.provider = opts.provider;\n        const defaultOptions = {\n            viewType: 'list',\n            showTitles: true,\n            showFilter: true,\n            showBreadcrumbs: true,\n            loadAllFiles: false,\n            virtualList: false,\n        };\n        this.opts = { ...defaultOptions, ...opts };\n        this.openFolder = this.openFolder.bind(this);\n        this.logout = this.logout.bind(this);\n        this.handleAuth = this.handleAuth.bind(this);\n        this.handleScroll = this.handleScroll.bind(this);\n        this.resetPluginState = this.resetPluginState.bind(this);\n        this.donePicking = this.donePicking.bind(this);\n        this.render = this.render.bind(this);\n        this.cancelSelection = this.cancelSelection.bind(this);\n        this.toggleCheckbox = this.toggleCheckbox.bind(this);\n        this.openSearchResultFolder = this.openSearchResultFolder.bind(this);\n        this.clearSearchState = this.clearSearchState.bind(this);\n        // Set default state for the plugin\n        this.resetPluginState();\n        // todo\n        // @ts-expect-error this should be typed in @uppy/dashboard.\n        this.plugin.uppy.on('dashboard:close-panel', this.resetPluginState);\n        this.plugin.uppy.registerRequestClient(this.provider.provider, this.provider);\n        // Configure debounced search with test override\n        const testHookSymbol = Symbol.for('uppy test: searchDebounceMs');\n        const testWait = ProviderView[testHookSymbol];\n        const wait = testWait ?? 500;\n        const debounceOpts = testWait === 0 ? { leading: true, trailing: true } : undefined;\n        this.#searchDebounced = debounce(this.#search, wait, debounceOpts);\n    }\n    resetPluginState() {\n        this.plugin.setPluginState(getDefaultState(this.plugin.rootFolderId));\n    }\n    tearDown() {\n        // Nothing.\n    }\n    setLoading(loading) {\n        this.plugin.setPluginState({ loading });\n    }\n    get isLoading() {\n        return this.plugin.getPluginState().loading;\n    }\n    cancelSelection() {\n        const { partialTree } = this.plugin.getPluginState();\n        const newPartialTree = partialTree.map((item) => item.type === 'root' ? item : { ...item, status: 'unchecked' });\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n    }\n    clearSearchState() {\n        this.plugin.setPluginState({\n            searchResults: undefined,\n        });\n    }\n    #abortController;\n    async #withAbort(op) {\n        // prevent multiple requests in parallel from causing race conditions\n        this.#abortController?.abort();\n        const abortController = new AbortController();\n        this.#abortController = abortController;\n        const cancelRequest = () => {\n            abortController.abort();\n        };\n        try {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.on('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.on('cancel-all', cancelRequest);\n            await op(abortController.signal);\n        }\n        finally {\n            // @ts-expect-error this should be typed in @uppy/dashboard.\n            // Even then I don't think we can make this work without adding dashboard\n            // as a dependency to provider-views.\n            this.plugin.uppy.off('dashboard:close-panel', cancelRequest);\n            this.plugin.uppy.off('cancel-all', cancelRequest);\n            this.#abortController = undefined;\n        }\n    }\n    async #search() {\n        const { partialTree, currentFolderId, searchString } = this.plugin.getPluginState();\n        const currentFolder = partialTree.find((i) => i.id === currentFolderId);\n        if (searchString.trim() === '') {\n            this.#abortController?.abort();\n            this.clearSearchState();\n            return;\n        }\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            const scopePath = currentFolder.type === 'root' ? undefined : currentFolderId;\n            const { items } = await this.provider.search(searchString, {\n                signal,\n                path: scopePath,\n            });\n            // For each searched file, build the entire path (from the root all the way to the leaf node)\n            // This is because we need to make sure all ancestor folders are present in the partialTree before we open the folder or check the file.\n            // This is needed because when the user opens a folder we need to have all its parent folders in the partialTree to be able to render the breadcrumbs correctly.\n            // Similarly when the user checks a file, we need to have all it's ancestor folders in the partialTree to be able to percolateUp the checked state correctly to its ancestors.\n            const { partialTree } = this.plugin.getPluginState();\n            const newPartialTree = [...partialTree];\n            for (const file of items) {\n                // Decode URI and split into path segments\n                const decodedPath = decodeURIComponent(file.requestPath);\n                const segments = decodedPath.split('/').filter((s) => s.length > 0);\n                // Start from root\n                let parentId = this.plugin.rootFolderId;\n                let isParentFolderChecked;\n                // Walk through each segment starting from the root and build child nodes if they don't exist\n                segments.forEach((segment, index, arr) => {\n                    const pathSegments = segments.slice(0, index + 1);\n                    const encodedPath = encodeURIComponent(`/${pathSegments.join('/')}`);\n                    // Skip if node already exists\n                    const existingNode = newPartialTree.find((n) => n.id === encodedPath && n.type !== 'root');\n                    if (existingNode) {\n                        parentId = encodedPath;\n                        isParentFolderChecked = existingNode.status === 'checked';\n                        return;\n                    }\n                    const isLeafNode = index === arr.length - 1;\n                    let node;\n                    // propagate checked state from parent to children, if the user has checked the parent folder before searching\n                    // and the parent folder is an ancestor of the searched file\n                    // see also afterOpenFolder which contains similar logic, we should probably refactor and reuse some\n                    const status = isParentFolderChecked ? 'checked' : 'unchecked';\n                    // Build the Leaf Node, it can be a file (`PartialTreeFile`) or a folder (`PartialTreeFolderNode`).\n                    // Since we Already have the leaf node's data (`file`, `CompanionFile`) from the searchResults: CompanionFile[], we just use that.\n                    if (isLeafNode) {\n                        if (file.isFolder) {\n                            node = {\n                                type: 'folder',\n                                id: encodedPath,\n                                cached: false,\n                                nextPagePath: null,\n                                status,\n                                parentId,\n                                data: file,\n                            };\n                        }\n                        else {\n                            const restrictionError = this.validateSingleFile(file);\n                            node = {\n                                type: 'file',\n                                id: encodedPath,\n                                restrictionError,\n                                status: !restrictionError ? status : 'unchecked',\n                                parentId,\n                                data: file,\n                            };\n                        }\n                    }\n                    else {\n                        // not leaf node, so by definition it is a folder leading up to the leaf node\n                        node = {\n                            type: 'folder',\n                            id: encodedPath,\n                            cached: false,\n                            nextPagePath: null,\n                            status,\n                            parentId,\n                            data: {\n                                // we don't have any data, so fill only the necessary fields\n                                name: decodeURIComponent(segment),\n                                icon: 'folder',\n                                isFolder: true,\n                            },\n                        };\n                    }\n                    newPartialTree.push(node);\n                    parentId = encodedPath; // This node becomes parent for the next iteration\n                    isParentFolderChecked = status === 'checked';\n                });\n            }\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                searchResults: items.map((item) => item.requestPath),\n            });\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    // debounced search function is initialized in the constructor\n    onSearchInput = (s) => {\n        this.plugin.setPluginState({ searchString: s });\n        if (this.opts.supportsSearch) {\n            this.#searchDebounced();\n        }\n    };\n    async openSearchResultFolder(folderId) {\n        // stop searching\n        this.plugin.setPluginState({ searchString: '' });\n        // now open folder using the normal view\n        await this.openFolder(folderId);\n    }\n    async openFolder(folderId) {\n        // always switch away from the search view when opening a folder, whether it happens from the search view or by clicking breadcrumbs\n        this.clearSearchState();\n        this.previousCheckbox = null;\n        // Returning cached folder\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedFolder = partialTree.find((folder) => folder.id === folderId);\n        if (clickedFolder.cached) {\n            this.plugin.setPluginState({\n                currentFolderId: folderId,\n                searchString: '',\n            });\n            return;\n        }\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            let currentPagePath = folderId;\n            let currentItems = [];\n            do {\n                const { username, nextPagePath, items } = await this.provider.list(currentPagePath, { signal });\n                // It's important to set the username during one of our first fetches\n                this.plugin.setPluginState({ username });\n                currentPagePath = nextPagePath;\n                currentItems = currentItems.concat(items);\n                this.setLoading(this.plugin.uppy.i18n('loadedXFiles', {\n                    numFiles: currentItems.length,\n                }));\n            } while (this.opts.loadAllFiles && currentPagePath);\n            const newPartialTree = PartialTreeUtils.afterOpenFolder(partialTree, currentItems, clickedFolder, currentPagePath, this.validateSingleFile);\n            this.plugin.setPluginState({\n                partialTree: newPartialTree,\n                currentFolderId: folderId,\n                searchString: '',\n            });\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    /**\n     * Removes session token on client side.\n     */\n    async logout() {\n        await this.#withAbort(async (signal) => {\n            const res = await this.provider.logout({\n                signal,\n            });\n            // res.ok is from the JSON body, not to be confused with Response.ok\n            if (res.ok) {\n                if (!res.revoked) {\n                    const message = this.plugin.uppy.i18n('companionUnauthorizeHint', {\n                        provider: this.plugin.title,\n                        url: res.manual_revoke_url,\n                    });\n                    this.plugin.uppy.info(message, 'info', 7000);\n                }\n                this.plugin.setPluginState({\n                    ...getDefaultState(this.plugin.rootFolderId),\n                    authenticated: false,\n                });\n            }\n        }).catch(handleError(this.plugin.uppy));\n    }\n    async handleAuth(authFormData) {\n        await this.#withAbort(async (signal) => {\n            this.setLoading(true);\n            await this.provider.login({ authFormData, signal });\n            this.plugin.setPluginState({ authenticated: true });\n            await Promise.all([\n                this.provider.fetchPreAuthToken(),\n                this.openFolder(this.plugin.rootFolderId),\n            ]);\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    async handleScroll(event) {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        const currentFolder = partialTree.find((i) => i.id === currentFolderId);\n        if (shouldHandleScroll(event) &&\n            !this.isHandlingScroll &&\n            currentFolder.nextPagePath) {\n            this.isHandlingScroll = true;\n            await this.#withAbort(async (signal) => {\n                const { nextPagePath, items } = await this.provider.list(currentFolder.nextPagePath, { signal });\n                const newPartialTree = PartialTreeUtils.afterScrollFolder(partialTree, currentFolderId, items, nextPagePath, this.validateSingleFile);\n                this.plugin.setPluginState({ partialTree: newPartialTree });\n            }).catch(handleError(this.plugin.uppy));\n            this.isHandlingScroll = false;\n        }\n    }\n    validateSingleFile = (file) => {\n        const companionFile = remoteFileObjToLocal(file);\n        const result = this.plugin.uppy.validateSingleFile(companionFile);\n        return result;\n    };\n    async donePicking() {\n        const { partialTree } = this.plugin.getPluginState();\n        if (this.isLoading)\n            return;\n        this.setLoading(true);\n        await this.#withAbort(async (signal) => {\n            // 1. Enrich our partialTree by fetching all 'checked' but not-yet-fetched folders\n            const enrichedTree = await PartialTreeUtils.afterFill(partialTree, (path) => this.provider.list(path, { signal }), this.validateSingleFile, (n) => {\n                this.setLoading(this.plugin.uppy.i18n('addedNumFiles', { numFiles: n }));\n            });\n            // 2. Now that we know how many files there are - recheck aggregateRestrictions!\n            const aggregateRestrictionError = this.validateAggregateRestrictions(enrichedTree);\n            if (aggregateRestrictionError) {\n                this.plugin.setPluginState({ partialTree: enrichedTree });\n                return;\n            }\n            // 3. Add files\n            const companionFiles = getCheckedFilesWithPaths(enrichedTree);\n            addFiles(companionFiles, this.plugin, this.provider);\n            // 4. Reset state\n            this.resetPluginState();\n        }).catch(handleError(this.plugin.uppy));\n        this.setLoading(false);\n    }\n    toggleCheckbox(ourItem, isShiftKeyPressed) {\n        const { partialTree } = this.plugin.getPluginState();\n        const clickedRange = getClickedRange(ourItem.id, this.getDisplayedPartialTree(), isShiftKeyPressed, this.previousCheckbox);\n        const newPartialTree = PartialTreeUtils.afterToggleCheckbox(partialTree, clickedRange);\n        this.plugin.setPluginState({ partialTree: newPartialTree });\n        this.previousCheckbox = ourItem.id;\n    }\n    getDisplayedPartialTree = () => {\n        const { partialTree, currentFolderId, searchString } = this.plugin.getPluginState();\n        const inThisFolder = partialTree.filter((item) => item.type !== 'root' && item.parentId === currentFolderId);\n        // If provider supports server side search, we don't filter the items client side\n        const filtered = this.opts.supportsSearch || searchString.trim() === ''\n            ? inThisFolder\n            : inThisFolder.filter((item) => (item.data.name ?? this.plugin.uppy.i18n('unnamed'))\n                .toLowerCase()\n                .indexOf(searchString.trim().toLowerCase()) !== -1);\n        return filtered;\n    };\n    getBreadcrumbs = () => {\n        const { partialTree, currentFolderId } = this.plugin.getPluginState();\n        return getBreadcrumbs(partialTree, currentFolderId);\n    };\n    getSelectedAmount = () => {\n        const { partialTree } = this.plugin.getPluginState();\n        return getNumberOfSelectedFiles(partialTree);\n    };\n    validateAggregateRestrictions = (partialTree) => {\n        const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n        const uppyFiles = checkedFiles.map((file) => file.data);\n        return this.plugin.uppy.validateAggregateRestrictions(uppyFiles);\n    };\n    #renderSearchResults() {\n        const { i18n } = this.plugin.uppy;\n        const { searchResults: ids, partialTree } = this.plugin.getPluginState();\n        // todo memoize this so we don't have to do it on every render\n        const itemsById = new Map();\n        partialTree.forEach((item) => {\n            if (item.type !== 'root') {\n                itemsById.set(item.id, item);\n            }\n        });\n        // the search results view needs data from the partial tree,\n        const searchResults = ids.map((id) => {\n            const partialTreeItem = itemsById.get(id);\n            if (partialTreeItem == null)\n                throw new Error('Partial tree not complete');\n            return partialTreeItem;\n        });\n        return (_jsx(GlobalSearchView, { searchResults: searchResults, openFolder: this.openSearchResultFolder, toggleCheckbox: this.toggleCheckbox, i18n: i18n }));\n    }\n    render(state, viewOptions = {}) {\n        const { didFirstRender } = this.plugin.getPluginState();\n        const { i18n } = this.plugin.uppy;\n        if (!didFirstRender) {\n            this.plugin.setPluginState({ didFirstRender: true });\n            this.provider.fetchPreAuthToken();\n            this.openFolder(this.plugin.rootFolderId);\n        }\n        const opts = { ...this.opts, ...viewOptions };\n        const { authenticated, loading } = this.plugin.getPluginState();\n        const pluginIcon = this.plugin.icon || defaultPickerIcon;\n        if (authenticated === false) {\n            return (_jsx(AuthView, { pluginName: this.plugin.title, pluginIcon: pluginIcon, handleAuth: this.handleAuth, i18n: this.plugin.uppy.i18n, renderForm: opts.renderAuthForm, loading: loading }));\n        }\n        const { partialTree, username, searchString, searchResults } = this.plugin.getPluginState();\n        const breadcrumbs = this.getBreadcrumbs();\n        return (_jsxs(\"div\", { className: classNames('uppy-ProviderBrowser', `uppy-ProviderBrowser-viewType--${opts.viewType}`), children: [_jsx(Header, { showBreadcrumbs: opts.showBreadcrumbs, openFolder: this.openFolder, breadcrumbs: breadcrumbs, pluginIcon: pluginIcon, title: this.plugin.title, logout: this.logout, username: username, i18n: i18n }), opts.showFilter && (_jsx(FilterInput, { value: searchString, onChange: (s) => this.onSearchInput(s), onSubmit: () => { }, inputLabel: i18n('filter'), i18n: i18n })), searchResults ? (this.#renderSearchResults()) : (_jsx(Browser, { toggleCheckbox: this.toggleCheckbox, displayedPartialTree: this.getDisplayedPartialTree(), openFolder: this.openFolder, virtualList: opts.virtualList, noResultsLabel: i18n('noFilesFound'), handleScroll: this.handleScroll, viewType: opts.viewType, showTitles: opts.showTitles, i18n: this.plugin.uppy.i18n, isLoading: loading, utmSource: \"Companion\" })), _jsx(FooterActions, { partialTree: partialTree, donePicking: this.donePicking, cancelSelection: this.cancelSelection, i18n: i18n, validateAggregateRestrictions: this.validateAggregateRestrictions })] }));\n    }\n}\n", "{\n  \"name\": \"@uppy/provider-views\",\n  \"description\": \"View library for Uppy remote provider plugins.\",\n  \"version\": \"5.2.2\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.5\",\n    \"classnames\": \"^2.2.6\",\n    \"lodash\": \"^4.17.21\",\n    \"nanoid\": \"^5.0.9\",\n    \"p-queue\": \"^8.0.0\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"@types/gapi\": \"^0.0.47\",\n    \"@types/google.accounts\": \"^0.0.14\",\n    \"@types/google.picker\": \"^0.0.42\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport GridItem from './components/GridItem.js';\nimport ListItem from './components/ListItem.js';\nexport default function Item(props) {\n    const { viewType, toggleCheckbox, showTitles, i18n, openFolder, file, utmSource, } = props;\n    const restrictionError = file.type === 'folder' ? null : file.restrictionError;\n    const isDisabled = !!restrictionError && file.status !== 'checked';\n    const ourProps = {\n        file,\n        openFolder,\n        toggleCheckbox,\n        utmSource,\n        i18n,\n        viewType,\n        showTitles,\n        className: classNames('uppy-ProviderBrowserItem', { 'uppy-ProviderBrowserItem--disabled': isDisabled }, { 'uppy-ProviderBrowserItem--noPreview': file.data.icon === 'video' }, { 'uppy-ProviderBrowserItem--is-checked': file.status === 'checked' }, { 'uppy-ProviderBrowserItem--is-partial': file.status === 'partial' }),\n        isDisabled,\n        restrictionError,\n    };\n    switch (viewType) {\n        case 'grid':\n            return _jsx(GridItem, { ...ourProps });\n        case 'list':\n            return _jsx(ListItem, { ...ourProps });\n        case 'unsplash':\n            return (_jsx(GridItem, { ...ourProps, children: _jsx(\"a\", { href: `${file.data.author.url}?utm_source=${utmSource}&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", className: \"uppy-ProviderBrowserItem-author\", tabIndex: -1, children: file.data.author.name }) }));\n        default:\n            throw new Error(`There is no such type ${viewType}`);\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction FileIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: 11, height: 14.5, viewBox: \"0 0 44 58\", children: _jsx(\"path\", { d: \"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z\" }) }));\n}\nfunction FolderIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", style: { minWidth: 16, marginRight: 3 }, viewBox: \"0 0 276.157 276.157\", children: _jsx(\"path\", { d: \"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z\" }) }));\n}\nfunction VideoIcon() {\n    return (_jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", style: { width: 16, marginRight: 4 }, viewBox: \"0 0 58 58\", children: [_jsx(\"path\", { d: \"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z\" }), _jsx(\"path\", { d: \"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z\" })] }));\n}\nexport default function ItemIcon({ itemIconString, alt = undefined, }) {\n    if (itemIconString === null)\n        return null;\n    switch (itemIconString) {\n        case 'file':\n            return _jsx(FileIcon, {});\n        case 'folder':\n            return _jsx(FolderIcon, {});\n        case 'video':\n            return _jsx(VideoIcon, {});\n        default: {\n            return (_jsx(\"img\", { src: itemIconString, alt: alt, referrerPolicy: \"no-referrer\", loading: \"lazy\", width: 16, height: 16 }));\n        }\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nfunction GridItem({ file, toggleCheckbox, className, isDisabled, restrictionError, showTitles, children = null, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: isDisabled && restrictionError ? restrictionError : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox uppy-ProviderBrowserItem-checkbox--grid\", onChange: toggleCheckbox, name: \"listitem\", id: file.id, checked: file.status === 'checked', disabled: isDisabled, \"data-uppy-super-focusable\": true }), _jsxs(\"label\", { htmlFor: file.id, \"aria-label\": file.data.name ?? i18n('unnamed'), className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(ItemIcon, { itemIconString: file.data.thumbnail || file.data.icon }), showTitles && (file.data.name ?? i18n('unnamed')), children] })] }));\n}\nexport default GridItem;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport ItemIcon from './ItemIcon.js';\nexport default function ListItem({ file, openFolder, className, isDisabled, restrictionError, toggleCheckbox, showTitles, i18n, }) {\n    return (_jsxs(\"li\", { className: className, title: file.status !== 'checked' && restrictionError\n            ? restrictionError\n            : undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox\", onChange: toggleCheckbox, \n                // for the <label/>\n                name: \"listitem\", id: file.id, checked: file.status === 'checked', \"aria-label\": file.data.isFolder\n                    ? i18n('allFilesFromFolderNamed', {\n                        name: file.data.name ?? i18n('unnamed'),\n                    })\n                    : null, disabled: isDisabled, \"data-uppy-super-focusable\": true }), file.data.isFolder ? (\n            // button to open a folder\n            _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner\", onClick: () => openFolder(file.id), \"aria-label\": i18n('openFolderNamed', {\n                    name: file.data.name ?? i18n('unnamed'),\n                }), children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && file.data.name ? (_jsx(\"span\", { className: \"uppy-truncate-text\", children: file.data.name })) : (i18n('unnamed'))] })) : (\n            // label for a checkbox\n            _jsxs(\"label\", { htmlFor: file.id, className: \"uppy-u-reset uppy-ProviderBrowserItem-inner\", children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: file.data.icon }) }), showTitles && (_jsx(\"span\", { className: \"uppy-truncate-text\", children: file.data.name ?? i18n('unnamed') }))] }))] }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { VirtualList } from '@uppy/utils';\nimport { useEffect, useState } from 'preact/hooks';\nimport Item from './Item/index.js';\nfunction Browser(props) {\n    const { displayedPartialTree, viewType, toggleCheckbox, handleScroll, showTitles, i18n, isLoading, openFolder, noResultsLabel, virtualList, utmSource, } = props;\n    const [isShiftKeyPressed, setIsShiftKeyPressed] = useState(false);\n    // This records whether the user is holding the SHIFT key this very moment.\n    // Typically, this is implemented using `onClick((e) => e.shiftKey)` -\n    // however we can't use that, because for accessibility reasons\n    // we're using html tags that don't support `e.shiftKey` property (see #3768).\n    useEffect(() => {\n        const handleKeyUp = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(false);\n        };\n        const handleKeyDown = (e) => {\n            if (e.key === 'Shift')\n                setIsShiftKeyPressed(true);\n        };\n        document.addEventListener('keyup', handleKeyUp);\n        document.addEventListener('keydown', handleKeyDown);\n        return () => {\n            document.removeEventListener('keyup', handleKeyUp);\n            document.removeEventListener('keydown', handleKeyDown);\n        };\n    }, []);\n    if (isLoading) {\n        return (_jsx(\"div\", { className: \"uppy-Provider-loading\", children: typeof isLoading === 'string' ? isLoading : i18n('loading') }));\n    }\n    if (displayedPartialTree.length === 0) {\n        return _jsx(\"div\", { className: \"uppy-Provider-empty\", children: noResultsLabel });\n    }\n    const renderItem = (item) => (_jsx(Item, { viewType: viewType, toggleCheckbox: (event) => {\n            event.stopPropagation();\n            event.preventDefault();\n            // Prevent shift-clicking from highlighting file names\n            // (https://stackoverflow.com/a/1527797/3192470)\n            document.getSelection()?.removeAllRanges();\n            toggleCheckbox(item, isShiftKeyPressed);\n        }, showTitles: showTitles, i18n: i18n, openFolder: openFolder, file: item, utmSource: utmSource }, item.id));\n    // todo remove virtuallist option and always use virtual list\n    if (virtualList) {\n        return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(VirtualList, { className: \"uppy-ProviderBrowser-list\", data: displayedPartialTree, renderRow: renderItem, rowHeight: 35.5 }) }));\n    }\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(\"ul\", { className: \"uppy-ProviderBrowser-list\", onScroll: handleScroll, \n            // making <ul> not focusable for firefox\n            tabIndex: -1, children: displayedPartialTree.map(renderItem) }) }));\n}\nexport default Browser;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useMemo } from 'preact/hooks';\nimport getNumberOfSelectedFiles from './utils/PartialTreeUtils/getNumberOfSelectedFiles.js';\nexport default function FooterActions({ cancelSelection, donePicking, i18n, partialTree, validateAggregateRestrictions, }) {\n    const aggregateRestrictionError = useMemo(() => {\n        return validateAggregateRestrictions(partialTree);\n    }, [partialTree, validateAggregateRestrictions]);\n    const nOfSelectedFiles = useMemo(() => {\n        return getNumberOfSelectedFiles(partialTree);\n    }, [partialTree]);\n    if (nOfSelectedFiles === 0) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer\", children: [_jsxs(\"div\", { className: \"uppy-ProviderBrowser-footer-buttons\", children: [_jsx(\"button\", { className: classNames('uppy-u-reset uppy-c-btn uppy-c-btn-primary', {\n                            'uppy-c-btn--disabled': aggregateRestrictionError,\n                        }), disabled: !!aggregateRestrictionError, onClick: donePicking, type: \"button\", children: i18n('selectX', {\n                            smart_count: nOfSelectedFiles,\n                        }) }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link\", onClick: cancelSelection, type: \"button\", children: i18n('cancel') })] }), aggregateRestrictionError && (_jsx(\"div\", { className: \"uppy-ProviderBrowser-footer-error\", children: aggregateRestrictionError }))] }));\n}\n", "/**\n * We're interested in all 'checked' leaves of this tree,\n * but we don't yet know how many files there are inside of each checked folder.\n * `getNumberOfSelectedFiles()` returns the most intuitive number we can show to the user\n * in this situation.\n */\nconst getNumberOfSelectedFiles = (partialTree) => {\n    const checkedLeaves = partialTree.filter((item) => {\n        if (item.type === 'file' && item.status === 'checked') {\n            return true;\n        }\n        if (item.type === 'folder' && item.status === 'checked') {\n            const doesItHaveChildren = partialTree.some((i) => i.type !== 'root' && i.parentId === item.id);\n            return !doesItHaveChildren;\n        }\n        return false;\n    });\n    return checkedLeaves.length;\n};\nexport default getNumberOfSelectedFiles;\n", "const companionFileToUppyFile = (file, plugin, provider) => {\n    const name = file.name || file.id;\n    return {\n        id: file.id,\n        source: plugin.id,\n        name,\n        type: file.mimeType,\n        isRemote: true,\n        data: file,\n        preview: file.thumbnail || undefined,\n        // @ts-expect-error TODO: fixme\n        meta: {\n            // name, // todo shouldn't this be here?\n            authorName: file.author?.name,\n            authorUrl: file.author?.url,\n            // We need to do this `|| null` check, because null value\n            // for .relDirPath is `undefined` and for .relativePath is `null`.\n            // I do think we should just use `null` everywhere.\n            relativePath: file.relDirPath || null,\n            absolutePath: file.absDirPath,\n        },\n        body: {\n            fileId: file.id,\n        },\n        remote: {\n            companionUrl: plugin.opts.companionUrl,\n            url: `${provider.fileUrl(file.requestPath)}`,\n            body: {\n                fileId: file.id,\n            },\n            providerName: provider.name,\n            provider: provider.provider,\n            requestClientId: provider.provider,\n        },\n    };\n};\nexport default companionFileToUppyFile;\n", "import { getSafeFileId } from '@uppy/utils';\nimport companionFileToUppyFile from './companionFileToUppyFile.js';\nconst addFiles = (companionFiles, plugin, provider) => {\n    const uppyFiles = companionFiles.map((f) => companionFileToUppyFile(f, plugin, provider));\n    const filesToAdd = [];\n    const filesAlreadyAdded = [];\n    uppyFiles.forEach((file) => {\n        if (plugin.uppy.checkIfFileAlreadyExists(getSafeFileId(file, plugin.uppy.getID()))) {\n            filesAlreadyAdded.push(file);\n        }\n        else {\n            filesToAdd.push(file);\n        }\n    });\n    if (filesToAdd.length > 0) {\n        plugin.uppy.info(plugin.uppy.i18n('addedNumFiles', { numFiles: filesToAdd.length }));\n    }\n    if (filesAlreadyAdded.length > 0) {\n        plugin.uppy.info(`Not adding ${filesAlreadyAdded.length} files because they already exist`);\n    }\n    plugin.uppy.addFiles(filesToAdd);\n};\nexport default addFiles;\n", "// Shift-clicking selects a single consecutive list of items\n// starting at the previous click.\nconst getClickedRange = (clickedId, displayedPartialTree, isShiftKeyPressed, previousCheckbox) => {\n    const previousCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === previousCheckbox);\n    if (previousCheckboxIndex !== -1 && isShiftKeyPressed) {\n        const newCheckboxIndex = displayedPartialTree.findIndex((item) => item.id === clickedId);\n        const clickedRange = displayedPartialTree.slice(Math.min(previousCheckboxIndex, newCheckboxIndex), Math.max(previousCheckboxIndex, newCheckboxIndex) + 1);\n        return clickedRange.map((item) => item.id);\n    }\n    return [clickedId];\n};\nexport default getClickedRange;\n", "const handleError = (uppy) => (error) => {\n    // authError just means we're not authenticated, don't report it\n    if (error.isAuthError) {\n        return;\n    }\n    // AbortError means the user has clicked \"cancel\" on an operation\n    if (error.name === 'AbortError') {\n        uppy.log('Aborting request', 'warning');\n        return;\n    }\n    uppy.log(error, 'error');\n    if (error.name === 'UserFacingApiError') {\n        uppy.info({\n            message: uppy.i18n('companionError'),\n            details: uppy.i18n(error.message),\n        }, 'warning', 5000);\n    }\n};\nexport default handleError;\n", "const getBreadcrumbs = (partialTree, currentFolderId) => {\n    let folder = partialTree.find((f) => f.id === currentFolderId);\n    let breadcrumbs = [];\n    while (true) {\n        breadcrumbs = [folder, ...breadcrumbs];\n        if (folder.type === 'root')\n            break;\n        const currentParentId = folder.parentId;\n        folder = partialTree.find((f) => f.id === currentParentId);\n    }\n    return breadcrumbs;\n};\nexport default getBreadcrumbs;\n", "const getPath = (partialTree, id, cache) => {\n    const sId = id === null ? 'null' : id;\n    if (cache[sId])\n        return cache[sId];\n    const file = partialTree.find((f) => f.id === id);\n    if (file.type === 'root')\n        return [];\n    const meAndParentPath = [...getPath(partialTree, file.parentId, cache), file];\n    cache[sId] = meAndParentPath;\n    return meAndParentPath;\n};\n// See \"Uppy file properties\" documentation for `.absolutePath` and `.relativePath`\n// (https://uppy.io/docs/uppy/#working-with-uppy-files)\nconst getCheckedFilesWithPaths = (partialTree) => {\n    // Equivalent to `const cache = {}`, but makes keys such as 'hasOwnProperty' safe too\n    const cache = Object.create(null);\n    // We're only interested in injecting paths into 'checked' files\n    const checkedFiles = partialTree.filter((item) => item.type === 'file' && item.status === 'checked');\n    const companionFilesWithInjectedPaths = checkedFiles.map((file) => {\n        const absFolders = getPath(partialTree, file.id, cache);\n        const firstCheckedFolderIndex = absFolders.findIndex((i) => i.type === 'folder' && i.status === 'checked');\n        const relFolders = absFolders.slice(firstCheckedFolderIndex);\n        const absDirPath = `/${absFolders.map((i) => i.data.name).join('/')}`;\n        const relDirPath = relFolders.length === 1\n            ? // Must return `undefined` (which later turns into `null` in `.companionFileToUppyFile()`)\n                // (https://github.com/transloadit/uppy/pull/4537#issuecomment-1629136652)\n                undefined\n            : relFolders.map((i) => i.data.name).join('/');\n        return {\n            ...file.data,\n            absDirPath,\n            relDirPath,\n        };\n    });\n    return companionFilesWithInjectedPaths;\n};\nexport default getCheckedFilesWithPaths;\n", "import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n", "export class TimeoutError extends Error {\n\tconstructor(message) {\n\t\tsuper(message);\n\t\tthis.name = 'TimeoutError';\n\t}\n}\n\n/**\nAn error to be thrown when the request is aborted by AbortController.\nDOMException is thrown instead of this Error when DOMException is available.\n*/\nexport class AbortError extends Error {\n\tconstructor(message) {\n\t\tsuper();\n\t\tthis.name = 'AbortError';\n\t\tthis.message = message;\n\t}\n}\n\n/**\nTODO: Remove AbortError and just throw DOMException when targeting Node 18.\n*/\nconst getDOMException = errorMessage => globalThis.DOMException === undefined\n\t? new AbortError(errorMessage)\n\t: new DOMException(errorMessage);\n\n/**\nTODO: Remove below function and just 'reject(signal.reason)' when targeting Node 18.\n*/\nconst getAbortedReason = signal => {\n\tconst reason = signal.reason === undefined\n\t\t? getDOMException('This operation was aborted.')\n\t\t: signal.reason;\n\n\treturn reason instanceof Error ? reason : getDOMException(reason);\n};\n\nexport default function pTimeout(promise, options) {\n\tconst {\n\t\tmilliseconds,\n\t\tfallback,\n\t\tmessage,\n\t\tcustomTimers = {setTimeout, clearTimeout},\n\t} = options;\n\n\tlet timer;\n\tlet abortHandler;\n\n\tconst wrappedPromise = new Promise((resolve, reject) => {\n\t\tif (typeof milliseconds !== 'number' || Math.sign(milliseconds) !== 1) {\n\t\t\tthrow new TypeError(`Expected \\`milliseconds\\` to be a positive number, got \\`${milliseconds}\\``);\n\t\t}\n\n\t\tif (options.signal) {\n\t\t\tconst {signal} = options;\n\t\t\tif (signal.aborted) {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t}\n\n\t\t\tabortHandler = () => {\n\t\t\t\treject(getAbortedReason(signal));\n\t\t\t};\n\n\t\t\tsignal.addEventListener('abort', abortHandler, {once: true});\n\t\t}\n\n\t\tif (milliseconds === Number.POSITIVE_INFINITY) {\n\t\t\tpromise.then(resolve, reject);\n\t\t\treturn;\n\t\t}\n\n\t\t// We create the error outside of `setTimeout` to preserve the stack trace.\n\t\tconst timeoutError = new TimeoutError();\n\n\t\ttimer = customTimers.setTimeout.call(undefined, () => {\n\t\t\tif (fallback) {\n\t\t\t\ttry {\n\t\t\t\t\tresolve(fallback());\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (typeof promise.cancel === 'function') {\n\t\t\t\tpromise.cancel();\n\t\t\t}\n\n\t\t\tif (message === false) {\n\t\t\t\tresolve();\n\t\t\t} else if (message instanceof Error) {\n\t\t\t\treject(message);\n\t\t\t} else {\n\t\t\t\ttimeoutError.message = message ?? `Promise timed out after ${milliseconds} milliseconds`;\n\t\t\t\treject(timeoutError);\n\t\t\t}\n\t\t}, milliseconds);\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tresolve(await promise);\n\t\t\t} catch (error) {\n\t\t\t\treject(error);\n\t\t\t}\n\t\t})();\n\t});\n\n\tconst cancelablePromise = wrappedPromise.finally(() => {\n\t\tcancelablePromise.clear();\n\t\tif (abortHandler && options.signal) {\n\t\t\toptions.signal.removeEventListener('abort', abortHandler);\n\t\t}\n\t});\n\n\tcancelablePromise.clear = () => {\n\t\tcustomTimers.clearTimeout.call(undefined, timer);\n\t\ttimer = undefined;\n\t};\n\n\treturn cancelablePromise;\n}\n", "// Port of lower_bound from https://en.cppreference.com/w/cpp/algorithm/lower_bound\n// Used to compute insertion index to keep queue sorted after insertion\nexport default function lowerBound(array, value, comparator) {\n    let first = 0;\n    let count = array.length;\n    while (count > 0) {\n        const step = Math.trunc(count / 2);\n        let it = first + step;\n        if (comparator(array[it], value) <= 0) {\n            first = ++it;\n            count -= step + 1;\n        }\n        else {\n            count = step;\n        }\n    }\n    return first;\n}\n", "import lowerBound from './lower-bound.js';\nexport default class PriorityQueue {\n    #queue = [];\n    enqueue(run, options) {\n        options = {\n            priority: 0,\n            ...options,\n        };\n        const element = {\n            priority: options.priority,\n            id: options.id,\n            run,\n        };\n        if (this.size === 0 || this.#queue[this.size - 1].priority >= options.priority) {\n            this.#queue.push(element);\n            return;\n        }\n        const index = lowerBound(this.#queue, element, (a, b) => b.priority - a.priority);\n        this.#queue.splice(index, 0, element);\n    }\n    setPriority(id, priority) {\n        const index = this.#queue.findIndex((element) => element.id === id);\n        if (index === -1) {\n            throw new ReferenceError(`No promise function with the id \"${id}\" exists in the queue.`);\n        }\n        const [item] = this.#queue.splice(index, 1);\n        this.enqueue(item.run, { priority, id });\n    }\n    dequeue() {\n        const item = this.#queue.shift();\n        return item?.run;\n    }\n    filter(options) {\n        return this.#queue.filter((element) => element.priority === options.priority).map((element) => element.run);\n    }\n    get size() {\n        return this.#queue.length;\n    }\n}\n", "import { EventEmitter } from 'eventemitter3';\nimport pTimeout, { TimeoutError } from 'p-timeout';\nimport PriorityQueue from './priority-queue.js';\n/**\nPromise queue with concurrency control.\n*/\nexport default class PQueue extends EventEmitter {\n    #carryoverConcurrencyCount;\n    #isIntervalIgnored;\n    #intervalCount = 0;\n    #intervalCap;\n    #interval;\n    #intervalEnd = 0;\n    #intervalId;\n    #timeoutId;\n    #queue;\n    #queueClass;\n    #pending = 0;\n    // The `!` is needed because of https://github.com/microsoft/TypeScript/issues/32194\n    #concurrency;\n    #isPaused;\n    #throwOnTimeout;\n    // Use to assign a unique identifier to a promise function, if not explicitly specified\n    #idAssigner = 1n;\n    /**\n    Per-operation timeout in milliseconds. Operations fulfill once `timeout` elapses if they haven't already.\n\n    Applies to each future operation.\n    */\n    timeout;\n    // TODO: The `throwOnTimeout` option should affect the return types of `add()` and `addAll()`\n    constructor(options) {\n        super();\n        // eslint-disable-next-line @typescript-eslint/consistent-type-assertions\n        options = {\n            carryoverConcurrencyCount: false,\n            intervalCap: Number.POSITIVE_INFINITY,\n            interval: 0,\n            concurrency: Number.POSITIVE_INFINITY,\n            autoStart: true,\n            queueClass: PriorityQueue,\n            ...options,\n        };\n        if (!(typeof options.intervalCap === 'number' && options.intervalCap >= 1)) {\n            throw new TypeError(`Expected \\`intervalCap\\` to be a number from 1 and up, got \\`${options.intervalCap?.toString() ?? ''}\\` (${typeof options.intervalCap})`);\n        }\n        if (options.interval === undefined || !(Number.isFinite(options.interval) && options.interval >= 0)) {\n            throw new TypeError(`Expected \\`interval\\` to be a finite number >= 0, got \\`${options.interval?.toString() ?? ''}\\` (${typeof options.interval})`);\n        }\n        this.#carryoverConcurrencyCount = options.carryoverConcurrencyCount;\n        this.#isIntervalIgnored = options.intervalCap === Number.POSITIVE_INFINITY || options.interval === 0;\n        this.#intervalCap = options.intervalCap;\n        this.#interval = options.interval;\n        this.#queue = new options.queueClass();\n        this.#queueClass = options.queueClass;\n        this.concurrency = options.concurrency;\n        this.timeout = options.timeout;\n        this.#throwOnTimeout = options.throwOnTimeout === true;\n        this.#isPaused = options.autoStart === false;\n    }\n    get #doesIntervalAllowAnother() {\n        return this.#isIntervalIgnored || this.#intervalCount < this.#intervalCap;\n    }\n    get #doesConcurrentAllowAnother() {\n        return this.#pending < this.#concurrency;\n    }\n    #next() {\n        this.#pending--;\n        this.#tryToStartAnother();\n        this.emit('next');\n    }\n    #onResumeInterval() {\n        this.#onInterval();\n        this.#initializeIntervalIfNeeded();\n        this.#timeoutId = undefined;\n    }\n    get #isIntervalPaused() {\n        const now = Date.now();\n        if (this.#intervalId === undefined) {\n            const delay = this.#intervalEnd - now;\n            if (delay < 0) {\n                // Act as the interval was done\n                // We don't need to resume it here because it will be resumed on line 160\n                this.#intervalCount = (this.#carryoverConcurrencyCount) ? this.#pending : 0;\n            }\n            else {\n                // Act as the interval is pending\n                if (this.#timeoutId === undefined) {\n                    this.#timeoutId = setTimeout(() => {\n                        this.#onResumeInterval();\n                    }, delay);\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #tryToStartAnother() {\n        if (this.#queue.size === 0) {\n            // We can clear the interval (\"pause\")\n            // Because we can redo it later (\"resume\")\n            if (this.#intervalId) {\n                clearInterval(this.#intervalId);\n            }\n            this.#intervalId = undefined;\n            this.emit('empty');\n            if (this.#pending === 0) {\n                this.emit('idle');\n            }\n            return false;\n        }\n        if (!this.#isPaused) {\n            const canInitializeInterval = !this.#isIntervalPaused;\n            if (this.#doesIntervalAllowAnother && this.#doesConcurrentAllowAnother) {\n                const job = this.#queue.dequeue();\n                if (!job) {\n                    return false;\n                }\n                this.emit('active');\n                job();\n                if (canInitializeInterval) {\n                    this.#initializeIntervalIfNeeded();\n                }\n                return true;\n            }\n        }\n        return false;\n    }\n    #initializeIntervalIfNeeded() {\n        if (this.#isIntervalIgnored || this.#intervalId !== undefined) {\n            return;\n        }\n        this.#intervalId = setInterval(() => {\n            this.#onInterval();\n        }, this.#interval);\n        this.#intervalEnd = Date.now() + this.#interval;\n    }\n    #onInterval() {\n        if (this.#intervalCount === 0 && this.#pending === 0 && this.#intervalId) {\n            clearInterval(this.#intervalId);\n            this.#intervalId = undefined;\n        }\n        this.#intervalCount = this.#carryoverConcurrencyCount ? this.#pending : 0;\n        this.#processQueue();\n    }\n    /**\n    Executes all queued functions until it reaches the limit.\n    */\n    #processQueue() {\n        // eslint-disable-next-line no-empty\n        while (this.#tryToStartAnother()) { }\n    }\n    get concurrency() {\n        return this.#concurrency;\n    }\n    set concurrency(newConcurrency) {\n        if (!(typeof newConcurrency === 'number' && newConcurrency >= 1)) {\n            throw new TypeError(`Expected \\`concurrency\\` to be a number from 1 and up, got \\`${newConcurrency}\\` (${typeof newConcurrency})`);\n        }\n        this.#concurrency = newConcurrency;\n        this.#processQueue();\n    }\n    async #throwOnAbort(signal) {\n        return new Promise((_resolve, reject) => {\n            signal.addEventListener('abort', () => {\n                reject(signal.reason);\n            }, { once: true });\n        });\n    }\n    /**\n    Updates the priority of a promise function by its id, affecting its execution order. Requires a defined concurrency limit to take effect.\n\n    For example, this can be used to prioritize a promise function to run earlier.\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 0, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n\n    queue.setPriority('\uD83E\uDD80', 2);\n    ```\n\n    In this case, the promise function with `id: '\uD83E\uDD80'` runs second.\n\n    You can also deprioritize a promise function to delay its execution:\n\n    ```js\n    import PQueue from 'p-queue';\n\n    const queue = new PQueue({concurrency: 1});\n\n    queue.add(async () => '\uD83E\uDD84', {priority: 1});\n    queue.add(async () => '\uD83E\uDD80', {priority: 1, id: '\uD83E\uDD80'});\n    queue.add(async () => '\uD83E\uDD84');\n    queue.add(async () => '\uD83E\uDD84', {priority: 0});\n\n    queue.setPriority('\uD83E\uDD80', -1);\n    ```\n    Here, the promise function with `id: '\uD83E\uDD80'` executes last.\n    */\n    setPriority(id, priority) {\n        this.#queue.setPriority(id, priority);\n    }\n    async add(function_, options = {}) {\n        // In case `id` is not defined.\n        options.id ??= (this.#idAssigner++).toString();\n        options = {\n            timeout: this.timeout,\n            throwOnTimeout: this.#throwOnTimeout,\n            ...options,\n        };\n        return new Promise((resolve, reject) => {\n            this.#queue.enqueue(async () => {\n                this.#pending++;\n                try {\n                    options.signal?.throwIfAborted();\n                    this.#intervalCount++;\n                    let operation = function_({ signal: options.signal });\n                    if (options.timeout) {\n                        operation = pTimeout(Promise.resolve(operation), { milliseconds: options.timeout });\n                    }\n                    if (options.signal) {\n                        operation = Promise.race([operation, this.#throwOnAbort(options.signal)]);\n                    }\n                    const result = await operation;\n                    resolve(result);\n                    this.emit('completed', result);\n                }\n                catch (error) {\n                    if (error instanceof TimeoutError && !options.throwOnTimeout) {\n                        resolve();\n                        return;\n                    }\n                    reject(error);\n                    this.emit('error', error);\n                }\n                finally {\n                    this.#next();\n                }\n            }, options);\n            this.emit('add');\n            this.#tryToStartAnother();\n        });\n    }\n    async addAll(functions, options) {\n        return Promise.all(functions.map(async (function_) => this.add(function_, options)));\n    }\n    /**\n    Start (or resume) executing enqueued tasks within concurrency limit. No need to call this if queue is not paused (via `options.autoStart = false` or by `.pause()` method.)\n    */\n    start() {\n        if (!this.#isPaused) {\n            return this;\n        }\n        this.#isPaused = false;\n        this.#processQueue();\n        return this;\n    }\n    /**\n    Put queue execution on hold.\n    */\n    pause() {\n        this.#isPaused = true;\n    }\n    /**\n    Clear the queue.\n    */\n    clear() {\n        this.#queue = new this.#queueClass();\n    }\n    /**\n    Can be called multiple times. Useful if you for example add additional items at a later time.\n\n    @returns A promise that settles when the queue becomes empty.\n    */\n    async onEmpty() {\n        // Instantly resolve if the queue is empty\n        if (this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('empty');\n    }\n    /**\n    @returns A promise that settles when the queue size is less than the given limit: `queue.size < limit`.\n\n    If you want to avoid having the queue grow beyond a certain size you can `await queue.onSizeLessThan()` before adding a new item.\n\n    Note that this only limits the number of items waiting to start. There could still be up to `concurrency` jobs already running that this call does not include in its calculation.\n    */\n    async onSizeLessThan(limit) {\n        // Instantly resolve if the queue is empty.\n        if (this.#queue.size < limit) {\n            return;\n        }\n        await this.#onEvent('next', () => this.#queue.size < limit);\n    }\n    /**\n    The difference with `.onEmpty` is that `.onIdle` guarantees that all work from the queue has finished. `.onEmpty` merely signals that the queue is empty, but it could mean that some promises haven't completed yet.\n\n    @returns A promise that settles when the queue becomes empty, and all promises have completed; `queue.size === 0 && queue.pending === 0`.\n    */\n    async onIdle() {\n        // Instantly resolve if none pending and if nothing else is queued\n        if (this.#pending === 0 && this.#queue.size === 0) {\n            return;\n        }\n        await this.#onEvent('idle');\n    }\n    async #onEvent(event, filter) {\n        return new Promise(resolve => {\n            const listener = () => {\n                if (filter && !filter()) {\n                    return;\n                }\n                this.off(event, listener);\n                resolve();\n            };\n            this.on(event, listener);\n        });\n    }\n    /**\n    Size of the queue, the number of queued items waiting to run.\n    */\n    get size() {\n        return this.#queue.size;\n    }\n    /**\n    Size of the queue, filtered by the given options.\n\n    For example, this can be used to find the number of items remaining in the queue with a specific priority level.\n    */\n    sizeBy(options) {\n        // eslint-disable-next-line unicorn/no-array-callback-reference\n        return this.#queue.filter(options).length;\n    }\n    /**\n    Number of running items (no longer in the queue).\n    */\n    get pending() {\n        return this.#pending;\n    }\n    /**\n    Whether the queue is currently paused.\n    */\n    get isPaused() {\n        return this.#isPaused;\n    }\n}\n", "/**\n * One-level copying is sufficient as mutations within our `partialTree` are limited to properties\n * such as `.status`, `.cached`, `.nextPagePath`, and not `.data = { THIS }`.\n */\nconst shallowClone = (partialTree) => {\n    return partialTree.map((item) => ({ ...item }));\n};\nexport default shallowClone;\n", "// p-queue does not have a `\"main\"` field in its `package.json`, and that makes `import/no-unresolved` freak out.\n// We can safely ignore it because bundlers will happily use the `\"exports\"` field instead.\nimport PQueue from 'p-queue';\nimport shallowClone from './shallowClone.js';\nconst recursivelyFetch = async (queue, poorTree, poorFolder, apiList, validateSingleFile) => {\n    let items = [];\n    let currentPath = poorFolder.cached\n        ? poorFolder.nextPagePath\n        : poorFolder.id;\n    while (currentPath) {\n        const response = await apiList(currentPath);\n        items = items.concat(response.items);\n        currentPath = response.nextPagePath;\n    }\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: 'checked',\n        parentId: poorFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: restrictionError ? 'unchecked' : 'checked',\n            parentId: poorFolder.id,\n            data: file,\n        };\n    });\n    poorFolder.cached = true;\n    poorFolder.nextPagePath = null;\n    poorTree.push(...files, ...folders);\n    folders.forEach(async (folder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, folder, apiList, validateSingleFile));\n    });\n};\nconst afterFill = async (partialTree, apiList, validateSingleFile, reportProgress) => {\n    const queue = new PQueue({ concurrency: 6 });\n    // fill up the missing parts of a partialTree!\n    const poorTree = shallowClone(partialTree);\n    const poorFolders = poorTree.filter((item) => item.type === 'folder' &&\n        item.status === 'checked' &&\n        // either \"not yet cached at all\" or \"some pages are left to fetch\"\n        (item.cached === false || item.nextPagePath));\n    // per each poor folder, recursively fetch all files and make them .checked!\n    poorFolders.forEach((poorFolder) => {\n        queue.add(() => recursivelyFetch(queue, poorTree, poorFolder, apiList, validateSingleFile));\n    });\n    queue.on('completed', () => {\n        const nOfFilesChecked = poorTree.filter((i) => i.type === 'file' && i.status === 'checked').length;\n        reportProgress(nOfFilesChecked);\n    });\n    await queue.onIdle();\n    return poorTree;\n};\nexport default afterFill;\n", "const afterOpenFolder = (oldPartialTree, discoveredItems, clickedFolder, currentPagePath, validateSingleFile) => {\n    // Filter out existing items in the partial tree (we don't want duplicates)\n    // If we don't, we would get a duplicate when the item is already added to the partial tree in the search view\n    // and the user then enters its parent from the normal view e.g either through breadcrumbs or manually navigating to it.\n    const discoveredUniqueItems = discoveredItems.filter((i) => !oldPartialTree.find((f) => f.id === i.requestPath));\n    const discoveredFolders = discoveredUniqueItems.filter((i) => i.isFolder === true);\n    const discoveredFiles = discoveredUniqueItems.filter((i) => i.isFolder === false);\n    const isParentFolderChecked = clickedFolder.type === 'folder' && clickedFolder.status === 'checked';\n    const folders = discoveredFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: clickedFolder.id,\n        data: folder,\n    }));\n    const files = discoveredFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: clickedFolder.id,\n            data: file,\n        };\n    });\n    // just doing `clickedFolder.cached = true` in a non-mutating way\n    const updatedClickedFolder = {\n        ...clickedFolder,\n        cached: true,\n        nextPagePath: currentPagePath,\n    };\n    const partialTreeWithUpdatedClickedFolder = oldPartialTree.map((folder) => folder.id === updatedClickedFolder.id ? updatedClickedFolder : folder);\n    const newPartialTree = [\n        ...partialTreeWithUpdatedClickedFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterOpenFolder;\n", "const afterScrollFolder = (oldPartialTree, currentFolderId, items, nextPagePath, validateSingleFile) => {\n    const currentFolder = oldPartialTree.find((i) => i.id === currentFolderId);\n    const newFolders = items.filter((i) => i.isFolder === true);\n    const newFiles = items.filter((i) => i.isFolder === false);\n    // just doing `scrolledFolder.nextPagePath = ...` in a non-mutating way\n    const scrolledFolder = { ...currentFolder, nextPagePath };\n    const partialTreeWithUpdatedScrolledFolder = oldPartialTree.map((folder) => folder.id === scrolledFolder.id ? scrolledFolder : folder);\n    const isParentFolderChecked = scrolledFolder.type === 'folder' && scrolledFolder.status === 'checked';\n    const folders = newFolders.map((folder) => ({\n        type: 'folder',\n        id: folder.requestPath,\n        cached: false,\n        nextPagePath: null,\n        status: isParentFolderChecked ? 'checked' : 'unchecked',\n        parentId: scrolledFolder.id,\n        data: folder,\n    }));\n    const files = newFiles.map((file) => {\n        const restrictionError = validateSingleFile(file);\n        return {\n            type: 'file',\n            id: file.requestPath,\n            restrictionError,\n            status: isParentFolderChecked && !restrictionError ? 'checked' : 'unchecked',\n            parentId: scrolledFolder.id,\n            data: file,\n        };\n    });\n    const newPartialTree = [\n        ...partialTreeWithUpdatedScrolledFolder,\n        ...folders,\n        ...files,\n    ];\n    return newPartialTree;\n};\nexport default afterScrollFolder;\n", "import shallowClone from './shallowClone.js';\n/*\n  FROM        | TO\n\n  root        |  root\n    folder    |    folder\n    folder \u2705\uFE0E  |    folder \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      file    |      file \u2705\uFE0E\n      folder  |      folder \u2705\uFE0E\n        file  |        file \u2705\uFE0E\n    file      |    file\n    file      |    file\n*/\nconst percolateDown = (tree, id, shouldMarkAsChecked) => {\n    const children = tree.filter((item) => item.type !== 'root' && item.parentId === id);\n    children.forEach((item) => {\n        item.status =\n            shouldMarkAsChecked && !(item.type === 'file' && item.restrictionError)\n                ? 'checked'\n                : 'unchecked';\n        percolateDown(tree, item.id, shouldMarkAsChecked);\n    });\n};\n/*\n  FROM         | TO\n\n  root         |  root\n    folder     |    folder\n    folder     |    folder [\u25AC] ('partial' status)\n      file     |      file\n      folder   |      folder \u2705\uFE0E\n        file \u2705\uFE0E |       file \u2705\uFE0E\n    file       |    file\n    file       |    file\n*/\nconst percolateUp = (tree, id) => {\n    const folder = tree.find((item) => item.id === id);\n    if (folder.type === 'root')\n        return;\n    const validChildren = tree.filter((item) => \n    // is a child\n    item.type !== 'root' &&\n        item.parentId === folder.id &&\n        // does pass validations\n        !(item.type === 'file' && item.restrictionError));\n    const areAllChildrenChecked = validChildren.every((item) => item.status === 'checked');\n    const areAllChildrenUnchecked = validChildren.every((item) => item.status === 'unchecked');\n    /**\n     * We should *only* set parent folder to checked/unchecked if it has been fully read (`cached`).\n     * Otherwise, checking a nested folder from the search view also marks its parent as checked,\n     * which could be incorrect because there might be more unselected (unloaded) files.\n     *\n     * Example: /foo/bar/new/myfolder\n     * If we search for \"myfolder\", we only build the minimal path (using ProviderView.#buildSearchResultPath)\n     * up to that folder adding nodes for \"bar\", \"new\", and \"myfolder\" (assuming \"foo\" is already\n     * present in the partialTree as part of the root folder).\n     * Since \"foo\", \"bar\", and \"new\" aren\u2019t fully fetched yet, we don\u2019t know if they have other children.\n     * If the user checks \"myfolder\" from the search results and we propagate the checked state\n     * upward without verifying parent.cached, it would incorrectly mark all its parents as checked.\n     * Later, when the user navigates to any of \"foo\", \"bar\", \"new\" through the Normal View (via breadcrumbs or manually),\n     * PartialTreeUtils.afterOpenFolder would then incorrectly mark and display all its children as checked.\n     */\n    if (areAllChildrenChecked && folder.cached) {\n        folder.status = 'checked';\n    }\n    else if (areAllChildrenUnchecked) {\n        folder.status = 'unchecked';\n    }\n    else {\n        folder.status = 'partial';\n    }\n    percolateUp(tree, folder.parentId);\n};\nconst afterToggleCheckbox = (oldTree, checkedIds) => {\n    const tree = shallowClone(oldTree);\n    const newlyCheckedItems = tree.filter((item) => item.type !== 'root' && checkedIds.includes(item.id));\n    newlyCheckedItems.forEach((item) => {\n        // allow toggling:\n        const newStatus = item.status === 'checked' ? 'unchecked' : 'checked';\n        // and if it's a file, we need to respect restrictions\n        if (item.type === 'file') {\n            item.status = item.restrictionError ? 'unchecked' : newStatus;\n        }\n        else {\n            item.status = newStatus;\n        }\n        percolateDown(tree, item.id, item.status === 'checked');\n    });\n    // all checked items have the same parent so we only need to perlocate the first item\n    percolateUp(tree, newlyCheckedItems[0].parentId);\n    return tree;\n};\nexport default afterToggleCheckbox;\n", "import afterFill from './afterFill.js';\nimport afterOpenFolder from './afterOpenFolder.js';\nimport afterScrollFolder from './afterScrollFolder.js';\nimport afterToggleCheckbox from './afterToggleCheckbox.js';\nexport default {\n    afterOpenFolder,\n    afterScrollFolder,\n    afterToggleCheckbox,\n    afterFill,\n};\n", "const shouldHandleScroll = (event) => {\n    const { scrollHeight, scrollTop, offsetHeight } = event.target;\n    const scrollPosition = scrollHeight - (scrollTop + offsetHeight);\n    return scrollPosition < 50;\n};\nexport default shouldHandleScroll;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport ItemIcon from './ItemIcon.js';\nconst SearchResultItem = ({ i18n, item, toggleCheckbox, openFolder, }) => {\n    const isDisabled = 'restrictionError' in item &&\n        item.restrictionError != null &&\n        item.status !== 'checked';\n    return (_jsxs(\"li\", { className: classNames('uppy-ProviderBrowserItem', { 'uppy-ProviderBrowserItem--disabled': isDisabled }, { 'uppy-ProviderBrowserItem--noPreview': item.data.icon === 'video' }, { 'uppy-ProviderBrowserItem--is-checked': item.status === 'checked' }, { 'uppy-ProviderBrowserItem--is-partial': item.status === 'partial' }), title: ('restrictionError' in item ? item.restrictionError : undefined) ??\n            undefined, children: [_jsx(\"input\", { type: \"checkbox\", className: \"uppy-u-reset uppy-ProviderBrowserItem-checkbox\", onChange: () => toggleCheckbox(item, false), checked: item.status === 'checked', \"aria-label\": item.data.name ?? i18n('unnamed'), disabled: isDisabled, \"data-uppy-super-focusable\": true }), _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner\", disabled: isDisabled, \"aria-label\": item.data.name, onClick: () => {\n                    if (item.data.isFolder) {\n                        openFolder(item.id);\n                    }\n                }, children: [_jsx(\"div\", { className: \"uppy-ProviderBrowserItem-iconWrap\", children: _jsx(ItemIcon, { itemIconString: item.data.icon }) }), item.data.name ?? i18n('unnamed')] })] }));\n};\nexport default SearchResultItem;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport SearchResultItem from '../Item/components/SearchResultItem.js';\nconst GlobalSearchView = ({ searchResults, toggleCheckbox, openFolder, i18n, }) => {\n    if (searchResults.length === 0) {\n        return _jsx(\"div\", { className: \"uppy-Provider-empty\", children: i18n('noFilesFound') });\n    }\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-body\", children: _jsx(\"ul\", { className: \"uppy-ProviderBrowser-list\", children: searchResults.map((item) => (_jsx(SearchResultItem, { i18n: i18n, item: item, toggleCheckbox: toggleCheckbox, openFolder: openFolder }, item.id))) }) }));\n};\nexport default GlobalSearchView;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport Breadcrumbs from '../Breadcrumbs.js';\nimport User from './User.js';\nexport default function Header(props) {\n    return (_jsx(\"div\", { className: \"uppy-ProviderBrowser-header\", children: _jsxs(\"div\", { className: classNames('uppy-ProviderBrowser-headerBar', !props.showBreadcrumbs && 'uppy-ProviderBrowser-headerBar--simple'), children: [props.showBreadcrumbs && (_jsx(Breadcrumbs, { openFolder: props.openFolder, breadcrumbs: props.breadcrumbs, breadcrumbsIcon: props.pluginIcon?.(), title: props.title, i18n: props.i18n })), _jsx(User, { logout: props.logout, username: props.username, i18n: props.i18n })] }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function Breadcrumbs(props) {\n    const { openFolder, title, breadcrumbsIcon, breadcrumbs, i18n } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Provider-breadcrumbs\", children: [_jsx(\"div\", { className: \"uppy-Provider-breadcrumbsIcon\", children: breadcrumbsIcon }), breadcrumbs.map((folder, index) => (_jsxs(Fragment, { children: [_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn\", onClick: () => openFolder(folder.id), children: folder.type === 'root'\n                            ? title\n                            : (folder.data.name ?? i18n('unnamed')) }, folder.id), breadcrumbs.length === index + 1 ? '' : ' / '] })))] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Fragment } from 'preact';\nexport default function User({ i18n, logout, username }) {\n    return (_jsxs(Fragment, { children: [username && (_jsx(\"span\", { className: \"uppy-ProviderBrowser-user\", children: username }, \"username\")), _jsx(\"button\", { type: \"button\", onClick: logout, className: \"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout\", children: i18n('logOut') }, \"logout\")] }));\n}\n", "function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var t=\"undefined\"!=typeof self?self:global;const s=\"undefined\"!=typeof navigator,i=s&&\"undefined\"==typeof HTMLImageElement,n=!(\"undefined\"==typeof global||\"undefined\"==typeof process||!process.versions||!process.versions.node),r=t.Buffer,a=!!r,h=e=>void 0!==e;function f(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(h).length)}function l(e){let t=new Error(e);throw delete t.stack,t}function o(e){let t=function(e){let t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}const u=e=>String.fromCharCode.apply(null,e),d=\"undefined\"!=typeof TextDecoder?new TextDecoder(\"utf-8\"):void 0;class c{static from(e,t){return e instanceof this&&e.le===t?e:new c(e,void 0,void 0,t)}constructor(e,t=0,s,i){if(\"boolean\"==typeof i&&(this.le=i),Array.isArray(e)&&(e=new Uint8Array(e)),0===e)this.byteOffset=0,this.byteLength=0;else if(e instanceof ArrayBuffer){void 0===s&&(s=e.byteLength-t);let i=new DataView(e,t,s);this._swapDataView(i)}else if(e instanceof Uint8Array||e instanceof DataView||e instanceof c){void 0===s&&(s=e.byteLength-t),(t+=e.byteOffset)+s>e.byteOffset+e.byteLength&&l(\"Creating view outside of available memory in ArrayBuffer\");let i=new DataView(e.buffer,t,s);this._swapDataView(i)}else if(\"number\"==typeof e){let t=new DataView(new ArrayBuffer(e));this._swapDataView(t)}else l(\"Invalid input argument for BufferView: \"+e)}_swapArrayBuffer(e){this._swapDataView(new DataView(e))}_swapBuffer(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}_swapDataView(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}_lengthToEnd(e){return this.byteLength-e}set(e,t,s=c){return e instanceof DataView||e instanceof c?e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer&&(e=new Uint8Array(e)),e instanceof Uint8Array||l(\"BufferView.set(): Invalid data argument.\"),this.toUint8().set(e,t),new s(this,t,e.byteLength)}subarray(e,t){return t=t||this._lengthToEnd(e),new c(this,e,t)}toUint8(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}getUint8Array(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}getString(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return i=s,d?d.decode(i):a?Buffer.from(i).toString(\"utf8\"):decodeURIComponent(escape(u(i)));var i}getLatin1String(e=0,t=this.byteLength){let s=this.getUint8Array(e,t);return u(s)}getUnicodeString(e=0,t=this.byteLength){const s=[];for(let i=0;i<t&&e+i<this.byteLength;i+=2)s.push(this.getUint16(e+i));return u(s)}getInt8(e){return this.dataView.getInt8(e)}getUint8(e){return this.dataView.getUint8(e)}getInt16(e,t=this.le){return this.dataView.getInt16(e,t)}getInt32(e,t=this.le){return this.dataView.getInt32(e,t)}getUint16(e,t=this.le){return this.dataView.getUint16(e,t)}getUint32(e,t=this.le){return this.dataView.getUint32(e,t)}getFloat32(e,t=this.le){return this.dataView.getFloat32(e,t)}getFloat64(e,t=this.le){return this.dataView.getFloat64(e,t)}getFloat(e,t=this.le){return this.dataView.getFloat32(e,t)}getDouble(e,t=this.le){return this.dataView.getFloat64(e,t)}getUintBytes(e,t,s){switch(t){case 1:return this.getUint8(e,s);case 2:return this.getUint16(e,s);case 4:return this.getUint32(e,s);case 8:return this.getUint64&&this.getUint64(e,s)}}getUint(e,t,s){switch(t){case 8:return this.getUint8(e,s);case 16:return this.getUint16(e,s);case 32:return this.getUint32(e,s);case 64:return this.getUint64&&this.getUint64(e,s)}}toString(e){return this.dataView.toString(e,this.constructor.name)}ensureChunk(){}}function p(e,t){l(`${e} '${t}' was not loaded, try using full build of exifr.`)}class g extends Map{constructor(e){super(),this.kind=e}get(e,t){return this.has(e)||p(this.kind,e),t&&(e in t||function(e,t){l(`Unknown ${e} '${t}'.`)}(this.kind,e),t[e].enabled||p(this.kind,e)),super.get(e)}keyList(){return Array.from(this.keys())}}var m=new g(\"file parser\"),y=new g(\"segment parser\"),b=new g(\"file reader\");let w=t.fetch;function k(e,t){return(i=e).startsWith(\"data:\")||i.length>1e4?v(e,t,\"base64\"):n&&e.includes(\"://\")?O(e,t,\"url\",S):n?v(e,t,\"fs\"):s?O(e,t,\"url\",S):void l(\"Invalid input argument\");var i}async function O(e,t,s,i){return b.has(s)?v(e,t,s):i?async function(e,t){let s=await t(e);return new c(s)}(e,i):void l(`Parser ${s} is not loaded`)}async function v(e,t,s){let i=new(b.get(s))(e,t);return await i.read(),i}const S=e=>w(e).then((e=>e.arrayBuffer())),A=e=>new Promise(((t,s)=>{let i=new FileReader;i.onloadend=()=>t(i.result||new ArrayBuffer),i.onerror=s,i.readAsArrayBuffer(e)}));class U extends Map{get tagKeys(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}get tagValues(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}function x(e,t,s){let i=new U;for(let[e,t]of s)i.set(e,t);if(Array.isArray(t))for(let s of t)e.set(s,i);else e.set(t,i);return i}function C(e,t,s){let i,n=e.get(t);for(i of s)n.set(i[0],i[1])}const B=new Map,V=new Map,I=new Map,L=[\"chunked\",\"firstChunkSize\",\"firstChunkSizeNode\",\"firstChunkSizeBrowser\",\"chunkSize\",\"chunkLimit\"],T=[\"jfif\",\"xmp\",\"icc\",\"iptc\",\"ihdr\"],z=[\"tiff\",...T],P=[\"ifd0\",\"ifd1\",\"exif\",\"gps\",\"interop\"],F=[...z,...P],j=[\"makerNote\",\"userComment\"],E=[\"translateKeys\",\"translateValues\",\"reviveValues\",\"multiSegment\"],M=[...E,\"sanitize\",\"mergeOutput\",\"silentErrors\"];class _{get translate(){return this.translateKeys||this.translateValues||this.reviveValues}}class D extends _{get needed(){return this.enabled||this.deps.size>0}constructor(t,s,i,n){if(super(),e(this,\"enabled\",!1),e(this,\"skip\",new Set),e(this,\"pick\",new Set),e(this,\"deps\",new Set),e(this,\"translateKeys\",!1),e(this,\"translateValues\",!1),e(this,\"reviveValues\",!1),this.key=t,this.enabled=s,this.parse=this.enabled,this.applyInheritables(n),this.canBeFiltered=P.includes(t),this.canBeFiltered&&(this.dict=B.get(t)),void 0!==i)if(Array.isArray(i))this.parse=this.enabled=!0,this.canBeFiltered&&i.length>0&&this.translateTagSet(i,this.pick);else if(\"object\"==typeof i){if(this.enabled=!0,this.parse=!1!==i.parse,this.canBeFiltered){let{pick:e,skip:t}=i;e&&e.length>0&&this.translateTagSet(e,this.pick),t&&t.length>0&&this.translateTagSet(t,this.skip)}this.applyInheritables(i)}else!0===i||!1===i?this.parse=this.enabled=i:l(`Invalid options argument: ${i}`)}applyInheritables(e){let t,s;for(t of E)s=e[t],void 0!==s&&(this[t]=s)}translateTagSet(e,t){if(this.dict){let s,i,{tagKeys:n,tagValues:r}=this.dict;for(s of e)\"string\"==typeof s?(i=r.indexOf(s),-1===i&&(i=n.indexOf(Number(s))),-1!==i&&t.add(Number(n[i]))):t.add(s)}else for(let s of e)t.add(s)}finalizeFilters(){!this.enabled&&this.deps.size>0?(this.enabled=!0,X(this.pick,this.deps)):this.enabled&&this.pick.size>0&&X(this.pick,this.deps)}}var N={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},$=new Map;class R extends _{static useCached(e){let t=$.get(e);return void 0!==t||(t=new this(e),$.set(e,t)),t}constructor(e){super(),!0===e?this.setupFromTrue():void 0===e?this.setupFromUndefined():Array.isArray(e)?this.setupFromArray(e):\"object\"==typeof e?this.setupFromObject(e):l(`Invalid options argument ${e}`),void 0===this.firstChunkSize&&(this.firstChunkSize=s?this.firstChunkSizeBrowser:this.firstChunkSizeNode),this.mergeOutput&&(this.ifd1.enabled=!1),this.filterNestedSegmentTags(),this.traverseTiffDependencyTree(),this.checkLoadedPlugins()}setupFromUndefined(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=N[e];for(e of F)this[e]=new D(e,N[e],void 0,this)}setupFromTrue(){let e;for(e of L)this[e]=N[e];for(e of M)this[e]=N[e];for(e of j)this[e]=!0;for(e of F)this[e]=new D(e,!0,void 0,this)}setupFromArray(e){let t;for(t of L)this[t]=N[t];for(t of M)this[t]=N[t];for(t of j)this[t]=N[t];for(t of F)this[t]=new D(t,!1,void 0,this);this.setupGlobalFilters(e,void 0,P)}setupFromObject(e){let t;for(t of(P.ifd0=P.ifd0||P.image,P.ifd1=P.ifd1||P.thumbnail,Object.assign(this,e),L))this[t]=W(e[t],N[t]);for(t of M)this[t]=W(e[t],N[t]);for(t of j)this[t]=W(e[t],N[t]);for(t of z)this[t]=new D(t,N[t],e[t],this);for(t of P)this[t]=new D(t,N[t],e[t],this.tiff);this.setupGlobalFilters(e.pick,e.skip,P,F),!0===e.tiff?this.batchEnableWithBool(P,!0):!1===e.tiff?this.batchEnableWithUserValue(P,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,P):\"object\"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,P)}batchEnableWithBool(e,t){for(let s of e)this[s].enabled=t}batchEnableWithUserValue(e,t){for(let s of e){let e=t[s];this[s].enabled=!1!==e&&void 0!==e}}setupGlobalFilters(e,t,s,i=s){if(e&&e.length){for(let e of i)this[e].enabled=!1;let t=K(e,s);for(let[e,s]of t)X(this[e].pick,s),this[e].enabled=!0}else if(t&&t.length){let e=K(t,s);for(let[t,s]of e)X(this[t].skip,s)}}filterNestedSegmentTags(){let{ifd0:e,exif:t,xmp:s,iptc:i,icc:n}=this;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),s.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),n.enabled||e.skip.add(34675)}traverseTiffDependencyTree(){let{ifd0:e,exif:t,gps:s,interop:i}=this;i.needed&&(t.deps.add(40965),e.deps.add(40965)),t.needed&&e.deps.add(34665),s.needed&&e.deps.add(34853),this.tiff.enabled=P.some((e=>!0===this[e].enabled))||this.makerNote||this.userComment;for(let e of P)this[e].finalizeFilters()}get onlyTiff(){return!T.map((e=>this[e].enabled)).some((e=>!0===e))&&this.tiff.enabled}checkLoadedPlugins(){for(let e of z)this[e].enabled&&!y.has(e)&&p(\"segment parser\",e)}}function K(e,t){let s,i,n,r,a=[];for(n of t){for(r of(s=B.get(n),i=[],s))(e.includes(r[0])||e.includes(r[1]))&&i.push(r[0]);i.length&&a.push([n,i])}return a}function W(e,t){return void 0!==e?e:void 0!==t?t:void 0}function X(e,t){for(let s of t)e.add(s)}e(R,\"default\",N);class H{constructor(t){e(this,\"parsers\",{}),e(this,\"output\",{}),e(this,\"errors\",[]),e(this,\"pushToErrors\",(e=>this.errors.push(e))),this.options=R.useCached(t)}async read(e){this.file=await function(e,t){return\"string\"==typeof e?k(e,t):s&&!i&&e instanceof HTMLImageElement?k(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new c(e):s&&e instanceof Blob?O(e,t,\"blob\",A):void l(\"Invalid input argument\")}(e,this.options)}setup(){if(this.fileParser)return;let{file:e}=this,t=e.getUint16(0);for(let[s,i]of m)if(i.canHandle(e,t))return this.fileParser=new i(this.options,this.file,this.parsers),e[s]=!0;this.file.close&&this.file.close(),l(\"Unknown file format\")}async parse(){let{output:e,errors:t}=this;return this.setup(),this.options.silentErrors?(await this.executeParsers().catch(this.pushToErrors),t.push(...this.fileParser.errors)):await this.executeParsers(),this.file.close&&this.file.close(),this.options.silentErrors&&t.length>0&&(e.errors=t),f(s=e)?void 0:s;var s}async executeParsers(){let{output:e}=this;await this.fileParser.parse();let t=Object.values(this.parsers).map((async t=>{let s=await t.parse();t.assignToOutput(e,s)}));this.options.silentErrors&&(t=t.map((e=>e.catch(this.pushToErrors)))),await Promise.all(t)}async extractThumbnail(){this.setup();let{options:e,file:t}=this,s=y.get(\"tiff\",e);var i;if(t.tiff?i={start:0,type:\"tiff\"}:t.jpeg&&(i=await this.fileParser.getOrFindSegment(\"tiff\")),void 0===i)return;let n=await this.fileParser.ensureSegmentChunk(i),r=this.parsers.tiff=new s(n,e,t),a=await r.extractThumbnail();return t.close&&t.close(),a}}async function Y(e,t){let s=new H(t);return await s.read(e),s.parse()}var G=Object.freeze({__proto__:null,parse:Y,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R});class J{static findPosition(e,t){let s=e.getUint16(t+2)+2,i=\"function\"==typeof this.headerLength?this.headerLength(e,t,s):this.headerLength,n=t+i,r=s-i;return{offset:t,length:s,headerLength:i,start:n,size:r,end:n+r}}static parse(e,t={}){return new this(e,new R({[this.type]:t}),e).parse()}normalizeInput(e){return e instanceof c?e:new c(e)}constructor(t,s={},i){e(this,\"errors\",[]),e(this,\"raw\",new Map),e(this,\"handleError\",(e=>{if(!this.options.silentErrors)throw e;this.errors.push(e.message)})),this.chunk=this.normalizeInput(t),this.file=i,this.type=this.constructor.type,this.globalOptions=this.options=s,this.localOptions=s[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}translate(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}get output(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}translateBlock(e,t){let s=I.get(t),i=V.get(t),n=B.get(t),r=this.options[t],a=r.reviveValues&&!!s,h=r.translateValues&&!!i,f=r.translateKeys&&!!n,l={};for(let[t,r]of e)a&&s.has(t)?r=s.get(t)(r):h&&i.has(t)&&(r=this.translateValue(r,i.get(t))),f&&n.has(t)&&(t=n.get(t)||t),l[t]=r;return l}translateValue(e,t){return t[e]||t.DEFAULT||e}assignToOutput(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}assignObjectToOutput(e,t,s){if(this.globalOptions.mergeOutput)return Object.assign(e,s);e[t]?Object.assign(e[t],s):e[t]=s}}e(J,\"headerLength\",4),e(J,\"type\",void 0),e(J,\"multiSegment\",!1),e(J,\"canHandle\",(()=>!1));function q(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function Q(e){return e>=224&&e<=239}function Z(e,t,s){for(let[i,n]of y)if(n.canHandle(e,t,s))return i}class ee extends class{constructor(t,s,i){e(this,\"errors\",[]),e(this,\"ensureSegmentChunk\",(async e=>{let t=e.start,s=e.size||65536;if(this.file.chunked)if(this.file.available(t,s))e.chunk=this.file.subarray(t,s);else try{e.chunk=await this.file.readChunk(t,s)}catch(t){l(`Couldn't read segment: ${JSON.stringify(e)}. ${t.message}`)}else this.file.byteLength>t+s?e.chunk=this.file.subarray(t,s):void 0===e.size?e.chunk=this.file.subarray(t):l(\"Segment unreachable: \"+JSON.stringify(e));return e.chunk})),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=s,this.parsers=i}injectSegment(e,t){this.options[e].enabled&&this.createParser(e,t)}createParser(e,t){let s=new(y.get(e))(t,this.options,this.file);return this.parsers[e]=s}createParsers(e){for(let t of e){let{type:e,chunk:s}=t,i=this.options[e];if(i&&i.enabled){let t=this.parsers[e];t&&t.append||t||this.createParser(e,s)}}}async readSegments(e){let t=e.map(this.ensureSegmentChunk);await Promise.all(t)}}{constructor(...t){super(...t),e(this,\"appSegments\",[]),e(this,\"jpegSegments\",[]),e(this,\"unknownSegments\",[])}static canHandle(e,t){return 65496===t}async parse(){await this.findAppSegments(),await this.readSegments(this.appSegments),this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments)}setupSegmentFinderArgs(e){!0===e?(this.findAll=!0,this.wanted=new Set(y.keyList())):(e=void 0===e?y.keyList().filter((e=>this.options[e].enabled)):e.filter((e=>this.options[e].enabled&&y.has(e))),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}async findAppSegments(e=0,t){this.setupSegmentFinderArgs(t);let{file:s,findAll:i,wanted:n,remaining:r}=this;if(!i&&this.file.chunked&&(i=Array.from(n).some((e=>{let t=y.get(e),s=this.options[e];return t.multiSegment&&s.multiSegment})),i&&await this.file.readWhole()),e=this.findAppSegmentsInRange(e,s.byteLength),!this.options.onlyTiff&&s.chunked){let t=!1;for(;r.size>0&&!t&&(s.canReadNextChunk||this.unfinishedMultiSegment);){let{nextChunkOffset:i}=s,n=this.appSegments.some((e=>!this.file.available(e.offset||e.start,e.length||e.size)));if(t=e>i&&!n?!await s.readNextChunk(e):!await s.readNextChunk(i),void 0===(e=this.findAppSegmentsInRange(e,s.byteLength)))return}}}findAppSegmentsInRange(e,t){t-=2;let s,i,n,r,a,h,{file:f,findAll:l,wanted:o,remaining:u,options:d}=this;for(;e<t;e++)if(255===f.getUint8(e))if(s=f.getUint8(e+1),Q(s)){if(i=f.getUint16(e+2),n=Z(f,e,i),n&&o.has(n)&&(r=y.get(n),a=r.findPosition(f,e),h=d[n],a.type=n,this.appSegments.push(a),!l&&(r.multiSegment&&h.multiSegment?(this.unfinishedMultiSegment=a.chunkNumber<a.chunkCount,this.unfinishedMultiSegment||u.delete(n)):u.delete(n),0===u.size)))break;d.recordUnknownSegments&&(a=J.findPosition(f,e),a.marker=s,this.unknownSegments.push(a)),e+=i+1}else if(q(s)){if(i=f.getUint16(e+2),218===s&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:s}),e+=i+1}return e}mergeMultiSegments(){if(!this.appSegments.some((e=>e.multiSegment)))return;let e=function(e,t){let s,i,n,r=new Map;for(let a=0;a<e.length;a++)s=e[a],i=s[t],r.has(i)?n=r.get(i):r.set(i,n=[]),n.push(s);return Array.from(r)}(this.appSegments,\"type\");this.mergedAppSegments=e.map((([e,t])=>{let s=y.get(e,this.options);if(s.handleMultiSegments){return{type:e,chunk:s.handleMultiSegments(t)}}return t[0]}))}getSegment(e){return this.appSegments.find((t=>t.type===e))}async getOrFindSegment(e){let t=this.getSegment(e);return void 0===t&&(await this.findAppSegments(0,[e]),t=this.getSegment(e)),t}}e(ee,\"type\",\"jpeg\"),m.set(\"jpeg\",ee);const te=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4];class se extends J{parseHeader(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}parseTags(e,t,s=new Map){let{pick:i,skip:n}=this.options[t];i=new Set(i);let r=i.size>0,a=0===n.size,h=this.chunk.getUint16(e);e+=2;for(let f=0;f<h;f++){let h=this.chunk.getUint16(e);if(r){if(i.has(h)&&(s.set(h,this.parseTag(e,h,t)),i.delete(h),0===i.size))break}else!a&&n.has(h)||s.set(h,this.parseTag(e,h,t));e+=12}return s}parseTag(e,t,s){let{chunk:i}=this,n=i.getUint16(e+2),r=i.getUint32(e+4),a=te[n];if(a*r<=4?e+=8:e=i.getUint32(e+8),(n<1||n>13)&&l(`Invalid TIFF value type. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e}`),e>i.byteLength&&l(`Invalid TIFF value offset. block: ${s.toUpperCase()}, tag: ${t.toString(16)}, type: ${n}, offset ${e} is outside of chunk size ${i.byteLength}`),1===n)return i.getUint8Array(e,r);if(2===n)return\"\"===(h=function(e){for(;e.endsWith(\"\\0\");)e=e.slice(0,-1);return e}(h=i.getString(e,r)).trim())?void 0:h;var h;if(7===n)return i.getUint8Array(e,r);if(1===r)return this.parseTagValue(n,e);{let t=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 10:return Array;case 11:return Float32Array;case 12:return Float64Array;default:return Array}}(n))(r),s=a;for(let i=0;i<r;i++)t[i]=this.parseTagValue(n,e),e+=s;return t}}parseTagValue(e,t){let{chunk:s}=this;switch(e){case 1:return s.getUint8(t);case 3:return s.getUint16(t);case 4:return s.getUint32(t);case 5:return s.getUint32(t)/s.getUint32(t+4);case 6:return s.getInt8(t);case 8:return s.getInt16(t);case 9:return s.getInt32(t);case 10:return s.getInt32(t)/s.getInt32(t+4);case 11:return s.getFloat(t);case 12:return s.getDouble(t);case 13:return s.getUint32(t);default:l(`Invalid tiff type ${e}`)}}}class ie extends se{static canHandle(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}async parse(){this.parseHeader();let{options:e}=this;return e.ifd0.enabled&&await this.parseIfd0Block(),e.exif.enabled&&await this.safeParse(\"parseExifBlock\"),e.gps.enabled&&await this.safeParse(\"parseGpsBlock\"),e.interop.enabled&&await this.safeParse(\"parseInteropBlock\"),e.ifd1.enabled&&await this.safeParse(\"parseThumbnailBlock\"),this.createOutput()}safeParse(e){let t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}findIfd0Offset(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}findIfd1Offset(){if(void 0===this.ifd1Offset){this.findIfd0Offset();let e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}parseBlock(e,t){let s=new Map;return this[t]=s,this.parseTags(e,t,s),s}async parseIfd0Block(){if(this.ifd0)return;let{file:e}=this;this.findIfd0Offset(),this.ifd0Offset<8&&l(\"Malformed EXIF data\"),!e.chunked&&this.ifd0Offset>e.byteLength&&l(`IFD0 offset points to outside of file.\\nthis.ifd0Offset: ${this.ifd0Offset}, file.byteLength: ${e.byteLength}`),e.tiff&&await e.ensureChunk(this.ifd0Offset,o(this.options));let t=this.parseBlock(this.ifd0Offset,\"ifd0\");return 0!==t.size?(this.exifOffset=t.get(34665),this.interopOffset=t.get(40965),this.gpsOffset=t.get(34853),this.xmp=t.get(700),this.iptc=t.get(33723),this.icc=t.get(34675),this.options.sanitize&&(t.delete(34665),t.delete(40965),t.delete(34853),t.delete(700),t.delete(33723),t.delete(34675)),t):void 0}async parseExifBlock(){if(this.exif)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.exifOffset)return;this.file.tiff&&await this.file.ensureChunk(this.exifOffset,o(this.options));let e=this.parseBlock(this.exifOffset,\"exif\");return this.interopOffset||(this.interopOffset=e.get(40965)),this.makerNote=e.get(37500),this.userComment=e.get(37510),this.options.sanitize&&(e.delete(40965),e.delete(37500),e.delete(37510)),this.unpack(e,41728),this.unpack(e,41729),e}unpack(e,t){let s=e.get(t);s&&1===s.length&&e.set(t,s[0])}async parseGpsBlock(){if(this.gps)return;if(this.ifd0||await this.parseIfd0Block(),void 0===this.gpsOffset)return;let e=this.parseBlock(this.gpsOffset,\"gps\");return e&&e.has(2)&&e.has(4)&&(e.set(\"latitude\",ne(...e.get(2),e.get(1))),e.set(\"longitude\",ne(...e.get(4),e.get(3)))),e}async parseInteropBlock(){if(!this.interop&&(this.ifd0||await this.parseIfd0Block(),void 0!==this.interopOffset||this.exif||await this.parseExifBlock(),void 0!==this.interopOffset))return this.parseBlock(this.interopOffset,\"interop\")}async parseThumbnailBlock(e=!1){if(!this.ifd1&&!this.ifd1Parsed&&(!this.options.mergeOutput||e))return this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,\"ifd1\"),this.ifd1Parsed=!0),this.ifd1}async extractThumbnail(){if(this.headerParsed||this.parseHeader(),this.ifd1Parsed||await this.parseThumbnailBlock(!0),void 0===this.ifd1)return;let e=this.ifd1.get(513),t=this.ifd1.get(514);return this.chunk.getUint8Array(e,t)}get image(){return this.ifd0}get thumbnail(){return this.ifd1}createOutput(){let e,t,s,i={};for(t of P)if(e=this[t],!f(e))if(s=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if(\"ifd1\"===t)continue;Object.assign(i,s)}else i[t]=s;return this.makerNote&&(i.makerNote=this.makerNote),this.userComment&&(i.userComment=this.userComment),i}assignToOutput(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(let[s,i]of Object.entries(t))this.assignObjectToOutput(e,s,i)}}function ne(e,t,s,i){var n=e+t/60+s/3600;return\"S\"!==i&&\"W\"!==i||(n*=-1),n}e(ie,\"type\",\"tiff\"),e(ie,\"headerLength\",10),y.set(\"tiff\",ie);var re=Object.freeze({__proto__:null,default:G,Exifr:H,fileParsers:m,segmentParsers:y,fileReaders:b,tagKeys:B,tagValues:V,tagRevivers:I,createDictionary:x,extendDictionary:C,fetchUrlAsArrayBuffer:S,readBlobAsArrayBuffer:A,chunkedProps:L,otherSegments:T,segments:z,tiffBlocks:P,segmentsAndBlocks:F,tiffExtractables:j,inheritables:E,allFormatters:M,Options:R,parse:Y});const ae={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1},he=Object.assign({},ae,{firstChunkSize:4e4,gps:[1,2,3,4]});async function fe(e){let t=new H(he);await t.read(e);let s=await t.parse();if(s&&s.gps){let{latitude:e,longitude:t}=s.gps;return{latitude:e,longitude:t}}}const le=Object.assign({},ae,{tiff:!1,ifd1:!0,mergeOutput:!1});async function oe(e){let t=new H(le);await t.read(e);let s=await t.extractThumbnail();return s&&a?r.from(s):s}async function ue(e){let t=await this.thumbnail(e);if(void 0!==t){let e=new Blob([t]);return URL.createObjectURL(e)}}const de=Object.assign({},ae,{firstChunkSize:4e4,ifd0:[274]});async function ce(e){let t=new H(de);await t.read(e);let s=await t.parse();if(s&&s.ifd0)return s.ifd0[274]}const pe=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}});let ge=!0,me=!0;if(\"object\"==typeof navigator){let e=navigator.userAgent;if(e.includes(\"iPad\")||e.includes(\"iPhone\")){let t=e.match(/OS (\\d+)_(\\d+)/);if(t){let[,e,s]=t,i=Number(e)+.1*Number(s);ge=i<13.4,me=!1}}else if(e.includes(\"OS X 10\")){let[,t]=e.match(/OS X 10[_.](\\d+)/);ge=me=Number(t)<15}if(e.includes(\"Chrome/\")){let[,t]=e.match(/Chrome\\/(\\d+)/);ge=me=Number(t)<81}else if(e.includes(\"Firefox/\")){let[,t]=e.match(/Firefox\\/(\\d+)/);ge=me=Number(t)<77}}async function ye(e){let t=await ce(e);return Object.assign({canvas:ge,css:me},pe[t])}class be extends c{constructor(...t){super(...t),e(this,\"ranges\",new we),0!==this.byteLength&&this.ranges.add(0,this.byteLength)}_tryExtend(e,t,s){if(0===e&&0===this.byteLength&&s){let e=new DataView(s.buffer||s,s.byteOffset,s.byteLength);this._swapDataView(e)}else{let s=e+t;if(s>this.byteLength){let{dataView:e}=this._extend(s);this._swapDataView(e)}}}_extend(e){let t;t=a?r.allocUnsafe(e):new Uint8Array(e);let s=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:s}}subarray(e,t,s=!1){return t=t||this._lengthToEnd(e),s&&this._tryExtend(e,t),this.ranges.add(e,t),super.subarray(e,t)}set(e,t,s=!1){s&&this._tryExtend(t,e.byteLength,e);let i=super.set(e,t);return this.ranges.add(t,i.byteLength),i}async ensureChunk(e,t){this.chunked&&(this.ranges.available(e,t)||await this.readChunk(e,t))}available(e,t){return this.ranges.available(e,t)}}class we{constructor(){e(this,\"list\",[])}get length(){return this.list.length}add(e,t,s=0){let i=e+t,n=this.list.filter((t=>ke(e,t.offset,i)||ke(e,t.end,i)));if(n.length>0){e=Math.min(e,...n.map((e=>e.offset))),i=Math.max(i,...n.map((e=>e.end))),t=i-e;let s=n.shift();s.offset=e,s.length=t,s.end=i,this.list=this.list.filter((e=>!n.includes(e)))}else this.list.push({offset:e,length:t,end:i})}available(e,t){let s=e+t;return this.list.some((t=>t.offset<=e&&s<=t.end))}}function ke(e,t,s){return e<=t&&t<=s}class Oe extends be{constructor(t,s){super(0),e(this,\"chunksRead\",0),this.input=t,this.options=s}async readWhole(){this.chunked=!1,await this.readChunk(this.nextChunkOffset)}async readChunked(){this.chunked=!0,await this.readChunk(0,this.options.firstChunkSize)}async readNextChunk(e=this.nextChunkOffset){if(this.fullyRead)return this.chunksRead++,!1;let t=this.options.chunkSize,s=await this.readChunk(e,t);return!!s&&s.byteLength===t}async readChunk(e,t){if(this.chunksRead++,0!==(t=this.safeWrapAddress(e,t)))return this._readChunk(e,t)}safeWrapAddress(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}get nextChunkOffset(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}get canReadNextChunk(){return this.chunksRead<this.options.chunkLimit}get fullyRead(){return void 0!==this.size&&this.nextChunkOffset===this.size}read(){return this.options.chunked?this.readChunked():this.readWhole()}close(){}}b.set(\"blob\",class extends Oe{async readWhole(){this.chunked=!1;let e=await A(this.input);this._swapArrayBuffer(e)}readChunked(){return this.chunked=!0,this.size=this.input.size,super.readChunked()}async _readChunk(e,t){let s=t?e+t:void 0,i=this.input.slice(e,s),n=await A(i);return this.set(n,e,!0)}});export default re;export{H as Exifr,R as Options,M as allFormatters,L as chunkedProps,x as createDictionary,C as extendDictionary,S as fetchUrlAsArrayBuffer,m as fileParsers,b as fileReaders,fe as gps,he as gpsOnlyOptions,E as inheritables,ce as orientation,de as orientationOnlyOptions,T as otherSegments,Y as parse,A as readBlobAsArrayBuffer,ge as rotateCanvas,me as rotateCss,ye as rotation,pe as rotations,y as segmentParsers,z as segments,F as segmentsAndBlocks,B as tagKeys,I as tagRevivers,V as tagValues,oe as thumbnail,le as thumbnailOnlyOptions,ue as thumbnailUrl,P as tiffBlocks,j as tiffExtractables};\n", "{\n  \"name\": \"@uppy/thumbnail-generator\",\n  \"description\": \"Uppy plugin that generates small previews of images to show on your upload UI.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"thumbnail\",\n    \"preview\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"exifr\": \"^7.0.0\"\n  },\n  \"devDependencies\": {\n    \"jsdom\": \"^26.1.0\",\n    \"namespace-emitter\": \"2.0.1\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "export default {\n    strings: {\n        generatingThumbnails: 'Generating thumbnails...',\n    },\n};\n", "import { UIPlugin } from '@uppy/core';\nimport { dataURItoBlob, isObjectURL, isPreviewSupported } from '@uppy/utils';\n// @ts-ignore untyped\nimport { rotation } from 'exifr/dist/mini.esm.mjs';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\n/**\n * Save a <canvas> element's content to a Blob object.\n *\n */\nfunction canvasToBlob(canvas, type, quality) {\n    try {\n        canvas.getContext('2d').getImageData(0, 0, 1, 1);\n    }\n    catch (err) {\n        if (err.code === 18) {\n            return Promise.reject(new Error('cannot read image, probably an svg with external resources'));\n        }\n    }\n    if (canvas.toBlob) {\n        return new Promise((resolve) => {\n            canvas.toBlob(resolve, type, quality);\n        }).then((blob) => {\n            if (blob === null) {\n                throw new Error('cannot read image, probably an svg with external resources');\n            }\n            return blob;\n        });\n    }\n    return Promise.resolve()\n        .then(() => {\n        return dataURItoBlob(canvas.toDataURL(type, quality), {});\n    })\n        .then((blob) => {\n        if (blob === null) {\n            throw new Error('could not extract blob, probably an old browser');\n        }\n        return blob;\n    });\n}\nfunction rotateImage(image, translate) {\n    let w = image.width;\n    let h = image.height;\n    if (translate.deg === 90 || translate.deg === 270) {\n        w = image.height;\n        h = image.width;\n    }\n    const canvas = document.createElement('canvas');\n    canvas.width = w;\n    canvas.height = h;\n    const context = canvas.getContext('2d');\n    context.translate(w / 2, h / 2);\n    if (translate.canvas) {\n        context.rotate(translate.rad);\n        context.scale(translate.scaleX, translate.scaleY);\n    }\n    context.drawImage(image, -image.width / 2, -image.height / 2, image.width, image.height);\n    return canvas;\n}\n/**\n * Make sure the image doesn\u2019t exceed browser/device canvas limits.\n * For ios with 256 RAM and ie\n */\nfunction protect(image) {\n    // https://stackoverflow.com/questions/6081483/maximum-size-of-a-canvas-element\n    const ratio = image.width / image.height;\n    const maxSquare = 5000000; // ios max canvas square\n    const maxSize = 4096; // ie max canvas dimensions\n    let maxW = Math.floor(Math.sqrt(maxSquare * ratio));\n    let maxH = Math.floor(maxSquare / Math.sqrt(maxSquare * ratio));\n    if (maxW > maxSize) {\n        maxW = maxSize;\n        maxH = Math.round(maxW / ratio);\n    }\n    if (maxH > maxSize) {\n        maxH = maxSize;\n        maxW = Math.round(ratio * maxH);\n    }\n    if (image.width > maxW) {\n        const canvas = document.createElement('canvas');\n        canvas.width = maxW;\n        canvas.height = maxH;\n        canvas.getContext('2d').drawImage(image, 0, 0, maxW, maxH);\n        return canvas;\n    }\n    return image;\n}\nconst defaultOptions = {\n    thumbnailWidth: null,\n    thumbnailHeight: null,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    lazy: false,\n};\n/**\n * The Thumbnail Generator plugin\n */\nexport default class ThumbnailGenerator extends UIPlugin {\n    static VERSION = packageJson.version;\n    queue;\n    queueProcessing;\n    defaultThumbnailDimension;\n    thumbnailType;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.type = 'modifier';\n        this.id = this.opts.id || 'ThumbnailGenerator';\n        this.title = 'Thumbnail Generator';\n        this.queue = [];\n        this.queueProcessing = false;\n        this.defaultThumbnailDimension = 200;\n        this.thumbnailType = this.opts.thumbnailType;\n        this.defaultLocale = locale;\n        this.i18nInit();\n        if (this.opts.lazy && this.opts.waitForThumbnailsBeforeUpload) {\n            throw new Error('ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.');\n        }\n    }\n    createThumbnail(file, targetWidth, targetHeight) {\n        if (file.data == null)\n            throw new Error('File data is empty');\n        const originalUrl = URL.createObjectURL(file.data);\n        const onload = new Promise((resolve, reject) => {\n            const image = new Image();\n            image.src = originalUrl;\n            image.addEventListener('load', () => {\n                URL.revokeObjectURL(originalUrl);\n                resolve(image);\n            });\n            image.addEventListener('error', (event) => {\n                URL.revokeObjectURL(originalUrl);\n                reject(event.error || new Error('Could not create thumbnail'));\n            });\n        });\n        const orientationPromise = rotation(file.data).catch(() => 1);\n        return Promise.all([onload, orientationPromise])\n            .then(([image, orientation]) => {\n            const dimensions = this.getProportionalDimensions(image, targetWidth, targetHeight, orientation.deg);\n            const rotatedImage = rotateImage(image, orientation);\n            const resizedImage = this.resizeImage(rotatedImage, dimensions.width, dimensions.height);\n            return canvasToBlob(resizedImage, this.thumbnailType, 80);\n        })\n            .then((blob) => {\n            return URL.createObjectURL(blob);\n        });\n    }\n    /**\n     * Get the new calculated dimensions for the given image and a target width\n     * or height. If both width and height are given, only width is taken into\n     * account. If neither width nor height are given, the default dimension\n     * is used.\n     */\n    getProportionalDimensions(img, width, height, deg) {\n        let aspect = img.width / img.height;\n        if (deg === 90 || deg === 270) {\n            aspect = img.height / img.width;\n        }\n        if (width != null) {\n            let targetWidth = width;\n            // Thumbnail shouldn\u2019t be enlarged / upscaled, only reduced.\n            // If img is already smaller than width/height, leave it as is.\n            if (img.width < width)\n                targetWidth = img.width;\n            return {\n                width: targetWidth,\n                height: Math.round(targetWidth / aspect),\n            };\n        }\n        if (height != null) {\n            let targetHeight = height;\n            if (img.height < height)\n                targetHeight = img.height;\n            return {\n                width: Math.round(targetHeight * aspect),\n                height: targetHeight,\n            };\n        }\n        return {\n            width: this.defaultThumbnailDimension,\n            height: Math.round(this.defaultThumbnailDimension / aspect),\n        };\n    }\n    /**\n     * Resize an image to the target `width` and `height`.\n     *\n     * Returns a Canvas with the resized image on it.\n     */\n    resizeImage(image, targetWidth, targetHeight) {\n        // Resizing in steps refactored to use a solution from\n        // https://blog.uploadcare.com/image-resize-in-browsers-is-broken-e38eed08df01\n        let img = protect(image);\n        let steps = Math.ceil(Math.log2(img.width / targetWidth));\n        if (steps < 1) {\n            steps = 1;\n        }\n        let sW = targetWidth * 2 ** (steps - 1);\n        let sH = targetHeight * 2 ** (steps - 1);\n        const x = 2;\n        while (steps--) {\n            const canvas = document.createElement('canvas');\n            canvas.width = sW;\n            canvas.height = sH;\n            canvas.getContext('2d').drawImage(img, 0, 0, sW, sH);\n            img = canvas;\n            sW = Math.round(sW / x);\n            sH = Math.round(sH / x);\n        }\n        return img;\n    }\n    /**\n     * Set the preview URL for a file.\n     */\n    setPreviewURL(fileID, preview) {\n        this.uppy.setFileState(fileID, { preview });\n    }\n    addToQueue(fileID) {\n        this.queue.push(fileID);\n        if (this.queueProcessing === false) {\n            this.processQueue();\n        }\n    }\n    processQueue() {\n        this.queueProcessing = true;\n        if (this.queue.length > 0) {\n            const current = this.uppy.getFile(this.queue.shift());\n            if (!current) {\n                this.uppy.log('[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug', 'error');\n                return Promise.resolve();\n            }\n            return this.requestThumbnail(current)\n                .catch(() => { })\n                .then(() => this.processQueue());\n        }\n        this.queueProcessing = false;\n        this.uppy.log('[ThumbnailGenerator] Emptied thumbnail queue');\n        this.uppy.emit('thumbnail:all-generated');\n        return Promise.resolve();\n    }\n    requestThumbnail(file) {\n        if (isPreviewSupported(file.type) && !file.isRemote) {\n            return this.createThumbnail(file, this.opts.thumbnailWidth, this.opts.thumbnailHeight)\n                .then((preview) => {\n                this.setPreviewURL(file.id, preview);\n                this.uppy.log(`[ThumbnailGenerator] Generated thumbnail for ${file.id}`);\n                this.uppy.emit('thumbnail:generated', this.uppy.getFile(file.id), preview);\n            })\n                .catch((err) => {\n                this.uppy.log(`[ThumbnailGenerator] Failed thumbnail for ${file.id}:`, 'warning');\n                this.uppy.log(err, 'warning');\n                this.uppy.emit('thumbnail:error', this.uppy.getFile(file.id), err);\n            });\n        }\n        return Promise.resolve();\n    }\n    onFileAdded = (file) => {\n        if (!file.preview &&\n            file.data &&\n            isPreviewSupported(file.type) &&\n            !file.isRemote) {\n            this.addToQueue(file.id);\n        }\n    };\n    /**\n     * Cancel a lazy request for a thumbnail if the thumbnail has not yet been generated.\n     */\n    onCancelRequest = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n    };\n    /**\n     * Clean up the thumbnail for a file. Cancel lazy requests and free the thumbnail URL.\n     */\n    onFileRemoved = (file) => {\n        const index = this.queue.indexOf(file.id);\n        if (index !== -1) {\n            this.queue.splice(index, 1);\n        }\n        // Clean up object URLs.\n        if (file.preview && isObjectURL(file.preview)) {\n            URL.revokeObjectURL(file.preview);\n        }\n    };\n    onRestored = () => {\n        const restoredFiles = this.uppy.getFiles().filter((file) => file.isRestored);\n        restoredFiles.forEach((file) => {\n            // Only add blob URLs; they are likely invalid after being restored.\n            if (!file.preview || isObjectURL(file.preview)) {\n                this.addToQueue(file.id);\n            }\n        });\n    };\n    onAllFilesRemoved = () => {\n        this.queue = [];\n    };\n    waitUntilAllProcessed = (fileIDs) => {\n        fileIDs.forEach((fileID) => {\n            const file = this.uppy.getFile(fileID);\n            this.uppy.emit('preprocess-progress', file, {\n                mode: 'indeterminate',\n                message: this.i18n('generatingThumbnails'),\n            });\n        });\n        const emitPreprocessCompleteForAll = () => {\n            fileIDs.forEach((fileID) => {\n                const file = this.uppy.getFile(fileID);\n                this.uppy.emit('preprocess-complete', file);\n            });\n        };\n        return new Promise((resolve) => {\n            if (this.queueProcessing) {\n                this.uppy.once('thumbnail:all-generated', () => {\n                    emitPreprocessCompleteForAll();\n                    resolve();\n                });\n            }\n            else {\n                emitPreprocessCompleteForAll();\n                resolve();\n            }\n        });\n    };\n    install() {\n        this.uppy.on('file-removed', this.onFileRemoved);\n        this.uppy.on('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.on('thumbnail:request', this.onFileAdded);\n            this.uppy.on('file-added', this.onFileAdded);\n            this.uppy.on('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.addPreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n    uninstall() {\n        this.uppy.off('file-removed', this.onFileRemoved);\n        this.uppy.off('cancel-all', this.onAllFilesRemoved);\n        if (this.opts.lazy) {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('thumbnail:cancel', this.onCancelRequest);\n        }\n        else {\n            this.uppy.off('thumbnail:request', this.onFileAdded);\n            this.uppy.off('file-added', this.onFileAdded);\n            this.uppy.off('restored', this.onRestored);\n        }\n        if (this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.removePreProcessor(this.waitUntilAllProcessed);\n        }\n    }\n}\n", "{\n  \"name\": \"@uppy/dashboard\",\n  \"description\": \"Universal UI plugin for Uppy.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --silent='passed-only'\",\n    \"test:e2e\": \"vitest run --project browser\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"dashboard\",\n    \"ui\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@transloadit/prettier-bytes\": \"^0.3.4\",\n    \"@uppy/provider-views\": \"^5.2.0\",\n    \"@uppy/thumbnail-generator\": \"^5.1.0\",\n    \"@uppy/utils\": \"^7.1.4\",\n    \"classnames\": \"^2.2.6\",\n    \"lodash\": \"^4.17.21\",\n    \"nanoid\": \"^5.0.9\",\n    \"preact\": \"^10.5.13\",\n    \"shallow-equal\": \"^3.0.0\"\n  },\n  \"devDependencies\": {\n    \"@uppy/core\": \"^5.2.0\",\n    \"@uppy/dropbox\": \"^5.1.0\",\n    \"@uppy/google-drive\": \"^5.1.0\",\n    \"@uppy/url\": \"^5.1.0\",\n    \"@uppy/webcam\": \"^5.1.0\",\n    \"@vitest/browser\": \"^3.2.4\",\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"playwright\": \"1.54.1\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"resize-observer-polyfill\": \"^1.5.0\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { isDragDropSupported } from '@uppy/utils';\nimport classNames from 'classnames';\nimport AddFiles from './AddFiles.js';\nimport AddFilesPanel from './AddFilesPanel.js';\nimport EditorPanel from './EditorPanel.js';\nimport FileCard from './FileCard/index.js';\nimport FileList from './FileList.js';\nimport Informer from './Informer/Informer.js';\nimport PickerPanelContent from './PickerPanelContent.js';\nimport PanelTopBar from './PickerPanelTopBar.js';\nimport Slide from './Slide.js';\nimport StatusBar from './StatusBar/StatusBar.js';\n// http://dev.edenspiekermann.com/2016/02/11/introducing-accessible-modal-dialog\n// https://github.com/ghosh/micromodal\nconst WIDTH_XL = 900;\nconst WIDTH_LG = 700;\nconst WIDTH_MD = 576;\nconst HEIGHT_MD = 330;\nexport default function Dashboard(props) {\n    const isNoFiles = props.totalFileCount === 0;\n    const isSingleFile = props.totalFileCount === 1;\n    const isSizeMD = props.containerWidth > WIDTH_MD;\n    const isSizeHeightMD = props.containerHeight > HEIGHT_MD;\n    const dashboardClassName = classNames({\n        'uppy-Dashboard': true,\n        'uppy-Dashboard--isDisabled': props.disabled,\n        'uppy-Dashboard--animateOpenClose': props.animateOpenClose,\n        'uppy-Dashboard--isClosing': props.isClosing,\n        'uppy-Dashboard--isDraggingOver': props.isDraggingOver,\n        'uppy-Dashboard--modal': !props.inline,\n        'uppy-size--md': props.containerWidth > WIDTH_MD,\n        'uppy-size--lg': props.containerWidth > WIDTH_LG,\n        'uppy-size--xl': props.containerWidth > WIDTH_XL,\n        'uppy-size--height-md': props.containerHeight > HEIGHT_MD,\n        // We might want to enable this in the future\n        // 'uppy-size--height-lg': props.containerHeight > HEIGHT_LG,\n        // 'uppy-size--height-xl': props.containerHeight > HEIGHT_XL,\n        'uppy-Dashboard--isAddFilesPanelVisible': props.showAddFilesPanel,\n        'uppy-Dashboard--isInnerWrapVisible': props.areInsidesReadyToBeVisible,\n        // Only enable \u201Ccentered single file\u201D mode when Dashboard is tall enough\n        'uppy-Dashboard--singleFile': props.singleFileFullScreen && isSingleFile && isSizeHeightMD,\n    });\n    // Important: keep these in sync with the percent width values in `src/components/FileItem/index.scss`.\n    let itemsPerRow = 1; // mobile\n    if (props.containerWidth > WIDTH_XL) {\n        itemsPerRow = 5;\n    }\n    else if (props.containerWidth > WIDTH_LG) {\n        itemsPerRow = 4;\n    }\n    else if (props.containerWidth > WIDTH_MD) {\n        itemsPerRow = 3;\n    }\n    const showFileList = props.showSelectedFiles && !isNoFiles;\n    const numberOfFilesForRecovery = props.recoveredState\n        ? Object.keys(props.recoveredState.files).length\n        : null;\n    const numberOfGhosts = props.files\n        ? Object.keys(props.files).filter((fileID) => props.files[fileID].isGhost)\n            .length\n        : 0;\n    const renderRestoredText = () => {\n        if (numberOfGhosts > 0) {\n            return props.i18n('recoveredXFiles', {\n                smart_count: numberOfGhosts,\n            });\n        }\n        return props.i18n('recoveredAllFiles');\n    };\n    const dashboard = (\n    // biome-ignore lint/a11y/useAriaPropsSupportedByRole: ...\n    _jsxs(\"div\", { className: dashboardClassName, \"data-uppy-theme\": props.theme, \"data-uppy-num-acquirers\": props.acquirers.length, \"data-uppy-drag-drop-supported\": !props.disableLocalFiles && isDragDropSupported(), \"aria-hidden\": props.inline ? 'false' : props.isHidden, \"aria-disabled\": props.disabled, \"aria-label\": !props.inline\n            ? props.i18n('dashboardWindowTitle')\n            : props.i18n('dashboardTitle'), onPaste: props.handlePaste, onDragOver: props.handleDragOver, onDragLeave: props.handleDragLeave, onDrop: props.handleDrop, children: [_jsx(\"div\", { \"aria-hidden\": \"true\", className: \"uppy-Dashboard-overlay\", tabIndex: -1, onClick: props.handleClickOutside }), _jsxs(\"div\", { className: \"uppy-Dashboard-inner\", role: props.inline ? undefined : 'dialog', style: {\n                    width: props.inline && props.width ? props.width : '',\n                    height: props.inline && props.height ? props.height : '',\n                }, children: [!props.inline ? (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-close\", type: \"button\", \"aria-label\": props.i18n('closeModal'), title: props.i18n('closeModal'), onClick: props.closeModal, children: _jsx(\"span\", { \"aria-hidden\": \"true\", children: \"\\u00D7\" }) })) : null, _jsxs(\"div\", { className: \"uppy-Dashboard-innerWrap\", children: [_jsx(\"div\", { className: \"uppy-Dashboard-dropFilesHereHint\", children: props.i18n('dropHint') }), showFileList && _jsx(PanelTopBar, { ...props }), numberOfFilesForRecovery != null && numberOfFilesForRecovery > 0 && (_jsxs(\"div\", { className: \"uppy-Dashboard-serviceMsg\", children: [_jsx(\"svg\", { className: \"uppy-Dashboard-serviceMsg-icon\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"21\", height: \"16\", viewBox: \"0 0 24 19\", children: _jsxs(\"g\", { transform: \"translate(0 -1)\", fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z\", fill: \"#FFD300\" }), _jsx(\"path\", { fill: \"#000\", d: \"M11 6h2l-.3 8h-1.4z\" }), _jsx(\"circle\", { fill: \"#000\", cx: \"12\", cy: \"17\", r: \"1\" })] }) }), _jsx(\"strong\", { className: \"uppy-Dashboard-serviceMsg-title\", children: props.i18n('sessionRestored') }), _jsx(\"div\", { className: \"uppy-Dashboard-serviceMsg-text\", children: renderRestoredText() })] })), showFileList ? (_jsx(FileList, { id: props.id, i18n: props.i18n, uppy: props.uppy, files: props.files, resumableUploads: props.resumableUploads, hideRetryButton: props.hideRetryButton, hidePauseResumeButton: props.hidePauseResumeButton, hideCancelButton: props.hideCancelButton, showLinkToFileUploadResult: props.showLinkToFileUploadResult, showRemoveButtonAfterComplete: props.showRemoveButtonAfterComplete, metaFields: props.metaFields, toggleFileCard: props.toggleFileCard, handleRequestThumbnail: props.handleRequestThumbnail, handleCancelThumbnail: props.handleCancelThumbnail, recoveredState: props.recoveredState, individualCancellation: props.individualCancellation, openFileEditor: props.openFileEditor, canEditFile: props.canEditFile, toggleAddFilesPanel: props.toggleAddFilesPanel, isSingleFile: isSingleFile, itemsPerRow: itemsPerRow, containerWidth: props.containerWidth, containerHeight: props.containerHeight })) : (_jsx(AddFiles, { i18n: props.i18n, i18nArray: props.i18nArray, acquirers: props.acquirers, handleInputChange: props.handleInputChange, maxNumberOfFiles: props.maxNumberOfFiles, allowedFileTypes: props.allowedFileTypes, showNativePhotoCameraButton: props.showNativePhotoCameraButton, showNativeVideoCameraButton: props.showNativeVideoCameraButton, nativeCameraFacingMode: props.nativeCameraFacingMode, showPanel: props.showPanel, activePickerPanel: props.activePickerPanel, disableLocalFiles: props.disableLocalFiles, fileManagerSelectionType: props.fileManagerSelectionType, note: props.note, proudlyDisplayPoweredByUppy: props.proudlyDisplayPoweredByUppy })), _jsx(Slide, { children: props.showAddFilesPanel ? (_jsx(AddFilesPanel, { ...props, isSizeMD: isSizeMD }, \"AddFiles\")) : null }), _jsx(Slide, { children: props.fileCardFor ? _jsx(FileCard, { ...props }, \"FileCard\") : null }), _jsx(Slide, { children: props.activePickerPanel ? (_jsx(PickerPanelContent, { ...props }, \"Picker\")) : null }), _jsx(Slide, { children: props.showFileEditor ? (_jsx(EditorPanel, { ...props }, \"Editor\")) : null }), _jsxs(\"div\", { className: \"uppy-Dashboard-progressindicators\", children: [!props.disableInformer && _jsx(Informer, { uppy: props.uppy }), !props.disableStatusBar && (_jsx(StatusBar, { uppy: props.uppy, i18n: props.i18n, hideProgressDetails: props.hideProgressDetails, hideUploadButton: props.hideUploadButton, hideRetryButton: props.hideRetryButton, hidePauseResumeButton: props.hidePauseResumeButton, hideCancelButton: props.hideCancelButton, hideAfterFinish: props.hideProgressAfterFinish, doneButtonHandler: props.doneButtonHandler })), !props.disableInformer && _jsx(Informer, { uppy: props.uppy }), props.progressindicators.map((target) => {\n                                        // TODO\n                                        // Here we're telling typescript all `this.type = 'progressindicator'` plugins inherit from `UIPlugin`\n                                        // This is factually true in Uppy right now, but maybe it doesn't have to be\n                                        return props.uppy.getPlugin(target.id).render(props.state);\n                                    })] })] })] })] }));\n    return dashboard;\n}\n", "import { jsx as _jsx, jsxs as _jsxs, Fragment as _Fragment } from \"preact/jsx-runtime\";\nimport { Component, Fragment } from 'preact';\nclass AddFiles extends Component {\n    fileInput = null;\n    folderInput = null;\n    mobilePhotoFileInput = null;\n    mobileVideoFileInput = null;\n    triggerFileInputClick = () => {\n        this.fileInput?.click();\n    };\n    triggerFolderInputClick = () => {\n        this.folderInput?.click();\n    };\n    triggerVideoCameraInputClick = () => {\n        this.mobileVideoFileInput?.click();\n    };\n    triggerPhotoCameraInputClick = () => {\n        this.mobilePhotoFileInput?.click();\n    };\n    onFileInputChange = (event) => {\n        this.props.handleInputChange(event);\n        // Clear the input so that Chrome/Safari/etc. can detect file section when the same file is repeatedly selected\n        // (see https://github.com/transloadit/uppy/issues/768#issuecomment-2264902758)\n        event.currentTarget.value = '';\n    };\n    renderHiddenInput = (isFolder, refCallback) => {\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, \n            // @ts-expect-error default types don't yet know about the `webkitdirectory` property\n            webkitdirectory: isFolder, type: \"file\", name: \"files[]\", multiple: this.props.maxNumberOfFiles !== 1, onChange: this.onFileInputChange, accept: this.props.allowedFileTypes?.join(', '), ref: refCallback }));\n    };\n    renderHiddenCameraInput = (type, nativeCameraFacingMode, refCallback) => {\n        const typeToAccept = { photo: 'image/*', video: 'video/*' };\n        const accept = typeToAccept[type];\n        return (_jsx(\"input\", { className: \"uppy-Dashboard-input\", hidden: true, \"aria-hidden\": \"true\", tabIndex: -1, type: \"file\", name: `camera-${type}`, onChange: this.onFileInputChange, capture: nativeCameraFacingMode === '' ? 'environment' : nativeCameraFacingMode, accept: accept, ref: refCallback }));\n    };\n    renderMyDeviceAcquirer = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MyDevice\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerFileInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { className: \"uppy-DashboardTab-iconMyDevice\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M8.45 22.087l-1.305-6.674h17.678l-1.572 6.674H8.45zm4.975-12.412l1.083 1.765a.823.823 0 00.715.386h7.951V13.5H8.587V9.675h4.838zM26.043 13.5h-1.195v-2.598c0-.463-.336-.75-.798-.75h-8.356l-1.082-1.766A.823.823 0 0013.897 8H7.728c-.462 0-.815.256-.815.718V13.5h-.956a.97.97 0 00-.746.37.972.972 0 00-.19.81l1.724 8.565c.095.44.484.755.933.755H24c.44 0 .824-.3.929-.727l2.043-8.568a.972.972 0 00-.176-.825.967.967 0 00-.753-.38z\", fill: \"currentcolor\", \"fill-rule\": \"evenodd\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('myDevice') })] }) }));\n    };\n    renderPhotoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobilePhotoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerPhotoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z\", fill: \"#02B383\", \"fill-rule\": \"nonzero\" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('takePictureBtn') })] }) }));\n    };\n    renderVideoCamera = () => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": \"MobileVideoCamera\", children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-uppy-super-focusable\": true, onClick: this.triggerVideoCameraInputClick, children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: _jsx(\"svg\", { \"aria-hidden\": \"true\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { fill: \"#FF675E\", fillRule: \"nonzero\", d: \"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z \" }) }) }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: this.props.i18n('recordVideoBtn') })] }) }));\n    };\n    renderBrowseButton = (text, onClickFn) => {\n        const numberOfAcquirers = this.props.acquirers.length;\n        return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-browse\", onClick: onClickFn, \"data-uppy-super-focusable\": numberOfAcquirers === 0, children: text }));\n    };\n    renderDropPasteBrowseTagline = (numberOfAcquirers) => {\n        const browseFiles = this.renderBrowseButton(this.props.i18n('browseFiles'), this.triggerFileInputClick);\n        const browseFolders = this.renderBrowseButton(this.props.i18n('browseFolders'), this.triggerFolderInputClick);\n        // in order to keep the i18n CamelCase and options lower (as are defaults) we will want to transform a lower\n        // to Camel\n        const lowerFMSelectionType = this.props.fileManagerSelectionType;\n        const camelFMSelectionType = lowerFMSelectionType.charAt(0).toUpperCase() +\n            lowerFMSelectionType.slice(1);\n        return (_jsx(\"div\", { class: \"uppy-Dashboard-AddFiles-title\", children: this.props.disableLocalFiles\n                ? this.props.i18n('importFiles')\n                : numberOfAcquirers > 0\n                    ? this.props.i18nArray(`dropPasteImport${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    })\n                    : this.props.i18nArray(`dropPaste${camelFMSelectionType}`, {\n                        browseFiles,\n                        browseFolders,\n                        browse: browseFiles,\n                    }) }));\n    };\n    [Symbol.for('uppy test: disable unused locale key warning')]() {\n        // Those are actually used in `renderDropPasteBrowseTagline` method.\n        this.props.i18nArray('dropPasteBoth');\n        this.props.i18nArray('dropPasteFiles');\n        this.props.i18nArray('dropPasteFolders');\n        this.props.i18nArray('dropPasteImportBoth');\n        this.props.i18nArray('dropPasteImportFiles');\n        this.props.i18nArray('dropPasteImportFolders');\n    }\n    renderAcquirer = (acquirer) => {\n        return (_jsx(\"div\", { className: \"uppy-DashboardTab\", role: \"presentation\", \"data-uppy-acquirer-id\": acquirer.id, children: _jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn\", role: \"tab\", tabIndex: 0, \"data-cy\": acquirer.id, \"aria-controls\": `uppy-DashboardContent-panel--${acquirer.id}`, \"aria-selected\": this.props.activePickerPanel?.id === acquirer.id, \"data-uppy-super-focusable\": true, onClick: () => this.props.showPanel(acquirer.id), children: [_jsx(\"div\", { className: \"uppy-DashboardTab-inner\", children: acquirer.icon() }), _jsx(\"div\", { className: \"uppy-DashboardTab-name\", children: acquirer.name })] }) }));\n    };\n    renderAcquirers = (acquirers) => {\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const acquirersWithoutLastTwo = [...acquirers];\n        const lastTwoAcquirers = acquirersWithoutLastTwo.splice(acquirers.length - 2, acquirers.length);\n        return (_jsxs(_Fragment, { children: [acquirersWithoutLastTwo.map((acquirer) => this.renderAcquirer(acquirer)), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwoAcquirers.map((acquirer) => this.renderAcquirer(acquirer)) })] }));\n    };\n    renderSourcesList = (acquirers, disableLocalFiles) => {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton } = this.props;\n        let list = [];\n        const myDeviceKey = 'myDevice';\n        if (!disableLocalFiles)\n            list.push({\n                key: myDeviceKey,\n                elements: this.renderMyDeviceAcquirer(),\n            });\n        if (showNativePhotoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderPhotoCamera(),\n            });\n        if (showNativeVideoCameraButton)\n            list.push({\n                key: 'nativePhotoCameraButton',\n                elements: this.renderVideoCamera(),\n            });\n        list.push(...acquirers.map((acquirer) => ({\n            key: acquirer.id,\n            elements: this.renderAcquirer(acquirer),\n        })));\n        // doesn't make sense to show only a lonely \"My Device\"\n        const hasOnlyMyDevice = list.length === 1 && list[0].key === myDeviceKey;\n        if (hasOnlyMyDevice)\n            list = [];\n        // Group last two buttons, so we don\u2019t end up with\n        // just one button on a new line\n        const listWithoutLastTwo = [...list];\n        const lastTwo = listWithoutLastTwo.splice(list.length - 2, list.length);\n        return (_jsxs(_Fragment, { children: [this.renderDropPasteBrowseTagline(list.length), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-list\", role: \"tablist\", children: [listWithoutLastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))), _jsx(\"span\", { role: \"presentation\", style: { 'white-space': 'nowrap' }, children: lastTwo.map(({ key, elements }) => (_jsx(Fragment, { children: elements }, key))) })] })] }));\n    };\n    renderPoweredByUppy() {\n        const { i18nArray } = this.props;\n        const uppyBranding = (_jsxs(\"span\", { children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-poweredByIcon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z\", fillRule: \"evenodd\" }) }), _jsx(\"span\", { className: \"uppy-Dashboard-poweredByUppy\", children: \"Uppy\" })] }));\n        const linkText = i18nArray('poweredBy', { uppy: uppyBranding });\n        return (_jsx(\"a\", { tabIndex: -1, href: \"https://uppy.io\", rel: \"noreferrer noopener\", target: \"_blank\", className: \"uppy-Dashboard-poweredBy\", children: linkText }));\n    }\n    render() {\n        const { showNativePhotoCameraButton, showNativeVideoCameraButton, nativeCameraFacingMode, } = this.props;\n        return (_jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles\", children: [this.renderHiddenInput(false, (ref) => {\n                    this.fileInput = ref;\n                }), this.renderHiddenInput(true, (ref) => {\n                    this.folderInput = ref;\n                }), showNativePhotoCameraButton &&\n                    this.renderHiddenCameraInput('photo', nativeCameraFacingMode, (ref) => {\n                        this.mobilePhotoFileInput = ref;\n                    }), showNativeVideoCameraButton &&\n                    this.renderHiddenCameraInput('video', nativeCameraFacingMode, (ref) => {\n                        this.mobileVideoFileInput = ref;\n                    }), this.renderSourcesList(this.props.acquirers, this.props.disableLocalFiles), _jsxs(\"div\", { className: \"uppy-Dashboard-AddFiles-info\", children: [this.props.note && (_jsx(\"div\", { className: \"uppy-Dashboard-note\", children: this.props.note })), this.props.proudlyDisplayPoweredByUppy && this.renderPoweredByUppy()] })] }));\n    }\n}\nexport default AddFiles;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport AddFiles from './AddFiles.js';\nconst AddFilesPanel = (props) => {\n    return (_jsxs(\"div\", { className: classNames('uppy-Dashboard-AddFilesPanel', props.className), \"data-uppy-panelType\": \"AddFiles\", \"aria-hidden\": !props.showAddFilesPanel, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18n('addingMoreFiles') }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => props.toggleAddFilesPanel(false), children: props.i18n('back') })] }), _jsx(AddFiles, { ...props })] }));\n};\nexport default AddFilesPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nfunction EditorPanel(props) {\n    const file = props.files[props.fileCardFor];\n    const handleCancel = () => {\n        props.uppy.emit('file-editor:cancel', file);\n        props.closeFileEditor();\n    };\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', props.className), role: \"tabpanel\", \"data-uppy-panelType\": \"FileEditor\", id: \"uppy-DashboardContent-panel--editor\", children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: props.i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: handleCancel, children: props.i18n('cancel') }), _jsx(\"button\", { className: \"uppy-DashboardContent-save\", type: \"button\", onClick: props.saveFileEditor, children: props.i18n('save') })] }), _jsx(\"div\", { className: \"uppy-DashboardContent-panelBody\", children: props.editors.map((target) => {\n                    return props.uppy.getPlugin(target.id).render(props.state);\n                }) })] }));\n}\nexport default EditorPanel;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { nanoid } from 'nanoid/non-secure';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport getFileTypeIcon from '../../utils/getFileTypeIcon.js';\nimport ignoreEvent from '../../utils/ignoreEvent.js';\nimport FilePreview from '../FilePreview.js';\nimport RenderMetaFields from './RenderMetaFields.js';\nexport default function FileCard(props) {\n    const { files, fileCardFor, toggleFileCard, saveFileCard, metaFields, requiredMetaFields, openFileEditor, i18n, i18nArray, className, canEditFile, } = props;\n    const getMetaFields = () => {\n        return typeof metaFields === 'function'\n            ? metaFields(files[fileCardFor])\n            : metaFields;\n    };\n    const file = files[fileCardFor];\n    const computedMetaFields = getMetaFields() ?? [];\n    const showEditButton = canEditFile(file);\n    const storedMetaData = {};\n    computedMetaFields.forEach((field) => {\n        storedMetaData[field.id] = file.meta[field.id] ?? '';\n    });\n    const [formState, setFormState] = useState(storedMetaData);\n    const handleSave = useCallback((ev) => {\n        ev.preventDefault();\n        saveFileCard(formState, fileCardFor);\n    }, [saveFileCard, formState, fileCardFor]);\n    const updateMeta = (newVal, name) => {\n        setFormState({\n            ...formState,\n            [name]: newVal,\n        });\n    };\n    const handleCancel = () => {\n        toggleFileCard(false);\n    };\n    const [form] = useState(() => {\n        const formEl = document.createElement('form');\n        formEl.setAttribute('tabindex', '-1');\n        formEl.id = nanoid();\n        return formEl;\n    });\n    // We need to know where Uppy is being rendered\n    const domRef = useRef(null);\n    useEffect(() => {\n        /**\n         * Use the \"rootNode\" of whereever Uppy is rendered, falling back\n         * to `window.document` if domRef isn't initialized for some reason\n         */\n        const rootNode = domRef.current?.getRootNode() ?? document;\n        /**\n         * This is the case for the Light DOM and <iframes>.\n         * In these scenarios, we don't want to append a child to an\n         * <html> element, but to the <body>\n         */\n        if (rootNode instanceof Document) {\n            rootNode.body.appendChild(form);\n        }\n        // This is the case for the Shadow DOM\n        else if (rootNode instanceof ShadowRoot) {\n            rootNode.appendChild(form);\n        }\n        // Everything else (realistically there isn't)\n        else {\n            rootNode.appendChild(form);\n        }\n        form.addEventListener('submit', handleSave);\n        return () => {\n            form.removeEventListener('submit', handleSave);\n            // check if form is still in the DOM before removing\n            if (form.parentNode) {\n                form.parentNode.removeChild(form);\n            }\n        };\n    }, [form, handleSave]);\n    return (\n    // biome-ignore lint/a11y/noStaticElementInteractions: ...\n    _jsxs(\"div\", { className: classNames('uppy-Dashboard-FileCard', className), \"data-uppy-panelType\": \"FileCard\", onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, ref: domRef, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18nArray('editing', {\n                            file: (_jsx(\"span\", { className: \"uppy-DashboardContent-titleFile\", children: file.meta ? file.meta.name : file.name })),\n                        }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", form: form.id, title: i18n('finishEditingFile'), onClick: handleCancel, children: i18n('cancel') })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-inner\", children: [_jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-preview\", style: { backgroundColor: getFileTypeIcon(file.type).color }, children: [_jsx(FilePreview, { file: file }), showEditButton && (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit\", onClick: (event) => {\n                                    // When opening the image editor we want to save any meta fields changes.\n                                    // Otherwise it's confusing for the user to click save in the editor,\n                                    // but the changes here are discarded. This bypasses validation,\n                                    // but we are okay with that.\n                                    handleSave(event);\n                                    openFileEditor(file);\n                                }, children: i18n('editImage') }))] }), _jsx(\"div\", { className: \"uppy-Dashboard-FileCard-info\", children: _jsx(RenderMetaFields, { computedMetaFields: computedMetaFields, requiredMetaFields: requiredMetaFields, updateMeta: updateMeta, form: form, formState: formState }) }), _jsxs(\"div\", { className: \"uppy-Dashboard-FileCard-actions\", children: [_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn\", \n                                // If `form` attribute is supported, we want a submit button to trigger the form validation.\n                                // Otherwise, fallback to a classic button with a onClick event handler.\n                                type: \"submit\", form: form.id, children: i18n('saveChanges') }), _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn\", type: \"button\", onClick: handleCancel, form: form.id, children: i18n('cancel') })] })] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction iconImage() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#686DE0\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z\", fillRule: \"nonzero\" }), _jsx(\"path\", { d: \"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z\", fillRule: \"nonzero\" }), _jsx(\"circle\", { cx: \"7.5\", cy: \"9.5\", r: \"1.5\" })] }) }));\n}\nfunction iconAudio() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z\", fill: \"#049BCF\", fillRule: \"nonzero\" }) }));\n}\nfunction iconVideo() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z\", fill: \"#19AF67\", fillRule: \"nonzero\" }) }));\n}\nfunction iconPDF() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z\", fill: \"#E2514A\", fillRule: \"nonzero\" }) }));\n}\nfunction iconArchive() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z\", fill: \"#00C469\", fillRule: \"nonzero\" }) }));\n}\nfunction iconFile() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsxs(\"g\", { fill: \"#A7AFB7\", fillRule: \"nonzero\", children: [_jsx(\"path\", { d: \"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z\" }), _jsx(\"path\", { d: \"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z\" })] }) }));\n}\nfunction iconText() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"25\", height: \"25\", viewBox: \"0 0 25 25\", children: _jsx(\"path\", { d: \"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z\", fill: \"#5A5E69\", fillRule: \"nonzero\" }) }));\n}\nexport default function getIconByMime(fileType) {\n    const defaultChoice = {\n        color: '#838999',\n        icon: iconFile(),\n    };\n    if (!fileType)\n        return defaultChoice;\n    const fileTypeGeneral = fileType.split('/')[0];\n    const fileTypeSpecific = fileType.split('/')[1];\n    // Text\n    if (fileTypeGeneral === 'text') {\n        return {\n            color: '#5a5e69',\n            icon: iconText(),\n        };\n    }\n    // Image\n    if (fileTypeGeneral === 'image') {\n        return {\n            color: '#686de0',\n            icon: iconImage(),\n        };\n    }\n    // Audio\n    if (fileTypeGeneral === 'audio') {\n        return {\n            color: '#068dbb',\n            icon: iconAudio(),\n        };\n    }\n    // Video\n    if (fileTypeGeneral === 'video') {\n        return {\n            color: '#19af67',\n            icon: iconVideo(),\n        };\n    }\n    // PDF\n    if (fileTypeGeneral === 'application' && fileTypeSpecific === 'pdf') {\n        return {\n            color: '#e25149',\n            icon: iconPDF(),\n        };\n    }\n    // Archive\n    const archiveTypes = [\n        'zip',\n        'x-7z-compressed',\n        'x-zip-compressed',\n        'x-rar-compressed',\n        'x-tar',\n        'x-gzip',\n        'x-apple-diskimage',\n    ];\n    if (fileTypeGeneral === 'application' &&\n        archiveTypes.indexOf(fileTypeSpecific) !== -1) {\n        return {\n            color: '#00C469',\n            icon: iconArchive(),\n        };\n    }\n    return defaultChoice;\n}\n", "// ignore drop/paste events if they are not in input or textarea \u2014\n// otherwise when Url plugin adds drop/paste listeners to this.el,\n// draging UI elements or pasting anything into any field triggers those events \u2014\n// Url treats them as URLs that need to be imported\nfunction ignoreEvent(ev) {\n    const { tagName } = ev.target;\n    if (tagName === 'INPUT' || tagName === 'TEXTAREA') {\n        ev.stopPropagation();\n        return;\n    }\n    ev.preventDefault();\n    ev.stopPropagation();\n}\nexport default ignoreEvent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport getFileTypeIcon from '../utils/getFileTypeIcon.js';\nexport default function FilePreview(props) {\n    const { file } = props;\n    if (file.preview) {\n        return (_jsx(\"img\", { draggable: false, className: \"uppy-Dashboard-Item-previewImg\", alt: file.name, src: file.preview }));\n    }\n    const { color, icon } = getFileTypeIcon(file.type);\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewIconWrap\", children: [_jsx(\"span\", { className: \"uppy-Dashboard-Item-previewIcon\", style: { color }, children: icon }), _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-Dashboard-Item-previewIconBg\", width: \"58\", height: \"76\", viewBox: \"0 0 58 76\", children: _jsx(\"rect\", { fill: \"#FFF\", width: \"58\", height: \"76\", rx: \"3\", fillRule: \"evenodd\" }) })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { h } from 'preact';\nexport default function RenderMetaFields(props) {\n    const { computedMetaFields, requiredMetaFields, updateMeta, form, formState, } = props;\n    const fieldCSSClasses = {\n        text: 'uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input',\n    };\n    return computedMetaFields.map((field) => {\n        const id = `uppy-Dashboard-FileCard-input-${field.id}`;\n        const required = requiredMetaFields.includes(field.id);\n        return (_jsxs(\"fieldset\", { className: \"uppy-Dashboard-FileCard-fieldset\", children: [_jsx(\"label\", { className: \"uppy-Dashboard-FileCard-label\", htmlFor: id, children: field.name }), field.render !== undefined ? (field.render({\n                    value: formState[field.id],\n                    onChange: (newVal) => updateMeta(newVal, field.id),\n                    fieldCSSClasses,\n                    required,\n                    form: form.id,\n                }, h)) : (_jsx(\"input\", { className: fieldCSSClasses.text, id: id, form: form.id, type: field.type || 'text', required: required, value: formState[field.id], placeholder: field.placeholder, onInput: (ev) => updateMeta(ev.target.value, field.id), \"data-uppy-super-focusable\": true }))] }, field.id));\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\n// biome-ignore lint/style/useImportType: h is not a type\nimport { Component, h } from 'preact';\nimport { shallowEqualObjects } from 'shallow-equal';\nimport Buttons from './Buttons/index.js';\nimport FileInfo from './FileInfo/index.js';\nimport FilePreviewAndLink from './FilePreviewAndLink/index.js';\nimport FileProgress from './FileProgress/index.js';\nexport default class FileItem extends Component {\n    componentDidMount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    shouldComponentUpdate(nextProps) {\n        return !shallowEqualObjects(this.props, nextProps);\n    }\n    // VirtualList mounts FileItems again and they emit `thumbnail:request`\n    // Otherwise thumbnails are broken or missing after Golden Retriever restores files\n    componentDidUpdate() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleRequestThumbnail(file);\n        }\n    }\n    componentWillUnmount() {\n        const { file } = this.props;\n        if (!file.preview) {\n            this.props.handleCancelThumbnail(file);\n        }\n    }\n    render() {\n        const { file } = this.props;\n        const isProcessing = file.progress.preprocess || file.progress.postprocess;\n        const isUploaded = !!file.progress.uploadComplete && !isProcessing && !file.error;\n        const uploadInProgressOrComplete = !!file.progress.uploadStarted || !!isProcessing;\n        const uploadInProgress = (file.progress.uploadStarted && !file.progress.uploadComplete) ||\n            isProcessing;\n        const error = file.error || false;\n        // File that Golden Retriever was able to partly restore (only meta, not blob),\n        // users still need to re-add it, so it\u2019s a ghost\n        const { isGhost } = file;\n        let showRemoveButton = this.props.individualCancellation\n            ? !isUploaded\n            : !uploadInProgress && !isUploaded;\n        if (isUploaded && this.props.showRemoveButtonAfterComplete) {\n            showRemoveButton = true;\n        }\n        const dashboardItemClass = classNames({\n            'uppy-Dashboard-Item': true,\n            'is-inprogress': uploadInProgress && !this.props.recoveredState,\n            'is-processing': isProcessing,\n            'is-complete': isUploaded,\n            'is-error': !!error,\n            'is-resumable': this.props.resumableUploads,\n            'is-noIndividualCancellation': !this.props.individualCancellation,\n            'is-ghost': isGhost,\n        });\n        return (_jsxs(\"div\", { className: dashboardItemClass, id: `uppy_${file.id}`, role: this.props.role, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-preview\", children: [_jsx(FilePreviewAndLink, { file: file, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, i18n: this.props.i18n, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields }), _jsx(FileProgress, { uppy: this.props.uppy, file: file, error: error, isUploaded: isUploaded, hideRetryButton: this.props.hideRetryButton, hideCancelButton: this.props.hideCancelButton, hidePauseResumeButton: this.props.hidePauseResumeButton, recoveredState: this.props.recoveredState, resumableUploads: this.props.resumableUploads, individualCancellation: this.props.individualCancellation, i18n: this.props.i18n })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfoAndButtons\", children: [_jsx(FileInfo, { file: file, containerWidth: this.props.containerWidth, containerHeight: this.props.containerHeight, i18n: this.props.i18n, toggleAddFilesPanel: this.props.toggleAddFilesPanel, toggleFileCard: this.props.toggleFileCard, metaFields: this.props.metaFields, isSingleFile: this.props.isSingleFile }), _jsx(Buttons, { file: file, metaFields: this.props.metaFields, showLinkToFileUploadResult: this.props.showLinkToFileUploadResult, showRemoveButton: showRemoveButton, canEditFile: this.props.canEditFile, uploadInProgressOrComplete: uploadInProgressOrComplete, toggleFileCard: this.props.toggleFileCard, openFileEditor: this.props.openFileEditor, uppy: this.props.uppy, i18n: this.props.i18n })] })] }));\n    }\n}\n", "export type validArrayValue = any[] | null | undefined;\n\nexport default function shallowEqualArrays(\n  arrA: validArrayValue,\n  arrB: validArrayValue\n): boolean {\n  if (arrA === arrB) {\n    return true;\n  }\n\n  if (!arrA || !arrB) {\n    return false;\n  }\n\n  const len = arrA.length;\n\n  if (arrB.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    if (arrA[i] !== arrB[i]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "export type validObjectValue = Record<string, any> | null | undefined;\n\nexport default function shallowEqualObjects<T>(\n  objA: validObjectValue,\n  objB: validObjectValue\n): boolean {\n  if (objA === objB) {\n    return true;\n  }\n\n  if (!objA || !objB) {\n    return false;\n  }\n\n  const aKeys = Object.keys(objA);\n  const bKeys = Object.keys(objB);\n  const len = aKeys.length;\n\n  if (bKeys.length !== len) {\n    return false;\n  }\n\n  for (let i = 0; i < len; i++) {\n    const key = aKeys[i];\n\n    if (\n      objA[key] !== objB[key] ||\n      !Object.prototype.hasOwnProperty.call(objB, key)\n    ) {\n      return false;\n    }\n  }\n\n  return true;\n}\n", "import shallowEqualArrays from \"./arrays\";\nimport shallowEqualObjects from \"./objects\";\n\ntype Comparable = Record<string, any> | any[] | null | undefined;\n\nfunction shallowEqual<T extends Comparable>(a: T, b: T): boolean {\n  const aIsArr = Array.isArray(a);\n  const bIsArr = Array.isArray(b);\n\n  if (aIsArr !== bIsArr) {\n    return false;\n  }\n\n  if (aIsArr && bIsArr) {\n    return shallowEqualArrays(a, b);\n  }\n\n  return shallowEqualObjects(a, b);\n}\n\nexport { shallowEqual, shallowEqualObjects, shallowEqualArrays };\n", "/**\n * Copies text to clipboard by creating an almost invisible textarea,\n * adding text there, then running execCommand('copy').\n * Falls back to prompt() when the easy way fails (hello, Safari!)\n * From http://stackoverflow.com/a/30810322\n *\n * @param {string} textToCopy\n * @param {string} fallbackString\n * @returns {Promise}\n */\nexport default function copyToClipboard(textToCopy, fallbackString = 'Copy the URL below') {\n    return new Promise((resolve) => {\n        const textArea = document.createElement('textarea');\n        textArea.setAttribute('style', {\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '2em',\n            height: '2em',\n            padding: 0,\n            border: 'none',\n            outline: 'none',\n            boxShadow: 'none',\n            background: 'transparent',\n        });\n        textArea.value = textToCopy;\n        document.body.appendChild(textArea);\n        textArea.select();\n        const magicCopyFailed = () => {\n            document.body.removeChild(textArea);\n            window.prompt(fallbackString, textToCopy);\n            resolve();\n        };\n        try {\n            const successful = document.execCommand('copy');\n            if (!successful) {\n                return magicCopyFailed();\n            }\n            document.body.removeChild(textArea);\n            return resolve();\n        }\n        catch (_err) {\n            document.body.removeChild(textArea);\n            return magicCopyFailed();\n        }\n    });\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport copyToClipboard from '../../../utils/copyToClipboard.js';\nfunction EditButton({ file, uploadInProgressOrComplete, metaFields, canEditFile, i18n, onClick, }) {\n    if ((!uploadInProgressOrComplete && metaFields && metaFields.length > 0) ||\n        (!uploadInProgressOrComplete && canEditFile(file))) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit\", type: \"button\", \"aria-label\": i18n('editFileWithFilename', { file: file.meta.name }), title: i18n('editFileWithFilename', { file: file.meta.name }), onClick: () => onClick(), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 14\", children: _jsxs(\"g\", { fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z\", fillRule: \"nonzero\" }), _jsx(\"rect\", { x: \"1\", y: \"12.293\", width: \"11\", height: \"1\", rx: \".5\" }), _jsx(\"path\", { fillRule: \"nonzero\", d: \"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z\" })] }) }) }));\n    }\n    return null;\n}\nfunction RemoveButton({ i18n, onClick, file, }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove\", type: \"button\", \"aria-label\": i18n('removeFile', { file: file.meta.name }), title: i18n('removeFile', { file: file.meta.name }), onClick: () => onClick(), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"18\", height: \"18\", viewBox: \"0 0 18 18\", children: [_jsx(\"path\", { d: \"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z\" })] }) }));\n}\nfunction CopyLinkButton({ file, uppy, i18n, }) {\n    const copyLinkToClipboard = (event) => {\n        copyToClipboard(file.uploadURL, i18n('copyLinkToClipboardFallback'))\n            .then(() => {\n            uppy.log('Link copied to clipboard.');\n            uppy.info(i18n('copyLinkToClipboardSuccess'), 'info', 3000);\n        })\n            .catch(uppy.log)\n            // avoid losing focus\n            .then(() => event.target.focus({ preventScroll: true }));\n    };\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink\", type: \"button\", \"aria-label\": i18n('copyLink'), title: i18n('copyLink'), onClick: (event) => copyLinkToClipboard(event), children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"14\", height: \"14\", viewBox: \"0 0 14 12\", children: _jsx(\"path\", { d: \"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z\" }) }) }));\n}\nexport default function Buttons(props) {\n    const { uppy, file, uploadInProgressOrComplete, canEditFile, metaFields, showLinkToFileUploadResult, showRemoveButton, i18n, toggleFileCard, openFileEditor, } = props;\n    const editAction = () => {\n        if (metaFields && metaFields.length > 0) {\n            toggleFileCard(true, file.id);\n        }\n        else {\n            openFileEditor(file);\n        }\n    };\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-actionWrapper\", children: [_jsx(EditButton, { i18n: i18n, file: file, uploadInProgressOrComplete: uploadInProgressOrComplete, canEditFile: canEditFile, metaFields: metaFields, onClick: editAction }), showLinkToFileUploadResult && file.uploadURL ? (_jsx(CopyLinkButton, { file: file, uppy: uppy, i18n: i18n })) : null, showRemoveButton ? (_jsx(RemoveButton, { i18n: i18n, file: file, onClick: () => uppy.removeFile(file.id) })) : null] }));\n}\n", "import { jsx as _jsx, Fragment as _Fragment, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport { truncateString } from '@uppy/utils';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nconst renderFileName = (props) => {\n    const { author, name } = props.file.meta;\n    function getMaxNameLength() {\n        if (props.isSingleFile && props.containerHeight >= 350) {\n            return 90;\n        }\n        if (props.containerWidth <= 352) {\n            return 35;\n        }\n        if (props.containerWidth <= 576) {\n            return 60;\n        }\n        // When `author` is present, we want to make sure\n        // the file name fits on one line so we can place\n        // the author on the second line.\n        return author ? 20 : 30;\n    }\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-name\", title: name, children: truncateString(name, getMaxNameLength()) }));\n};\nconst renderAuthor = (props) => {\n    const { author } = props.file.meta;\n    const providerName = 'remote' in props.file ? props.file.remote?.providerName : undefined;\n    const dot = `\\u00B7`;\n    if (!author) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-author\", children: [_jsx(\"a\", { href: `${author.url}?utm_source=Companion&utm_medium=referral`, target: \"_blank\", rel: \"noopener noreferrer\", children: truncateString(author.name, 13) }), providerName ? (_jsxs(_Fragment, { children: [` ${dot} `, providerName, ` ${dot} `] })) : null] }));\n};\nconst renderFileSize = (props) => props.file.size && (_jsx(\"div\", { className: \"uppy-Dashboard-Item-statusSize\", children: prettierBytes(props.file.size) }));\nconst ReSelectButton = (props) => props.file.isGhost && (_jsxs(\"span\", { children: [' \\u2022 ', _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect\", type: \"button\", onClick: () => props.toggleAddFilesPanel(true), children: props.i18n('reSelect') })] }));\nconst ErrorButton = ({ file, onClick, }) => {\n    if (file.error) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails\", \"aria-label\": file.error, \"data-microtip-position\": \"bottom\", \"data-microtip-size\": \"medium\", onClick: onClick, type: \"button\", children: \"?\" }));\n    }\n    return null;\n};\nexport default function FileInfo(props) {\n    const { file, i18n, toggleFileCard, metaFields, toggleAddFilesPanel, isSingleFile, containerHeight, containerWidth, } = props;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileInfo\", \"data-uppy-file-source\": file.source, children: [_jsxs(\"div\", { className: \"uppy-Dashboard-Item-fileName\", children: [renderFileName({\n                        file,\n                        isSingleFile,\n                        containerHeight,\n                        containerWidth,\n                    }), _jsx(ErrorButton, { file: file, onClick: () => alert(file.error) })] }), _jsxs(\"div\", { className: \"uppy-Dashboard-Item-status\", children: [renderAuthor({ file }), renderFileSize({ file }), ReSelectButton({ file, toggleAddFilesPanel, i18n })] }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nconst metaFieldIdToName = (metaFieldId, metaFields) => {\n    const fields = typeof metaFields === 'function' ? metaFields() : metaFields;\n    const field = fields.filter((f) => f.id === metaFieldId);\n    return field[0].name;\n};\nexport default function MetaErrorMessage(props) {\n    const { file, toggleFileCard, i18n, metaFields } = props;\n    const { missingRequiredMetaFields } = file;\n    if (!missingRequiredMetaFields?.length) {\n        return null;\n    }\n    const metaFieldsString = missingRequiredMetaFields\n        .map((missingMetaField) => metaFieldIdToName(missingMetaField, metaFields))\n        .join(', ');\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-errorMessage\", children: [i18n('missingRequiredMetaFields', {\n                smart_count: missingRequiredMetaFields.length,\n                fields: metaFieldsString,\n            }), ' ', _jsx(\"button\", { type: \"button\", class: \"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn\", onClick: () => toggleFileCard(true, file.id), children: i18n('editFile') })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport getFileTypeIcon from '../../../utils/getFileTypeIcon.js';\nimport FilePreview from '../../FilePreview.js';\nimport MetaErrorMessage from '../MetaErrorMessage.js';\nexport default function FilePreviewAndLink(props) {\n    const { file, i18n, toggleFileCard, metaFields, showLinkToFileUploadResult } = props;\n    const white = 'rgba(255, 255, 255, 0.5)';\n    const previewBackgroundColor = file.preview\n        ? white\n        : getFileTypeIcon(file.type).color;\n    return (_jsxs(\"div\", { className: \"uppy-Dashboard-Item-previewInnerWrap\", style: { backgroundColor: previewBackgroundColor }, children: [showLinkToFileUploadResult && file.uploadURL && (_jsx(\"a\", { className: \"uppy-Dashboard-Item-previewLink\", href: file.uploadURL, rel: \"noreferrer noopener\", target: \"_blank\", \"aria-label\": file.meta.name, children: _jsx(\"span\", { hidden: true, children: file.meta.name }) })), _jsx(FilePreview, { file: file }), _jsx(MetaErrorMessage, { file: file, i18n: i18n, toggleFileCard: toggleFileCard, metaFields: metaFields })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction onPauseResumeCancelRetry(props) {\n    if (props.isUploaded)\n        return;\n    if (props.error && !props.hideRetryButton) {\n        props.uppy.retryUpload(props.file.id);\n        return;\n    }\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        props.uppy.pauseResume(props.file.id);\n    }\n    else if (props.individualCancellation && !props.hideCancelButton) {\n        props.uppy.removeFile(props.file.id);\n    }\n}\nfunction progressIndicatorTitle(props) {\n    if (props.isUploaded) {\n        return props.i18n('uploadComplete');\n    }\n    if (props.error) {\n        return props.i18n('retryUpload');\n    }\n    if (props.resumableUploads) {\n        if (props.file.isPaused) {\n            return props.i18n('resumeUpload');\n        }\n        return props.i18n('pauseUpload');\n    }\n    if (props.individualCancellation) {\n        return props.i18n('cancelUpload');\n    }\n    return '';\n}\nfunction ProgressIndicatorButton(props) {\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator\", type: \"button\", \"aria-label\": progressIndicatorTitle(props), title: progressIndicatorTitle(props), onClick: () => onPauseResumeCancelRetry(props), children: props.children }) }));\n}\nfunction ProgressCircleContainer({ children }) {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"70\", height: \"70\", viewBox: \"0 0 36 36\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle\", children: children }));\n}\nfunction ProgressCircle({ progress }) {\n    // circle length equals 2 * PI * R\n    const circleLength = 2 * Math.PI * 15;\n    return (_jsxs(\"g\", { children: [_jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--bg\", r: \"15\", cx: \"18\", cy: \"18\", \"stroke-width\": \"2\", fill: \"none\" }), _jsx(\"circle\", { className: \"uppy-Dashboard-Item-progressIcon--progress\", r: \"15\", cx: \"18\", cy: \"18\", transform: \"rotate(-90, 18, 18)\", fill: \"none\", \"stroke-width\": \"2\", \"stroke-dasharray\": circleLength, \"stroke-dashoffset\": circleLength - (circleLength / 100) * progress })] }));\n}\nexport default function FileProgress(props) {\n    // Nothing if upload has not started\n    if (!props.file.progress.uploadStarted) {\n        return null;\n    }\n    if (props.file.progress.percentage === undefined) {\n        return null;\n    }\n    // Green checkmark when complete\n    if (props.isUploaded) {\n        return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsxs(ProgressCircleContainer, { children: [_jsx(\"circle\", { r: \"15\", cx: \"18\", cy: \"18\", fill: \"#1bb240\" }), _jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--check\", transform: \"translate(2, 3)\", points: \"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634\" })] }) }) }));\n    }\n    if (props.recoveredState) {\n        return null;\n    }\n    // Retry button for error\n    if (props.error && !props.hideRetryButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry\", width: \"28\", height: \"31\", viewBox: \"0 0 16 19\", children: [_jsx(\"path\", { d: \"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z\" }), _jsx(\"path\", { d: \"M7.9 3H10v2H7.9z\" }), _jsx(\"path\", { d: \"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z\" }), _jsx(\"path\", { d: \"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z\" })] }) }));\n    }\n    // Pause/resume button for resumable uploads\n    if (props.resumableUploads && !props.hidePauseResumeButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), props.file.isPaused ? (_jsx(\"polygon\", { className: \"uppy-Dashboard-Item-progressIcon--play\", transform: \"translate(3, 3)\", points: \"12 20 12 10 20 15\" })) : (_jsxs(\"g\", { className: \"uppy-Dashboard-Item-progressIcon--pause\", transform: \"translate(14.5, 13)\", children: [_jsx(\"rect\", { x: \"0\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" }), _jsx(\"rect\", { x: \"5\", y: \"0\", width: \"2\", height: \"10\", rx: \"0\" })] }))] }) }));\n    }\n    // Cancel button for non-resumable uploads if individualCancellation is supported (not bundled)\n    if (!props.resumableUploads &&\n        props.individualCancellation &&\n        !props.hideCancelButton) {\n        return (_jsx(ProgressIndicatorButton, { ...props, children: _jsxs(ProgressCircleContainer, { children: [_jsx(ProgressCircle, { progress: props.file.progress.percentage }), _jsx(\"polygon\", { className: \"cancel\", transform: \"translate(2, 2)\", points: \"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12\" })] }) }));\n    }\n    // Just progress when buttons are disabled\n    return (_jsx(\"div\", { className: \"uppy-Dashboard-Item-progress\", children: _jsx(\"div\", { className: \"uppy-Dashboard-Item-progressIndicator\", children: _jsx(ProgressCircleContainer, { children: _jsx(ProgressCircle, { progress: props.file.progress.percentage }) }) }) }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\n// @ts-ignore untyped\nimport { VirtualList } from '@uppy/utils';\nimport { useMemo } from 'preact/hooks';\nimport FileItem from './FileItem/index.js';\nfunction chunks(list, size) {\n    const chunked = [];\n    let currentChunk = [];\n    list.forEach((item) => {\n        if (currentChunk.length < size) {\n            currentChunk.push(item);\n        }\n        else {\n            chunked.push(currentChunk);\n            currentChunk = [item];\n        }\n    });\n    if (currentChunk.length)\n        chunked.push(currentChunk);\n    return chunked;\n}\nexport default function FileList({ id, i18n, uppy, files, resumableUploads, hideRetryButton, hidePauseResumeButton, hideCancelButton, showLinkToFileUploadResult, showRemoveButtonAfterComplete, metaFields, isSingleFile, toggleFileCard, handleRequestThumbnail, handleCancelThumbnail, recoveredState, individualCancellation, itemsPerRow, openFileEditor, canEditFile, toggleAddFilesPanel, containerWidth, containerHeight, }) {\n    // It's not great that this is hardcoded!\n    // It's ESPECIALLY not great that this is checking against `itemsPerRow`!\n    const rowHeight = itemsPerRow === 1\n        ? // Mobile\n            71\n        : // 190px height + 2 * 5px margin\n            200;\n    // Sort files by file.isGhost, ghost files first, only if recoveredState is present\n    const rows = useMemo(() => {\n        const sortByGhostComesFirst = (file1, file2) => Number(files[file2].isGhost) - Number(files[file1].isGhost);\n        const fileIds = Object.keys(files);\n        if (recoveredState)\n            fileIds.sort(sortByGhostComesFirst);\n        return chunks(fileIds, itemsPerRow);\n    }, [files, itemsPerRow, recoveredState]);\n    const renderRow = (row) => (_jsx(\"div\", { class: \"uppy-Dashboard-filesInner\", \n        // The `role=\"presentation` attribute ensures that the list items are properly\n        // associated with the `VirtualList` element.\n        role: \"presentation\", children: row.map((fileID) => (_jsx(FileItem, { uppy: uppy, \n            // FIXME This is confusing, it's actually the Dashboard's plugin ID\n            id: id, \n            // TODO move this to context\n            i18n: i18n, \n            // features\n            resumableUploads: resumableUploads, individualCancellation: individualCancellation, \n            // visual options\n            hideRetryButton: hideRetryButton, hidePauseResumeButton: hidePauseResumeButton, hideCancelButton: hideCancelButton, showLinkToFileUploadResult: showLinkToFileUploadResult, showRemoveButtonAfterComplete: showRemoveButtonAfterComplete, metaFields: metaFields, recoveredState: recoveredState, isSingleFile: isSingleFile, containerWidth: containerWidth, containerHeight: containerHeight, \n            // callbacks\n            toggleFileCard: toggleFileCard, handleRequestThumbnail: handleRequestThumbnail, handleCancelThumbnail: handleCancelThumbnail, role: \"listitem\", openFileEditor: openFileEditor, canEditFile: canEditFile, toggleAddFilesPanel: toggleAddFilesPanel, file: files[fileID] }, fileID))) }, row[0]));\n    if (isSingleFile) {\n        return _jsx(\"div\", { class: \"uppy-Dashboard-files\", children: renderRow(rows[0]) });\n    }\n    return (_jsx(VirtualList, { class: \"uppy-Dashboard-files\", role: \"list\", data: rows, renderRow: renderRow, rowHeight: rowHeight }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { Component, createRef } from 'preact';\nconst TRANSITION_MS = 300;\nexport default class FadeIn extends Component {\n    ref = createRef();\n    componentWillEnter(callback) {\n        this.ref.current.style.opacity = '1';\n        this.ref.current.style.transform = 'none';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    componentWillLeave(callback) {\n        this.ref.current.style.opacity = '0';\n        this.ref.current.style.transform = 'translateY(350%)';\n        setTimeout(callback, TRANSITION_MS);\n    }\n    render() {\n        const { children } = this.props;\n        return (_jsx(\"div\", { className: \"uppy-Informer-animated\", ref: this.ref, children: children }));\n    }\n}\n", "// INFO: not typing copy pasted libarary code\n// @ts-nocheck\n/**\n * @source https://github.com/developit/preact-transition-group\n */\nimport { Component, cloneElement, h, toChildArray } from 'preact';\nfunction assign(obj, props) {\n    return Object.assign(obj, props);\n}\nfunction getKey(vnode, fallback) {\n    return vnode?.key ?? fallback;\n}\nfunction linkRef(component, name) {\n    // biome-ignore lint/suspicious/noAssignInExpressions: ...\n    const cache = component._ptgLinkedRefs || (component._ptgLinkedRefs = {});\n    return (cache[name] ||\n        // biome-ignore lint/suspicious/noAssignInExpressions: ...\n        (cache[name] = (c) => {\n            component.refs[name] = c;\n        }));\n}\nfunction getChildMapping(children) {\n    const out = {};\n    for (let i = 0; i < children.length; i++) {\n        if (children[i] != null) {\n            const key = getKey(children[i], i.toString(36));\n            out[key] = children[i];\n        }\n    }\n    return out;\n}\nfunction mergeChildMappings(prev, next) {\n    prev = prev || {};\n    next = next || {};\n    const getValueForKey = (key) => Object.hasOwn(next, key) ? next[key] : prev[key];\n    // For each key of `next`, the list of keys to insert before that key in\n    // the combined list\n    const nextKeysPending = {};\n    let pendingKeys = [];\n    for (const prevKey in prev) {\n        if (Object.hasOwn(next, prevKey)) {\n            if (pendingKeys.length) {\n                nextKeysPending[prevKey] = pendingKeys;\n                pendingKeys = [];\n            }\n        }\n        else {\n            pendingKeys.push(prevKey);\n        }\n    }\n    const childMapping = {};\n    for (const nextKey in next) {\n        if (Object.hasOwn(nextKeysPending, nextKey)) {\n            for (let i = 0; i < nextKeysPending[nextKey].length; i++) {\n                const pendingNextKey = nextKeysPending[nextKey][i];\n                childMapping[nextKeysPending[nextKey][i]] =\n                    getValueForKey(pendingNextKey);\n            }\n        }\n        childMapping[nextKey] = getValueForKey(nextKey);\n    }\n    // Finally, add the keys which didn't appear before any key in `next`\n    for (let i = 0; i < pendingKeys.length; i++) {\n        childMapping[pendingKeys[i]] = getValueForKey(pendingKeys[i]);\n    }\n    return childMapping;\n}\nconst identity = (i) => i;\nclass TransitionGroup extends Component {\n    constructor(props, context) {\n        super(props, context);\n        this.refs = {};\n        this.state = {\n            children: getChildMapping(toChildArray(toChildArray(this.props.children)) || []),\n        };\n        this.performAppear = this.performAppear.bind(this);\n        this.performEnter = this.performEnter.bind(this);\n        this.performLeave = this.performLeave.bind(this);\n    }\n    componentWillMount() {\n        this.currentlyTransitioningKeys = {};\n        this.keysToAbortLeave = [];\n        this.keysToEnter = [];\n        this.keysToLeave = [];\n    }\n    componentDidMount() {\n        const initialChildMapping = this.state.children;\n        for (const key in initialChildMapping) {\n            if (initialChildMapping[key]) {\n                // this.performAppear(getKey(initialChildMapping[key], key));\n                this.performAppear(key);\n            }\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        const nextChildMapping = getChildMapping(toChildArray(nextProps.children) || []);\n        const prevChildMapping = this.state.children;\n        this.setState((prevState) => ({\n            children: mergeChildMappings(prevState.children, nextChildMapping),\n        }));\n        let key;\n        for (key in nextChildMapping) {\n            if (Object.hasOwn(nextChildMapping, key)) {\n                const hasPrev = prevChildMapping && Object.hasOwn(prevChildMapping, key);\n                // We should re-enter the component and abort its leave function\n                if (nextChildMapping[key] &&\n                    hasPrev &&\n                    this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                    this.keysToAbortLeave.push(key);\n                }\n                else if (nextChildMapping[key] &&\n                    !hasPrev &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToEnter.push(key);\n                }\n            }\n        }\n        for (key in prevChildMapping) {\n            if (Object.hasOwn(prevChildMapping, key)) {\n                const hasNext = nextChildMapping && Object.hasOwn(nextChildMapping, key);\n                if (prevChildMapping[key] &&\n                    !hasNext &&\n                    !this.currentlyTransitioningKeys[key]) {\n                    this.keysToLeave.push(key);\n                }\n            }\n        }\n    }\n    componentDidUpdate() {\n        const { keysToEnter } = this;\n        this.keysToEnter = [];\n        keysToEnter.forEach(this.performEnter);\n        const { keysToLeave } = this;\n        this.keysToLeave = [];\n        keysToLeave.forEach(this.performLeave);\n    }\n    _finishAbort(key) {\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            this.keysToAbortLeave.splice(idx, 1);\n        }\n    }\n    performAppear(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillAppear) {\n            component.componentWillAppear(this._handleDoneAppearing.bind(this, key));\n        }\n        else {\n            this._handleDoneAppearing(key);\n        }\n    }\n    _handleDoneAppearing(key) {\n        const component = this.refs[key];\n        if (component?.componentDidAppear) {\n            component.componentDidAppear();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully appeared. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performEnter(key) {\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillEnter) {\n            component.componentWillEnter(this._handleDoneEntering.bind(this, key));\n        }\n        else {\n            this._handleDoneEntering(key);\n        }\n    }\n    _handleDoneEntering(key) {\n        const component = this.refs[key];\n        if (component?.componentDidEnter) {\n            component.componentDidEnter();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        this._finishAbort(key);\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (!currentChildMapping || !Object.hasOwn(currentChildMapping, key)) {\n            // This was removed before it had fully entered. Remove it.\n            this.performLeave(key);\n        }\n    }\n    performLeave(key) {\n        // If we should immediately abort this leave function,\n        // don't run the leave transition at all.\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        this.currentlyTransitioningKeys[key] = true;\n        const component = this.refs[key];\n        if (component?.componentWillLeave) {\n            component.componentWillLeave(this._handleDoneLeaving.bind(this, key));\n        }\n        else {\n            // Note that this is somewhat dangerous b/c it calls setState()\n            // again, effectively mutating the component before all the work\n            // is done.\n            this._handleDoneLeaving(key);\n        }\n    }\n    _handleDoneLeaving(key) {\n        // If we should immediately abort the leave,\n        // then skip this altogether\n        const idx = this.keysToAbortLeave.indexOf(key);\n        if (idx !== -1) {\n            return;\n        }\n        const component = this.refs[key];\n        if (component?.componentDidLeave) {\n            component.componentDidLeave();\n        }\n        delete this.currentlyTransitioningKeys[key];\n        const currentChildMapping = getChildMapping(toChildArray(this.props.children) || []);\n        if (currentChildMapping && Object.hasOwn(currentChildMapping, key)) {\n            // This entered again before it fully left. Add it again.\n            this.performEnter(key);\n        }\n        else {\n            const children = assign({}, this.state.children);\n            delete children[key];\n            this.setState({ children });\n        }\n    }\n    render({ childFactory, transitionLeave, transitionName, transitionAppear, transitionEnter, transitionLeaveTimeout, transitionEnterTimeout, transitionAppearTimeout, component, ...props }, { children }) {\n        // TODO: we could get rid of the need for the wrapper node\n        // by cloning a single child\n        const childrenToRender = Object.entries(children)\n            .map(([key, child]) => {\n            if (!child)\n                return undefined;\n            const ref = linkRef(this, key);\n            return cloneElement(childFactory(child), { ref, key });\n        })\n            .filter(Boolean);\n        return h(component, props, childrenToRender);\n    }\n}\nTransitionGroup.defaultProps = {\n    component: 'span',\n    childFactory: identity,\n};\nexport default TransitionGroup;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact';\nimport FadeIn from './FadeIn.js';\nimport TransitionGroup from './TransitionGroup.js';\nexport default class Informer extends Component {\n    render() {\n        // Get info from the uppy instance passed in props\n        const { info } = this.props.uppy.getState();\n        return (_jsx(\"div\", { className: \"uppy uppy-Informer\", children: _jsx(TransitionGroup, { children: info.map((info) => (_jsx(FadeIn, { children: _jsxs(\"p\", { role: \"alert\", children: [info.message, ' ', info.details && (\n                            // biome-ignore lint/a11y/useKeyWithClickEvents: don't think it's needed\n                            _jsx(\"span\", { \"aria-label\": info.details, \"data-microtip-position\": \"top-left\", \"data-microtip-size\": \"medium\", role: \"tooltip\", onClick: () => alert(`${info.message} \\n\\n ${info.details}`), children: \"?\" }))] }) }, info.message))) }) }));\n    }\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { useRef } from 'preact/hooks';\nimport ignoreEvent from '../utils/ignoreEvent.js';\nfunction PickerPanelContent({ activePickerPanel, className, hideAllPanels, i18n, state, uppy, }) {\n    const ref = useRef(null);\n    return (_jsxs(\"div\", { className: classNames('uppy-DashboardContent-panel', className), role: \"tabpanel\", \"data-uppy-panelType\": \"PickerPanel\", id: `uppy-DashboardContent-panel--${activePickerPanel.id}`, onDragOver: ignoreEvent, onDragLeave: ignoreEvent, onDrop: ignoreEvent, onPaste: ignoreEvent, children: [_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [_jsx(\"div\", { className: \"uppy-DashboardContent-title\", \n                        // biome-ignore lint/a11y/useSemanticElements: ...\n                        role: \"heading\", \"aria-level\": 1, children: i18n('importFrom', { name: activePickerPanel.name }) }), _jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: hideAllPanels, children: i18n('cancel') })] }), _jsx(\"div\", { ref: ref, className: \"uppy-DashboardContent-panelBody\", children: uppy.getPlugin(activePickerPanel.id).render(state, ref.current) })] }));\n}\nexport default PickerPanelContent;\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nconst uploadStates = {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n    STATE_PAUSED: 'paused',\n};\nfunction getUploadingState(isAllErrored, isAllComplete, isAllPaused, files = {}) {\n    if (isAllErrored) {\n        return uploadStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return uploadStates.STATE_COMPLETE;\n    }\n    if (isAllPaused) {\n        return uploadStates.STATE_PAUSED;\n    }\n    let state = uploadStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return uploadStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess && state !== uploadStates.STATE_UPLOADING) {\n            state = uploadStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess &&\n            state !== uploadStates.STATE_UPLOADING &&\n            state !== uploadStates.STATE_PREPROCESSING) {\n            state = uploadStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nfunction UploadStatus({ files, i18n, isAllComplete, isAllErrored, isAllPaused, inProgressNotPausedFiles, newFiles, processingFiles, }) {\n    const uploadingState = getUploadingState(isAllErrored, isAllComplete, isAllPaused, files);\n    switch (uploadingState) {\n        case 'uploading':\n            return i18n('uploadingXFiles', {\n                smart_count: inProgressNotPausedFiles.length,\n            });\n        case 'preprocessing':\n        case 'postprocessing':\n            return i18n('processingXFiles', { smart_count: processingFiles.length });\n        case 'paused':\n            return i18n('uploadPaused');\n        case 'waiting':\n            return i18n('xFilesSelected', { smart_count: newFiles.length });\n        case 'complete':\n            return i18n('uploadComplete');\n        case 'error':\n            return i18n('error');\n        default:\n    }\n}\nfunction PanelTopBar(props) {\n    const { i18n, isAllComplete, hideCancelButton, maxNumberOfFiles, toggleAddFilesPanel, uppy, } = props;\n    let { allowNewUpload } = props;\n    // TODO maybe this should be done in ../Dashboard.js, then just pass that down as `allowNewUpload`\n    if (allowNewUpload && maxNumberOfFiles) {\n        allowNewUpload = props.totalFileCount < props.maxNumberOfFiles;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-DashboardContent-bar\", children: [!isAllComplete && !hideCancelButton ? (_jsx(\"button\", { className: \"uppy-DashboardContent-back\", type: \"button\", onClick: () => uppy.cancelAll(), children: i18n('cancel') })) : (_jsx(\"div\", {})), _jsx(\"div\", { className: \"uppy-DashboardContent-title\", children: _jsx(UploadStatus, { ...props }) }), allowNewUpload ? (_jsxs(\"button\", { className: \"uppy-DashboardContent-addMore\", type: \"button\", \"aria-label\": i18n('addMoreFiles'), title: i18n('addMoreFiles'), onClick: () => toggleAddFilesPanel(true), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"15\", height: \"15\", viewBox: \"0 0 15 15\", children: _jsx(\"path\", { d: \"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z\" }) }), _jsx(\"span\", { className: \"uppy-DashboardContent-addMoreCaption\", children: i18n('addMore') })] })) : (_jsx(\"div\", {}))] }));\n}\nexport default PanelTopBar;\n", "import classNames from 'classnames';\nimport { cloneElement, toChildArray, } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nconst transitionName = 'uppy-transition-slideDownUp';\nconst duration = 250;\n/**\n * Vertical slide transition.\n *\n * This can take a _single_ child component, which _must_ accept a `className` prop.\n *\n * Currently this is specific to the `uppy-transition-slideDownUp` transition,\n * but it should be simple to extend this for any type of single-element\n * transition by setting the CSS name and duration as props.\n */\nfunction Slide({ children }) {\n    const [cachedChildren, setCachedChildren] = useState(null);\n    const [className, setClassName] = useState('');\n    const enterTimeoutRef = useRef();\n    const leaveTimeoutRef = useRef();\n    const animationFrameRef = useRef();\n    const handleEnterTransition = useCallback(() => {\n        setClassName(`${transitionName}-enter`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(leaveTimeoutRef.current);\n        leaveTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-enter ${transitionName}-enter-active`);\n            enterTimeoutRef.current = setTimeout(() => {\n                setClassName('');\n            }, duration);\n        });\n    }, []);\n    const handleLeaveTransition = useCallback(() => {\n        setClassName(`${transitionName}-leave`);\n        cancelAnimationFrame(animationFrameRef.current);\n        clearTimeout(enterTimeoutRef.current);\n        enterTimeoutRef.current = undefined;\n        animationFrameRef.current = requestAnimationFrame(() => {\n            setClassName(`${transitionName}-leave ${transitionName}-leave-active`);\n            leaveTimeoutRef.current = setTimeout(() => {\n                setCachedChildren(null);\n                setClassName('');\n            }, duration);\n        });\n    }, []);\n    useEffect(() => {\n        const child = toChildArray(children)[0];\n        if (cachedChildren === child)\n            return;\n        if (child && !cachedChildren) {\n            handleEnterTransition();\n        }\n        else if (cachedChildren && !child && !leaveTimeoutRef.current) {\n            handleLeaveTransition();\n        }\n        setCachedChildren(child);\n    }, [children, cachedChildren, handleEnterTransition, handleLeaveTransition]); // Dependency array to trigger effect on children change\n    useEffect(() => {\n        return () => {\n            clearTimeout(enterTimeoutRef.current);\n            clearTimeout(leaveTimeoutRef.current);\n            cancelAnimationFrame(animationFrameRef.current);\n        };\n    }, []); // Cleanup useEffect\n    if (!cachedChildren)\n        return null;\n    return cloneElement(cachedChildren, {\n        className: classNames(className, cachedChildren.props.className),\n    });\n}\nexport default Slide;\n", "export default {\n    STATE_ERROR: 'error',\n    STATE_WAITING: 'waiting',\n    STATE_PREPROCESSING: 'preprocessing',\n    STATE_UPLOADING: 'uploading',\n    STATE_POSTPROCESSING: 'postprocessing',\n    STATE_COMPLETE: 'complete',\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport classNames from 'classnames';\nimport { CancelBtn, DoneBtn, PauseResumeButton, ProgressBarComplete, ProgressBarError, ProgressBarProcessing, ProgressBarUploading, RetryBtn, UploadBtn, } from './Components.js';\nimport calculateProcessingProgress from './calculateProcessingProgress.js';\nimport statusBarStates from './StatusBarStates.js';\nconst { STATE_ERROR, STATE_WAITING, STATE_PREPROCESSING, STATE_UPLOADING, STATE_POSTPROCESSING, STATE_COMPLETE, } = statusBarStates;\nexport default function StatusBarUI({ newFiles, allowNewUpload, isUploadInProgress, isAllPaused, resumableUploads, error, hideUploadButton = undefined, hidePauseResumeButton = false, hideCancelButton = false, hideRetryButton = false, recoveredState, uploadState, totalProgress, files, supportsUploadProgress, hideAfterFinish = false, isSomeGhost, doneButtonHandler = undefined, isUploadStarted, i18n, startUpload, uppy, isAllComplete, hideProgressDetails = undefined, numUploads, complete, totalSize, totalETA, totalUploadedSize, }) {\n    function getProgressValue() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const progress = calculateProcessingProgress(files);\n                if (progress.mode === 'determinate') {\n                    return progress.value * 100;\n                }\n                return totalProgress;\n            }\n            case STATE_ERROR: {\n                return null;\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return null;\n                }\n                return totalProgress;\n            }\n            default:\n                return totalProgress;\n        }\n    }\n    function getIsIndeterminate() {\n        switch (uploadState) {\n            case STATE_POSTPROCESSING:\n            case STATE_PREPROCESSING: {\n                const { mode } = calculateProcessingProgress(files);\n                return mode === 'indeterminate';\n            }\n            case STATE_UPLOADING: {\n                if (!supportsUploadProgress) {\n                    return true;\n                }\n                return false;\n            }\n            default:\n                return false;\n        }\n    }\n    const progressValue = getProgressValue();\n    const width = progressValue ?? 100;\n    const showUploadBtn = !error &&\n        newFiles &&\n        ((!isUploadInProgress && !isAllPaused) || recoveredState) &&\n        allowNewUpload &&\n        !hideUploadButton;\n    const showCancelBtn = !hideCancelButton &&\n        uploadState !== STATE_WAITING &&\n        uploadState !== STATE_COMPLETE;\n    const showPauseResumeBtn = resumableUploads &&\n        !hidePauseResumeButton &&\n        uploadState === STATE_UPLOADING;\n    const showRetryBtn = error && !isAllComplete && !hideRetryButton;\n    const showDoneBtn = doneButtonHandler && uploadState === STATE_COMPLETE;\n    const progressClassNames = classNames('uppy-StatusBar-progress', {\n        'is-indeterminate': getIsIndeterminate(),\n    });\n    const statusBarClassNames = classNames('uppy-StatusBar', `is-${uploadState}`, { 'has-ghosts': isSomeGhost });\n    const progressBarStateEl = (() => {\n        switch (uploadState) {\n            case STATE_PREPROCESSING:\n            case STATE_POSTPROCESSING:\n                return (_jsx(ProgressBarProcessing, { progress: calculateProcessingProgress(files) }));\n            case STATE_COMPLETE:\n                return _jsx(ProgressBarComplete, { i18n: i18n });\n            case STATE_ERROR:\n                return (_jsx(ProgressBarError, { error: error, i18n: i18n, numUploads: numUploads, complete: complete }));\n            case STATE_UPLOADING:\n                return (_jsx(ProgressBarUploading, { i18n: i18n, supportsUploadProgress: supportsUploadProgress, totalProgress: totalProgress, hideProgressDetails: hideProgressDetails, isUploadStarted: isUploadStarted, isAllComplete: isAllComplete, isAllPaused: isAllPaused, newFiles: newFiles, numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, startUpload: startUpload }));\n            default:\n                return null;\n        }\n    })();\n    const atLeastOneAction = showUploadBtn ||\n        showRetryBtn ||\n        showPauseResumeBtn ||\n        showCancelBtn ||\n        showDoneBtn;\n    const thereIsNothingInside = !atLeastOneAction && !progressBarStateEl;\n    const isHidden = thereIsNothingInside || (uploadState === STATE_COMPLETE && hideAfterFinish);\n    if (isHidden) {\n        return null;\n    }\n    return (_jsxs(\"div\", { className: statusBarClassNames, children: [_jsx(\"div\", { className: progressClassNames, style: { width: `${width}%` }, role: \"progressbar\", \"aria-label\": `${width}%`, \"aria-valuetext\": `${width}%`, \"aria-valuemin\": 0, \"aria-valuemax\": 100, \"aria-valuenow\": progressValue }), progressBarStateEl, _jsxs(\"div\", { className: \"uppy-StatusBar-actions\", children: [showUploadBtn ? (_jsx(UploadBtn, { newFiles: newFiles, isUploadStarted: isUploadStarted, recoveredState: recoveredState, i18n: i18n, isSomeGhost: isSomeGhost, startUpload: startUpload, uploadState: uploadState })) : null, showRetryBtn ? _jsx(RetryBtn, { i18n: i18n, uppy: uppy }) : null, showPauseResumeBtn ? (_jsx(PauseResumeButton, { isAllPaused: isAllPaused, i18n: i18n, isAllComplete: isAllComplete, resumableUploads: resumableUploads, uppy: uppy })) : null, showCancelBtn ? _jsx(CancelBtn, { i18n: i18n, uppy: uppy }) : null, showDoneBtn ? (_jsx(DoneBtn, { i18n: i18n, doneButtonHandler: doneButtonHandler })) : null] })] }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport prettierBytes from '@transloadit/prettier-bytes';\nimport { prettyETA } from '@uppy/utils';\nimport classNames from 'classnames';\nimport statusBarStates from './StatusBarStates.js';\nconst DOT = `\\u00B7`;\nconst renderDot = () => ` ${DOT} `;\nfunction UploadBtn(props) {\n    const { newFiles, isUploadStarted, recoveredState, i18n, uploadState, isSomeGhost, startUpload, } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--upload', {\n        'uppy-c-btn-primary': uploadState === statusBarStates.STATE_WAITING,\n    }, { 'uppy-StatusBar-actionBtn--disabled': isSomeGhost });\n    const uploadBtnText = newFiles && isUploadStarted && !recoveredState\n        ? i18n('uploadXNewFiles', { smart_count: newFiles })\n        : i18n('uploadXFiles', { smart_count: newFiles });\n    return (_jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, disabled: isSomeGhost, \"data-uppy-super-focusable\": true, children: uploadBtnText }));\n}\nfunction RetryBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsxs(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry\", \"aria-label\": i18n('retryUpload'), onClick: () => uppy.retryAll().catch(() => {\n            /* Error reported and handled via an event */\n        }), \"data-uppy-super-focusable\": true, \"data-cy\": \"retry\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"8\", height: \"10\", viewBox: \"0 0 8 10\", children: _jsx(\"path\", { d: \"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z\" }) }), i18n('retry')] }));\n}\nfunction CancelBtn(props) {\n    const { i18n, uppy } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", title: i18n('cancel'), \"aria-label\": i18n('cancel'), onClick: () => uppy.cancelAll(), \"data-cy\": \"cancel\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: \"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z\" })] }) }) }));\n}\nfunction PauseResumeButton(props) {\n    const { isAllPaused, i18n, isAllComplete, resumableUploads, uppy } = props;\n    const title = isAllPaused ? i18n('resume') : i18n('pause');\n    function togglePauseResume() {\n        if (isAllComplete)\n            return;\n        if (!resumableUploads) {\n            uppy.cancelAll();\n            return;\n        }\n        if (isAllPaused) {\n            uppy.resumeAll();\n            return;\n        }\n        uppy.pauseAll();\n    }\n    return (_jsx(\"button\", { title: title, \"aria-label\": title, className: \"uppy-u-reset uppy-StatusBar-actionCircleBtn\", type: \"button\", onClick: togglePauseResume, \"data-cy\": \"togglePauseResume\", \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"16\", height: \"16\", viewBox: \"0 0 16 16\", children: _jsxs(\"g\", { fill: \"none\", fillRule: \"evenodd\", children: [_jsx(\"circle\", { fill: \"#888\", cx: \"8\", cy: \"8\", r: \"8\" }), _jsx(\"path\", { fill: \"#FFF\", d: isAllPaused\n                            ? 'M6 4.25L11.5 8 6 11.75z'\n                            : 'M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z' })] }) }) }));\n}\nfunction DoneBtn(props) {\n    const { i18n, doneButtonHandler } = props;\n    return (_jsx(\"button\", { type: \"button\", className: \"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done\", onClick: doneButtonHandler, \"data-uppy-super-focusable\": true, children: i18n('done') }));\n}\nfunction LoadingSpinner() {\n    return (_jsx(\"svg\", { className: \"uppy-StatusBar-spinner\", \"aria-hidden\": \"true\", focusable: \"false\", width: \"14\", height: \"14\", children: _jsx(\"path\", { d: \"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0\", fillRule: \"evenodd\" }) }));\n}\nfunction ProgressBarProcessing(props) {\n    const { progress } = props;\n    const { value, mode, message } = progress;\n    const dot = `\\u00B7`;\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", children: [_jsx(LoadingSpinner, {}), mode === 'determinate' ? `${Math.round(value * 100)}% ${dot} ` : '', message] }));\n}\nfunction ProgressDetails(props) {\n    const { numUploads, complete, totalUploadedSize, totalSize, totalETA, i18n } = props;\n    const ifShowFilesUploadedOfTotal = numUploads > 1;\n    const totalUploadedSizeStr = prettierBytes(totalUploadedSize);\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [ifShowFilesUploadedOfTotal &&\n                i18n('filesUploadedOfTotal', {\n                    complete,\n                    smart_count: numUploads,\n                }), _jsxs(\"span\", { className: \"uppy-StatusBar-additionalInfo\", children: [ifShowFilesUploadedOfTotal && renderDot(), totalSize != null\n                        ? i18n('dataUploadedOfTotal', {\n                            complete: totalUploadedSizeStr,\n                            total: prettierBytes(totalSize),\n                        })\n                        : i18n('dataUploadedOfUnknown', { complete: totalUploadedSizeStr }), renderDot(), totalETA != null &&\n                        i18n('xTimeLeft', {\n                            time: prettyETA(totalETA),\n                        })] })] }));\n}\nfunction FileUploadCount(props) {\n    const { i18n, complete, numUploads } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: i18n('filesUploadedOfTotal', { complete, smart_count: numUploads }) }));\n}\nfunction UploadNewlyAddedFiles(props) {\n    const { i18n, newFiles, startUpload } = props;\n    const uploadBtnClassNames = classNames('uppy-u-reset', 'uppy-c-btn', 'uppy-StatusBar-actionBtn', 'uppy-StatusBar-actionBtn--uploadNewlyAdded');\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-statusSecondary\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusSecondaryHint\", children: i18n('xMoreFilesAdded', { smart_count: newFiles }) }), _jsx(\"button\", { type: \"button\", className: uploadBtnClassNames, \"aria-label\": i18n('uploadXFiles', { smart_count: newFiles }), onClick: startUpload, children: i18n('upload') })] }));\n}\nfunction ProgressBarUploading(props) {\n    const { i18n, supportsUploadProgress, totalProgress, hideProgressDetails, isUploadStarted, isAllComplete, isAllPaused, newFiles, numUploads, complete, totalUploadedSize, totalSize, totalETA, startUpload, } = props;\n    const showUploadNewlyAddedFiles = newFiles && isUploadStarted;\n    if (!isUploadStarted || isAllComplete) {\n        return null;\n    }\n    const title = isAllPaused ? i18n('paused') : i18n('uploading');\n    function renderProgressDetails() {\n        if (!isAllPaused && !showUploadNewlyAddedFiles && !hideProgressDetails) {\n            if (supportsUploadProgress) {\n                return (_jsx(ProgressDetails, { numUploads: numUploads, complete: complete, totalUploadedSize: totalUploadedSize, totalSize: totalSize, totalETA: totalETA, i18n: i18n }));\n            }\n            return (_jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads }));\n        }\n        return null;\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: title, children: [!isAllPaused ? _jsx(LoadingSpinner, {}) : null, _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsx(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: supportsUploadProgress && totalProgress !== 0\n                            ? `${title}: ${totalProgress}%`\n                            : title }), renderProgressDetails(), showUploadNewlyAddedFiles ? (_jsx(UploadNewlyAddedFiles, { i18n: i18n, newFiles: newFiles, startUpload: startUpload })) : null] })] }));\n}\nfunction ProgressBarComplete(props) {\n    const { i18n } = props;\n    return (_jsx(\"div\", { className: \"uppy-StatusBar-content\", \n        // biome-ignore lint/a11y/useSemanticElements: ...\n        role: \"status\", title: i18n('complete'), children: _jsx(\"div\", { className: \"uppy-StatusBar-status\", children: _jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"15\", height: \"11\", viewBox: \"0 0 15 11\", children: _jsx(\"path\", { d: \"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z\" }) }), i18n('complete')] }) }) }));\n}\nfunction ProgressBarError(props) {\n    const { error, i18n, complete, numUploads } = props;\n    function displayErrorAlert() {\n        const errorMessage = `${i18n('uploadFailed')} \\n\\n ${error}`;\n        alert(errorMessage); // TODO: move to custom alert implementation\n    }\n    return (_jsxs(\"div\", { className: \"uppy-StatusBar-content\", title: i18n('uploadFailed'), children: [_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-StatusBar-statusIndicator uppy-c-icon\", width: \"11\", height: \"11\", viewBox: \"0 0 11 11\", children: _jsx(\"path\", { d: \"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z\" }) }), _jsxs(\"div\", { className: \"uppy-StatusBar-status\", children: [_jsxs(\"div\", { className: \"uppy-StatusBar-statusPrimary\", children: [i18n('uploadFailed'), _jsx(\"button\", { className: \"uppy-u-reset uppy-StatusBar-details\", \"aria-label\": i18n('showErrorDetails'), \"data-microtip-position\": \"top-right\", \"data-microtip-size\": \"medium\", onClick: displayErrorAlert, type: \"button\", children: \"?\" })] }), _jsx(FileUploadCount, { i18n: i18n, complete: complete, numUploads: numUploads })] })] }));\n}\nexport { UploadBtn, RetryBtn, CancelBtn, PauseResumeButton, DoneBtn, LoadingSpinner, ProgressDetails, ProgressBarProcessing, ProgressBarError, ProgressBarUploading, ProgressBarComplete, };\n", "export default function calculateProcessingProgress(files) {\n    const values = [];\n    let mode = 'indeterminate';\n    let message;\n    for (const { progress } of Object.values(files)) {\n        const { preprocess, postprocess } = progress;\n        // In the future we should probably do this differently. For now we'll take the\n        // mode and message from the first file\u2026\n        if (message == null && (preprocess || postprocess)) {\n            ;\n            ({ mode, message } = preprocess || postprocess);\n        }\n        if (preprocess?.mode === 'determinate')\n            values.push(preprocess.value);\n        if (postprocess?.mode === 'determinate')\n            values.push(postprocess.value);\n    }\n    const value = values.reduce((total, progressValue) => {\n        return total + progressValue / values.length;\n    }, 0);\n    return {\n        mode,\n        message,\n        value,\n    };\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { emaFilter } from '@uppy/utils';\nimport { Component } from 'preact';\nimport statusBarStates from './StatusBarStates.js';\nimport StatusBarUI, {} from './StatusBarUI.js';\nconst speedFilterHalfLife = 2000;\nconst ETAFilterHalfLife = 2000;\nfunction getUploadingState(error, isAllComplete, recoveredState, files) {\n    if (error) {\n        return statusBarStates.STATE_ERROR;\n    }\n    if (isAllComplete) {\n        return statusBarStates.STATE_COMPLETE;\n    }\n    if (recoveredState) {\n        return statusBarStates.STATE_WAITING;\n    }\n    let state = statusBarStates.STATE_WAITING;\n    const fileIDs = Object.keys(files);\n    for (let i = 0; i < fileIDs.length; i++) {\n        const { progress } = files[fileIDs[i]];\n        // If ANY files are being uploaded right now, show the uploading state.\n        if (progress.uploadStarted && !progress.uploadComplete) {\n            return statusBarStates.STATE_UPLOADING;\n        }\n        // If files are being preprocessed AND postprocessed at this time, we show the\n        // preprocess state. If any files are being uploaded we show uploading.\n        if (progress.preprocess) {\n            state = statusBarStates.STATE_PREPROCESSING;\n        }\n        // If NO files are being preprocessed or uploaded right now, but some files are\n        // being postprocessed, show the postprocess state.\n        if (progress.postprocess && state !== statusBarStates.STATE_PREPROCESSING) {\n            state = statusBarStates.STATE_POSTPROCESSING;\n        }\n    }\n    return state;\n}\nexport default class StatusBar extends Component {\n    #lastUpdateTime;\n    #previousUploadedBytes;\n    #previousSpeed;\n    #previousETA;\n    componentDidMount() {\n        // Initialize ETA calculation variables\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = this.props.uppy\n            .getFiles()\n            .reduce((pv, file) => pv + (file.progress.bytesUploaded || 0), 0);\n        // Listen for upload start to reset ETA calculation\n        this.props.uppy.on('upload', this.#onUploadStart);\n    }\n    componentWillUnmount() {\n        this.props.uppy.off('upload', this.#onUploadStart);\n    }\n    #onUploadStart = () => {\n        const { recoveredState } = this.props.uppy.getState();\n        this.#previousSpeed = null;\n        this.#previousETA = null;\n        if (recoveredState) {\n            this.#previousUploadedBytes = Object.values(recoveredState.files).reduce((pv, { progress }) => pv + (progress.bytesUploaded || 0), 0);\n            // We don't set `#lastUpdateTime` at this point because the upload won't\n            // actually resume until the user asks for it.\n            return;\n        }\n        this.#lastUpdateTime = performance.now();\n        this.#previousUploadedBytes = 0;\n    };\n    #computeSmoothETA(totalBytes) {\n        if (totalBytes.total == null || totalBytes.total === 0) {\n            return null;\n        }\n        const remaining = totalBytes.total - totalBytes.uploaded;\n        if (remaining <= 0) {\n            return null;\n        }\n        // When state is restored, lastUpdateTime is still nullish at this point.\n        this.#lastUpdateTime ??= performance.now();\n        const dt = performance.now() - this.#lastUpdateTime;\n        if (dt === 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        // Initialize previousUploadedBytes if it's null\n        if (this.#previousUploadedBytes == null) {\n            this.#previousUploadedBytes = totalBytes.uploaded;\n            return null; // Can't calculate speed on first call\n        }\n        const uploadedBytesSinceLastTick = totalBytes.uploaded - this.#previousUploadedBytes;\n        this.#previousUploadedBytes = totalBytes.uploaded;\n        // uploadedBytesSinceLastTick can be negative in some cases (packet loss?)\n        // in which case, we wait for next tick to update ETA.\n        if (uploadedBytesSinceLastTick <= 0) {\n            return Math.round((this.#previousETA ?? 0) / 100) / 10;\n        }\n        const currentSpeed = uploadedBytesSinceLastTick / dt;\n        // Guard against invalid speed values\n        if (!Number.isFinite(currentSpeed) || currentSpeed <= 0) {\n            return null;\n        }\n        const filteredSpeed = this.#previousSpeed == null\n            ? currentSpeed\n            : emaFilter(currentSpeed, this.#previousSpeed, speedFilterHalfLife, dt);\n        // Guard against invalid filtered speed\n        if (!Number.isFinite(filteredSpeed) || filteredSpeed <= 0) {\n            return null;\n        }\n        this.#previousSpeed = filteredSpeed;\n        const instantETA = remaining / filteredSpeed;\n        // Guard against invalid instantETA\n        if (!Number.isFinite(instantETA) || instantETA < 0) {\n            return null;\n        }\n        const updatedPreviousETA = Math.max((this.#previousETA ?? 0) - dt, 0);\n        const filteredETA = this.#previousETA == null\n            ? instantETA\n            : emaFilter(instantETA, updatedPreviousETA, ETAFilterHalfLife, dt);\n        // Guard against invalid filteredETA\n        if (!Number.isFinite(filteredETA) || filteredETA < 0) {\n            return null;\n        }\n        this.#previousETA = filteredETA;\n        this.#lastUpdateTime = performance.now();\n        return Math.round(filteredETA / 100) / 10;\n    }\n    startUpload = () => {\n        const { recoveredState } = this.props.uppy.getState();\n        if (recoveredState) {\n            this.props.uppy.emit('restore-confirmed');\n        }\n        else {\n            this.props.uppy.upload().catch((() => {\n                // Error logged in Core\n            }));\n        }\n    };\n    render() {\n        const { capabilities, files, allowNewUpload, totalProgress, error, recoveredState, } = this.props.uppy.getState();\n        const { newFiles, startedFiles, completeFiles, isUploadStarted, isAllComplete, isAllPaused, isUploadInProgress, isSomeGhost, } = this.props.uppy.getObjectOfFilesPerState();\n        const newFilesOrRecovered = recoveredState ? Object.values(files) : newFiles;\n        const resumableUploads = !!capabilities.resumableUploads;\n        const supportsUploadProgress = capabilities.uploadProgress !== false;\n        let totalSize = null;\n        let totalUploadedSize = 0;\n        // Only if all files have a known size, does it make sense to display a total size\n        if (startedFiles.every((f) => f.progress.bytesTotal != null && f.progress.bytesTotal !== 0)) {\n            totalSize = 0;\n            startedFiles.forEach((file) => {\n                totalSize += file.progress.bytesTotal || 0;\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        else {\n            // however uploaded size we will always have\n            startedFiles.forEach((file) => {\n                totalUploadedSize += file.progress.bytesUploaded || 0;\n            });\n        }\n        const totalETA = this.#computeSmoothETA({\n            uploaded: totalUploadedSize,\n            total: totalSize,\n        });\n        return (_jsx(StatusBarUI, { error: error, uploadState: getUploadingState(error, isAllComplete, recoveredState, files || {}), allowNewUpload: allowNewUpload, totalProgress: totalProgress, totalSize: totalSize, totalUploadedSize: totalUploadedSize, isAllComplete: isAllComplete, isAllPaused: isAllPaused, isUploadStarted: isUploadStarted, isUploadInProgress: isUploadInProgress, isSomeGhost: isSomeGhost, recoveredState: recoveredState, complete: completeFiles.length, newFiles: newFilesOrRecovered.length, numUploads: startedFiles.length, totalETA: totalETA, files: files, i18n: this.props.i18n, uppy: this.props.uppy, startUpload: this.startUpload, doneButtonHandler: this.props.doneButtonHandler, resumableUploads: resumableUploads, supportsUploadProgress: supportsUploadProgress, hideProgressDetails: this.props.hideProgressDetails, hideUploadButton: this.props.hideUploadButton, hideRetryButton: this.props.hideRetryButton, hidePauseResumeButton: this.props.hidePauseResumeButton, hideCancelButton: this.props.hideCancelButton, hideAfterFinish: this.props.hideAfterFinish }));\n    }\n}\n", "export default {\n    strings: {\n        // When `inline: false`, used as the screen reader label for the button that closes the modal.\n        closeModal: 'Close Modal',\n        // Used as the screen reader label for the plus (+) button that shows the \u201CAdd more files\u201D screen\n        addMoreFiles: 'Add more files',\n        addingMoreFiles: 'Adding more files',\n        // Used as the header for import panels, e.g., \u201CImport from Google Drive\u201D.\n        importFrom: 'Import from %{name}',\n        // When `inline: false`, used as the screen reader label for the dashboard modal.\n        dashboardWindowTitle: 'Uppy Dashboard Window (Press escape to close)',\n        // When `inline: true`, used as the screen reader label for the dashboard area.\n        dashboardTitle: 'Uppy Dashboard',\n        // Shown in the Informer when a link to a file was copied to the clipboard.\n        copyLinkToClipboardSuccess: 'Link copied to clipboard.',\n        // Used when a link cannot be copied automatically \u2014 the user has to select the text from the\n        // input element below this string.\n        copyLinkToClipboardFallback: 'Copy the URL below',\n        // Used as the hover title and screen reader label for buttons that copy a file link.\n        copyLink: 'Copy link',\n        back: 'Back',\n        // Used as the screen reader label for buttons that remove a file.\n        removeFile: 'Remove file',\n        // Used as the screen reader label for buttons that open the metadata editor panel for a file.\n        editFile: 'Edit file',\n        editImage: 'Edit image',\n        // Shown in the panel header for the metadata editor. Rendered as \u201CEditing image.png\u201D.\n        editing: 'Editing %{file}',\n        // Shown on the main upload screen when an upload error occurs\n        error: 'Error',\n        // Used as the screen reader label for the button that saves metadata edits and returns to the\n        // file list view.\n        finishEditingFile: 'Finish editing file',\n        saveChanges: 'Save changes',\n        // Used as the label for the tab button that opens the system file selection dialog.\n        myDevice: 'My Device',\n        dropHint: 'Drop your files here',\n        // Used as the hover text and screen reader label for file progress indicators when\n        // they have been fully uploaded.\n        uploadComplete: 'Upload complete',\n        uploadPaused: 'Upload paused',\n        // Used as the hover text and screen reader label for the buttons to resume paused uploads.\n        resumeUpload: 'Resume upload',\n        // Used as the hover text and screen reader label for the buttons to pause uploads.\n        pauseUpload: 'Pause upload',\n        // Used as the hover text and screen reader label for the buttons to retry failed uploads.\n        retryUpload: 'Retry upload',\n        // Used as the hover text and screen reader label for the buttons to cancel uploads.\n        cancelUpload: 'Cancel upload',\n        // Used in a title, how many files are currently selected\n        xFilesSelected: {\n            0: '%{smart_count} file selected',\n            1: '%{smart_count} files selected',\n        },\n        uploadingXFiles: {\n            0: 'Uploading %{smart_count} file',\n            1: 'Uploading %{smart_count} files',\n        },\n        processingXFiles: {\n            0: 'Processing %{smart_count} file',\n            1: 'Processing %{smart_count} files',\n        },\n        // The \"powered by Uppy\" link at the bottom of the Dashboard.\n        poweredBy: 'Powered by %{uppy}',\n        addMore: 'Add more',\n        editFileWithFilename: 'Edit file %{file}',\n        save: 'Save',\n        cancel: 'Cancel',\n        dropPasteFiles: 'Drop files here or %{browseFiles}',\n        dropPasteFolders: 'Drop files here or %{browseFolders}',\n        dropPasteBoth: 'Drop files here, %{browseFiles} or %{browseFolders}',\n        dropPasteImportFiles: 'Drop files here, %{browseFiles} or import from:',\n        dropPasteImportFolders: 'Drop files here, %{browseFolders} or import from:',\n        dropPasteImportBoth: 'Drop files here, %{browseFiles}, %{browseFolders} or import from:',\n        importFiles: 'Import files from:',\n        browseFiles: 'browse files',\n        browseFolders: 'browse folders',\n        recoveredXFiles: {\n            0: 'We could not fully recover 1 file. Please re-select it and resume the upload.',\n            1: 'We could not fully recover %{smart_count} files. Please re-select them and resume the upload.',\n        },\n        recoveredAllFiles: 'We restored all files. You can now resume the upload.',\n        sessionRestored: 'Session restored',\n        reSelect: 'Re-select',\n        missingRequiredMetaFields: {\n            0: 'Missing required meta field: %{fields}.',\n            1: 'Missing required meta fields: %{fields}.',\n        },\n        // Used for native device camera buttons on mobile\n        takePictureBtn: 'Take Picture',\n        recordVideoBtn: 'Record Video',\n        // Strings for StatusBar\n        // Shown in the status bar while files are being uploaded.\n        uploading: 'Uploading',\n        // Shown in the status bar once all files have been uploaded.\n        complete: 'Complete',\n        // Shown in the status bar if an upload failed.\n        uploadFailed: 'Upload failed',\n        // Shown in the status bar while the upload is paused.\n        paused: 'Paused',\n        // Used as the label for the button that retries an upload.\n        retry: 'Retry',\n        // Used as the label for the button that pauses an upload.\n        pause: 'Pause',\n        // Used as the label for the button that resumes an upload.\n        resume: 'Resume',\n        // Used as the label for the button that resets the upload state after an upload\n        done: 'Done',\n        // When `hideProgressDetails` is set to false, shows the number of files that have been fully uploaded so far.\n        filesUploadedOfTotal: {\n            0: '%{complete} of %{smart_count} file uploaded',\n            1: '%{complete} of %{smart_count} files uploaded',\n        },\n        // When `hideProgressDetails` is set to false, shows the amount of bytes that have been uploaded so far.\n        dataUploadedOfTotal: '%{complete} of %{total}',\n        dataUploadedOfUnknown: '%{complete} of unknown',\n        // When `hideProgressDetails` is set to false, shows an estimation of how long the upload will take to complete.\n        xTimeLeft: '%{time} left',\n        // Used as the label for the button that starts an upload.\n        uploadXFiles: {\n            0: 'Upload %{smart_count} file',\n            1: 'Upload %{smart_count} files',\n        },\n        // Used as the label for the button that starts an upload, if another upload has been started in the past\n        // and new files were added later.\n        uploadXNewFiles: {\n            0: 'Upload +%{smart_count} file',\n            1: 'Upload +%{smart_count} files',\n        },\n        upload: 'Upload',\n        xMoreFilesAdded: {\n            0: '%{smart_count} more file added',\n            1: '%{smart_count} more files added',\n        },\n        showErrorDetails: 'Show error details',\n    },\n};\n", "// @ts-ignore untyped\nimport { FOCUSABLE_ELEMENTS } from '@uppy/utils';\nimport debounce from 'lodash/debounce.js';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\n/*\n  Focuses on some element in the currently topmost overlay.\n\n  1. If there are some [data-uppy-super-focusable] elements rendered already - focuses\n     on the first superfocusable element, and leaves focus up to the control of\n     a user (until currently focused element disappears from the screen [which\n     can happen when overlay changes, or, e.g., when we click on a folder in googledrive]).\n  2. If there are no [data-uppy-super-focusable] elements yet (or ever) - focuses\n     on the first focusable element, but switches focus if superfocusable elements appear on next render.\n*/\nexport default function createSuperFocus() {\n    let lastFocusWasOnSuperFocusableEl = false;\n    const superFocus = (dashboardEl, activeOverlayType) => {\n        const overlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n        const isFocusInOverlay = overlayEl.contains(document.activeElement);\n        // If focus is already in the topmost overlay, AND on last update we focused on the superfocusable\n        // element - then leave focus up to the user.\n        // [Practical check] without this line, typing in the search input in googledrive overlay won't work.\n        if (isFocusInOverlay && lastFocusWasOnSuperFocusableEl)\n            return;\n        const superFocusableEl = overlayEl.querySelector('[data-uppy-super-focusable]');\n        // If we are already in the topmost overlay, AND there are no super focusable elements yet, - leave focus up to the user.\n        // [Practical check] without this line, if you are in an empty folder in google drive, and something's uploading in the\n        // bg, - focus will be jumping to Done all the time.\n        if (isFocusInOverlay && !superFocusableEl)\n            return;\n        if (superFocusableEl) {\n            superFocusableEl.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = true;\n        }\n        else {\n            const firstEl = overlayEl.querySelector(FOCUSABLE_ELEMENTS);\n            firstEl?.focus({ preventScroll: true });\n            lastFocusWasOnSuperFocusableEl = false;\n        }\n    };\n    // ___Why do we need to debounce?\n    //    1. To deal with animations: overlay changes via animations, which results in the DOM updating AFTER plugin.update()\n    //       already executed.\n    //    [Practical check] without debounce, if we open the Url overlay, and click 'Done', Dashboard won't get focused again.\n    //    [Practical check] if we delay 250ms instead of 260ms - IE11 won't get focused in same situation.\n    //    2. Performance: there can be many state update()s in a second, and this function is called every time.\n    return debounce(superFocus, 260);\n}\n", "/**\n * @returns {HTMLElement} - either dashboard element, or the overlay that's most on top\n */\nexport default function getActiveOverlayEl(dashboardEl, activeOverlayType) {\n    if (activeOverlayType) {\n        const overlayEl = dashboardEl.querySelector(`[data-uppy-paneltype=\"${activeOverlayType}\"]`);\n        // if an overlay is already mounted\n        if (overlayEl)\n            return overlayEl;\n    }\n    return dashboardEl;\n}\n", "// @ts-ignore untyped\nimport { FOCUSABLE_ELEMENTS, toArray } from '@uppy/utils';\nimport getActiveOverlayEl from './getActiveOverlayEl.js';\nfunction focusOnFirstNode(event, nodes) {\n    const node = nodes[0];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\nfunction focusOnLastNode(event, nodes) {\n    const node = nodes[nodes.length - 1];\n    if (node) {\n        node.focus();\n        event.preventDefault();\n    }\n}\n// ___Why not just use (focusedItemIndex === -1)?\n//    Firefox thinks <ul> is focusable, but we don't have <ul>s in our FOCUSABLE_ELEMENTS. Which means that if we tab into\n//    the <ul>, code will think that we are not in the active overlay, and we should focusOnFirstNode() of the currently\n//    active overlay!\n//    [Practical check] if we use (focusedItemIndex === -1), instagram provider in firefox will never get focus on its pics\n//    in the <ul>.\nfunction isFocusInOverlay(activeOverlayEl) {\n    return activeOverlayEl.contains(document.activeElement);\n}\nfunction trapFocus(event, activeOverlayType, dashboardEl) {\n    const activeOverlayEl = getActiveOverlayEl(dashboardEl, activeOverlayType);\n    const focusableNodes = toArray(activeOverlayEl.querySelectorAll(FOCUSABLE_ELEMENTS));\n    const focusedItemIndex = focusableNodes.indexOf(document.activeElement);\n    // If we pressed tab, and focus is not yet within the current overlay - focus on\n    // the first element within the current overlay.\n    // This is a safety measure (for when user returns from another tab e.g.), most\n    // plugins will try to focus on some important element as it loads.\n    if (!isFocusInOverlay(activeOverlayEl)) {\n        focusOnFirstNode(event, focusableNodes);\n        // If we pressed shift + tab, and we're on the first element of a modal\n    }\n    else if (event.shiftKey && focusedItemIndex === 0) {\n        focusOnLastNode(event, focusableNodes);\n        // If we pressed tab, and we're on the last element of the modal\n    }\n    else if (!event.shiftKey &&\n        focusedItemIndex === focusableNodes.length - 1) {\n        focusOnFirstNode(event, focusableNodes);\n    }\n}\n// Traps focus inside of the currently open overlay (e.g. Dashboard, or e.g. Instagram),\n// never lets focus disappear from the modal.\nexport { trapFocus as forModal };\n// Traps focus inside of the currently open overlay, unless overlay is null - then let the user tab away.\nexport function forInline(event, activeOverlayType, dashboardEl) {\n    // ___When we're in the bare 'Drop files here, paste, browse or import from' screen\n    if (activeOverlayType === null) {\n        // Do nothing and let the browser handle it, user can tab away from Uppy to other elements on the page\n        // ___When there is some overlay with 'Done' button\n    }\n    else {\n        // Trap the focus inside this overlay!\n        // User can close the overlay (click 'Done') if they want to travel away from Uppy.\n        trapFocus(event, activeOverlayType, dashboardEl);\n    }\n}\n", "import { UIPlugin } from '@uppy/core';\nimport { defaultPickerIcon } from '@uppy/provider-views';\nimport ThumbnailGenerator from '@uppy/thumbnail-generator';\nimport { findAllDOMElements, getDroppedFiles, toArray } from '@uppy/utils';\nimport { nanoid } from 'nanoid/non-secure';\nimport packageJson from '../package.json' with { type: 'json' };\nimport DashboardUI from './components/Dashboard.js';\nimport locale from './locale.js';\nimport createSuperFocus from './utils/createSuperFocus.js';\nimport * as trapFocus from './utils/trapFocus.js';\nconst TAB_KEY = 9;\nconst ESC_KEY = 27;\nfunction createPromise() {\n    const o = {};\n    o.promise = new Promise((resolve, reject) => {\n        o.resolve = resolve;\n        o.reject = reject;\n    });\n    return o;\n}\nconst defaultOptions = {\n    target: 'body',\n    metaFields: [],\n    thumbnailWidth: 280,\n    thumbnailType: 'image/jpeg',\n    waitForThumbnailsBeforeUpload: false,\n    defaultPickerIcon,\n    showLinkToFileUploadResult: false,\n    hideProgressDetails: false,\n    hideUploadButton: false,\n    hideCancelButton: false,\n    hideRetryButton: false,\n    hidePauseResumeButton: false,\n    hideProgressAfterFinish: false,\n    note: null,\n    singleFileFullScreen: true,\n    disableStatusBar: false,\n    disableInformer: false,\n    disableThumbnailGenerator: false,\n    fileManagerSelectionType: 'files',\n    proudlyDisplayPoweredByUppy: true,\n    showSelectedFiles: true,\n    showRemoveButtonAfterComplete: false,\n    showNativePhotoCameraButton: false,\n    showNativeVideoCameraButton: false,\n    theme: 'light',\n    autoOpen: null,\n    disabled: false,\n    disableLocalFiles: false,\n    nativeCameraFacingMode: '',\n    onDragLeave: () => { },\n    onDragOver: () => { },\n    onDrop: () => { },\n    plugins: [],\n    // Dynamic default options, they have to be defined in the constructor (because\n    // they require access to the `this` keyword), but we still want them to\n    // appear in the default options so TS knows they'll be defined.\n    doneButtonHandler: undefined,\n    onRequestCloseModal: null,\n    // defaultModalOptions\n    inline: false,\n    animateOpenClose: true,\n    browserBackButtonClose: false,\n    closeAfterFinish: false,\n    closeModalOnClickOutside: false,\n    disablePageScrollWhenModalOpen: true,\n    trigger: null,\n    // defaultInlineOptions\n    width: 750,\n    height: 550,\n};\n/**\n * Dashboard UI with previews, metadata editing, tabs for various services and more\n */\nexport default class Dashboard extends UIPlugin {\n    static VERSION = packageJson.version;\n    #disabledNodes;\n    modalName = `uppy-Dashboard-${nanoid()}`;\n    superFocus = createSuperFocus();\n    ifFocusedOnUppyRecently = false;\n    dashboardIsDisabled;\n    savedScrollPosition;\n    savedActiveElement;\n    resizeObserver;\n    darkModeMediaQuery;\n    // Timeouts\n    makeDashboardInsidesVisibleAnywayTimeout;\n    constructor(uppy, opts) {\n        const autoOpen = opts?.autoOpen ?? null;\n        super(uppy, { ...defaultOptions, ...opts, autoOpen });\n        this.id = this.opts.id || 'Dashboard';\n        this.title = 'Dashboard';\n        this.type = 'orchestrator';\n        this.defaultLocale = locale;\n        // Dynamic default options:\n        if (this.opts.doneButtonHandler === undefined) {\n            // `null` means \"do not display a Done button\", while `undefined` means\n            // \"I want the default behavior\". For this reason, we need to differentiate `null` and `undefined`.\n            this.opts.doneButtonHandler = () => {\n                this.uppy.clear();\n                this.requestCloseModal();\n            };\n        }\n        this.opts.onRequestCloseModal ??= () => this.closeModal();\n        this.i18nInit();\n    }\n    removeTarget = (plugin) => {\n        const pluginState = this.getPluginState();\n        // filter out the one we want to remove\n        const newTargets = pluginState.targets.filter((target) => target.id !== plugin.id);\n        this.setPluginState({\n            targets: newTargets,\n        });\n    };\n    addTarget = (plugin) => {\n        const callerPluginId = plugin.id || plugin.constructor.name;\n        const callerPluginName = plugin.title || callerPluginId;\n        const callerPluginType = plugin.type;\n        if (callerPluginType !== 'acquirer' &&\n            callerPluginType !== 'progressindicator' &&\n            callerPluginType !== 'editor') {\n            const msg = 'Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor';\n            this.uppy.log(msg, 'error');\n            return null;\n        }\n        const target = {\n            id: callerPluginId,\n            name: callerPluginName,\n            type: callerPluginType,\n        };\n        const state = this.getPluginState();\n        const newTargets = state.targets.slice();\n        newTargets.push(target);\n        this.setPluginState({\n            targets: newTargets,\n        });\n        return this.el;\n    };\n    hideAllPanels = () => {\n        const state = this.getPluginState();\n        const update = {\n            activePickerPanel: undefined,\n            showAddFilesPanel: false,\n            activeOverlayType: null,\n            fileCardFor: null,\n            showFileEditor: false,\n        };\n        if (state.activePickerPanel === update.activePickerPanel &&\n            state.showAddFilesPanel === update.showAddFilesPanel &&\n            state.showFileEditor === update.showFileEditor &&\n            state.activeOverlayType === update.activeOverlayType) {\n            // avoid doing a state update if nothing changed\n            return;\n        }\n        this.setPluginState(update);\n        this.uppy.emit('dashboard:close-panel', state.activePickerPanel?.id);\n    };\n    showPanel = (id) => {\n        const { targets } = this.getPluginState();\n        const activePickerPanel = targets.find((target) => {\n            return target.type === 'acquirer' && target.id === id;\n        });\n        this.setPluginState({\n            activePickerPanel,\n            activeOverlayType: 'PickerPanel',\n        });\n        this.uppy.emit('dashboard:show-panel', id);\n    };\n    canEditFile = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        return editors.some((target) => this.uppy.getPlugin(target.id).canEditFile(file));\n    };\n    openFileEditor = (file) => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        this.setPluginState({\n            showFileEditor: true,\n            fileCardFor: file.id || null,\n            activeOverlayType: 'FileEditor',\n        });\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).selectFile(file);\n        });\n    };\n    closeFileEditor = () => {\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        if (isMetaEditorEnabled) {\n            this.setPluginState({\n                showFileEditor: false,\n                activeOverlayType: 'FileCard',\n            });\n        }\n        else {\n            this.setPluginState({\n                showFileEditor: false,\n                fileCardFor: null,\n                activeOverlayType: 'AddFiles',\n            });\n        }\n    };\n    saveFileEditor = () => {\n        const { targets } = this.getPluginState();\n        const editors = this.#getEditors(targets);\n        editors.forEach((editor) => {\n            ;\n            this.uppy.getPlugin(editor.id).save();\n        });\n        this.closeFileEditor();\n    };\n    openModal = () => {\n        const { promise, resolve } = createPromise();\n        // save scroll position\n        this.savedScrollPosition = window.pageYOffset;\n        // save active element, so we can restore focus when modal is closed\n        this.savedActiveElement = document.activeElement;\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.add('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose && this.getPluginState().isClosing) {\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: false,\n                });\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: false,\n            });\n            resolve();\n        }\n        if (this.opts.browserBackButtonClose) {\n            this.updateBrowserHistory();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.addEventListener('keydown', this.handleKeyDownInModal);\n        this.uppy.emit('dashboard:modal-open');\n        return promise;\n    };\n    closeModal = (opts) => {\n        // Whether the modal is being closed by the user (`true`) or by other means (e.g. browser back button)\n        const manualClose = opts?.manualClose ?? true;\n        const { isHidden, isClosing } = this.getPluginState();\n        if (isHidden || isClosing) {\n            // short-circuit if animation is ongoing\n            return undefined;\n        }\n        const { promise, resolve } = createPromise();\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        if (this.opts.animateOpenClose) {\n            this.setPluginState({\n                isClosing: true,\n            });\n            const handler = () => {\n                this.setPluginState({\n                    isHidden: true,\n                    isClosing: false,\n                });\n                this.superFocus.cancel();\n                this.savedActiveElement.focus();\n                this.el.removeEventListener('animationend', handler, false);\n                resolve();\n            };\n            this.el.addEventListener('animationend', handler, false);\n        }\n        else {\n            this.setPluginState({\n                isHidden: true,\n            });\n            this.superFocus.cancel();\n            this.savedActiveElement.focus();\n            resolve();\n        }\n        // handle ESC and TAB keys in modal dialog\n        document.removeEventListener('keydown', this.handleKeyDownInModal);\n        if (manualClose) {\n            if (this.opts.browserBackButtonClose) {\n                // Make sure that the latest entry in the history state is our modal name\n                if (history.state?.[this.modalName]) {\n                    // Go back in history to clear out the entry we created (ultimately closing the modal)\n                    history.back();\n                }\n            }\n        }\n        this.uppy.emit('dashboard:modal-closed');\n        return promise;\n    };\n    isModalOpen = () => {\n        return !this.getPluginState().isHidden || false;\n    };\n    requestCloseModal = () => {\n        if (this.opts.onRequestCloseModal) {\n            return this.opts.onRequestCloseModal();\n        }\n        return this.closeModal();\n    };\n    setDarkModeCapability = (isDarkModeOn) => {\n        const { capabilities } = this.uppy.getState();\n        this.uppy.setState({\n            capabilities: {\n                ...capabilities,\n                darkMode: isDarkModeOn,\n            },\n        });\n    };\n    handleSystemDarkModeChange = (event) => {\n        const isDarkModeOnNow = event.matches;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnNow ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnNow);\n    };\n    toggleFileCard = (show, fileID) => {\n        const file = this.uppy.getFile(fileID);\n        if (show) {\n            this.uppy.emit('dashboard:file-edit-start', file);\n        }\n        else {\n            this.uppy.emit('dashboard:file-edit-complete', file);\n        }\n        this.setPluginState({\n            fileCardFor: show ? fileID : null,\n            activeOverlayType: show ? 'FileCard' : null,\n        });\n    };\n    toggleAddFilesPanel = (show) => {\n        this.setPluginState({\n            showAddFilesPanel: show,\n            activeOverlayType: show ? 'AddFiles' : null,\n        });\n    };\n    addFiles = (files) => {\n        const descriptors = files.map((file) => ({\n            source: this.id,\n            name: file.name,\n            type: file.type,\n            data: file,\n            meta: {\n                // path of the file relative to the ancestor directory the user selected.\n                // e.g. 'docs/Old Prague/airbnb.pdf'\n                relativePath: file.relativePath || file.webkitRelativePath || null,\n            },\n        }));\n        try {\n            this.uppy.addFiles(descriptors);\n        }\n        catch (err) {\n            this.uppy.log(err);\n        }\n    };\n    // ___Why make insides of Dashboard invisible until first ResizeObserver event is emitted?\n    //    ResizeOberserver doesn't emit the first resize event fast enough, users can see the jump from one .uppy-size-- to\n    //    another (e.g. in Safari)\n    // ___Why not apply visibility property to .uppy-Dashboard-inner?\n    //    Because ideally, acc to specs, ResizeObserver should see invisible elements as of width 0. So even though applying\n    //    invisibility to .uppy-Dashboard-inner works now, it may not work in the future.\n    startListeningToResize = () => {\n        // Watch for Dashboard container (`.uppy-Dashboard-inner`) resize\n        // and update containerWidth/containerHeight in plugin state accordingly.\n        // Emits first event on initialization.\n        this.resizeObserver = new ResizeObserver((entries) => {\n            const uppyDashboardInnerEl = entries[0];\n            const { width, height } = uppyDashboardInnerEl.contentRect;\n            this.setPluginState({\n                containerWidth: width,\n                containerHeight: height,\n                areInsidesReadyToBeVisible: true,\n            });\n        });\n        this.resizeObserver.observe(this.el.querySelector('.uppy-Dashboard-inner'));\n        // If ResizeObserver fails to emit an event telling us what size to use - default to the mobile view\n        this.makeDashboardInsidesVisibleAnywayTimeout = setTimeout(() => {\n            const pluginState = this.getPluginState();\n            const isModalAndClosed = !this.opts.inline && pluginState.isHidden;\n            if (\n            // We might want to enable this in the future\n            // if ResizeObserver hasn't yet fired,\n            !pluginState.areInsidesReadyToBeVisible &&\n                // and it's not due to the modal being closed\n                !isModalAndClosed) {\n                this.uppy.log('[Dashboard] resize event didn\u2019t fire on time: defaulted to mobile layout', 'warning');\n                this.setPluginState({\n                    areInsidesReadyToBeVisible: true,\n                });\n            }\n        }, 1000);\n    };\n    stopListeningToResize = () => {\n        this.resizeObserver.disconnect();\n        clearTimeout(this.makeDashboardInsidesVisibleAnywayTimeout);\n    };\n    // Records whether we have been interacting with uppy right now,\n    // which is then used to determine whether state updates should trigger a refocusing.\n    recordIfFocusedOnUppyRecently = (event) => {\n        if (this.el.contains(event.target)) {\n            this.ifFocusedOnUppyRecently = true;\n        }\n        else {\n            this.ifFocusedOnUppyRecently = false;\n            // ___Why run this.superFocus.cancel here when it already runs in superFocusOnEachUpdate?\n            //    Because superFocus is debounced, when we move from Uppy to some other element on the page,\n            //    previously run superFocus sometimes hits and moves focus back to Uppy.\n            this.superFocus.cancel();\n        }\n    };\n    disableInteractiveElements = (disable) => {\n        const NODES_TO_DISABLE = [\n            'a[href]',\n            'input:not([disabled])',\n            'select:not([disabled])',\n            'textarea:not([disabled])',\n            'button:not([disabled])',\n            '[role=\"button\"]:not([disabled])',\n        ];\n        const nodesToDisable = this.#disabledNodes ??\n            toArray(this.el.querySelectorAll(NODES_TO_DISABLE)).filter((node) => !node.classList.contains('uppy-Dashboard-close'));\n        for (const node of nodesToDisable) {\n            // Links can\u2019t have `disabled` attr, so we use `aria-disabled` for a11y\n            if (node.tagName === 'A') {\n                node.setAttribute('aria-disabled', disable);\n            }\n            else {\n                node.disabled = disable;\n            }\n        }\n        if (disable) {\n            this.#disabledNodes = nodesToDisable;\n        }\n        else {\n            this.#disabledNodes = null;\n        }\n        this.dashboardIsDisabled = disable;\n    };\n    updateBrowserHistory = () => {\n        // Ensure history state does not already contain our modal name to avoid double-pushing\n        if (!history.state?.[this.modalName]) {\n            // Push to history so that the page is not lost on browser back button press\n            history.pushState({\n                ...history.state,\n                [this.modalName]: true,\n            }, '');\n        }\n        // Listen for back button presses\n        window.addEventListener('popstate', this.handlePopState, false);\n    };\n    handlePopState = (event) => {\n        // Close the modal if the history state no longer contains our modal name\n        if (this.isModalOpen() && (!event.state || !event.state[this.modalName])) {\n            this.closeModal({ manualClose: false });\n        }\n        // When the browser back button is pressed and uppy is now the latest entry\n        // in the history but the modal is closed, fix the history by removing the\n        // uppy history entry.\n        // This occurs when another entry is added into the history state while the\n        // modal is open, and then the modal gets manually closed.\n        // Solves PR #575 (https://github.com/transloadit/uppy/pull/575)\n        if (!this.isModalOpen() && event.state?.[this.modalName]) {\n            history.back();\n        }\n    };\n    handleKeyDownInModal = (event) => {\n        // close modal on esc key press\n        if (event.keyCode === ESC_KEY)\n            this.requestCloseModal();\n        // trap focus on tab key press\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forModal(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    handleClickOutside = () => {\n        if (this.opts.closeModalOnClickOutside)\n            this.requestCloseModal();\n    };\n    handlePaste = (event) => {\n        // Let any acquirer plugin (Url/Webcam/etc.) handle pastes to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootPaste(event)\n                ;\n                plugin.handleRootPaste?.(event);\n            }\n        });\n        // Add all dropped files\n        const files = toArray(event.clipboardData.files);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files pasted');\n            this.addFiles(files);\n        }\n    };\n    handleInputChange = (event) => {\n        event.preventDefault();\n        const files = toArray(event.currentTarget.files || []);\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files selected through input');\n            this.addFiles(files);\n        }\n    };\n    handleDragOver = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        // Check if some plugin can handle the datatransfer without files \u2014\n        // for instance, the Url plugin can import a url\n        const canSomePluginHandleRootDrop = () => {\n            let somePluginCanHandleRootDrop = true;\n            this.uppy.iteratePlugins((plugin) => {\n                if (plugin.canHandleRootDrop?.(event)) {\n                    somePluginCanHandleRootDrop = true;\n                }\n            });\n            return somePluginCanHandleRootDrop;\n        };\n        // Check if the \"type\" of the datatransfer object includes files\n        const doesEventHaveFiles = () => {\n            const { types } = event.dataTransfer;\n            return types.some((type) => type === 'Files');\n        };\n        // Deny drop, if no plugins can handle datatransfer, there are no files,\n        // or when opts.disabled is set, or new uploads are not allowed\n        const somePluginCanHandleRootDrop = canSomePluginHandleRootDrop();\n        const hasFiles = doesEventHaveFiles();\n        if ((!somePluginCanHandleRootDrop && !hasFiles) ||\n            this.opts.disabled ||\n            // opts.disableLocalFiles should only be taken into account if no plugins\n            // can handle the datatransfer\n            (this.opts.disableLocalFiles &&\n                (hasFiles || !somePluginCanHandleRootDrop)) ||\n            !this.uppy.getState().allowNewUpload) {\n            event.dataTransfer.dropEffect = 'none';\n            return;\n        }\n        // Add a small (+) icon on drop\n        // (and prevent browsers from interpreting this as files being _moved_ into the\n        // browser, https://github.com/transloadit/uppy/issues/1978).\n        event.dataTransfer.dropEffect = 'copy';\n        this.setPluginState({ isDraggingOver: true });\n        this.opts.onDragOver(event);\n    };\n    handleDragLeave = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        this.opts.onDragLeave(event);\n    };\n    handleDrop = async (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        this.setPluginState({ isDraggingOver: false });\n        // Let any acquirer plugin (Url/Webcam/etc.) handle drops to the root\n        this.uppy.iteratePlugins((plugin) => {\n            if (plugin.type === 'acquirer') {\n                // Every Plugin with .type acquirer can define handleRootDrop(event)\n                ;\n                plugin.handleRootDrop?.(event);\n            }\n        });\n        // Add all dropped files\n        let executedDropErrorOnce = false;\n        const logDropError = (error) => {\n            this.uppy.log(error, 'error');\n            // In practice all drop errors are most likely the same,\n            // so let's just show one to avoid overwhelming the user\n            if (!executedDropErrorOnce) {\n                this.uppy.info(error.message, 'error');\n                executedDropErrorOnce = true;\n            }\n        };\n        this.uppy.log('[Dashboard] Processing dropped files');\n        // Add all dropped files\n        const files = await getDroppedFiles(event.dataTransfer, { logDropError });\n        if (files.length > 0) {\n            this.uppy.log('[Dashboard] Files dropped');\n            this.addFiles(files);\n        }\n        this.opts.onDrop(event);\n    };\n    handleRequestThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:request', file);\n        }\n    };\n    /**\n     * We cancel thumbnail requests when a file item component unmounts to avoid\n     * clogging up the queue when the user scrolls past many elements.\n     */\n    handleCancelThumbnail = (file) => {\n        if (!this.opts.waitForThumbnailsBeforeUpload) {\n            this.uppy.emit('thumbnail:cancel', file);\n        }\n    };\n    handleKeyDownInInline = (event) => {\n        // Trap focus on tab key press.\n        if (event.keyCode === TAB_KEY)\n            trapFocus.forInline(event, this.getPluginState().activeOverlayType, this.el);\n    };\n    // ___Why do we listen to the 'paste' event on a document instead of onPaste={props.handlePaste} prop,\n    //    or this.el.addEventListener('paste')?\n    //    Because (at least) Chrome doesn't handle paste if focus is on some button, e.g. 'My Device'.\n    //    => Therefore, the best option is to listen to all 'paste' events, and only react to them when we are focused on our\n    //       particular Uppy instance.\n    // ___Why do we still need onPaste={props.handlePaste} for the DashboardUi?\n    //    Because if we click on the 'Drop files here' caption e.g., `document.activeElement` will be 'body'. Which means our\n    //    standard determination of whether we're pasting into our Uppy instance won't work.\n    //    => Therefore, we need a traditional onPaste={props.handlePaste} handler too.\n    handlePasteOnBody = (event) => {\n        const isFocusInOverlay = this.el.contains(document.activeElement);\n        if (isFocusInOverlay) {\n            this.handlePaste(event);\n        }\n    };\n    handleComplete = ({ failed }) => {\n        if (this.opts.closeAfterFinish && !failed?.length) {\n            // All uploads are done\n            this.requestCloseModal();\n        }\n    };\n    #generateLargeThumbnailIfSingleFile = () => {\n        if (this.opts.disableThumbnailGenerator) {\n            return;\n        }\n        const LARGE_THUMBNAIL = 600;\n        const files = this.uppy.getFiles();\n        if (files.length === 1) {\n            const thumbnailGenerator = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            thumbnailGenerator?.setOptions({ thumbnailWidth: LARGE_THUMBNAIL });\n            const fileForThumbnail = { ...files[0], preview: undefined };\n            thumbnailGenerator?.requestThumbnail(fileForThumbnail).then(() => {\n                thumbnailGenerator?.setOptions({\n                    thumbnailWidth: this.opts.thumbnailWidth,\n                });\n            });\n        }\n    };\n    #openFileEditorWhenFilesAdded = (files) => {\n        const firstFile = files[0];\n        const { metaFields } = this.getPluginState();\n        const isMetaEditorEnabled = metaFields && metaFields.length > 0;\n        const isImageEditorEnabled = this.canEditFile(firstFile);\n        if (isMetaEditorEnabled && this.opts.autoOpen === 'metaEditor') {\n            this.toggleFileCard(true, firstFile.id);\n        }\n        else if (isImageEditorEnabled && this.opts.autoOpen === 'imageEditor') {\n            this.openFileEditor(firstFile);\n        }\n    };\n    initEvents = () => {\n        // Modal open button\n        if (this.opts.trigger && !this.opts.inline) {\n            const showModalTrigger = findAllDOMElements(this.opts.trigger);\n            if (showModalTrigger) {\n                showModalTrigger.forEach((trigger) => trigger.addEventListener('click', this.openModal));\n            }\n            else {\n                this.uppy.log('Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself', 'warning');\n            }\n        }\n        this.startListeningToResize();\n        document.addEventListener('paste', this.handlePasteOnBody);\n        this.uppy.on('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.on('plugin-remove', this.removeTarget);\n        this.uppy.on('file-added', this.hideAllPanels);\n        this.uppy.on('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.on('complete', this.handleComplete);\n        this.uppy.on('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.on('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        // ___Why fire on capture?\n        //    Because this.ifFocusedOnUppyRecently needs to change before onUpdate() fires.\n        document.addEventListener('focus', this.recordIfFocusedOnUppyRecently, true);\n        document.addEventListener('click', this.recordIfFocusedOnUppyRecently, true);\n        if (this.opts.inline) {\n            this.el.addEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.on('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    removeEvents = () => {\n        const showModalTrigger = findAllDOMElements(this.opts.trigger);\n        if (!this.opts.inline && showModalTrigger) {\n            showModalTrigger.forEach((trigger) => trigger.removeEventListener('click', this.openModal));\n        }\n        this.stopListeningToResize();\n        document.removeEventListener('paste', this.handlePasteOnBody);\n        window.removeEventListener('popstate', this.handlePopState, false);\n        this.uppy.off('plugin-added', this.#addSupportedPluginIfNoTarget);\n        this.uppy.off('plugin-remove', this.removeTarget);\n        this.uppy.off('file-added', this.hideAllPanels);\n        this.uppy.off('dashboard:modal-closed', this.hideAllPanels);\n        this.uppy.off('complete', this.handleComplete);\n        this.uppy.off('files-added', this.#generateLargeThumbnailIfSingleFile);\n        this.uppy.off('file-removed', this.#generateLargeThumbnailIfSingleFile);\n        document.removeEventListener('focus', this.recordIfFocusedOnUppyRecently);\n        document.removeEventListener('click', this.recordIfFocusedOnUppyRecently);\n        if (this.opts.inline) {\n            this.el.removeEventListener('keydown', this.handleKeyDownInInline);\n        }\n        if (this.opts.autoOpen) {\n            this.uppy.off('files-added', this.#openFileEditorWhenFilesAdded);\n        }\n    };\n    superFocusOnEachUpdate = () => {\n        const isFocusInUppy = this.el.contains(document.activeElement);\n        // When focus is lost on the page (== focus is on body for most browsers, or focus is null for IE11)\n        const isFocusNowhere = document.activeElement === document.body ||\n            document.activeElement === null;\n        const isInformerHidden = this.uppy.getState().info.length === 0;\n        const isModal = !this.opts.inline;\n        if (\n        // If update is connected to showing the Informer - let the screen reader calmly read it.\n        isInformerHidden &&\n            // If we are in a modal - always superfocus without concern for other elements\n            // on the page (user is unlikely to want to interact with the rest of the page)\n            (isModal ||\n                // If we are already inside of Uppy, or\n                isFocusInUppy ||\n                // If we are not focused on anything BUT we have already, at least once, focused on uppy\n                //   1. We focus when isFocusNowhere, because when the element we were focused\n                //      on disappears (e.g. an overlay), - focus gets lost. If user is typing\n                //      something somewhere else on the page, - focus won't be 'nowhere'.\n                //   2. We only focus when focus is nowhere AND this.ifFocusedOnUppyRecently,\n                //      to avoid focus jumps if we do something else on the page.\n                //   [Practical check] Without '&& this.ifFocusedOnUppyRecently', in Safari, in inline mode,\n                //                     when file is uploading, - navigate via tab to the checkbox,\n                //                     try to press space multiple times. Focus will jump to Uppy.\n                (isFocusNowhere && this.ifFocusedOnUppyRecently))) {\n            this.superFocus(this.el, this.getPluginState().activeOverlayType);\n        }\n        else {\n            this.superFocus.cancel();\n        }\n    };\n    afterUpdate = () => {\n        if (this.opts.disabled && !this.dashboardIsDisabled) {\n            this.disableInteractiveElements(true);\n            return;\n        }\n        if (!this.opts.disabled && this.dashboardIsDisabled) {\n            this.disableInteractiveElements(false);\n        }\n        this.superFocusOnEachUpdate();\n    };\n    saveFileCard = (meta, fileID) => {\n        this.uppy.setFileMeta(fileID, meta);\n        this.toggleFileCard(false, fileID);\n    };\n    #attachRenderFunctionToTarget = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        return {\n            ...target,\n            icon: plugin.icon || this.opts.defaultPickerIcon,\n            render: plugin.render,\n        };\n    };\n    #isTargetSupported = (target) => {\n        const plugin = this.uppy.getPlugin(target.id);\n        // If the plugin does not provide a `supported` check, assume the plugin works everywhere.\n        if (typeof plugin.isSupported !== 'function') {\n            return true;\n        }\n        return plugin.isSupported();\n    };\n    #getAcquirers = (targets) => {\n        return targets\n            .filter((target) => target.type === 'acquirer' && this.#isTargetSupported(target))\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getProgressIndicators = (targets) => {\n        return targets\n            .filter((target) => target.type === 'progressindicator')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    #getEditors = (targets) => {\n        return targets\n            .filter((target) => target.type === 'editor')\n            .map(this.#attachRenderFunctionToTarget);\n    };\n    render = (state) => {\n        const pluginState = this.getPluginState();\n        const { files, capabilities, allowNewUpload } = state;\n        const { newFiles, uploadStartedFiles, completeFiles, erroredFiles, inProgressFiles, inProgressNotPausedFiles, processingFiles, isUploadStarted, isAllComplete, isAllPaused, } = this.uppy.getObjectOfFilesPerState();\n        const acquirers = this.#getAcquirers(pluginState.targets);\n        const progressindicators = this.#getProgressIndicators(pluginState.targets);\n        const editors = this.#getEditors(pluginState.targets);\n        let theme;\n        if (this.opts.theme === 'auto') {\n            theme = capabilities.darkMode ? 'dark' : 'light';\n        }\n        else {\n            theme = this.opts.theme;\n        }\n        if (['files', 'folders', 'both'].indexOf(this.opts.fileManagerSelectionType) <\n            0) {\n            this.opts.fileManagerSelectionType = 'files';\n            console.warn(`Unsupported option for \"fileManagerSelectionType\". Using default of \"${this.opts.fileManagerSelectionType}\".`);\n        }\n        return DashboardUI({\n            state,\n            isHidden: pluginState.isHidden,\n            files,\n            newFiles,\n            uploadStartedFiles,\n            completeFiles,\n            erroredFiles,\n            inProgressFiles,\n            inProgressNotPausedFiles,\n            processingFiles,\n            isUploadStarted,\n            isAllComplete,\n            isAllPaused,\n            totalFileCount: Object.keys(files).length,\n            totalProgress: state.totalProgress,\n            allowNewUpload,\n            acquirers,\n            theme,\n            disabled: this.opts.disabled,\n            disableLocalFiles: this.opts.disableLocalFiles,\n            direction: this.opts.direction,\n            activePickerPanel: pluginState.activePickerPanel,\n            showFileEditor: pluginState.showFileEditor,\n            saveFileEditor: this.saveFileEditor,\n            closeFileEditor: this.closeFileEditor,\n            disableInteractiveElements: this.disableInteractiveElements,\n            animateOpenClose: this.opts.animateOpenClose,\n            isClosing: pluginState.isClosing,\n            progressindicators,\n            editors,\n            autoProceed: this.uppy.opts.autoProceed,\n            id: this.id,\n            closeModal: this.requestCloseModal,\n            handleClickOutside: this.handleClickOutside,\n            handleInputChange: this.handleInputChange,\n            handlePaste: this.handlePaste,\n            inline: this.opts.inline,\n            showPanel: this.showPanel,\n            hideAllPanels: this.hideAllPanels,\n            i18n: this.i18n,\n            i18nArray: this.i18nArray,\n            uppy: this.uppy,\n            note: this.opts.note,\n            recoveredState: state.recoveredState,\n            metaFields: pluginState.metaFields,\n            resumableUploads: capabilities.resumableUploads || false,\n            individualCancellation: capabilities.individualCancellation,\n            isMobileDevice: capabilities.isMobileDevice,\n            fileCardFor: pluginState.fileCardFor,\n            toggleFileCard: this.toggleFileCard,\n            toggleAddFilesPanel: this.toggleAddFilesPanel,\n            showAddFilesPanel: pluginState.showAddFilesPanel,\n            saveFileCard: this.saveFileCard,\n            openFileEditor: this.openFileEditor,\n            canEditFile: this.canEditFile,\n            width: this.opts.width,\n            height: this.opts.height,\n            showLinkToFileUploadResult: this.opts.showLinkToFileUploadResult,\n            fileManagerSelectionType: this.opts.fileManagerSelectionType,\n            proudlyDisplayPoweredByUppy: this.opts.proudlyDisplayPoweredByUppy,\n            showRemoveButtonAfterComplete: this.opts.showRemoveButtonAfterComplete,\n            containerWidth: pluginState.containerWidth,\n            containerHeight: pluginState.containerHeight,\n            areInsidesReadyToBeVisible: pluginState.areInsidesReadyToBeVisible,\n            parentElement: this.el,\n            allowedFileTypes: this.uppy.opts.restrictions.allowedFileTypes,\n            maxNumberOfFiles: this.uppy.opts.restrictions.maxNumberOfFiles,\n            requiredMetaFields: this.uppy.opts.restrictions.requiredMetaFields,\n            showSelectedFiles: this.opts.showSelectedFiles,\n            showNativePhotoCameraButton: this.opts.showNativePhotoCameraButton,\n            showNativeVideoCameraButton: this.opts.showNativeVideoCameraButton,\n            nativeCameraFacingMode: this.opts.nativeCameraFacingMode,\n            singleFileFullScreen: this.opts.singleFileFullScreen,\n            handleRequestThumbnail: this.handleRequestThumbnail,\n            handleCancelThumbnail: this.handleCancelThumbnail,\n            // drag props\n            isDraggingOver: pluginState.isDraggingOver,\n            handleDragOver: this.handleDragOver,\n            handleDragLeave: this.handleDragLeave,\n            handleDrop: this.handleDrop,\n            // informer props\n            disableInformer: this.opts.disableInformer,\n            // status-bar props\n            disableStatusBar: this.opts.disableStatusBar,\n            hideProgressDetails: this.opts.hideProgressDetails,\n            hideUploadButton: this.opts.hideUploadButton,\n            hideRetryButton: this.opts.hideRetryButton,\n            hidePauseResumeButton: this.opts.hidePauseResumeButton,\n            hideCancelButton: this.opts.hideCancelButton,\n            hideProgressAfterFinish: this.opts.hideProgressAfterFinish,\n            doneButtonHandler: this.opts.doneButtonHandler,\n        });\n    };\n    #addSpecifiedPluginsFromOptions = () => {\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin) {\n                ;\n                plugin.mount(this, plugin);\n            }\n            else {\n                this.uppy.log(`[Uppy] Dashboard could not find plugin '${pluginID}', make sure to uppy.use() the plugins you are specifying`, 'warning');\n            }\n        });\n    };\n    #autoDiscoverPlugins = () => {\n        this.uppy.iteratePlugins(this.#addSupportedPluginIfNoTarget);\n    };\n    #addSupportedPluginIfNoTarget = (plugin) => {\n        // Only these types belong on the Dashboard,\n        // we wouldn\u2019t want to try and mount Compressor or Tus, for example.\n        const typesAllowed = ['acquirer', 'editor'];\n        if (plugin && !plugin.opts?.target && typesAllowed.includes(plugin.type)) {\n            const pluginAlreadyAdded = this.getPluginState().targets.some((installedPlugin) => plugin.id === installedPlugin.id);\n            if (!pluginAlreadyAdded) {\n                ;\n                plugin.mount(this, plugin);\n            }\n        }\n    };\n    #getThumbnailGeneratorOpts() {\n        const { thumbnailWidth, thumbnailHeight, thumbnailType, waitForThumbnailsBeforeUpload, } = this.opts;\n        return {\n            thumbnailWidth,\n            thumbnailHeight,\n            thumbnailType,\n            waitForThumbnailsBeforeUpload,\n            // If we don't block on thumbnails, we can lazily generate them\n            lazy: !waitForThumbnailsBeforeUpload,\n        };\n    }\n    setOptions(opts) {\n        super.setOptions(opts);\n        this.uppy\n            .getPlugin(this.#getThumbnailGeneratorId())\n            ?.setOptions(this.#getThumbnailGeneratorOpts());\n    }\n    #getThumbnailGeneratorId() {\n        return `${this.id}:ThumbnailGenerator`;\n    }\n    install = () => {\n        // Set default state for Dashboard\n        this.setPluginState({\n            isHidden: true,\n            fileCardFor: null,\n            activeOverlayType: null,\n            showAddFilesPanel: false,\n            activePickerPanel: undefined,\n            showFileEditor: false,\n            metaFields: this.opts.metaFields,\n            targets: [],\n            // We'll make them visible once .containerWidth is determined\n            areInsidesReadyToBeVisible: false,\n            isDraggingOver: false,\n        });\n        const { inline, closeAfterFinish } = this.opts;\n        if (inline && closeAfterFinish) {\n            throw new Error('[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.');\n        }\n        const { allowMultipleUploads, allowMultipleUploadBatches } = this.uppy.opts;\n        if ((allowMultipleUploads || allowMultipleUploadBatches) &&\n            closeAfterFinish) {\n            this.uppy.log('[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true', 'warning');\n        }\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n        if (!this.opts.disableThumbnailGenerator) {\n            this.uppy.use(ThumbnailGenerator, {\n                id: this.#getThumbnailGeneratorId(),\n                ...this.#getThumbnailGeneratorOpts(),\n            });\n        }\n        // Dark Mode / theme\n        this.darkModeMediaQuery =\n            typeof window !== 'undefined' && window.matchMedia\n                ? window.matchMedia('(prefers-color-scheme: dark)')\n                : null;\n        const isDarkModeOnFromTheStart = this.darkModeMediaQuery\n            ? this.darkModeMediaQuery.matches\n            : false;\n        this.uppy.log(`[Dashboard] Dark mode is ${isDarkModeOnFromTheStart ? 'on' : 'off'}`);\n        this.setDarkModeCapability(isDarkModeOnFromTheStart);\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.addListener(this.handleSystemDarkModeChange);\n        }\n        this.#addSpecifiedPluginsFromOptions();\n        this.#autoDiscoverPlugins();\n        this.initEvents();\n    };\n    uninstall = () => {\n        if (!this.opts.disableThumbnailGenerator) {\n            const thumbnail = this.uppy.getPlugin(`${this.id}:ThumbnailGenerator`);\n            if (thumbnail)\n                this.uppy.removePlugin(thumbnail);\n        }\n        const { plugins } = this.opts;\n        plugins.forEach((pluginID) => {\n            const plugin = this.uppy.getPlugin(pluginID);\n            if (plugin)\n                plugin.unmount();\n        });\n        if (this.opts.theme === 'auto') {\n            this.darkModeMediaQuery?.removeListener(this.handleSystemDarkModeChange);\n        }\n        if (this.opts.disablePageScrollWhenModalOpen) {\n            document.body.classList.remove('uppy-Dashboard-isFixed');\n        }\n        this.unmount();\n        this.removeEvents();\n    };\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport { canvasToBlob, getFileTypeExtension, mimeTypes } from '@uppy/utils';\nimport { isMobile } from 'is-mobile';\n// biome-ignore lint/style/useImportType: h is not a type\nimport { h } from 'preact';\nimport packageJson from '../package.json' with { type: 'json' };\nimport CameraIcon from './CameraIcon.js';\nimport CameraScreen from './CameraScreen.js';\nimport locale from './locale.js';\nimport PermissionsScreen from './PermissionsScreen.js';\nimport supportsMediaRecorder from './supportsMediaRecorder.js';\n/**\n * Normalize a MIME type or file extension into a MIME type.\n *\n * @param fileType - MIME type or a file extension prefixed with `.`.\n * @returns The MIME type or `undefined` if the fileType is an extension and is not known.\n */\nfunction toMimeType(fileType) {\n    if (fileType[0] === '.') {\n        return mimeTypes[fileType.slice(1)];\n    }\n    return fileType;\n}\n/**\n * Is this MIME type a video?\n */\nfunction isVideoMimeType(mimeType) {\n    return /^video\\/[^*]+$/.test(mimeType);\n}\n/**\n * Is this MIME type an image?\n */\nfunction isImageMimeType(mimeType) {\n    return /^image\\/[^*]+$/.test(mimeType);\n}\nfunction getMediaDevices() {\n    // bug in the compatibility data\n    return navigator.mediaDevices;\n}\nfunction isModeAvailable(modes, mode) {\n    return modes.includes(mode);\n}\n// set default options\nexport const defaultOptions = {\n    onBeforeSnapshot: () => Promise.resolve(),\n    countdown: false,\n    modes: ['video-audio', 'video-only', 'audio-only', 'picture'],\n    mirror: true,\n    showVideoSourceDropdown: false,\n    preferredImageMimeType: null,\n    preferredVideoMimeType: null,\n    showRecordingLength: false,\n    mobileNativeCamera: isMobile({ tablet: true }),\n};\n/**\n * Webcam\n */\nexport default class Webcam extends UIPlugin {\n    static VERSION = packageJson.version;\n    // enableMirror is used to toggle mirroring, for instance when discarding the video,\n    // while `opts.mirror` is used to remember the initial user setting\n    #enableMirror;\n    mediaDevices;\n    supportsUserMedia;\n    protocol;\n    capturedMediaFile;\n    icon;\n    webcamActive;\n    stream = null;\n    recorder = null;\n    recordingChunks = null;\n    recordingLengthTimer;\n    captureInProgress = false;\n    constructor(uppy, opts) {\n        super(uppy, { ...defaultOptions, ...opts });\n        this.mediaDevices = getMediaDevices();\n        this.supportsUserMedia = !!this.mediaDevices;\n        this.protocol = location.protocol.match(/https/i) ? 'https' : 'http';\n        this.id = this.opts.id || 'Webcam';\n        this.type = 'acquirer';\n        this.capturedMediaFile = null;\n        this.icon = () => (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", width: \"32\", height: \"32\", viewBox: \"0 0 32 32\", children: _jsx(\"path\", { d: \"M23.5 9.5c1.417 0 2.5 1.083 2.5 2.5v9.167c0 1.416-1.083 2.5-2.5 2.5h-15c-1.417 0-2.5-1.084-2.5-2.5V12c0-1.417 1.083-2.5 2.5-2.5h2.917l1.416-2.167C13 7.167 13.25 7 13.5 7h5c.25 0 .5.167.667.333L20.583 9.5H23.5zM16 11.417a4.706 4.706 0 00-4.75 4.75 4.704 4.704 0 004.75 4.75 4.703 4.703 0 004.75-4.75c0-2.663-2.09-4.75-4.75-4.75zm0 7.825c-1.744 0-3.076-1.332-3.076-3.074 0-1.745 1.333-3.077 3.076-3.077 1.744 0 3.074 1.333 3.074 3.076s-1.33 3.075-3.074 3.075z\", fill: \"#02B383\", fillRule: \"nonzero\" }) }));\n        this.defaultLocale = locale;\n        this.i18nInit();\n        this.title = this.i18n('pluginNameCamera');\n        this.#enableMirror = this.opts.mirror;\n        this.install = this.install.bind(this);\n        this.setPluginState = this.setPluginState.bind(this);\n        this.render = this.render.bind(this);\n        // Camera controls\n        this.start = this.start.bind(this);\n        this.stop = this.stop.bind(this);\n        this.takeSnapshot = this.takeSnapshot.bind(this);\n        this.startRecording = this.startRecording.bind(this);\n        this.stopRecording = this.stopRecording.bind(this);\n        this.discardRecordedMedia = this.discardRecordedMedia.bind(this);\n        this.submit = this.submit.bind(this);\n        this.oneTwoThreeSmile = this.oneTwoThreeSmile.bind(this);\n        this.focus = this.focus.bind(this);\n        this.changeVideoSource = this.changeVideoSource.bind(this);\n        this.webcamActive = false;\n        if (this.opts.countdown) {\n            this.opts.onBeforeSnapshot = this.oneTwoThreeSmile;\n        }\n        this.setPluginState({\n            hasCamera: false,\n            cameraReady: false,\n            cameraError: null,\n            recordingLengthSeconds: 0,\n            videoSources: [],\n            currentDeviceId: null,\n            capturedSnapshot: null,\n        });\n    }\n    getStatus() {\n        const { recordedVideo, capturedSnapshot, isRecording, cameraReady, cameraError, } = this.getPluginState();\n        if (isRecording)\n            return 'recording';\n        if (recordedVideo != null || capturedSnapshot != null)\n            return 'captured';\n        if (cameraReady)\n            return 'ready';\n        if (cameraError)\n            return 'error';\n        return 'init';\n    }\n    setOptions(newOpts) {\n        super.setOptions({\n            ...newOpts,\n            videoConstraints: {\n                // May be undefined but ... handles that\n                ...this.opts.videoConstraints,\n                ...newOpts?.videoConstraints,\n            },\n        });\n    }\n    hasCameraCheck() {\n        if (!this.mediaDevices) {\n            return Promise.resolve(false);\n        }\n        return this.mediaDevices.enumerateDevices().then((devices) => {\n            return devices.some((device) => device.kind === 'videoinput');\n        });\n    }\n    isAudioOnly() {\n        return this.opts.modes.length === 1 && this.opts.modes[0] === 'audio-only';\n    }\n    getConstraints(deviceId = null) {\n        const acceptsAudio = this.opts.modes.indexOf('video-audio') !== -1 ||\n            this.opts.modes.indexOf('audio-only') !== -1;\n        const acceptsVideo = !this.isAudioOnly() &&\n            (this.opts.modes.indexOf('video-audio') !== -1 ||\n                this.opts.modes.indexOf('video-only') !== -1 ||\n                this.opts.modes.indexOf('picture') !== -1);\n        const videoConstraints = {\n            ...(this.opts.videoConstraints || {}),\n            ...(deviceId != null && { deviceId }),\n        };\n        return {\n            audio: acceptsAudio,\n            video: acceptsVideo ? videoConstraints : false,\n        };\n    }\n    start(options = null) {\n        if (!this.supportsUserMedia) {\n            return Promise.reject(new Error('Webcam access not supported'));\n        }\n        this.webcamActive = true;\n        if (this.opts.mirror) {\n            this.#enableMirror = true;\n        }\n        const constraints = this.getConstraints(options?.deviceId);\n        // TODO: add a return and/or convert this to async/await\n        this.hasCameraCheck().then((hasCamera) => {\n            this.setPluginState({\n                hasCamera,\n            });\n            // ask user for access to their camera\n            return this.mediaDevices\n                .getUserMedia(constraints)\n                .then((stream) => {\n                this.stream = stream;\n                let currentDeviceId = null;\n                const tracks = this.isAudioOnly()\n                    ? stream.getAudioTracks()\n                    : stream.getVideoTracks();\n                if (!options || !options.deviceId) {\n                    currentDeviceId = tracks[0].getSettings().deviceId;\n                }\n                else {\n                    tracks.forEach((track) => {\n                        if (track.getSettings().deviceId === options.deviceId) {\n                            currentDeviceId = track.getSettings().deviceId;\n                        }\n                    });\n                }\n                // Update the sources now, so we can access the names.\n                this.updateVideoSources();\n                this.setPluginState({\n                    currentDeviceId,\n                    cameraReady: true,\n                });\n            })\n                .catch((err) => {\n                this.setPluginState({\n                    cameraReady: false,\n                    cameraError: err,\n                });\n                this.uppy.info(err.message, 'error');\n            });\n        });\n    }\n    getMediaRecorderOptions() {\n        const options = {};\n        // Try to use the `opts.preferredVideoMimeType` or one of the `allowedFileTypes` for the recording.\n        // If the browser doesn't support it, we'll fall back to the browser default instead.\n        // Safari doesn't have the `isTypeSupported` API.\n        if (MediaRecorder.isTypeSupported) {\n            const { restrictions } = this.uppy.opts;\n            let preferredVideoMimeTypes = [];\n            if (this.opts.preferredVideoMimeType) {\n                preferredVideoMimeTypes = [this.opts.preferredVideoMimeType];\n            }\n            else if (restrictions.allowedFileTypes) {\n                preferredVideoMimeTypes = restrictions.allowedFileTypes\n                    .map(toMimeType)\n                    .filter(isVideoMimeType);\n            }\n            const filterSupportedTypes = (candidateType) => MediaRecorder.isTypeSupported(candidateType) &&\n                getFileTypeExtension(candidateType);\n            const acceptableMimeTypes = preferredVideoMimeTypes.filter(filterSupportedTypes);\n            if (acceptableMimeTypes.length > 0) {\n                options.mimeType = acceptableMimeTypes[0];\n            }\n        }\n        return options;\n    }\n    startRecording() {\n        // only used if supportsMediaRecorder() returned true\n        this.recorder = new MediaRecorder(this.stream, this.getMediaRecorderOptions());\n        this.recordingChunks = [];\n        let stoppingBecauseOfMaxSize = false;\n        this.recorder.addEventListener('dataavailable', (event) => {\n            this.recordingChunks.push(event.data);\n            const { restrictions } = this.uppy.opts;\n            if (this.recordingChunks.length > 1 &&\n                restrictions.maxFileSize != null &&\n                !stoppingBecauseOfMaxSize) {\n                const totalSize = this.recordingChunks.reduce((acc, chunk) => acc + chunk.size, 0);\n                // Exclude the initial chunk from the average size calculation because it is likely to be a very small outlier\n                const averageChunkSize = (totalSize - this.recordingChunks[0].size) /\n                    (this.recordingChunks.length - 1);\n                const expectedEndChunkSize = averageChunkSize * 3;\n                const maxSize = Math.max(0, restrictions.maxFileSize - expectedEndChunkSize);\n                if (totalSize > maxSize) {\n                    stoppingBecauseOfMaxSize = true;\n                    this.uppy.info(this.i18n('recordingStoppedMaxSize'), 'warning', 4000);\n                    this.stopRecording();\n                }\n            }\n        });\n        // use a \"time slice\" of 500ms: ondataavailable will be called each 500ms\n        // smaller time slices mean we can more accurately check the max file size restriction\n        this.recorder.start(500);\n        if (this.opts.showRecordingLength) {\n            // Start the recordingLengthTimer if we are showing the recording length.\n            this.recordingLengthTimer = setInterval(() => {\n                const currentRecordingLength = this.getPluginState().recordingLengthSeconds;\n                this.setPluginState({\n                    recordingLengthSeconds: currentRecordingLength + 1,\n                });\n            }, 1000);\n        }\n        this.setPluginState({\n            isRecording: true,\n        });\n    }\n    stopRecording() {\n        const stopped = new Promise((resolve) => {\n            this.recorder.addEventListener('stop', () => {\n                resolve();\n            });\n            this.recorder.stop();\n            if (this.opts.showRecordingLength) {\n                // Stop the recordingLengthTimer if we are showing the recording length.\n                clearInterval(this.recordingLengthTimer);\n                this.setPluginState({ recordingLengthSeconds: 0 });\n            }\n        });\n        return stopped\n            .then(() => {\n            this.setPluginState({\n                isRecording: false,\n            });\n            return this.getVideo();\n        })\n            .then((file) => {\n            try {\n                this.capturedMediaFile = file;\n                // create object url for capture result preview\n                this.setPluginState({\n                    recordedVideo: URL.createObjectURL(file.data),\n                });\n                this.#enableMirror = false;\n            }\n            catch (err) {\n                // Logging the error, exept restrictions, which is handled in Core\n                if (!err.isRestriction) {\n                    this.uppy.log(err);\n                }\n            }\n        })\n            .then(() => {\n            this.recordingChunks = null;\n            this.recorder = null;\n        }, (error) => {\n            this.recordingChunks = null;\n            this.recorder = null;\n            throw error;\n        });\n    }\n    discardRecordedMedia() {\n        const { recordedVideo, capturedSnapshot } = this.getPluginState();\n        if (recordedVideo) {\n            URL.revokeObjectURL(recordedVideo);\n        }\n        if (capturedSnapshot) {\n            URL.revokeObjectURL(capturedSnapshot);\n        }\n        this.setPluginState({\n            recordedVideo: null,\n            capturedSnapshot: null,\n        });\n        if (this.opts.mirror) {\n            this.#enableMirror = true;\n        }\n        this.capturedMediaFile = null;\n    }\n    submit() {\n        try {\n            if (this.capturedMediaFile) {\n                this.uppy.addFile(this.capturedMediaFile);\n            }\n        }\n        catch (err) {\n            // Logging the error, exept restrictions, which is handled in Core\n            if (!err.isRestriction) {\n                this.uppy.log(err, 'error');\n            }\n        }\n    }\n    async stop() {\n        if (this.stream) {\n            const audioTracks = this.stream.getAudioTracks();\n            const videoTracks = this.stream.getVideoTracks();\n            audioTracks.concat(videoTracks).forEach((track) => track.stop());\n        }\n        if (this.recorder) {\n            await new Promise((resolve) => {\n                this.recorder.addEventListener('stop', resolve, { once: true });\n                this.recorder.stop();\n                if (this.opts.showRecordingLength) {\n                    clearInterval(this.recordingLengthTimer);\n                }\n            });\n        }\n        this.recordingChunks = null;\n        this.recorder = null;\n        this.webcamActive = false;\n        this.stream = null;\n        this.setPluginState({\n            recordedVideo: null,\n            capturedSnapshot: null,\n            isRecording: false,\n            recordingLengthSeconds: 0,\n        });\n    }\n    getVideoElement() {\n        return this.el.querySelector('.uppy-Webcam-video');\n    }\n    oneTwoThreeSmile() {\n        return new Promise((resolve, reject) => {\n            let count = this.opts.countdown;\n            const countDown = setInterval(() => {\n                if (!this.webcamActive) {\n                    clearInterval(countDown);\n                    this.captureInProgress = false;\n                    return reject(new Error('Webcam is not active'));\n                }\n                if (count) {\n                    this.uppy.info(`${count}...`, 'warning', 800);\n                    count--;\n                }\n                else {\n                    clearInterval(countDown);\n                    this.uppy.info(this.i18n('smile'), 'success', 1500);\n                    setTimeout(() => resolve(), 1500);\n                }\n            }, 1000);\n        });\n    }\n    async takeSnapshot() {\n        if (this.captureInProgress)\n            return;\n        this.captureInProgress = true;\n        try {\n            await this.opts.onBeforeSnapshot();\n        }\n        catch (err) {\n            const message = typeof err === 'object' ? err.message : err;\n            this.uppy.info(message, 'error', 5000);\n            throw new Error(`onBeforeSnapshot: ${message}`);\n        }\n        try {\n            const file = await this.getImage();\n            this.capturedMediaFile = file;\n            if (file.data == null)\n                throw new Error('File data is empty');\n            // Create object URL for preview\n            const capturedSnapshotUrl = URL.createObjectURL(file.data);\n            this.setPluginState({ capturedSnapshot: capturedSnapshotUrl });\n            this.captureInProgress = false;\n        }\n        catch (error) {\n            // Logging the error, except restrictions, which is handled in Core\n            this.captureInProgress = false;\n            if (!error.isRestriction) {\n                this.uppy.log(error);\n            }\n        }\n    }\n    async getImage() {\n        const video = this.getVideoElement();\n        if (!video) {\n            return Promise.reject(new Error('No video element found, likely due to the Webcam tab being closed.'));\n        }\n        const width = video.videoWidth;\n        const height = video.videoHeight;\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        ctx.drawImage(video, 0, 0);\n        const { restrictions } = this.uppy.opts;\n        let preferredImageMimeTypes = [];\n        if (this.opts.preferredImageMimeType) {\n            preferredImageMimeTypes = [this.opts.preferredImageMimeType];\n        }\n        else if (restrictions.allowedFileTypes) {\n            preferredImageMimeTypes = restrictions.allowedFileTypes\n                .map(toMimeType)\n                .filter(isImageMimeType);\n        }\n        const mimeType = preferredImageMimeTypes[0] || 'image/jpeg';\n        const ext = getFileTypeExtension(mimeType) || 'jpg';\n        const name = `cam-${Date.now()}.${ext}`;\n        return canvasToBlob(canvas, mimeType).then((blob) => {\n            return {\n                source: this.id,\n                name,\n                data: new Blob([blob], { type: mimeType }),\n                type: mimeType,\n            };\n        });\n    }\n    getVideo() {\n        // Sometimes in iOS Safari, Blobs (especially the first Blob in the recordingChunks Array)\n        // have empty 'type' attributes (e.g. '') so we need to find a Blob that has a defined 'type'\n        // attribute in order to determine the correct MIME type.\n        const mimeType = this.recordingChunks.find((blob) => blob.type?.length > 0).type;\n        const fileExtension = getFileTypeExtension(mimeType);\n        if (!fileExtension) {\n            return Promise.reject(new Error(`Could not retrieve recording: Unsupported media type \"${mimeType}\"`));\n        }\n        const name = `webcam-${Date.now()}.${fileExtension}`;\n        const blob = new Blob(this.recordingChunks, { type: mimeType });\n        const file = {\n            source: this.id,\n            name,\n            data: new Blob([blob], { type: mimeType }),\n            type: mimeType,\n        };\n        return Promise.resolve(file);\n    }\n    focus() {\n        if (!this.opts.countdown)\n            return;\n        setTimeout(() => {\n            this.uppy.info(this.i18n('smile'), 'success', 1500);\n        }, 1000);\n    }\n    changeVideoSource(deviceId) {\n        this.stop();\n        this.start({ deviceId });\n    }\n    updateVideoSources() {\n        this.mediaDevices.enumerateDevices().then((devices) => {\n            this.setPluginState({\n                videoSources: devices.filter((device) => device.kind === 'videoinput'),\n            });\n        });\n    }\n    render() {\n        if (!this.webcamActive) {\n            this.start();\n        }\n        const webcamState = this.getPluginState();\n        if (!webcamState.cameraReady || !webcamState.hasCamera) {\n            return (_jsx(PermissionsScreen, { icon: CameraIcon, i18n: this.i18n, hasCamera: webcamState.hasCamera }));\n        }\n        return (_jsx(CameraScreen, { ...webcamState, onChangeVideoSource: this.changeVideoSource, onSnapshot: this.takeSnapshot, onStartRecording: this.startRecording, onStopRecording: this.stopRecording, onDiscardRecordedMedia: this.discardRecordedMedia, onSubmit: this.submit, onFocus: this.focus, onStop: this.stop, i18n: this.i18n, modes: this.opts.modes, showRecordingLength: this.opts.showRecordingLength, showVideoSourceDropdown: this.opts.showVideoSourceDropdown, supportsRecording: supportsMediaRecorder(), recording: webcamState.isRecording, mirror: this.#enableMirror, src: this.stream }));\n    }\n    install() {\n        const { mobileNativeCamera, modes, videoConstraints } = this.opts;\n        const { target } = this.opts;\n        if (mobileNativeCamera && target) {\n            this.getTargetPlugin(target)?.setOptions({\n                showNativeVideoCameraButton: isModeAvailable(modes, 'video-only') ||\n                    isModeAvailable(modes, 'video-audio'),\n                showNativePhotoCameraButton: isModeAvailable(modes, 'picture'),\n                nativeCameraFacingMode: videoConstraints?.facingMode,\n            });\n            return;\n        }\n        this.setPluginState({\n            cameraReady: false,\n            recordingLengthSeconds: 0,\n        });\n        if (target) {\n            this.mount(target, this);\n        }\n        if (this.mediaDevices) {\n            this.updateVideoSources();\n            this.mediaDevices.ondevicechange = () => {\n                this.updateVideoSources();\n                if (this.stream) {\n                    let restartStream = true;\n                    const { videoSources, currentDeviceId } = this.getPluginState();\n                    videoSources.forEach((videoSource) => {\n                        if (currentDeviceId === videoSource.deviceId) {\n                            restartStream = false;\n                        }\n                    });\n                    if (restartStream) {\n                        this.stop();\n                        this.start();\n                    }\n                }\n            };\n        }\n    }\n    uninstall() {\n        this.stop();\n        this.unmount();\n    }\n    onUnmount() {\n        this.stop();\n    }\n}\n", "{\n  \"name\": \"@uppy/webcam\",\n  \"description\": \"Uppy plugin that takes photos or records videos using the device's camera.\",\n  \"version\": \"5.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"webcam\",\n    \"picture\",\n    \"photo\",\n    \"video\",\n    \"record\",\n    \"mediarecorder\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"is-mobile\": \"^4.0.0\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"jsdom\": \"^26.1.0\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function CameraIcon() {\n    return (_jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", fill: \"#0097DC\", width: \"66\", height: \"55\", viewBox: \"0 0 66 55\", children: _jsx(\"path\", { d: \"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z\", fillRule: \"evenodd\" }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nfunction DiscardButton({ onDiscard, i18n }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard\", type: \"button\", title: i18n('discardRecordedFile'), \"aria-label\": i18n('discardRecordedFile'), onClick: onDiscard, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { width: \"13\", height: \"13\", viewBox: \"0 0 13 13\", xmlns: \"http://www.w3.org/2000/svg\", \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", children: _jsxs(\"g\", { fill: \"#FFF\", fillRule: \"evenodd\", children: [_jsx(\"path\", { d: \"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z\" }), _jsx(\"path\", { d: \"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z\" })] }) }) }));\n}\nexport default DiscardButton;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function RecordButton({ recording, onStartRecording, onStopRecording, i18n, }) {\n    if (recording) {\n        return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\", type: \"button\", title: i18n('stopRecording'), \"aria-label\": i18n('stopRecording'), onClick: onStopRecording, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"100\", height: \"100\", viewBox: \"0 0 100 100\", children: _jsx(\"rect\", { x: \"15\", y: \"15\", width: \"70\", height: \"70\" }) }) }));\n    }\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button\", type: \"button\", title: i18n('startRecording'), \"aria-label\": i18n('startRecording'), onClick: onStartRecording, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", width: \"100\", height: \"100\", viewBox: \"0 0 100 100\", children: _jsx(\"circle\", { cx: \"50\", cy: \"50\", r: \"40\" }) }) }));\n}\n", "/**\n * Takes an Integer value of seconds (e.g. 83) and converts it into a human-readable formatted string (e.g. '1:23').\n *\n */\nexport default function formatSeconds(seconds) {\n    return `${Math.floor(seconds / 60)}:${String(seconds % 60).padStart(2, '0')}`;\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport formatSeconds from './formatSeconds.js';\nexport default function RecordingLength({ recordingLengthSeconds, }) {\n    const formattedRecordingLengthSeconds = formatSeconds(recordingLengthSeconds);\n    return _jsx(\"span\", { children: formattedRecordingLengthSeconds });\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport CameraIcon from './CameraIcon.js';\nexport default function SnapshotButton({ onSnapshot, i18n, }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture\", type: \"button\", title: i18n('takePicture'), \"aria-label\": i18n('takePicture'), onClick: onSnapshot, \"data-uppy-super-focusable\": true, children: CameraIcon() }));\n}\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nfunction SubmitButton({ onSubmit, i18n }) {\n    return (_jsx(\"button\", { className: \"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit\", type: \"button\", title: i18n('submitRecordedFile'), \"aria-label\": i18n('submitRecordedFile'), onClick: onSubmit, \"data-uppy-super-focusable\": true, children: _jsx(\"svg\", { width: \"12\", height: \"9\", viewBox: \"0 0 12 9\", xmlns: \"http://www.w3.org/2000/svg\", \"aria-hidden\": \"true\", focusable: \"false\", className: \"uppy-c-icon\", children: _jsx(\"path\", { fill: \"#fff\", fillRule: \"nonzero\", d: \"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z\" }) }) }));\n}\nexport default SubmitButton;\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nexport default function VideoSourceSelect({ currentDeviceId, videoSources, onChangeVideoSource, }) {\n    return (_jsx(\"div\", { className: \"uppy-Webcam-videoSource\", children: _jsx(\"select\", { className: \"uppy-u-reset uppy-Webcam-videoSource-select\", onChange: (event) => {\n                onChangeVideoSource(event.target.value);\n            }, children: videoSources.map((videoSource) => (_jsx(\"option\", { value: videoSource.deviceId, selected: videoSource.deviceId === currentDeviceId, children: videoSource.label }, videoSource.deviceId))) }) }));\n}\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport { Component } from 'preact';\nimport DiscardButton from './DiscardButton.js';\nimport RecordButton from './RecordButton.js';\nimport RecordingLength from './RecordingLength.js';\nimport SnapshotButton from './SnapshotButton.js';\nimport SubmitButton from './SubmitButton.js';\nimport VideoSourceSelect, {} from './VideoSourceSelect.js';\nfunction isModeAvailable(modes, mode) {\n    return modes.includes(mode);\n}\nclass CameraScreen extends Component {\n    videoElement;\n    refs;\n    componentDidMount() {\n        const { onFocus } = this.props;\n        onFocus();\n    }\n    componentWillUnmount() {\n        const { onStop } = this.props;\n        onStop();\n    }\n    render() {\n        const { src, recordedVideo, capturedSnapshot, recording, modes, supportsRecording, videoSources, showVideoSourceDropdown, showRecordingLength, onSubmit, i18n, mirror, onSnapshot, onStartRecording, onStopRecording, onDiscardRecordedMedia, recordingLengthSeconds, } = this.props;\n        const hasRecordedVideo = !!recordedVideo;\n        const hasCapturedSnapshot = !!capturedSnapshot;\n        const hasRecordedMedia = hasRecordedVideo || hasCapturedSnapshot;\n        const shouldShowRecordButton = !hasRecordedMedia &&\n            supportsRecording &&\n            (isModeAvailable(modes, 'video-only') ||\n                isModeAvailable(modes, 'audio-only') ||\n                isModeAvailable(modes, 'video-audio'));\n        const shouldShowSnapshotButton = !hasRecordedMedia && isModeAvailable(modes, 'picture');\n        const shouldShowRecordingLength = supportsRecording && showRecordingLength && !hasRecordedVideo;\n        const shouldShowVideoSourceDropdown = showVideoSourceDropdown && videoSources && videoSources.length > 1;\n        const videoProps = {\n            playsInline: true,\n        };\n        if (recordedVideo) {\n            videoProps.muted = false;\n            videoProps.controls = true;\n            videoProps.src = recordedVideo;\n            // reset srcObject in dom. If not resetted, stream sticks in element\n            if (this.videoElement) {\n                this.videoElement.srcObject = null;\n            }\n        }\n        else {\n            videoProps.muted = true;\n            videoProps.autoPlay = true;\n            videoProps.srcObject = src;\n        }\n        return (_jsxs(\"div\", { className: \"uppy uppy-Webcam-container\", children: [_jsx(\"div\", { className: \"uppy-Webcam-videoContainer\", children: capturedSnapshot && !recording && !recordedVideo ? (_jsx(\"div\", { className: \"uppy-Webcam-imageContainer\", children: _jsx(\"img\", { src: capturedSnapshot, className: \"uppy-Webcam-video\", alt: \"capturedSnapshot\" }) })) : (_jsx(\"video\", { ref: (videoElement) => {\n                            this.videoElement = videoElement;\n                        }, className: `uppy-Webcam-video  ${mirror ? 'uppy-Webcam-video--mirrored' : ''}`, ...videoProps })) }), _jsxs(\"div\", { className: \"uppy-Webcam-footer\", children: [_jsx(\"div\", { className: \"uppy-Webcam-videoSourceContainer\", children: shouldShowVideoSourceDropdown\n                                ? VideoSourceSelect(this.props)\n                                : null }), _jsxs(\"div\", { className: \"uppy-Webcam-buttonContainer\", children: [shouldShowSnapshotButton && (_jsx(SnapshotButton, { onSnapshot: onSnapshot, i18n: i18n })), shouldShowRecordButton && (_jsx(RecordButton, { recording: recording, onStartRecording: onStartRecording, onStopRecording: onStopRecording, i18n: i18n })), (hasRecordedVideo || hasCapturedSnapshot) && (_jsx(SubmitButton, { onSubmit: onSubmit, i18n: i18n })), (hasRecordedVideo || hasCapturedSnapshot) && (_jsx(DiscardButton, { onDiscard: onDiscardRecordedMedia, i18n: i18n }))] }), _jsx(\"div\", { className: \"uppy-Webcam-recordingLength\", children: shouldShowRecordingLength && (_jsx(RecordingLength, { recordingLengthSeconds: recordingLengthSeconds })) })] })] }));\n    }\n}\nexport default CameraScreen;\n", "export default {\n    strings: {\n        pluginNameCamera: 'Camera',\n        noCameraTitle: 'Camera Not Available',\n        noCameraDescription: 'In order to take pictures or record video, please connect a camera device',\n        recordingStoppedMaxSize: 'Recording stopped because the file size is about to exceed the limit',\n        submitRecordedFile: 'Submit recorded file',\n        discardRecordedFile: 'Discard recorded file',\n        // Shown before a picture is taken when the `countdown` option is set.\n        smile: 'Smile!',\n        // Used as the label for the button that takes a picture.\n        // This is not visibly rendered but is picked up by screen readers.\n        takePicture: 'Take a picture',\n        // Used as the label for the button that starts a video recording.\n        // This is not visibly rendered but is picked up by screen readers.\n        startRecording: 'Begin video recording',\n        // Used as the label for the button that stops a video recording.\n        // This is not visibly rendered but is picked up by screen readers.\n        stopRecording: 'Stop video recording',\n        // Used as the label for the recording length counter. See the showRecordingLength option.\n        // This is not visibly rendered but is picked up by screen readers.\n        recordingLength: 'Recording length %{recording_length}',\n        // Title on the \u201Callow access\u201D screen\n        allowAccessTitle: 'Please allow access to your camera',\n        // Description on the \u201Callow access\u201D screen\n        allowAccessDescription: 'In order to take pictures or record video with your camera, please allow camera access for this site.',\n    },\n};\n", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nexport default function PermissionsScreen({ icon, i18n, hasCamera, }) {\n    return (_jsxs(\"div\", { className: \"uppy-Webcam-permissons\", children: [_jsx(\"div\", { className: \"uppy-Webcam-permissonsIcon\", children: icon() }), _jsx(\"div\", { className: \"uppy-Webcam-title\", children: hasCamera ? i18n('allowAccessTitle') : i18n('noCameraTitle') }), _jsx(\"p\", { children: hasCamera\n                    ? i18n('allowAccessDescription')\n                    : i18n('noCameraDescription') })] }));\n}\n", "export default function supportsMediaRecorder() {\n    return (typeof MediaRecorder === 'function' &&\n        !!MediaRecorder.prototype &&\n        typeof MediaRecorder.prototype.start === 'function');\n}\n", "{\n  \"name\": \"@uppy/xhr-upload\",\n  \"description\": \"Plain and simple classic HTML multipart form uploads with Uppy, as well as uploads using the HTTP PUT method.\",\n  \"version\": \"5.1.1\",\n  \"license\": \"MIT\",\n  \"type\": \"module\",\n  \"sideEffects\": false,\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"typecheck\": \"tsc --build\",\n    \"test\": \"vitest run --environment=jsdom --silent='passed-only'\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"xhr\",\n    \"xhr upload\",\n    \"XMLHttpRequest\",\n    \"ajax\",\n    \"fetch\",\n    \"uppy\",\n    \"uppy-plugin\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/companion-client\": \"^5.1.1\",\n    \"@uppy/utils\": \"^7.1.5\"\n  },\n  \"devDependencies\": {\n    \"@uppy/core\": \"^5.2.0\",\n    \"jsdom\": \"^26.1.0\",\n    \"nock\": \"^13.1.0\",\n    \"typescript\": \"^5.8.3\",\n    \"vitest\": \"^3.2.4\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  }\n}", "export default {\n    strings: {\n        // Shown in the Informer if an upload is being canceled because it stalled for too long.\n        uploadStalled: 'Upload has not made any progress for %{seconds} seconds. You may want to retry it.',\n    },\n};\n", "import { BasePlugin, EventManager } from '@uppy/core';\nimport { fetcher, filterFilesToEmitUploadStarted, filterFilesToUpload, getAllowedMetaFields, internalRateLimitedQueue, isNetworkError, NetworkError, RateLimitedQueue, } from '@uppy/utils';\nimport packageJson from '../package.json' with { type: 'json' };\nimport locale from './locale.js';\nfunction buildResponseError(xhr, err) {\n    let error = err;\n    // No error message\n    if (!error)\n        error = new Error('Upload error');\n    // Got an error message string\n    if (typeof error === 'string')\n        error = new Error(error);\n    // Got something else\n    if (!(error instanceof Error)) {\n        error = Object.assign(new Error('Upload error'), { data: error });\n    }\n    if (isNetworkError(xhr)) {\n        error = new NetworkError(error, xhr);\n        return error;\n    }\n    // @ts-expect-error request can only be set on NetworkError\n    // but we use NetworkError to distinguish between errors.\n    error.request = xhr;\n    return error;\n}\n/**\n * Set `data.type` in the blob to `file.meta.type`,\n * because we might have detected a more accurate file type in Uppy\n * https://stackoverflow.com/a/50875615\n */\nfunction setTypeInBlob(file) {\n    const dataWithUpdatedType = file.data.slice(0, file.data.size, file.meta.type);\n    return dataWithUpdatedType;\n}\nconst defaultOptions = {\n    formData: true,\n    fieldName: 'file',\n    method: 'post',\n    allowedMetaFields: true,\n    bundle: false,\n    headers: {},\n    timeout: 30 * 1000,\n    limit: 5,\n    withCredentials: false,\n    responseType: '',\n};\nexport default class XHRUpload extends BasePlugin {\n    static VERSION = packageJson.version;\n    #getFetcher;\n    requests;\n    uploaderEvents;\n    constructor(uppy, opts) {\n        super(uppy, {\n            ...defaultOptions,\n            fieldName: opts.bundle ? 'files[]' : 'file',\n            ...opts,\n        });\n        this.type = 'uploader';\n        this.id = this.opts.id || 'XHRUpload';\n        this.defaultLocale = locale;\n        this.i18nInit();\n        // Simultaneous upload limiting is shared across all uploads with this plugin.\n        if (internalRateLimitedQueue in this.opts) {\n            // @ts-ignore untyped internal\n            this.requests = this.opts[internalRateLimitedQueue];\n        }\n        else {\n            this.requests = new RateLimitedQueue(this.opts.limit);\n        }\n        if (this.opts.bundle && !this.opts.formData) {\n            throw new Error('`opts.formData` must be true when `opts.bundle` is enabled.');\n        }\n        if (this.opts.bundle && typeof this.opts.headers === 'function') {\n            throw new Error('`opts.headers` can not be a function when the `bundle: true` option is set.');\n        }\n        if (opts?.allowedMetaFields === undefined && 'metaFields' in this.opts) {\n            throw new Error('The `metaFields` option has been renamed to `allowedMetaFields`.');\n        }\n        this.uploaderEvents = Object.create(null);\n        /**\n         * xhr-upload wrapper for `fetcher` to handle user options\n         * `validateStatus`, `getResponseError`, `getResponseData`\n         * and to emit `upload-progress`, `upload-error`, and `upload-success` events.\n         */\n        this.#getFetcher = (files) => {\n            return async (url, options) => {\n                try {\n                    const res = await fetcher(url, {\n                        ...options,\n                        onBeforeRequest: (xhr, retryCount) => this.opts.onBeforeRequest?.(xhr, retryCount, files),\n                        shouldRetry: this.opts.shouldRetry,\n                        onAfterResponse: this.opts.onAfterResponse,\n                        onTimeout: (timeout) => {\n                            const seconds = Math.ceil(timeout / 1000);\n                            const error = new Error(this.i18n('uploadStalled', { seconds }));\n                            this.uppy.emit('upload-stalled', error, files);\n                        },\n                        onUploadProgress: (event) => {\n                            if (event.lengthComputable) {\n                                for (const { id } of files) {\n                                    const file = this.uppy.getFile(id);\n                                    if (file != null) {\n                                        this.uppy.emit('upload-progress', file, {\n                                            uploadStarted: file.progress.uploadStarted ?? 0,\n                                            bytesUploaded: (event.loaded / event.total) * file.size,\n                                            bytesTotal: file.size,\n                                        });\n                                    }\n                                }\n                            }\n                        },\n                    });\n                    let body = await this.opts.getResponseData?.(res);\n                    if (res.responseType === 'json') {\n                        body ??= res.response;\n                    }\n                    else {\n                        try {\n                            body ??= JSON.parse(res.responseText);\n                        }\n                        catch (cause) {\n                            throw new Error('@uppy/xhr-upload expects a JSON response (with a `url` property). To parse non-JSON responses, use `getResponseData` to turn your response into JSON.', { cause });\n                        }\n                    }\n                    const uploadURL = typeof body?.url === 'string' ? body.url : undefined;\n                    for (const { id } of files) {\n                        this.uppy.emit('upload-success', this.uppy.getFile(id), {\n                            status: res.status,\n                            body,\n                            uploadURL,\n                        });\n                    }\n                    return res;\n                }\n                catch (error) {\n                    if (error.name === 'AbortError') {\n                        return undefined;\n                    }\n                    const request = error.request;\n                    for (const file of files) {\n                        this.uppy.emit('upload-error', this.uppy.getFile(file.id), buildResponseError(request, error), request);\n                    }\n                    throw error;\n                }\n            };\n        };\n    }\n    getOptions(file) {\n        const overrides = this.uppy.getState().xhrUpload;\n        const { headers } = this.opts;\n        const opts = {\n            ...this.opts,\n            ...(overrides || {}),\n            ...(file.xhrUpload || {}),\n            headers: {},\n        };\n        // Support for `headers` as a function, only in the XHRUpload settings.\n        // Options set by other plugins in Uppy state or on the files themselves are still merged in afterward.\n        //\n        // ```js\n        // headers: (file) => ({ expires: file.meta.expires })\n        // ```\n        if (typeof headers === 'function') {\n            opts.headers = headers(file);\n        }\n        else {\n            Object.assign(opts.headers, this.opts.headers);\n        }\n        if (overrides) {\n            Object.assign(opts.headers, overrides.headers);\n        }\n        if (file.xhrUpload) {\n            Object.assign(opts.headers, file.xhrUpload.headers);\n        }\n        return opts;\n    }\n    addMetadata(formData, meta, opts) {\n        const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, meta);\n        allowedMetaFields.forEach((item) => {\n            const value = meta[item];\n            if (Array.isArray(value)) {\n                // In this case we don't transform `item` to add brackets, it's up to\n                // the user to add the brackets so it won't be overridden.\n                value.forEach((subItem) => formData.append(item, subItem));\n            }\n            else {\n                formData.append(item, value);\n            }\n        });\n    }\n    createFormDataUpload(file, opts) {\n        const formPost = new FormData();\n        this.addMetadata(formPost, file.meta, opts);\n        const dataWithUpdatedType = setTypeInBlob(file);\n        if (file.name) {\n            formPost.append(opts.fieldName, dataWithUpdatedType, file.meta.name);\n        }\n        else {\n            formPost.append(opts.fieldName, dataWithUpdatedType);\n        }\n        return formPost;\n    }\n    createBundledUpload(files, opts) {\n        const formPost = new FormData();\n        const { meta } = this.uppy.getState();\n        this.addMetadata(formPost, meta, opts);\n        files.forEach((file) => {\n            const options = this.getOptions(file);\n            const dataWithUpdatedType = setTypeInBlob(file);\n            if (file.name) {\n                formPost.append(options.fieldName, dataWithUpdatedType, file.name);\n            }\n            else {\n                formPost.append(options.fieldName, dataWithUpdatedType);\n            }\n        });\n        return formPost;\n    }\n    async #uploadLocalFile(file) {\n        const events = new EventManager(this.uppy);\n        const controller = new AbortController();\n        const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n            const opts = this.getOptions(file);\n            const fetch = this.#getFetcher([file]);\n            const body = opts.formData\n                ? this.createFormDataUpload(file, opts)\n                : file.data;\n            const endpoint = typeof opts.endpoint === 'string'\n                ? opts.endpoint\n                : await opts.endpoint(file);\n            return fetch(endpoint, {\n                ...opts,\n                body,\n                signal: controller.signal,\n            });\n        });\n        events.onFileRemove(file.id, () => controller.abort());\n        events.onCancelAll(file.id, () => {\n            controller.abort();\n        });\n        try {\n            await uppyFetch();\n        }\n        catch (error) {\n            // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n            if (error.message !== 'Cancelled') {\n                throw error;\n            }\n        }\n        finally {\n            events.remove();\n        }\n    }\n    async #uploadBundle(files) {\n        const controller = new AbortController();\n        const uppyFetch = this.requests.wrapPromiseFunction(async () => {\n            const optsFromState = this.uppy.getState().xhrUpload ?? {};\n            const fetch = this.#getFetcher(files);\n            const body = this.createBundledUpload(files, {\n                ...this.opts,\n                ...optsFromState,\n            });\n            const endpoint = typeof this.opts.endpoint === 'string'\n                ? this.opts.endpoint\n                : await this.opts.endpoint(files);\n            return fetch(endpoint, {\n                // headers can't be a function with bundle: true\n                ...this.opts,\n                body,\n                signal: controller.signal,\n            });\n        });\n        function abort() {\n            controller.abort();\n        }\n        // We only need to abort on cancel all because\n        // individual cancellations are not possible with bundle: true\n        this.uppy.once('cancel-all', abort);\n        try {\n            await uppyFetch();\n        }\n        catch (error) {\n            // TODO: create formal error with name 'AbortError' (this comes from RateLimitedQueue)\n            if (error.message !== 'Cancelled') {\n                throw error;\n            }\n        }\n        finally {\n            this.uppy.off('cancel-all', abort);\n        }\n    }\n    #getCompanionClientArgs(file) {\n        const opts = this.getOptions(file);\n        const allowedMetaFields = getAllowedMetaFields(opts.allowedMetaFields, file.meta);\n        return {\n            ...file.remote?.body,\n            protocol: 'multipart',\n            endpoint: opts.endpoint,\n            size: file.data.size,\n            fieldname: opts.fieldName,\n            metadata: Object.fromEntries(allowedMetaFields.map((name) => [name, file.meta[name]])),\n            httpMethod: opts.method,\n            useFormData: opts.formData,\n            headers: opts.headers,\n        };\n    }\n    async #uploadFiles(files) {\n        await Promise.allSettled(files.map((file) => {\n            if (file.isRemote) {\n                const getQueue = () => this.requests;\n                const controller = new AbortController();\n                const removedHandler = (removedFile) => {\n                    if (removedFile.id === file.id)\n                        controller.abort();\n                };\n                this.uppy.on('file-removed', removedHandler);\n                const uploadPromise = this.uppy\n                    .getRequestClientForFile(file)\n                    .uploadRemoteFile(file, this.#getCompanionClientArgs(file), {\n                    signal: controller.signal,\n                    getQueue,\n                });\n                this.requests.wrapSyncFunction(() => {\n                    this.uppy.off('file-removed', removedHandler);\n                }, { priority: -1 })();\n                return uploadPromise;\n            }\n            return this.#uploadLocalFile(file);\n        }));\n    }\n    #handleUpload = async (fileIDs) => {\n        if (fileIDs.length === 0) {\n            this.uppy.log('[XHRUpload] No files to upload!');\n            return;\n        }\n        // No limit configured by the user, and no RateLimitedQueue passed in by a \"parent\" plugin\n        // (basically just AwsS3) using the internal symbol\n        // @ts-ignore untyped internal\n        if (this.opts.limit === 0 && !this.opts[internalRateLimitedQueue]) {\n            this.uppy.log('[XHRUpload] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/xhr-upload/#limit-0', 'warning');\n        }\n        this.uppy.log('[XHRUpload] Uploading...');\n        const files = this.uppy.getFilesByIds(fileIDs);\n        const filesFiltered = filterFilesToUpload(files);\n        const filesToEmit = filterFilesToEmitUploadStarted(filesFiltered);\n        this.uppy.emit('upload-start', filesToEmit);\n        if (this.opts.bundle) {\n            // if bundle: true, we don\u2019t support remote uploads\n            const isSomeFileRemote = filesFiltered.some((file) => file.isRemote);\n            if (isSomeFileRemote) {\n                throw new Error('Can\u2019t upload remote files when the `bundle: true` option is set');\n            }\n            if (typeof this.opts.headers === 'function') {\n                throw new TypeError('`headers` may not be a function when the `bundle: true` option is set');\n            }\n            await this.#uploadBundle(filesFiltered);\n        }\n        else {\n            await this.#uploadFiles(filesFiltered);\n        }\n    };\n    install() {\n        if (this.opts.bundle) {\n            const { capabilities } = this.uppy.getState();\n            this.uppy.setState({\n                capabilities: {\n                    ...capabilities,\n                    individualCancellation: false,\n                },\n            });\n        }\n        this.uppy.addUploader(this.#handleUpload);\n    }\n    uninstall() {\n        if (this.opts.bundle) {\n            const { capabilities } = this.uppy.getState();\n            this.uppy.setState({\n                capabilities: {\n                    ...capabilities,\n                    individualCancellation: true,\n                },\n            });\n        }\n        this.uppy.removeUploader(this.#handleUpload);\n    }\n}\n", "{\n  \"name\": \"@uppy/image-editor\",\n  \"description\": \"Image editor and cropping UI\",\n  \"version\": \"4.1.0\",\n  \"license\": \"MIT\",\n  \"style\": \"dist/style.min.css\",\n  \"type\": \"module\",\n  \"sideEffects\": [\n    \"*.css\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsc --build tsconfig.build.json\",\n    \"build:css\": \"sass --load-path=../../ src/style.scss dist/style.css && postcss dist/style.css -u cssnano -o dist/style.min.css\",\n    \"typecheck\": \"tsc --build\"\n  },\n  \"keywords\": [\n    \"file uploader\",\n    \"upload\",\n    \"uppy\",\n    \"uppy-plugin\",\n    \"image editor\",\n    \"cropper\",\n    \"crop\",\n    \"rotate\",\n    \"resize\"\n  ],\n  \"homepage\": \"https://uppy.io\",\n  \"bugs\": {\n    \"url\": \"https://github.com/transloadit/uppy/issues\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"git+https://github.com/transloadit/uppy.git\"\n  },\n  \"files\": [\n    \"src\",\n    \"lib\",\n    \"dist\",\n    \"CHANGELOG.md\"\n  ],\n  \"exports\": {\n    \".\": \"./lib/index.js\",\n    \"./css/style.css\": \"./dist/style.css\",\n    \"./css/style.min.css\": \"./dist/style.min.css\",\n    \"./css/style.scss\": \"./src/style.scss\",\n    \"./package.json\": \"./package.json\"\n  },\n  \"dependencies\": {\n    \"@uppy/utils\": \"^7.1.4\",\n    \"cropperjs\": \"^1.6.2\",\n    \"preact\": \"^10.5.13\"\n  },\n  \"peerDependencies\": {\n    \"@uppy/core\": \"^5.2.0\"\n  },\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"devDependencies\": {\n    \"cssnano\": \"^7.0.7\",\n    \"postcss\": \"^8.5.6\",\n    \"postcss-cli\": \"^11.0.1\",\n    \"sass\": \"^1.89.2\",\n    \"typescript\": \"^5.8.3\"\n  }\n}", "import { jsx as _jsx, jsxs as _jsxs } from \"preact/jsx-runtime\";\nimport Cropper from 'cropperjs';\nimport { Component } from 'preact';\nimport getCanvasDataThatFitsPerfectlyIntoContainer from './utils/getCanvasDataThatFitsPerfectlyIntoContainer.js';\nimport getScaleFactorThatRemovesDarkCorners from './utils/getScaleFactorThatRemovesDarkCorners.js';\nimport limitCropboxMovementOnMove from './utils/limitCropboxMovementOnMove.js';\nimport limitCropboxMovementOnResize from './utils/limitCropboxMovementOnResize.js';\nexport default class Editor extends Component {\n    imgElement;\n    cropper;\n    constructor(props) {\n        super(props);\n        this.state = {\n            angle90Deg: 0,\n            angleGranular: 0,\n            prevCropboxData: null,\n        };\n        this.storePrevCropboxData = this.storePrevCropboxData.bind(this);\n        this.limitCropboxMovement = this.limitCropboxMovement.bind(this);\n    }\n    componentDidMount() {\n        const { opts, storeCropperInstance } = this.props;\n        this.cropper = new Cropper(this.imgElement, opts.cropperOptions);\n        this.imgElement.addEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.addEventListener('cropend', this.limitCropboxMovement);\n        storeCropperInstance(this.cropper);\n    }\n    componentWillUnmount() {\n        this.cropper.destroy();\n        this.imgElement.removeEventListener('cropstart', this.storePrevCropboxData);\n        // @ts-expect-error custom cropper event but DOM API does not understand\n        this.imgElement.removeEventListener('cropend', this.limitCropboxMovement);\n    }\n    storePrevCropboxData() {\n        this.setState({ prevCropboxData: this.cropper.getCropBoxData() });\n    }\n    limitCropboxMovement(event) {\n        const canvasData = this.cropper.getCanvasData();\n        const cropboxData = this.cropper.getCropBoxData();\n        const { prevCropboxData } = this.state;\n        // 1. When we grab the cropbox in the middle and move it\n        if (event.detail.action === 'all') {\n            const newCropboxData = limitCropboxMovementOnMove(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n            // 2. When we stretch the cropbox by one of its sides\n        }\n        else {\n            const newCropboxData = limitCropboxMovementOnResize(canvasData, cropboxData, prevCropboxData);\n            if (newCropboxData)\n                this.cropper.setCropBoxData(newCropboxData);\n        }\n    }\n    onRotate90Deg = () => {\n        // 1. Set state\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg - 90;\n        this.setState({\n            angle90Deg: newAngle,\n            angleGranular: 0,\n        });\n        // 2. Rotate the image\n        // Important to reset scale here, or cropper will get confused on further rotations\n        this.cropper.scale(1);\n        this.cropper.rotateTo(newAngle);\n        // 3. Fit the rotated image into the view\n        const canvasData = this.cropper.getCanvasData();\n        const containerData = this.cropper.getContainerData();\n        const newCanvasData = getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData);\n        this.cropper.setCanvasData(newCanvasData);\n        // 4. Make cropbox fully wrap the image\n        this.cropper.setCropBoxData(newCanvasData);\n    };\n    onRotateGranular = (ev) => {\n        // 1. Set state\n        const newGranularAngle = Number(ev.target.value);\n        this.setState({ angleGranular: newGranularAngle });\n        // 2. Rotate the image\n        const { angle90Deg } = this.state;\n        const newAngle = angle90Deg + newGranularAngle;\n        this.cropper.rotateTo(newAngle);\n        // 3. Scale the image so that it fits into the cropbox\n        const image = this.cropper.getImageData();\n        const scaleFactor = getScaleFactorThatRemovesDarkCorners(image.naturalWidth, image.naturalHeight, newGranularAngle);\n        // Preserve flip\n        const scaleFactorX = this.cropper.getImageData().scaleX < 0 ? -scaleFactor : scaleFactor;\n        this.cropper.scale(scaleFactorX, scaleFactor);\n    };\n    renderGranularRotate() {\n        const { i18n } = this.props;\n        const { angleGranular } = this.state;\n        return (_jsx(\"label\", { role: \"tooltip\", \"aria-label\": `${angleGranular}\u00BA`, \"data-microtip-position\": \"top\", className: \"uppy-ImageCropper-rangeWrapper\", children: _jsx(\"input\", { className: \"uppy-ImageCropper-range uppy-u-reset\", type: \"range\", onInput: this.onRotateGranular, onChange: this.onRotateGranular, value: angleGranular, min: \"-45\", max: \"45\", \"aria-label\": i18n('rotate') }) }));\n    }\n    renderRevert() {\n        const { i18n, opts } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('revert'), onClick: () => {\n                this.cropper.reset();\n                this.cropper.setAspectRatio(opts.cropperOptions.initialAspectRatio);\n                this.setState({ angle90Deg: 0, angleGranular: 0 });\n            }, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\" })] }) }));\n    }\n    renderRotate() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('rotate'), onClick: this.onRotate90Deg, children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0zm0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M14 10a2 2 0 012 2v7a2 2 0 01-2 2H6a2 2 0 01-2-2v-7a2 2 0 012-2h8zm0 1.75H6a.25.25 0 00-.243.193L5.75 12v7a.25.25 0 00.193.243L6 19.25h8a.25.25 0 00.243-.193L14.25 19v-7a.25.25 0 00-.193-.243L14 11.75zM12 .76V4c2.3 0 4.61.88 6.36 2.64a8.95 8.95 0 012.634 6.025L21 13a1 1 0 01-1.993.117L19 13h-.003a6.979 6.979 0 00-2.047-4.95 6.97 6.97 0 00-4.652-2.044L12 6v3.24L7.76 5 12 .76z\" })] }) }));\n    }\n    renderFlip() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('flipHorizontal'), onClick: () => this.cropper.scaleX(-this.cropper.getData().scaleX || -1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15 21h2v-2h-2v2zm4-12h2V7h-2v2zM3 5v14c0 1.1.9 2 2 2h4v-2H5V5h4V3H5c-1.1 0-2 .9-2 2zm16-2v2h2c0-1.1-.9-2-2-2zm-8 20h2V1h-2v22zm8-6h2v-2h-2v2zM15 5h2V3h-2v2zm4 8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2z\" })] }) }));\n    }\n    renderZoomIn() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomIn'), onClick: () => this.cropper.zoom(0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", height: \"24\", viewBox: \"0 0 24 24\", width: \"24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" }), _jsx(\"path\", { d: \"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z\" })] }) }));\n    }\n    renderZoomOut() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('zoomOut'), onClick: () => this.cropper.zoom(-0.1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0V0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z\" })] }) }));\n    }\n    renderCropSquare() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioSquare'), onClick: () => this.cropper.setAspectRatio(1), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" }), _jsx(\"path\", { d: \"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\" })] }) }));\n    }\n    renderCropWidescreen() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", className: \"uppy-u-reset uppy-c-btn\", \"aria-label\": i18n('aspectRatioLandscape'), onClick: () => this.cropper.setAspectRatio(16 / 9), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19,4.9999992 V 17.000001 H 4.9999998 V 6.9999992 H 19 m 0,-2 H 4.9999998 c -1.0999999,0 -1.9999999,0.9000001 -1.9999999,2 V 17.000001 c 0,1.1 0.9,2 1.9999999,2 H 19 c 1.1,0 2,-0.9 2,-2 V 6.9999992 c 0,-1.0999999 -0.9,-2 -2,-2 z\" }), _jsx(\"path\", { fill: \"none\", d: \"M0 0h24v24H0z\" })] }) }));\n    }\n    renderCropWidescreenVertical() {\n        const { i18n } = this.props;\n        return (_jsx(\"button\", { \"data-microtip-position\": \"top\", type: \"button\", \"aria-label\": i18n('aspectRatioPortrait'), className: \"uppy-u-reset uppy-c-btn\", onClick: () => this.cropper.setAspectRatio(9 / 16), children: _jsxs(\"svg\", { \"aria-hidden\": \"true\", className: \"uppy-c-icon\", width: \"24\", height: \"24\", viewBox: \"0 0 24 24\", children: [_jsx(\"path\", { d: \"M 19.000001,19 H 6.999999 V 5 h 10.000002 v 14 m 2,0 V 5 c 0,-1.0999999 -0.9,-1.9999999 -2,-1.9999999 H 6.999999 c -1.1,0 -2,0.9 -2,1.9999999 v 14 c 0,1.1 0.9,2 2,2 h 10.000002 c 1.1,0 2,-0.9 2,-2 z\" }), _jsx(\"path\", { d: \"M0 0h24v24H0z\", fill: \"none\" })] }) }));\n    }\n    render() {\n        const { currentImage, opts } = this.props;\n        const { actions } = opts;\n        if (currentImage.data == null)\n            throw new Error('File data is empty');\n        const imageURL = URL.createObjectURL(currentImage.data);\n        return (_jsxs(\"div\", { className: \"uppy-ImageCropper\", children: [_jsx(\"div\", { className: \"uppy-ImageCropper-container\", children: _jsx(\"img\", { className: \"uppy-ImageCropper-image\", alt: currentImage.name, src: imageURL, ref: (ref) => {\n                            this.imgElement = ref;\n                        } }) }), _jsxs(\"div\", { className: \"uppy-ImageCropper-controls\", children: [actions.revert && this.renderRevert(), actions.rotate && this.renderRotate(), actions.granularRotate && this.renderGranularRotate(), actions.flip && this.renderFlip(), actions.zoomIn && this.renderZoomIn(), actions.zoomOut && this.renderZoomOut(), actions.cropSquare && this.renderCropSquare(), actions.cropWidescreen && this.renderCropWidescreen(), actions.cropWidescreenVertical &&\n                            this.renderCropWidescreenVertical()] })] }));\n    }\n}\n", "// See this cropperjs image to understand how container/image/canavas/cropbox relate to each other.\n// (https://github.com/fengyuanchen/cropperjs/blob/9b528a8baeaae876dc090085e37992a1683c6f34/docs/images/layers.jpg)\n//\nfunction getCanvasDataThatFitsPerfectlyIntoContainer(containerData, canvasData) {\n    // 1. Scale our canvas as much as possible\n    const widthRatio = containerData.width / canvasData.width;\n    const heightRatio = containerData.height / canvasData.height;\n    const scaleFactor = Math.min(widthRatio, heightRatio);\n    const newWidth = canvasData.width * scaleFactor;\n    const newHeight = canvasData.height * scaleFactor;\n    // 2. Center our canvas\n    const newLeft = (containerData.width - newWidth) / 2;\n    const newTop = (containerData.height - newHeight) / 2;\n    return {\n        width: newWidth,\n        height: newHeight,\n        left: newLeft,\n        top: newTop,\n    };\n}\nexport default getCanvasDataThatFitsPerfectlyIntoContainer;\n", "function toRadians(angle) {\n    return angle * (Math.PI / 180);\n}\nfunction getScaleFactorThatRemovesDarkCorners(w, h, granularAngle) {\n    const \u03B1 = Math.abs(toRadians(granularAngle));\n    const scaleFactor = Math.max((Math.sin(\u03B1) * w + Math.cos(\u03B1) * h) / h, (Math.sin(\u03B1) * h + Math.cos(\u03B1) * w) / w);\n    return scaleFactor;\n}\nexport default getScaleFactorThatRemovesDarkCorners;\n", "function limitCropboxMovementOnMove(canvas, cropbox, prevCropbox) {\n    // For the left boundary\n    if (cropbox.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.width,\n        };\n    }\n    // For the top boundary\n    if (cropbox.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.height,\n        };\n    }\n    // For the right boundary\n    if (cropbox.left + cropbox.width > canvas.left + canvas.width) {\n        return {\n            left: canvas.left + canvas.width - prevCropbox.width,\n            width: prevCropbox.width,\n        };\n    }\n    // For the bottom boundary\n    if (cropbox.top + cropbox.height > canvas.top + canvas.height) {\n        return {\n            top: canvas.top + canvas.height - prevCropbox.height,\n            height: prevCropbox.height,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnMove;\n", "function limitCropboxMovementOnResize(canvas, cropboxData, prevCropbox) {\n    // For the left boundary\n    if (cropboxData.left < canvas.left) {\n        return {\n            left: canvas.left,\n            width: prevCropbox.left + prevCropbox.width - canvas.left,\n        };\n    }\n    // For the top boundary\n    if (cropboxData.top < canvas.top) {\n        return {\n            top: canvas.top,\n            height: prevCropbox.top + prevCropbox.height - canvas.top,\n        };\n    }\n    // For the right boundary\n    if (cropboxData.left + cropboxData.width > canvas.left + canvas.width) {\n        return {\n            left: prevCropbox.left,\n            width: canvas.left + canvas.width - prevCropbox.left,\n        };\n    }\n    // For the bottom boundary\n    if (cropboxData.top + cropboxData.height > canvas.top + canvas.height) {\n        return {\n            top: prevCropbox.top,\n            height: canvas.top + canvas.height - prevCropbox.top,\n        };\n    }\n    return null;\n}\nexport default limitCropboxMovementOnResize;\n", "export default {\n    strings: {\n        revert: 'Reset',\n        rotate: 'Rotate 90\u00B0',\n        zoomIn: 'Zoom in',\n        zoomOut: 'Zoom out',\n        flipHorizontal: 'Flip horizontally',\n        aspectRatioSquare: 'Crop square',\n        aspectRatioLandscape: 'Crop landscape (16:9)',\n        aspectRatioPortrait: 'Crop portrait (9:16)',\n    },\n};\n", "import { jsx as _jsx } from \"preact/jsx-runtime\";\nimport { UIPlugin } from '@uppy/core';\nimport packageJson from '../package.json' with { type: 'json' };\nimport Editor from './Editor.js';\nimport locale from './locale.js';\nconst defaultCropperOptions = {\n    viewMode: 0,\n    background: false,\n    autoCropArea: 1,\n    responsive: true,\n    minCropBoxWidth: 70,\n    minCropBoxHeight: 70,\n    croppedCanvasOptions: {},\n    initialAspectRatio: 0,\n};\nconst defaultActions = {\n    revert: true,\n    rotate: true,\n    granularRotate: true,\n    flip: true,\n    zoomIn: true,\n    zoomOut: true,\n    cropSquare: true,\n    cropWidescreen: true,\n    cropWidescreenVertical: true,\n};\nconst defaultOptions = {\n    // `quality: 1` increases the image size by orders of magnitude - 0.8 seems to be the sweet spot.\n    // see https://github.com/fengyuanchen/cropperjs/issues/538#issuecomment-1776279427\n    quality: 0.8,\n    actions: defaultActions,\n    cropperOptions: defaultCropperOptions,\n};\nexport default class ImageEditor extends UIPlugin {\n    static VERSION = packageJson.version;\n    cropper;\n    constructor(uppy, opts) {\n        super(uppy, {\n            ...defaultOptions,\n            ...opts,\n            actions: {\n                ...defaultActions,\n                ...opts?.actions,\n            },\n            cropperOptions: {\n                ...defaultCropperOptions,\n                ...opts?.cropperOptions,\n            },\n        });\n        this.id = this.opts.id || 'ImageEditor';\n        this.title = 'Image Editor';\n        this.type = 'editor';\n        this.defaultLocale = locale;\n        this.i18nInit();\n    }\n    canEditFile(file) {\n        if (!file.type || file.isRemote) {\n            return false;\n        }\n        const fileTypeSpecific = file.type.split('/')[1];\n        if (/^(jpe?g|gif|png|bmp|webp)$/.test(fileTypeSpecific)) {\n            return true;\n        }\n        return false;\n    }\n    save = () => {\n        const saveBlobCallback = (blob) => {\n            const { currentImage } = this.getPluginState();\n            this.uppy.setFileState(currentImage.id, {\n                // Reinserting image's name and type, because .toBlob loses both.\n                data: new File([blob], currentImage.name ?? this.i18n('unnamed'), {\n                    type: blob.type,\n                }),\n                size: blob.size,\n                preview: undefined,\n            });\n            const updatedFile = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('thumbnail:request', updatedFile);\n            this.setPluginState({\n                currentImage: updatedFile,\n            });\n            this.uppy.emit('file-editor:complete', updatedFile);\n        };\n        const { currentImage } = this.getPluginState();\n        // Fixes black 1px lines on odd-width images.\n        // This should be removed when cropperjs fixes this issue.\n        // (See https://github.com/transloadit/uppy/issues/4305 and https://github.com/fengyuanchen/cropperjs/issues/551).\n        const croppedCanvas = this.cropper.getCroppedCanvas({});\n        if (croppedCanvas.width % 2 !== 0) {\n            this.cropper.setData({ width: croppedCanvas.width - 1 });\n        }\n        if (croppedCanvas.height % 2 !== 0) {\n            this.cropper.setData({ height: croppedCanvas.height - 1 });\n        }\n        this.cropper\n            .getCroppedCanvas(this.opts.cropperOptions.croppedCanvasOptions)\n            .toBlob(saveBlobCallback, currentImage.type, this.opts.quality);\n    };\n    storeCropperInstance = (cropper) => {\n        this.cropper = cropper;\n    };\n    selectFile = (file) => {\n        this.uppy.emit('file-editor:start', file);\n        this.setPluginState({\n            currentImage: file,\n        });\n    };\n    install() {\n        this.setPluginState({\n            currentImage: null,\n        });\n        const { target } = this.opts;\n        if (target) {\n            this.mount(target, this);\n        }\n    }\n    uninstall() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage) {\n            const file = this.uppy.getFile(currentImage.id);\n            this.uppy.emit('file-editor:cancel', file);\n        }\n        this.unmount();\n    }\n    render() {\n        const { currentImage } = this.getPluginState();\n        if (currentImage === null || currentImage.isRemote) {\n            return null;\n        }\n        return (_jsx(Editor, { currentImage: currentImage, storeCropperInstance: this.storeCropperInstance, save: this.save, opts: this.opts, i18n: this.i18n }));\n    }\n}\n", "const de_DE = {\n    strings: {},\n    pluralize(count) {\n        if (count === 1) {\n            return 0;\n        }\n        return 1;\n    },\n};\nde_DE.strings = {\n    addBulkFilesFailed: {\n        '0': 'Das Hinzuf\u00FCgen einer Datei ist aufgrund eines internen Fehlers fehlgeschlagen',\n        '1': 'Das Hinzuf\u00FCgen von %{smart_count} Dateien ist aufgrund eines internen Fehlers fehlgeschlagen',\n    },\n    addingMoreFiles: 'Dateien hinzuf\u00FCgen',\n    addMore: 'Mehr hinzuf\u00FCgen',\n    addMoreFiles: 'Dateien hinzuf\u00FCgen',\n    allFilesFromFolderNamed: 'Alle Dateien vom Ordner %{name}',\n    allowAccessDescription: 'Um Bilder oder Videos mit Ihrer Kamera aufzunehmen, erlauben Sie dieser Website bitte den Zugriff auf Ihre Kamera.',\n    allowAccessTitle: 'Bitte erlauben Sie Zugriff auf Ihre Kamera',\n    aspectRatioLandscape: 'Zuschneiden auf Querformat (16:9)',\n    aspectRatioPortrait: 'Zuschneiden auf Hochformat (9:16)',\n    aspectRatioSquare: 'Zuschneiden auf Quadrat',\n    authenticateWith: 'Mit %{pluginName} verbinden',\n    authenticateWithTitle: 'Bitte authentifizieren Sie sich mit %{pluginName}, um Dateien auszuw\u00E4hlen',\n    back: 'Zur\u00FCck',\n    backToSearch: 'Zur\u00FCck zur Suche',\n    browse: 'durchsuchen',\n    browseFiles: 'Dateien durchsuchen',\n    browseFolders: 'Ordner durchsuchen',\n    cancel: 'Abbrechen',\n    cancelUpload: 'Hochladen abbrechen',\n    closeModal: 'Fenster schlie\u00DFen',\n    companionError: 'Verbindung zu Companion fehlgeschlagen',\n    companionUnauthorizeHint: 'Um die Autorisierung f\u00FCr Ihr %{provider} Konto aufzuheben, gehen Sie bitte zu %{url}',\n    complete: 'Fertig',\n    connectedToInternet: 'Mit dem Internet verbunden',\n    copyLink: 'Link kopieren',\n    copyLinkToClipboardFallback: 'Untenstehende URL kopieren',\n    copyLinkToClipboardSuccess: 'Link in die Zwischenablage kopiert',\n    creatingAssembly: 'Das Hochladen wird vorbereiten...',\n    creatingAssemblyFailed: 'Transloadit: Assembly konnte nicht erstellt werden',\n    dashboardTitle: 'Hochladen von Dateien',\n    dashboardWindowTitle: 'Hochladen von Dateien (ESC dr\u00FCcken zum Schlie\u00DFen)',\n    dataUploadedOfTotal: '%{complete} von %{total}',\n    discardRecordedFile: 'Aufgenommene Datei verwerfen',\n    done: 'Abgeschlossen',\n    dropHint: 'Dateien hier ablegen',\n    dropPasteBoth: 'Dateien hier ablegen/einf\u00FCgen, %{browseFiles} oder %{browseFolders}',\n    dropPasteFiles: 'Dateien hier ablegen/einf\u00FCgen oder %{browseFiles}',\n    dropPasteFolders: 'Dateien hier ablegen/einf\u00FCgen oder %{browseFolders}',\n    dropPasteImportBoth: 'Dateien hier ablegen/einf\u00FCgen, %{browse} oder von folgenden Quellen importieren:',\n    dropPasteImportFiles: 'Dateien hier ablegen/einf\u00FCgen, %{browseFiles} oder von folgenden Quellen importieren:',\n    dropPasteImportFolders: 'Dateien hier ablegen/einf\u00FCgen, %{browseFolders} oder von folgenden Quellen importieren:',\n    editFile: 'Datei bearbeiten',\n    editImage: 'Bild bearbeiten',\n    editFileWithFilename: 'Datei %{file} bearbeiten',\n    editing: '%{file} bearbeiten',\n    emptyFolderAdded: 'Keine Dateien hinzugef\u00FCgt, da der Ordner leer war',\n    encoding: 'Kodieren...',\n    enterCorrectUrl: 'Falsche URL: Bitte stellen Sie sicher, dass Sie einen direkten Link zu einer Datei eingeben',\n    enterTextToSearch: 'Text zum Suchen von Bildern eingeben',\n    enterUrlToImport: 'URL zum Importieren einer Datei eingeben',\n    exceedsSize: 'Datei %{file} ist gr\u00F6\u00DFer als die maximal erlaubte Dateigr\u00F6\u00DFe von %{size}',\n    failedToFetch: 'Companion konnte diese URL nicht verarbeiten - stellen Sie bitte sicher, dass sie korrekt ist',\n    failedToUpload: 'Fehler beim Hochladen der Datei %{file}',\n    filesUploadedOfTotal: {\n        '0': '%{complete} von %{smart_count} Datei hochgeladen',\n        '1': '%{complete} von %{smart_count} Dateien hochgeladen',\n    },\n    filter: 'Filter',\n    finishEditingFile: 'Bearbeitung beenden',\n    flipHorizontal: 'Horizontal spiegeln',\n    folderAdded: {\n        '0': 'Eine Datei von %{folder} hinzugef\u00FCgt',\n        '1': '%{smart_count} Dateien von %{folder} hinzugef\u00FCgt',\n    },\n    folderAlreadyAdded: 'Der Ordner \"%{folder}\" wurde bereits hinzugef\u00FCgt',\n    generatingThumbnails: 'Erstellen von Miniaturansichten...',\n    import: 'Importieren',\n    importFiles: 'Importiere Dateien von:',\n    importFrom: 'Importieren von %{name}',\n    inferiorSize: 'Diese Datei ist kleiner als die minimal erlaubte Dateigr\u00F6\u00DFe von %{size}',\n    loading: 'Laden...',\n    logOut: 'Abmelden',\n    micDisabled: 'Zugriff auf Mikrofon von Benutzer abgelehnt',\n    missingRequiredMetaField: 'Fehlende erforderliche Meta-Felder',\n    missingRequiredMetaFieldOnFile: 'Fehlende erforderliche Meta-Felder in %{fileName}',\n    missingRequiredMetaFields: {\n        '0': 'Fehlendes erforderliches Meta-Feld: %{fields}.',\n        '1': 'Fehlende erforderliche Meta-Felder: %{fields}.',\n    },\n    myDevice: 'Mein Ger\u00E4t',\n    noCameraDescription: 'Bitte Kamera anschlie\u00DFen, um Bilder oder Videos aufzunehmen',\n    noCameraTitle: 'Kamera nicht verf\u00FCgbar',\n    noDuplicates: \"Datei '%{fileName}' existiert bereits und kann nicht erneut hinzugef\u00FCgt werden\",\n    noFilesFound: 'Sie haben hier keine Dateien oder Ordner',\n    noInternetConnection: 'Keine Internetverbindung',\n    noMoreFilesAllowed: 'W\u00E4hrend der Upload l\u00E4uft, k\u00F6nnen keine weiteren Dateien hinzugef\u00FCgt werden',\n    openFolderNamed: 'Ordner %{name} \u00F6ffnen',\n    pause: 'Pausieren',\n    paused: 'Pausiert',\n    pauseUpload: 'Hochladen pausieren',\n    pluginNameBox: 'Box',\n    pluginNameCamera: 'Kamera',\n    pluginNameDropbox: 'Dropbox',\n    pluginNameFacebook: 'Facebook',\n    pluginNameGoogleDrive: 'Google Drive',\n    pluginNameInstagram: 'Instagram',\n    pluginNameOneDrive: 'OneDrive',\n    pluginNameZoom: 'Zoom',\n    poweredBy: 'Powered by %{uppy}',\n    processingXFiles: {\n        '0': 'Eine Datei verarbeiten',\n        '1': '%{smart_count} Dateien verarbeiten',\n    },\n    recording: 'Aufnahme',\n    recordingLength: 'Aufnahmedauer %{recording_length}',\n    recordingStoppedMaxSize: 'Die Aufnahme wurde gestoppt, weil die Dateigr\u00F6\u00DFe das Limit \u00FCberschritten hat',\n    recordVideoBtn: 'Video aufnehmen',\n    recoveredAllFiles: 'Wir haben alle Dateien wiederhergestellt. Sie k\u00F6nnen mit dem Hochladen fortfahren.',\n    recoveredXFiles: {\n        '0': 'Wir konnten eine Datei nicht vollst\u00E4ndig wiederherstellen. Bitte w\u00E4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.',\n        '1': 'Wir konnten %{smart_count} Dateien nicht vollst\u00E4ndig wiederherstellen. Bitte w\u00E4hlen Sie sie erneut aus und fahren Sie dann mit dem Hochladen fort.',\n    },\n    removeFile: 'Datei entfernen',\n    reSelect: 'Erneut ausw\u00E4hlen',\n    resetFilter: 'Filter zur\u00FCcksetzen',\n    resume: 'Fortsetzen',\n    resumeUpload: 'Hochladen fortsetzen',\n    retry: 'Erneut versuchen',\n    retryUpload: 'Hochladen erneut versuchen',\n    revert: 'R\u00FCckg\u00E4ngig machen',\n    rotate: 'Drehen',\n    save: 'Speichern',\n    saveChanges: '\u00C4nderungen speichern',\n    searchImages: 'Suche nach Bildern',\n    selectX: {\n        '0': 'W\u00E4hlen Sie %{smart_count}',\n        '1': 'W\u00E4hlen Sie %{smart_count}',\n    },\n    sessionRestored: '',\n    smile: 'Bitte l\u00E4cheln!',\n    startCapturing: 'Bildschirmaufnahme starten',\n    startRecording: 'Videoaufnahme starten',\n    stopCapturing: 'Bildschirmaufnahme stoppen',\n    stopRecording: 'Videoaufnahme stoppen',\n    streamActive: 'Stream aktiv',\n    streamPassive: 'Stream passiv',\n    submitRecordedFile: 'Aufgezeichnete Datei verwenden',\n    takePicture: 'Ein Foto aufnehmen',\n    takePictureBtn: 'Foto aufnehmen',\n    timedOut: 'Upload f\u00FCr %{seconds} Sekunden stehen geblieben, breche ab.',\n    upload: 'Hochladen',\n    uploadComplete: 'Hochladen abgeschlossen',\n    uploadFailed: 'Hochladen fehlgeschlagen',\n    uploading: 'Wird hochgeladen',\n    uploadingXFiles: {\n        '0': 'Eine Datei wird hochgeladen',\n        '1': '%{smart_count} Dateien werden hochgeladen',\n    },\n    uploadPaused: 'Hochladen pausiert',\n    uploadXFiles: {\n        '0': 'Eine Datei hochladen',\n        '1': '%{smart_count} Dateien hochladen',\n    },\n    uploadXNewFiles: {\n        '0': '+%{smart_count} Datei hochladen',\n        '1': '+%{smart_count} Dateien hochladen',\n    },\n    xFilesSelected: {\n        '0': 'Eine Datei ausgew\u00E4hlt',\n        '1': '%{smart_count} Dateien ausgew\u00E4hlt',\n    },\n    xMoreFilesAdded: {\n        '0': 'Eine weitere Datei hinzugef\u00FCgt',\n        '1': '%{smart_count} weitere Dateien hinzugef\u00FCgt',\n    },\n    xTimeLeft: '%{time} verbleibend',\n    youCanOnlyUploadFileTypes: 'Sie k\u00F6nnen nur folgende Dateitypen hochladen: %{types}',\n    youCanOnlyUploadX: {\n        '0': 'Sie k\u00F6nnen nur eine Datei hochladen',\n        '1': 'Sie k\u00F6nnen nur %{smart_count} Dateien hochladen',\n    },\n    youHaveToAtLeastSelectX: {\n        '0': 'Sie m\u00FCssen mindestens eine Datei ausw\u00E4hlen',\n        '1': 'Sie m\u00FCssen mindestens %{smart_count} Dateien ausw\u00E4hlen',\n    },\n    zoomIn: 'Vergr\u00F6\u00DFern',\n    zoomOut: 'Verkleinern',\n};\n// @ts-ignore untyped\nif (typeof Uppy !== 'undefined') {\n    // @ts-ignore untyped\n    globalThis.Uppy.locales.de_DE = de_DE;\n}\nexport default de_DE;\n", "/**\n * Uppy Backend Integration f\u00FCr REDAXO\n * Verwendet lokale NPM-Module statt CDN\n */\nimport Uppy from '@uppy/core';\nimport Dashboard from '@uppy/dashboard';\nimport Webcam from '@uppy/webcam';\nimport XHRUpload from '@uppy/xhr-upload';\nimport ImageEditor from '@uppy/image-editor';\nimport German from '@uppy/locales/lib/de_DE';\n\nwindow.UPPY_BUNDLE_LOADED = true;\n\n/**\n * Initialisiert alle Uppy-Widgets auf der Seite\n */\nfunction initUppyWidgets() {\n    const widgets = document.querySelectorAll('input[data-widget=\"uppy\"]:not([data-uppy-initialized])');\n    \n    if (widgets.length === 0) {\n        return;\n    }\n\n    widgets.forEach(function(inputElement) {\n        initializeUppyWidget(inputElement);\n    });\n}\n\n/**\n * Initialisiert ein einzelnes Uppy-Widget\n */\nfunction initializeUppyWidget(inputElement) {\n    if (inputElement.dataset.uppyInitialized) {\n        return;\n    }\n    \n    inputElement.dataset.uppyInitialized = 'true';\n    \n    // Input-Element verstecken\n    inputElement.style.display = 'none';\n    \n    // Container f\u00FCr Uppy Dashboard erstellen\n    const container = document.createElement('div');\n    container.className = 'uppy-wrapper';\n    container.style.minHeight = '350px';\n    container.style.marginBottom = '30px';\n    inputElement.parentNode.insertBefore(container, inputElement.nextSibling);\n    \n    // Konfiguration aus data-Attributen oder Defaults\n    const config = {\n        apiToken: inputElement.dataset.apiToken || '', // Im Backend optional (User ist bereits authentifiziert)\n        maxFiles: parseInt(inputElement.dataset.maxFiles) || 10,\n        maxFileSize: (parseInt(inputElement.dataset.maxFilesize) || 200) * 1024 * 1024, // MB in Bytes umrechnen\n        allowedTypes: inputElement.dataset.allowedTypes ? inputElement.dataset.allowedTypes.split(',') : [],\n        categoryId: parseInt(inputElement.dataset.categoryId) || 0,\n        locale: inputElement.dataset.locale || 'de-DE'\n    };\n    \n    // Uppy-Config aus PHP (boot.php)\n    const uppyConfig = window.rex?.uppy_config || {};\n    config.enable_resize = uppyConfig.enable_resize !== false;\n    config.resize_width = uppyConfig.resize_width || 2000;\n    config.resize_height = uppyConfig.resize_height || 2000;\n    config.resize_quality = uppyConfig.resize_quality || 85;\n    config.fix_exif_orientation = uppyConfig.fix_exif_orientation !== false;\n    \n    // Metadaten-Felder laden\n    loadMetadataFields(config.apiToken).then(function(metaFields) {\n\n        // Uppy-Instanz erstellen\n        const uppy = new Uppy({\n            id: 'uppy-' + Math.random().toString(36).substr(2, 9),\n            autoProceed: false,\n            allowMultipleUploadBatches: true,\n            restrictions: {\n                maxFileSize: config.maxFileSize,\n                maxNumberOfFiles: config.maxFiles,\n                allowedFileTypes: config.allowedTypes.length > 0 ? config.allowedTypes : null\n            },\n            locale: config.locale === 'de-DE' ? German : undefined\n        });\n        \n        // DEBUG: Global verf\u00FCgbar machen\n        if (!window.uppyInstances) {\n            window.uppyInstances = [];\n        }\n        window.uppyInstances.push(uppy);\n        window.uppyDebug = uppy; // Letzte Instanz f\u00FCr einfachen Zugriff\n\n        // WICHTIG: Image Editor MUSS vor Dashboard registriert werden\n        const globalConfig = window.rex?.uppy_config || {};\n        // Image Editor aus data-Attribut des Feldes lesen, nicht global\n        const enableImageEditor = inputElement.dataset.enableImageEditor === 'true';\n        \n        if (enableImageEditor) {\n            registerImageEditor(uppy, config, globalConfig);\n        }\n        \n        // Dashboard Plugin - MIT metaFields damit Edit-Button erscheint\n        const dashboardOptions = {\n            inline: true,\n            target: container,\n            width: '100%',\n            height: 'auto',\n            showProgressDetails: true,\n            proudlyDisplayPoweredByUppy: false,\n            note: getTranslation(config.locale, 'note', config.maxFiles),\n            disablePageScrollWhenModalOpen: false,\n            // metaFields M\u00DCSSEN angegeben werden, sonst gibt es keinen Edit-Button\n            metaFields: metaFields.length > 0 ? metaFields : undefined\n        };\n        \n        // Wenn Image Editor aktiv ist, automatisch \u00F6ffnen bei Bild-Upload (nur Einzel-Uploads)\n        if (enableImageEditor && config.maxFiles === 1) {\n            dashboardOptions.autoOpen = 'imageEditor';\n        }\n        \n        uppy.use(Dashboard, dashboardOptions);\n        \n        // Eigenes Modal f\u00FCr Metadaten nach Upload\n        // ABER: Wenn Image Editor aktiv ist, kein Modal - User soll erst Bild bearbeiten\n        if (!enableImageEditor && metaFields && metaFields.length > 0) {\n            setupMetadataModal(uppy, metaFields);\n        }\n        \n        // Compressor Plugin f\u00FCr Resize und EXIF-Korrektur\n        addCompressorPlugin(uppy, config);\n        \n        initializeUppyPlugins(uppy, config, inputElement, metaFields);\n    }).catch(function(error) {\n\n        // Fallback: Uppy ohne Metadaten-Felder initialisieren\n        initializeUppyFallback(container, config, inputElement);\n    });\n}\n\n/**\n * Registriert Image Editor Plugin (MUSS vor Dashboard aufgerufen werden)\n */\nfunction registerImageEditor(uppy, config, globalConfig) {\n    const cropRatios = globalConfig.crop_ratios || '1:1,16:9,4:3,3:2,free';\n    \n    const ratios = cropRatios.split(',').map(ratio => {\n        if (ratio === 'free') return null;\n        const parts = ratio.split(':').map(Number);\n        return parts.length === 2 ? parts[0] / parts[1] : null;\n    }).filter(r => r !== null);\n    \n    try {\n        uppy.use(ImageEditor, {\n            id: 'ImageEditor',\n            quality: config.resize_quality / 100, // 85 -> 0.85\n            cropperOptions: {\n                viewMode: 1,\n                background: false,\n                autoCropArea: 1,\n                responsive: true,\n                aspectRatio: ratios.length > 0 ? ratios[0] : null,\n            },\n            actions: {\n                revert: true,\n                rotate: true,\n                granularRotate: true,\n                flip: true,\n                zoomIn: true,\n                zoomOut: true,\n                cropSquare: cropRatios.includes('1:1'),\n                cropWidescreen: cropRatios.includes('16:9'),\n                cropWidescreenVertical: cropRatios.includes('9:16'),\n            },\n            locale: {\n                strings: {\n                    revert: 'Zur\u00FCcksetzen',\n                    rotate: 'Drehen',\n                    zoomIn: 'Vergr\u00F6\u00DFern',\n                    zoomOut: 'Verkleinern',\n                    flipHorizontal: 'Horizontal spiegeln',\n                    aspectRatioSquare: '1:1',\n                    aspectRatioLandscape: '16:9',\n                    aspectRatioPortrait: '9:16',\n                }\n            }\n        });\n    } catch (error) {\n        console.error('Uppy Image Editor Fehler:', error);\n    }\n}\n\n/**\n * Initialisiert Uppy-Plugins und Event-Handler\n */\nfunction initializeUppyPlugins(uppy, config, inputElement, metaFields) {\n    // Webcam Plugin nur laden wenn aktiviert\n    const globalConfig = window.rex?.uppy_config || {};\n    const enableWebcam = globalConfig.enable_webcam || false;\n    \n    if (enableWebcam) {\n        uppy.use(Webcam, {\n            modes: ['picture'],\n            mirror: true,\n            facingMode: 'user',\n            showRecordingLength: false,\n            preferredImageMimeType: 'image/jpeg',\n            locale: {\n                strings: {\n                    pluginNameCamera: 'Kamera',\n                    smile: 'L\u00E4cheln!',\n                    takePicture: 'Foto aufnehmen',\n                    startRecording: 'Aufnahme starten',\n                    stopRecording: 'Aufnahme stoppen',\n                    allowAccessTitle: 'Bitte erlaube den Zugriff auf deine Kamera',\n                    allowAccessDescription: 'Um Fotos aufzunehmen, erlaube bitte den Zugriff auf deine Kamera.',\n                }\n            }\n        });\n    }\n    \n    // XHR Upload mit dynamischem Endpoint und Metadaten\n    uppy.use(XHRUpload, {\n        endpoint: function(file) {\n            // Category-ID dynamisch aus dem data-Attribut lesen (aktualisiert bei Select-Change)\n            const currentCategoryId = parseInt(inputElement.dataset.categoryId) || 0;\n            \n            // Im Backend ist Token optional\n            const tokenParam = config.apiToken ? '&api_token=' + encodeURIComponent(config.apiToken) : '';\n            return window.location.origin + '/redaxo/index.php?rex-api-call=uppy_uploader&func=upload' + tokenParam + '&category_id=' + currentCategoryId;\n        },\n        formData: true,\n        fieldName: 'file',\n        allowedMetaFields: true, // WICHTIG: Alle Metadaten mitsenden\n        headers: {\n            'X-Requested-With': 'XMLHttpRequest'\n        },\n        getResponseData: function(responseText, response) {\n            try {\n                return JSON.parse(responseText);\n            } catch (e) {\n                return { success: false, message: 'Invalid response' };\n            }\n        },\n        getResponseError: function(responseText) {\n            try {\n                const response = JSON.parse(responseText);\n                return response.error || response.message || 'Upload failed';\n            } catch (e) {\n                return responseText;\n            }\n        }\n    });\n    \n    // Event-Handler\n    setupEventHandlers(uppy, config, inputElement, metaFields);\n}\n\n/**\n * Fallback-Initialisierung ohne Metadaten\n */\nfunction initializeUppyFallback(container, config, inputElement) {\n    const uppy = new Uppy({\n        id: 'uppy-' + Math.random().toString(36).substr(2, 9),\n        autoProceed: false,\n        allowMultipleUploadBatches: true,\n        restrictions: {\n            maxFileSize: config.maxFileSize,\n            maxNumberOfFiles: config.maxFiles,\n            allowedFileTypes: config.allowedTypes.length > 0 ? config.allowedTypes : null\n        },\n        locale: config.locale === 'de-DE' ? German : undefined\n    });\n    \n    uppy.use(Dashboard, {\n        inline: true,\n        target: container,\n        width: '100%',\n        height: 350,\n        showProgressDetails: true,\n        proudlyDisplayPoweredByUppy: false,\n        note: getTranslation(config.locale, 'note')\n    });\n    \n    addCompressorPlugin(uppy, config);\n    initializeUppyPlugins(uppy, config, inputElement);\n}\n\n/**\n * Event-Handler einrichten\n */\nfunction setupEventHandlers(uppy, config, inputElement, metaFields) {\n    // Upload erfolgreich\n    uppy.on('upload-success', function(file, response) {\n        \n        if (response.body && response.body.success && response.body.data) {\n            const filename = response.body.data.filename;\n            const title = response.body.data.title || '';\n            \n            // Datei in Uppy-Meta speichern f\u00FCr sp\u00E4tere Verwendung\n            uppy.setFileMeta(file.id, {\n                ...file.meta,\n                savedFilename: filename,\n                savedTitle: title\n            });\n            \n            // Wenn Image Editor aktiv ist UND Metadaten vorhanden sind: Modal \u00F6ffnen\n            const globalConfig = window.rex?.uppy_config || {};\n            const enableImageEditor = globalConfig.enable_image_editor || false;\n            \n            if (enableImageEditor && metaFields && metaFields.length > 0) {\n                // Kurze Verz\u00F6gerung damit Upload-Feedback sichtbar ist\n                setTimeout(function() {\n                    showMetadataModal(uppy, file, metaFields);\n                }, 500);\n            }\n            \n            // Hidden Input aktualisieren\n            if (inputElement) {\n                const currentValue = inputElement.value;\n                const files = currentValue ? currentValue.split(',') : [];\n                if (!files.includes(filename)) {\n                    files.push(filename);\n                    inputElement.value = files.join(',');\n                }\n            }\n            \n            // jQuery Event f\u00FCr YForm-Integration ausl\u00F6sen\n            if (typeof jQuery !== 'undefined') {\n                jQuery(document).trigger('uppyUploadSuccess', {\n                    widgetId: inputElement?.id,\n                    filename: filename,\n                    title: title,\n                    file: file\n                });\n            }\n            \n            // Mediapool-Widget-Integration (REX_MEDIA / REX_MEDIALIST)\n            const openerField = inputElement?.dataset?.uppyOpenerField || window.rex?.uppyOpenerInputField;\n            if (openerField && window.opener) {\n                // F\u00FCr REX_MEDIA: Nicht automatisch \u00FCbernehmen, Button anzeigen\n                // F\u00FCr REX_MEDIALIST: Auch nicht automatisch, Liste mit Buttons anzeigen\n\n            }\n        }\n    });\n    \n    // Alle Uploads abgeschlossen - zeige \u00DCbernehmen-Liste\n    uppy.on('complete', function(result) {\n        const openerField = inputElement?.dataset?.uppyOpenerField || window.rex?.uppyOpenerInputField;\n\n        // Zeige Liste wenn openerField gesetzt ist (auch ohne window.opener)\n        if (openerField && result.successful.length > 0) {\n            showUploadedFilesList(result.successful, openerField, inputElement);\n        }\n    });\n}\n\n/**\n * Zeigt Liste der hochgeladenen Dateien mit \u00DCbernehmen-Buttons\n */\nfunction showUploadedFilesList(files, openerField, inputElement) {\n    // Liste bereits vorhanden? Entfernen\n    let listContainer = document.getElementById('uppy-uploaded-files-list');\n    if (!listContainer) {\n        listContainer = document.createElement('div');\n        listContainer.id = 'uppy-uploaded-files-list';\n        listContainer.className = 'uppy-uploaded-files-list';\n        \n        // Nach dem Uppy Widget einf\u00FCgen\n        const uppyWrapper = inputElement.parentNode.querySelector('.uppy-wrapper');\n        if (uppyWrapper && uppyWrapper.parentNode) {\n            uppyWrapper.parentNode.insertBefore(listContainer, uppyWrapper.nextSibling);\n        }\n    }\n    \n    // HTML f\u00FCr Dateiliste erstellen\n    let html = '<h4>Hochgeladene Dateien</h4><ul class=\"list-group\">';\n    \n    files.forEach(function(file) {\n        const filename = file.meta.savedFilename || file.name;\n        const title = file.meta.savedTitle || '';\n        \n        html += '<li class=\"list-group-item\">';\n        html += '<span class=\"uppy-file-name\">' + filename + '</span>';\n        \n        if (openerField.indexOf('REX_MEDIA_') === 0 || openerField.indexOf('REX_MEDIALIST_') === 0) {\n            // Eindeutige ID f\u00FCr Button\n            const btnId = 'uppy-select-' + filename.replace(/[^a-z0-9]/gi, '-');\n            \n            html += '<button type=\"button\" class=\"btn btn-xs btn-select btn-highlight pull-right\" ';\n            html += 'id=\"' + btnId + '\" ';\n            html += 'data-filename=\"' + filename + '\" ';\n            html += 'data-title=\"' + title.replace(/\"/g, '&quot;') + '\" ';\n            html += 'data-opener-field=\"' + openerField + '\">';\n            html += '\u00DCbernehmen</button>';\n        }\n        \n        html += '</li>';\n    });\n    \n    html += '</ul>';\n    \n    // Bei MEDIALIST: \"Alle \u00FCbernehmen\" Button hinzuf\u00FCgen\n    if (openerField.indexOf('REX_MEDIALIST_') === 0 && files.length > 1) {\n        html += '<div style=\"margin-top: 10px; text-align: center;\">';\n        html += '<button type=\"button\" class=\"btn btn-success\" id=\"uppy-select-all-btn\" ';\n        html += 'data-opener-field=\"' + openerField + '\">';\n        html += '<i class=\"fa fa-check-double\"></i> Alle \u00FCbernehmen (' + files.length + ' Dateien)</button>';\n        html += '</div>';\n    }\n    \n    listContainer.innerHTML = html;\n    \n    // Event-Listener f\u00FCr \u00DCbernehmen-Buttons\n    const buttons = listContainer.querySelectorAll('button[data-opener-field]');\n    buttons.forEach(function(button) {\n        button.addEventListener('click', function() {\n            const filename = this.getAttribute('data-filename');\n            const title = this.getAttribute('data-title');\n            const openerField = this.getAttribute('data-opener-field');\n            \n            if (openerField.indexOf('REX_MEDIA_') === 0) {\n                // REX_MEDIA: Rufe globale selectMedia Funktion auf\n                if (typeof selectMedia === 'function') {\n                    selectMedia(filename, title);\n                }\n            } else if (openerField.indexOf('REX_MEDIALIST_') === 0) {\n                // REX_MEDIALIST: Rufe globale selectMedialist Funktion auf\n                if (typeof selectMedialist === 'function') {\n                    selectMedialist(filename);\n                }\n            }\n        });\n    });\n    \n    // \"Alle \u00FCbernehmen\" Button Handler\n    const selectAllBtn = document.getElementById('uppy-select-all-btn');\n    if (selectAllBtn) {\n        selectAllBtn.addEventListener('click', function() {\n            if (typeof selectMedialist === 'function') {\n                files.forEach(function(file) {\n                    const filename = file.meta.savedFilename || file.name;\n                    selectMedialist(filename);\n                });\n            }\n        });\n    }\n}\n\n/**\n * Event-Handler einrichten (fortgesetzt)\n */\nfunction setupEventHandlersOld(uppy, config, inputElement) {\n    // Upload erfolgreich - ALTE VERSION\n    uppy.on('upload-success', function(file, response) {\n        if (response.body && response.body.success && response.body.data) {\n            const filename = response.body.data.filename;\n            \n            // F\u00FCr NON-Widget Verwendung: Automatisch ins Input\n            const openerField = inputElement?.dataset?.uppyOpenerField || window.rex?.uppyOpenerInputField;\n            if (!openerField || !window.opener) {\n                // Hidden Input aktualisieren\n                if (inputElement) {\n                    const currentValue = inputElement.value;\n                    const files = currentValue ? currentValue.split(',') : [];\n                    if (!files.includes(filename)) {\n                        files.push(filename);\n                        inputElement.value = files.join(',');\n                    }\n                }\n            }\n        }\n    });\n}\n\n// Alte setupEventHandlers umbenennen falls noch irgendwo verwendet\nfunction setupEventHandlersOriginal(uppy, config, inputElement) {\n    uppy.on('upload-success', function(file, response) {\n        if (response.body && response.body.success && response.body.data) {\n            const filename = response.body.data.filename;\n            \n            // Mediapool-Widget-Integration (REX_MEDIA / REX_MEDIALIST) - ALTE VERSION\n            const openerField = inputElement?.dataset?.uppyOpenerField || window.rex?.uppyOpenerInputField;\n            if (openerField && window.opener) {\n                // Media-Widget callback - DIREKT (alt)\n                if (typeof window.selectMedia === 'function') {\n                    const title = response.body.data.title || '';\n                    window.selectMedia(filename, title);\n                } else if (typeof window.selectMedialist === 'function' && openerField.indexOf('REX_MEDIALIST_') === 0) {\n                    window.selectMedialist(filename);\n                }\n            }\n\n        }\n    });\n    \n    // Upload-Fehler\n    uppy.on('upload-error', function(file, error, response) {\n\n    });\n    \n    // Datei entfernt\n    uppy.on('file-removed', function(file) {\n        if (file.meta && file.meta.filename && inputElement) {\n            const currentValue = inputElement.value;\n            const files = currentValue.split(',').filter(function(f) {\n                return f !== file.meta.filename;\n            });\n            inputElement.value = files.join(',');\n        }\n    });\n}\n\n/**\n * L\u00E4dt Metadaten-Felder vom Server\n */\nfunction loadMetadataFields(apiToken) {\n    \n    // Im Backend ist Token optional, da User bereits authentifiziert ist\n    const url = apiToken \n        ? window.location.origin + '/redaxo/index.php?rex-api-call=uppy_metadata&action=get_fields&api_token=' + apiToken\n        : window.location.origin + '/redaxo/index.php?rex-api-call=uppy_metadata&action=get_fields';\n    \n    return fetch(url)\n        .then(function(response) {\n            console.log('Metadata API Response Status:', response.status);\n            if (!response.ok) {\n                throw new Error('HTTP ' + response.status);\n            }\n            return response.json();\n        })\n        .then(function(data) {\n            console.log('Metadata API Response:', data);\n            if (data.success && data.data) {\n                console.log('API data.data:', data.data.length, 'Felder geladen');\n                return data.data.map(function(field) {\n                    const mappedField = {\n                        id: field.id,\n                        name: field.name,\n                        placeholder: field.placeholder || '',\n                        type: field.type || 'text',\n                        is_multilang: field.is_multilang || false,\n                        clang_id: field.clang_id,\n                        base_field: field.base_field,\n                        languages: field.languages || undefined\n                    };\n\n                    return mappedField;\n                });\n            }\n            return [];\n        })\n        .catch(function(error) {\n            console.error('Uppy Metadaten-Fehler:', error);\n            return [];\n        });\n}\n\n/**\n * F\u00FCgt Compressor-Plugin hinzu (Client-seitige Bildoptimierung)\n */\nfunction addCompressorPlugin(uppy, config) {\n    if (!config.enable_resize) {\n        return;\n    }\n    \n    uppy.on('file-added', function(file) {\n        if (!file.type || !file.type.startsWith('image/')) {\n            return;\n        }\n        \n        resizeImage(file, config).then(function(resizedBlob) {\n            if (resizedBlob) {\n                uppy.setFileState(file.id, {\n                    data: resizedBlob,\n                    size: resizedBlob.size\n                });\n            }\n        }).catch(function(error) {\n\n        });\n    });\n}\n\n/**\n * Resized ein Bild mit Canvas API\n */\nfunction resizeImage(file, config) {\n    return new Promise(function(resolve, reject) {\n        const img = new Image();\n        const reader = new FileReader();\n        \n        reader.onload = function(e) {\n            img.onload = function() {\n                try {\n                    const canvas = document.createElement('canvas');\n                    const ctx = canvas.getContext('2d');\n                    \n                    let width = img.width;\n                    let height = img.height;\n                    \n                    // Proportional skalieren\n                    if (width > config.resize_width || height > config.resize_height) {\n                        const ratio = Math.min(config.resize_width / width, config.resize_height / height);\n                        width = Math.floor(width * ratio);\n                        height = Math.floor(height * ratio);\n                    }\n                    \n                    canvas.width = width;\n                    canvas.height = height;\n                    \n                    // EXIF-Orientierung korrigieren\n                    if (config.fix_exif_orientation) {\n                        ctx.drawImage(img, 0, 0, width, height);\n                    } else {\n                        ctx.drawImage(img, 0, 0, width, height);\n                    }\n                    \n                    canvas.toBlob(function(blob) {\n                        resolve(blob);\n                    }, file.type, config.resize_quality / 100);\n                } catch (error) {\n                    reject(error);\n                }\n            };\n            \n            img.onerror = reject;\n            img.src = e.target.result;\n        };\n        \n        reader.onerror = reject;\n        reader.readAsDataURL(file.data);\n    });\n}\n\n/**\n * Gibt \u00DCbersetzung zur\u00FCck\n */\nfunction getTranslation(locale, key, maxFiles) {\n    maxFiles = maxFiles || 10;\n    \n    const translations = {\n        'de-DE': {\n            'note': `Dateien hochladen (max. ${maxFiles})`\n        },\n        'en-US': {\n            'note': `Upload files (max. ${maxFiles})`\n        }\n    };\n    \n    return translations[locale]?.[key] || '';\n}\n\n/**\n * Mutation Observer f\u00FCr dynamisch hinzugef\u00FCgte Elemente\n */\nfunction setupMutationObserver() {\n    if (!document.body) {\n        setTimeout(setupMutationObserver, 50);\n        return;\n    }\n    \n    const observer = new MutationObserver(function(mutations) {\n        let hasNewWidgets = false;\n        \n        mutations.forEach(function(mutation) {\n            mutation.addedNodes.forEach(function(node) {\n                if (node.nodeType === Node.ELEMENT_NODE) {\n                    if (node.matches && node.matches('input[data-widget=\"uppy\"]:not([data-uppy-initialized])')) {\n                        hasNewWidgets = true;\n                    } else if (node.querySelectorAll) {\n                        const widgets = node.querySelectorAll('input[data-widget=\"uppy\"]:not([data-uppy-initialized])');\n                        if (widgets.length > 0) {\n                            hasNewWidgets = true;\n                        }\n                    }\n                }\n            });\n        });\n        \n        if (hasNewWidgets) {\n\n            initUppyWidgets();\n        }\n    });\n    \n    observer.observe(document.body, {\n        childList: true,\n        subtree: true\n    });\n}\n\n/**\n * Eigenes Modal f\u00FCr Metadaten nach Upload\n */\nfunction setupMetadataModal(uppy, metaFields) {\n    console.log('setupMetadataModal aufgerufen mit', metaFields.length, 'Feldern');\n    \n    const globalConfig = window.rex?.uppy_config || {};\n    const enableImageEditor = globalConfig.enable_image_editor || false;\n    \n    if (enableImageEditor) {\n        console.log('Image Editor ist aktiv - Edit-Button wird NICHT \u00FCberschrieben');\n        console.log('Metadaten-Modal \u00F6ffnet sich automatisch nach Upload');\n        // Wenn Image Editor aktiv ist, Edit-Button nicht abfangen\n        // Metadata-Modal wird \u00FCber upload-success Event ge\u00F6ffnet\n        return;\n    }\n\n    // Nur wenn KEIN Image Editor: Edit-Button f\u00FCr Metadata-Modal abfangen\n    console.log('Image Editor inaktiv - Edit-Button wird f\u00FCr Metadata-Modal verwendet');\n\n    // MutationObserver f\u00FCr File-Items\n    const observeFileItems = function() {\n        const filesContainer = document.querySelector('.uppy-Dashboard-filesInner');\n        if (!filesContainer) {\n            console.log('Warte auf Dashboard Container...');\n            setTimeout(observeFileItems, 100);\n            return;\n        }\n        \n        console.log('Dashboard Container gefunden, starte Observer');\n\n        const processFileItem = function(fileItem) {\n            const fileId = fileItem.id;\n            \n            // Standard Edit-Button finden\n            let editBtn = null;\n            const allActions = fileItem.querySelectorAll('.uppy-Dashboard-Item-action');\n            allActions.forEach(btn => {\n                if (btn.classList.contains('uppy-Dashboard-Item-action--edit')) {\n                    editBtn = btn;\n                }\n            });\n            \n            if (!editBtn) {\n                console.log('Kein Edit-Button gefunden f\u00FCr:', fileId);\n                return;\n            }\n            \n            // Pr\u00FCfen ob Handler bereits registriert\n            if (editBtn.hasAttribute('data-uppy-custom-handler')) {\n                console.log('Handler bereits registriert f\u00FCr:', fileId);\n                return;\n            }\n\n            console.log('Registriere Click-Handler f\u00FCr:', fileId);\n            \n            // Markiere als verarbeitet\n            editBtn.setAttribute('data-uppy-custom-handler', 'true');\n            \n            // Click-Event abfangen und unser Modal \u00F6ffnen\n            editBtn.addEventListener('click', function(e) {\n                console.log('Edit-Button geklickt f\u00FCr:', fileId);\n                e.preventDefault();\n                e.stopPropagation();\n                \n                // File-Objekt aus Uppy holen\n                const files = uppy.getFiles();\n                const file = files.find(f => fileItem.id.includes(f.id));\n                \n                if (file) {\n                    console.log('\u00D6ffne Metadata Modal f\u00FCr:', file.name);\n                    showMetadataModal(uppy, file, metaFields);\n                } else {\n                    console.error('Datei nicht gefunden in Uppy:', fileId);\n                }\n            }, true);\n        };\n        \n        // Bereits vorhandene File-Items verarbeiten\n        const existingItems = filesContainer.querySelectorAll('.uppy-Dashboard-Item');\n        console.log('Verarbeite', existingItems.length, 'existierende Items');\n        existingItems.forEach(processFileItem);\n        \n        // Observer f\u00FCr neue Items\n        const observer = new MutationObserver(function(mutations) {\n            mutations.forEach(function(mutation) {\n                mutation.addedNodes.forEach(function(node) {\n                    if (node.nodeType === Node.ELEMENT_NODE && \n                        node.classList && \n                        node.classList.contains('uppy-Dashboard-Item')) {\n\n                        processFileItem(node);\n                    }\n                });\n            });\n        });\n        \n        observer.observe(filesContainer, {\n            childList: true,\n            subtree: true\n        });\n        \n        console.log('MutationObserver gestartet');\n    };\n    \n    // Start nach kurzer Verz\u00F6gerung\n    setTimeout(observeFileItems, 200);\n}\n\n/**\n * Zeigt Modal mit Metadaten-Feldern an\n */\nfunction showMetadataModal(uppy, file, metaFields) {\n    // Modal HTML erstellen\n    const modalHTML = `\n        <div class=\"modal fade uppy-metadata-modal\" tabindex=\"-1\" role=\"dialog\">\n            <div class=\"modal-dialog modal-lg\" role=\"document\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-header\">\n                        <button type=\"button\" class=\"close\" data-dismiss=\"modal\">\n                            <span>&times;</span>\n                        </button>\n                        <h4 class=\"modal-title\">Metadaten bearbeiten: ${file.name}</h4>\n                    </div>\n                    <div class=\"modal-body\">\n                        <form class=\"uppy-metadata-form\">\n                            ${metaFields.map(field => {\n\n                                const value = file.meta[field.id] || '';\n                                const fieldType = field.type || 'text';\n                                const isMultilang = field.is_multilang || false;\n                                \n                                if (fieldType === 'select' && field.options) {\n                                    // Select-Feld (z.B. f\u00FCr Kategorie)\n                                    const options = field.options.map(opt => {\n                                        const selected = opt.value == value ? 'selected' : '';\n                                        return `<option value=\"${opt.value}\" ${selected}>${opt.label}</option>`;\n                                    }).join('');\n                                    \n                                    return `\n                                        <div class=\"form-group\">\n                                            <label class=\"control-label\">${field.name}</label>\n                                            <select name=\"${field.id}\" class=\"form-control selectpicker\" data-live-search=\"true\">\n                                                ${options}\n                                            </select>\n                                        </div>\n                                    `;\n                                } else if (isMultilang && field.languages) {\n                                    // Mehrsprachiges Feld: Hidden Field + erste Sprache + Collapse f\u00FCr weitere\n                                    let parsedValues = {};\n                                    try {\n                                        if (typeof value === 'string' && value) {\n                                            parsedValues = JSON.parse(value).reduce((acc, item) => {\n                                                acc[item.clang_id] = item.value;\n                                                return acc;\n                                            }, {});\n                                        }\n                                    } catch (e) {}\n                                    \n                                    const inputTag = fieldType === 'lang_textarea' ? 'textarea' : 'input';\n                                    const collapseId = 'collapse-' + field.id.replace(/[^a-z0-9]/gi, '-');\n                                    \n                                    // Erste Sprache (Hauptsprache)\n                                    const firstLang = field.languages[0];\n                                    const firstValue = parsedValues[firstLang.clang_id] || '';\n                                    let firstLanguageInput = '';\n                                    \n                                    if (inputTag === 'textarea') {\n                                        firstLanguageInput = `\n                                            <textarea \n                                                class=\"form-control uppy-lang-input\" \n                                                data-clang-id=\"${firstLang.clang_id}\"\n                                                rows=\"3\"\n                                                placeholder=\"${firstLang.clang_name}...\"\n                                            >${firstValue}</textarea>\n                                        `;\n                                    } else {\n                                        firstLanguageInput = `\n                                            <input \n                                                type=\"text\" \n                                                class=\"form-control uppy-lang-input\" \n                                                data-clang-id=\"${firstLang.clang_id}\"\n                                                value=\"${firstValue}\"\n                                                placeholder=\"${firstLang.clang_name}...\"\n                                            >\n                                        `;\n                                    }\n                                    \n                                    // Weitere Sprachen (wenn vorhanden)\n                                    let additionalLanguages = '';\n                                    if (field.languages.length > 1) {\n                                        const additionalInputs = field.languages.slice(1).map(lang => {\n                                            const langValue = parsedValues[lang.clang_id] || '';\n                                            if (inputTag === 'textarea') {\n                                                return `\n                                                    <div class=\"form-group form-group-sm\" style=\"margin-top: 10px;\">\n                                                        <label style=\"font-weight: normal;\"><i class=\"fa fa-flag\"></i> ${lang.clang_name} (${lang.clang_code})</label>\n                                                        <textarea \n                                                            class=\"form-control uppy-lang-input\" \n                                                            data-clang-id=\"${lang.clang_id}\"\n                                                            rows=\"2\"\n                                                            placeholder=\"${lang.clang_name}...\"\n                                                        >${langValue}</textarea>\n                                                    </div>\n                                                `;\n                                            } else {\n                                                return `\n                                                    <div class=\"form-group form-group-sm\" style=\"margin-top: 10px;\">\n                                                        <label style=\"font-weight: normal;\"><i class=\"fa fa-flag\"></i> ${lang.clang_name} (${lang.clang_code})</label>\n                                                        <input \n                                                            type=\"text\" \n                                                            class=\"form-control uppy-lang-input\" \n                                                            data-clang-id=\"${lang.clang_id}\"\n                                                            value=\"${langValue}\"\n                                                            placeholder=\"${lang.clang_name}...\"\n                                                        >\n                                                    </div>\n                                                `;\n                                            }\n                                        }).join('');\n                                        \n                                        additionalLanguages = `\n                                            <button type=\"button\" \n                                                    class=\"btn btn-default btn-sm\" \n                                                    data-toggle=\"collapse\" \n                                                    data-target=\"#${collapseId}\"\n                                                    style=\"margin-top: 5px; margin-bottom: 10px;\">\n                                                <i class=\"fa fa-globe\"></i> Weitere Sprachen (${field.languages.length - 1})\n                                            </button>\n                                            <div class=\"collapse\" id=\"${collapseId}\">\n                                                ${additionalInputs}\n                                            </div>\n                                        `;\n                                    }\n                                    \n                                    return `\n                                        <div class=\"form-group uppy-multilang-field\" data-field-id=\"${field.id}\">\n                                            <label class=\"control-label\">${field.name}</label>\n                                            <input type=\"hidden\" name=\"${field.id}\" class=\"uppy-lang-hidden\" value=\"${value}\">\n                                            ${firstLanguageInput}\n                                            ${additionalLanguages}\n                                        </div>\n                                    `;\n                                } else if (fieldType === 'textarea') {\n                                    return `\n                                        <div class=\"form-group\">\n                                            <label for=\"meta-${field.id}\">${field.name}</label>\n                                            <textarea \n                                                class=\"form-control\" \n                                                id=\"meta-${field.id}\" \n                                                name=\"${field.id}\"\n                                                rows=\"3\"\n                                                placeholder=\"${field.placeholder || ''}\"\n                                            >${value}</textarea>\n                                        </div>\n                                    `;\n                                } else {\n                                    return `\n                                        <div class=\"form-group\">\n                                            <label for=\"meta-${field.id}\">${field.name}</label>\n                                            <input \n                                                type=\"text\" \n                                                class=\"form-control\" \n                                                id=\"meta-${field.id}\" \n                                                name=\"${field.id}\"\n                                                placeholder=\"${field.placeholder || ''}\"\n                                                value=\"${value}\"\n                                            >\n                                        </div>\n                                    `;\n                                }\n                            }).join('')}\n                        </form>\n                    </div>\n                    <div class=\"modal-footer\">\n                        <button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\">Abbrechen</button>\n                        <button type=\"button\" class=\"btn btn-primary uppy-metadata-save\">Speichern</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    `;\n    \n    // Modal zum DOM hinzuf\u00FCgen\n    const modalEl = document.createElement('div');\n    modalEl.innerHTML = modalHTML;\n    document.body.appendChild(modalEl.firstElementChild);\n    \n    const modal = jQuery('.uppy-metadata-modal').last();\n    \n    // Save Button Handler\n    modal.find('.uppy-metadata-save').on('click', function() {\n        // Keine Pflichtfeld-Validierung mehr\n\n        // Mehrsprachige Felder zuerst in Hidden Fields als JSON speichern\n        modal.find('.uppy-multilang-field').each(function() {\n            const container = jQuery(this);\n            const fieldId = container.data('field-id');\n            const hiddenInput = container.find('.uppy-lang-hidden');\n            const data = [];\n            \n            container.find('.uppy-lang-input').each(function() {\n                const input = jQuery(this);\n                const clangId = parseInt(input.data('clang-id'), 10);\n                const value = input.val() || '';\n                \n                if (value.trim()) {\n                    data.push({\n                        clang_id: clangId,\n                        value: value.trim()\n                    });\n                }\n            });\n            \n            hiddenInput.val(JSON.stringify(data));\n        });\n        \n        // Jetzt alle Felder aus Form Data sammeln\n        const form = modal.find('.uppy-metadata-form')[0];\n        const formData = new FormData(form);\n        const metadata = {};\n        \n        for (const [key, value] of formData.entries()) {\n            metadata[key] = value;\n        }\n        \n        // Metadaten in Uppy-Datei speichern\n        uppy.setFileMeta(file.id, metadata);\n\n        // Modal schlie\u00DFen\n        modal.modal('hide');\n    });\n    \n    // Modal anzeigen\n    modal.modal('show');\n    \n    // Bootstrap selectpicker initialisieren (nach dem Modal angezeigt wird)\n    modal.on('shown.bs.modal', function() {\n        if (jQuery.fn.selectpicker) {\n            modal.find('.selectpicker').selectpicker();\n\n        }\n    });\n    \n    // Modal nach Schlie\u00DFen aus DOM entfernen\n    modal.on('hidden.bs.modal', function() {\n        modal.remove();\n    });\n}\n\n// Initialisierung bei rex:ready\n\nif (typeof jQuery !== 'undefined') {\n    jQuery(document).on('rex:ready', function() {\n\n        initUppyWidgets();\n        setupMutationObserver();\n    });\n\n} else {\n\n}\n"],
  "mappings": "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",
  "names": ["prettierBytes", "separator", "pattern", "Symbol", "Symbol", "e", "Symbol", "debounce", "debounce", "throttle", "i", "l", "e", "classNames", "i", "EventEmitter", "i", "l", "ee", "a2", "a3", "j", "isMobile", "global", "e", "r", "t", "o", "i", "n", "isPositiveNumber", "assign", "listener", "location", "x2", "y2", "z2", "chunks", "render", "preview", "change", "check", "p", "x", "y", "getData", "setData", "Cropper", "done", "i", "i", "duration", "i", "n", "slice", "options", "vnodeId", "isValidElement", "rerenderQueue", "prevDebounce", "defer", "depthSort", "CAPTURE_REGEX", "eventClock", "eventProxy", "eventProxyCapture", "i", "EMPTY_OBJ", "EMPTY_ARR", "IS_NON_DIMENSIONAL", "isArray", "Array", "assign", "obj", "props", "removeNode", "node", "parentNode", "removeChild", "createElement", "type", "children", "key", "ref", "normalizedProps", "arguments", "length", "call", "defaultProps", "createVNode", "original", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "__i", "__u", "createRef", "current", "Fragment", "BaseComponent", "context", "this", "getDomSibling", "childIndex", "sibling", "updateParentDomPointers", "child", "base", "enqueueRender", "c", "__d", "push", "process", "__r", "debounceRendering", "component", "newVNode", "oldVNode", "oldDom", "commitQueue", "refQueue", "l", "sort", "shift", "__P", "diff", "__n", "namespaceURI", "commitRoot", "diffChildren", "parentDom", "renderResult", "newParentVNode", "oldParentVNode", "globalContext", "namespace", "excessDomChildren", "isHydrating", "childVNode", "newDom", "firstChildDom", "result", "shouldPlace", "oldChildren", "newChildrenLength", "constructNewChildrenArray", "applyRef", "insert", "nextSibling", "skewedIndex", "matchingIndex", "oldChildrenLength", "remainingOldChildren", "skew", "String", "undefined", "findMatchingIndex", "unmount", "parentVNode", "insertBefore", "nodeType", "toChildArray", "out", "some", "x", "y", "matched", "setStyle", "style", "value", "setProperty", "test", "dom", "name", "oldValue", "useCapture", "lowerCaseName", "o", "cssText", "replace", "toLowerCase", "_attached", "addEventListener", "removeEventListener", "e", "removeAttribute", "setAttribute", "createEventProxy", "eventHandler", "_dispatched", "event", "tmp", "isNew", "oldProps", "oldState", "snapshot", "clearProcessingException", "newProps", "isClassComponent", "provider", "componentContext", "renderHook", "count", "newType", "outer", "prototype", "render", "contextType", "__E", "doRender", "sub", "state", "__h", "_sb", "__s", "getDerivedStateFromProps", "componentWillMount", "componentDidMount", "componentWillReceiveProps", "shouldComponentUpdate", "componentWillUpdate", "componentDidUpdate", "getChildContext", "getSnapshotBeforeUpdate", "cloneNode", "then", "MODE_HYDRATE", "indexOf", "markAsForce", "diffElementNodes", "diffed", "forEach", "root", "cb", "map", "newHtml", "oldHtml", "newChildren", "inputValue", "checked", "localName", "document", "createTextNode", "createElementNS", "is", "__m", "data", "childNodes", "attributes", "__html", "innerHTML", "content", "hasRefUnmount", "skipRemove", "r", "componentWillUnmount", "replaceNode", "documentElement", "firstChild", "cloneElement", "vnode", "props", "children", "key", "ref", "i", "defaultProps", "normalizedProps", "assign", "type", "undefined", "arguments", "length", "slice", "call", "createVNode", "slice", "EMPTY_ARR", "options", "__e", "error", "vnode", "oldVNode", "errorInfo", "component", "ctor", "handled", "__", "__c", "constructor", "getDerivedStateFromError", "setState", "__d", "componentDidCatch", "__E", "e", "vnodeId", "isValidElement", "undefined", "BaseComponent", "prototype", "update", "callback", "s", "this", "__s", "state", "assign", "props", "__v", "_sb", "push", "enqueueRender", "forceUpdate", "__h", "render", "Fragment", "rerenderQueue", "defer", "Promise", "then", "bind", "resolve", "setTimeout", "depthSort", "a", "b", "__b", "process", "__r", "CAPTURE_REGEX", "eventClock", "eventProxy", "createEventProxy", "eventProxyCapture", "i", "vnodeId", "createVNode", "type", "props", "key", "isStaticChildren", "__source", "__self", "ref", "i", "normalizedProps", "vnode", "__k", "__", "__b", "__e", "__c", "constructor", "__v", "vnodeId", "__i", "__u", "defaultProps", "options", "currentIndex", "currentComponent", "previousComponent", "prevRaf", "currentHook", "afterPaintEffects", "options", "_options", "oldBeforeDiff", "__b", "oldBeforeRender", "__r", "oldAfterDiff", "diffed", "oldCommit", "__c", "oldBeforeUnmount", "unmount", "oldRoot", "__", "getHookState", "index", "type", "__h", "hooks", "__H", "length", "push", "useState", "initialState", "useReducer", "invokeOrReturn", "reducer", "init", "hookState", "_reducer", "action", "currentValue", "__N", "nextValue", "setState", "__f", "updateHookState", "p", "s", "c", "stateHooks", "filter", "x", "every", "prevScu", "call", "this", "shouldUpdate", "props", "forEach", "hookItem", "shouldComponentUpdate", "prevCWU", "componentWillUpdate", "__e", "tmp", "useEffect", "callback", "args", "state", "__s", "argsChanged", "_pendingArgs", "useRef", "initialValue", "currentHook", "useMemo", "current", "useMemo", "factory", "args", "state", "getHookState", "currentIndex", "argsChanged", "__H", "__", "__h", "useCallback", "callback", "currentHook", "flushAfterPaintEffects", "component", "afterPaintEffects", "shift", "__P", "__H", "__h", "forEach", "invokeCleanup", "invokeEffect", "e", "options", "__e", "__v", "__b", "vnode", "currentComponent", "oldBeforeDiff", "__", "parentDom", "__k", "__m", "oldRoot", "__r", "oldBeforeRender", "currentIndex", "hooks", "__c", "previousComponent", "hookItem", "__N", "_pendingArgs", "diffed", "oldAfterDiff", "c", "length", "push", "prevRaf", "requestAnimationFrame", "afterNextFrame", "commitQueue", "some", "filter", "cb", "oldCommit", "unmount", "oldBeforeUnmount", "hasErrored", "s", "HAS_RAF", "callback", "raf", "done", "clearTimeout", "timeout", "cancelAnimationFrame", "setTimeout", "hook", "comp", "cleanup", "argsChanged", "oldArgs", "newArgs", "arg", "index", "invokeOrReturn", "f", "A", "d", "y", "q", "u", "f", "prettierBytes", "match", "p", "_a", "i", "package_default", "m", "ee", "throttle", "defaultOptions", "duration", "package_default", "Uppy", "q", "d", "y", "u", "e", "u", "q", "e", "import_classnames", "package_default", "u", "u", "u", "classNames", "u", "d", "y", "e", "u", "import_classnames", "i", "T", "u", "classNames", "f", "f", "f", "i", "a", "b", "_queue", "next_fn", "EventEmitter", "i", "i", "f", "i", "import_classnames", "u", "classNames", "u", "import_classnames", "u", "u", "u", "classNames", "u", "s", "defaultOptions", "debounce", "i", "n", "classNames", "partialTree", "package_default", "e", "t", "s", "i", "n", "r", "a", "h", "f", "l", "o", "u", "d", "c", "p", "g", "m", "y", "b", "w", "k", "v", "O", "S", "A", "x", "C", "B", "V", "I", "L", "T", "z", "P", "F", "j", "E", "M", "_", "D", "N", "$", "K", "H", "G", "q", "ee", "e", "t", "H", "s", "i", "c", "a", "r", "n", "b", "A", "package_default", "locale_default", "canvasToBlob", "w", "h", "defaultOptions", "locale_default", "x", "package_default", "package_default", "import_classnames", "u", "import_classnames", "u", "classNames", "import_classnames", "u", "classNames", "import_classnames", "u", "u", "u", "d", "q", "A", "y", "u", "classNames", "import_classnames", "shallowEqualObjects", "objA", "objB", "aKeys", "Object", "keys", "bKeys", "len", "length", "i", "key", "prototype", "hasOwnProperty", "call", "u", "import_prettier_bytes", "f", "u", "u", "prettierBytes", "u", "u", "classNames", "u", "T", "u", "u", "c", "i", "transitionName", "u", "info", "import_classnames", "A", "u", "classNames", "i", "u", "import_classnames", "d", "A", "q", "y", "classNames", "import_classnames", "import_prettier_bytes", "import_classnames", "classNames", "u", "prettierBytes", "supportsUploadProgress", "supportsUploadProgress", "classNames", "u", "getUploadingState", "i", "supportsUploadProgress", "f", "u", "classNames", "u", "locale_default", "import_debounce", "isFocusInOverlay", "debounce", "o", "defaultOptions", "Dashboard", "_a", "somePluginCanHandleRootDrop", "isFocusInOverlay", "locale_default", "package_default", "package_default", "u", "u", "u", "u", "u", "u", "u", "u", "locale_default", "u", "isModeAvailable", "defaultOptions", "u", "locale_default", "blob", "package_default", "package_default", "locale_default", "defaultOptions", "locale_default", "fetch", "package_default", "package_default", "w", "h", "Cropper", "u", "locale_default", "defaultOptions", "currentImage", "locale_default", "u", "package_default", "Dashboard", "r", "e", "openerField", "e", "f"]
}
